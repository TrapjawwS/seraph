(this["webpackJsonptough-love-arena"]=this["webpackJsonptough-love-arena"]||[]).push([[0],{222:function(e,t){},224:function(e,t){},233:function(e,t){},235:function(e,t){},246:function(e,t){},248:function(e,t){},276:function(e,t){},277:function(e,t){},282:function(e,t){},284:function(e,t){},291:function(e,t){},310:function(e,t){},378:function(e,t,n){"use strict";n.r(t);var a,r=n(10),i=n.n(r),o=n(26),s=n.n(o),c=n(2),u=n(9),l=n(3),h=n(4),d=n(13),p=n(12),f=n(6),b=n(7),g=n(1),m=n(15),v=n(8),k=n(11),j=function(e){return e.Player1="p1",e.Player2="p2",e.Draw="draw",e}({}),y=function(e){return e.Win="win",e.Lose="lose",e.Draw="draw",e.Disconnect="disc",e.SelfRagequit="selfrq",e.OppRagequit="opprq",e}({}),x=function(e){return e.Anon="anon",e.Real="real",e}({}),O=function(e){return e.Ranked="ranked",e.Casual="casual",e.Private="private",e.Lobby="lobby",e}({}),w=function(e){return e.Win="win",e.Loss="loss",e.Draw="draw",e}({}),S=function(){return{aid:"",display:"",rank_b1:{},paid:!1,vip:!1,flavors:[],unlocked:{},favoriteId:null}},C=function(){return{rating:1400,peak:0,played:0}},A=function(e){return e[e.Loading=1]="Loading",e[e.Before=2]="Before",e[e.Fight=3]="Fight",e[e.AfterWin=4]="AfterWin",e[e.AfterLose=5]="AfterLose",e[e.Refresh=6]="Refresh",e[e.Continue=7]="Continue",e[e.Victory=8]="Victory",e[e.Exit=9]="Exit",e}({}),T=function(e){return e[e.Start=0]="Start",e[e.Move=1]="Move",e[e.End=2]="End",e}({}),M=function(e){return e.LightDarkScreen="lightDarkScreen",e.DarkScreen="darkScreen",e.WhiteScreen="whiteScreen",e.SteakScreen="steakScreen",e.OnionDeflect="onionRapid",e.OnionLightning1="onionLightning1",e.OnionLightning2="onionLightning2",e.OnionLightning3="onionLightning3",e.RejectionBackgroundIn="rejectionIn",e.RejectionBackgroundActive="rejectionActive",e.RapidBackgroundPurple="rapidPurp",e.RapidBackgroundBlack="rapidBlack",e.BurstBackgroundIn="burstIn",e.BurstBackgroundPink="burstPink",e.BurstBackgroundOut="burstOut",e}({}),P=function(e){return e[e.Ready=1]="Ready",e[e.Pending=2]="Pending",e[e.Disabled=3]="Disabled",e}({}),R=function(e){return e.FetchIcePing="fetchIcePing",e.FetchLobbyBrowse="fetchLobbyBrowse",e.EventSourceDisconnect="eventSourceDisconnect",e.SignalNotFound="signalNotFound",e.CasualBlocked="casualBlocked",e.Declined="declined",e.HandshakeDisconnect="handshakeDisconnect",e.HandshakeTimeout="handshakeTimeout",e.BrokerDisconnect="brokerDisconnect",e.LobbyDisconnect="lobbyDisconnect",e.InvalidGameConfig="invalidGameConfig",e.LocalQuit="localQuit",e}({}),I=function(e){return e.DisableRanked="disable_ranked",e.DisableCasual="disable_casual",e.DisablePrivate="disable_private",e.DisableLobby="disable_lobby",e.DisableAccount="disable_account",e.DisableLeaderboard="disable_leaderboard",e}({}),B=function(e){return e.None="none",e.Small="small",e.Large="large",e}({}),D=function(e){return e.Easy="Easy",e.Hard="Hard",e}({}),H=[D.Easy,D.Hard],E=function(e){return e.Deprecated_DeflectFx="seqid_Particle_DeflectFx",e.JumpSmoke="seqid_Particle_JumpSmoke",e.LandSmoke="seqid_Particle_LandSmoke",e.LandSpark="seqid_Particle_LandSpark",e.RejectionFx="seqid_Particle_RejectionFx",e.RapidFx="seqid_Particle_RapidFx",e.BurstFx="seqid_Particle_BurstFx",e.CackleStartFx="seqid_Particle_CackleStartFx",e.CackleAttackFx="seqid_Particle_CackleAttackFx",e.SneakFx="seqid_Particle_SneakFx",e.SmallPuffFx="seqid_Particle_SmallPuffFx",e.SmallPuffAirFx="seqid_Particle_SmallPuffAirFx",e.ThrowTechFx="seqid_Particle_ThrowTechFx",e}({}),_=function(e){return e.BlockChip="seqid_Spark_BlockChip",e.BlockNormal="seqid_Spark_BlockNormal",e.HitLarge="seqid_Spark_HitLarge",e.HitSmall="seqid_Spark_HitSmall",e.Parry="seqid_Spark_Parry",e}({}),F=function(e){return e.Rejection="seqid_Shared_Rejection",e.Rapid="seqid_Shared_Rapid",e.Burst="seqid_Shared_Burst",e.Downed="seqid_Shared_Downed",e.Standing="seqid_Shared_Standing",e.Blockstun="seqid_Shared_Blockstun",e.Hitstun="seqid_Shared_Hitstun",e.Throwstun="seqid_Shared_Throwstun",e.Tumbling="seqid_Shared_Tumbling",e.Exhausted="seqid_Shared_Exhausted",e.Falling="seqid_Shared_Falling",e.Landing="seqid_Shared_Landing",e.WalkForward="seqid_Shared_WalkForward",e.WalkBackward="seqid_Shared_WalkBackward",e.ThrowStart="seqid_Shared_ThrowStart",e.ThrowHit="seqid_Shared_ThrowHit",e.ThrowTech="seqid_Shared_ThrowTech",e.PoseWin="seqid_Shared_PoseWin",e.PoseLose="seqid_Shared_PoseLose",e}({}),L=function(e){return e.Whip1="seqid_Carb_Whip1",e.Whip2="seqid_Carb_Whip2",e.Whip3="seqid_Carb_Whip3",e.Slap="seqid_Carb_Slap",e.Jump="seqid_Carb_Jump",e}({}),G=function(e){return e.Frenzy="seqid_Noodle_Frenzy",e.Trample="seqid_Noodle_Trample",e.PrepSoup="seqid_Noodle_PrepSoup",e.ServeSoup="seqid_Noodle_ServeSoup",e.BuzzSaw="seqid_Noodle_BuzzSaw",e}({}),z=function(e){return e.Teleport="seqid_Rice_Teleport",e.QuickportBack="seqid_Rice_QuickportBack",e.QuickportSemiClose="seqid_Rice_QuickportSemiClose",e.QuickportClose="seqid_Rice_QuickportClose",e.SwatStart="seqid_Rice_SwatFake",e.SwatSlam="seqid_Rice_SwatSlam",e.Swipe="seqid_Rice_Swipe",e.DeprecatedWhip3Cross="seqid_Rice_Whip3Cross",e.DeprecatedWhipBack="seqid_Rice_WhipBack",e.JumpDrill="seqid_Rice_JumpDrill",e}({}),W=function(e){return e.Gutpunch="seqid_Meat_Gutpunch",e.HeavyPunch="seqid_Meat_HeavyPunch",e.Uppercut="seqid_Meat_Uppercut",e.Palm="seqid_Meat_Palm",e.Jump="seqid_Meat_Jump",e.Spike="seqid_Meat_Spike",e}({}),N=function(e){return e.LemonThrow="seqid_Beef_LemonThrow",e.LemonFake="seqid_Beef_LemonFake",e.FlexStart="seqid_Beef_FlexStart",e.FlexHit="seqid_Beef_FlexHit",e.FlexProjectile="seqid_Beef_FlexProjectile",e.AirLemon="seqid_Beef_AirLemon",e}({}),U=function(e){return e.CaberTossStart="seqid_Pork_CaberTossStart",e.CaberTossHit="seqid_Pork_CaberTossHit",e.CaberTossCancel="seqid_Pork_CaberTossCancel",e.Chop="seqid_Pork_Chop",e.EmptyJump="seqid_Pork_EmptyJump",e}({}),q=function(e){return e.Flick="seqid_Spice_Flick",e.Sweep="seqid_Spice_Sweep",e.Roundhouse="seqid_Spice_Roundhouse",e.Trip="seqid_Spice_Trip",e.Jump="seqid_Spice_Jump",e}({}),V=function(e){return e.Hopkick="seqid_Onion_Hopkick",e.HopFake="seqid_Onion_HopFake",e.DeflectStart="seqid_Onion_DeflectStart",e.DeflectAgain="seqid_Onion_DeflectAgain",e.DeflectHit="seqid_Onion_DeflectHit",e.DeflectProjectile="seqid_Onion_DeflectProjectile",e.LongJump="seqid_Onion_LongJump",e}({}),Y=function(e){return e.DashStart="seqid_Garlic_DashStart",e.DashLight="seqid_Garlic_DashLight",e.DashHeavy="seqid_Garlic_DashHeavy",e.Sneak="seqid_Garlic_Sneak",e.DashAgain="seqid_Garlic_DashAgain",e.DashBack="seqid_Garlic_DashBack",e.Backflip="seqid_Garlic_Backflip",e.JumpRoundhouse="seqid_Garlic_JumpRoundhouse",e}({}),J=function(e){return e.Gutpunch="seqid_BossPork_Gutpunch",e.HeavyPunch="seqid_BossPork_HeavyPunch",e.MeatyGrab="seqid_BossPork_MeatyGrab",e.ChopInTwo="seqid_BossPork_ChopInTwo",e.Tackle="seqid_BossPork_Tackle",e.Uppercut="seqid_BossPork_Uppercut",e.Hop="seqid_BossPork_Hop",e}({}),K=function(e){return e.QuickFlick="seqid_BossGarlic_QuickFlick",e.SlideSweep="seqid_BossGarlic_SlideSweep",e.BossRoundhouse="seqid_BossGarlic_BossRoundhouse",e.BossFlip="seqid_BossGarlic_BossFlip",e.CrossGrab="seqid_BossGarlic_CrossGrab",e.Divekick="seqid_BossGarlic_Divekick",e}({}),Q=function(e){return e.Soup="proj_Noodle_Soup",e.Lemon="proj_Beef_Lemon",e.AirLemon="proj_Beef_AirLemon",e}({}),Z=function(e){return e.None="install_none",e}({}),X=function(e){return e.Unranked="unranked",e.Rank1="rank1",e.Rank2="rank2",e.Rank3="rank3",e.Rank4="rank4",e}({}),$=(a={},Object(v.a)(a,X.Unranked,0),Object(v.a)(a,X.Rank1,1),Object(v.a)(a,X.Rank2,1400),Object(v.a)(a,X.Rank3,1700),Object(v.a)(a,X.Rank4,2e3),a),ee=$[X.Rank3],te=function(e){return e.left="left",e.right="right",e.attack1="attack1",e.attack2="attack2",e.attack3="attack3",e.attack4="attack4",e.menu="menu",e}({}),ne=[te.left,te.right,te.attack1,te.attack2,te.attack3,te.attack4,te.menu],ae=function(e){return e.p1menuUp="p1menuUp",e.p1menuDown="p1menuDown",e.p2menuUp="p2menuUp",e.p2menuDown="p2menuDown",e}({}),re=function(e){return e.left="leftControl",e.right="rightControl",e}({}),ie=[re.left,re.right],oe=-1,se=[30,60,99,150],ce=function(e){return e.High="high",e.Medium="med",e.Low="low",e}({}),ue=["Low","Medium","High"],le=function(e){return e.Cancel="cancel",e}({}),he=[le.Cancel,te.right,te.attack4],de=[te.left,te.attack4],pe=[te.right,te.attack4],fe=function(e){return e.Left="left",e.Center="center",e.Right="right",e.Close="close",e}({}),be=function(e){return e.Enabled="enabled",e.Disabled="disabled",e.Auto="autoblock",e.Random="random",e}({}),ge=be.Enabled,me=(be.Enabled,be.Auto,be.Disabled,be.Random,function(e){return e.OpenConfig="config",e.Nothing="nothing",e}({})),ve=function(e){return e.Normal="normal",e.Force="force",e.Random="random",e}({}),ke=function(e){return e.Player2="p2",e.Cpu="cpu",e.RecordAttack="recorda",e.RecordMovement="recordm",e.Loop="loop",e.Reversal="reversal",e}({}),je=function(e){return e.Never="never",e.Always="always",e.Random="random",e}({}),ye=function(e){return e.Normal="normal",e.Refill="refill",e.Infinite="infinite",e.Empty="empty",e}({}),xe=function(e){return e.Hide="hidden",e.Boxes="boxes",e.Sprite="sprite",e}({}),Oe=function(){return{secondsBeforeTimeout:30,hoursBeforeReboot:.75,noRematch:!1,showFourButtonController:!1,hideVolumeControls:!0,muteAttractMusic:!0,muteAttractSFX:!1,p1menuUp:"",p1menuDown:"",p2menuUp:"",p2menuDown:""}},we=function(){return Object(g.a)(Object(g.a)({},Oe()),{},{secondsBeforeTimeout:90,noRematch:!0,muteAttractMusic:!0,muteAttractSFX:!0,p1menuUp:"ArrowUp",p1menuDown:"ArrowDown",p2menuUp:"KeyT",p2menuDown:"KeyG"})},Se=function(e){return e.Empty="sfx_Empty",e.AnnouncerRoundReady="afx_Round_Ready",e.AnnouncerRoundFight="afx_Round_Fight",e.AnnouncerRoundKO="afx_Round_KO",e.AnnouncerRoundTime="afx_Round_Time",e.AnnouncerRoundDraw="afx_Round_Draw",e.AnnouncerRoundPerfect="afx_Round_Perfect",e.AnnouncerMatchYouLose="afx_Match_YouLose",e.AnnouncerMatchWinBeef="afx_Match_WinBeef",e.AnnouncerMatchWinGarlic="afx_Match_WinGarlic",e.AnnouncerMatchWinNoodle="afx_Match_WinNoodle",e.AnnouncerMatchWinOnion="afx_Match_WinOnion",e.AnnouncerMatchWinPork="afx_Match_WinPork",e.AnnouncerMatchWinRice="afx_Match_WinRice",e.AnnouncerTutorialNice="afx_Tutorial_Nice",e.AnnouncerTutorialGreatJob="afx_Tutorial_GreatJob",e.AnnouncerTutorialChallengeComplete="afx_Tutorial_ChallengeComplete",e.MusicRoundOver="mfx_Music_RoundOver",e.MusicMatchOver="mfx_Music_MatchOver",e.MenuForward="sfx_Menu_Forward",e.MenuBackward="sfx_Menu_Backward",e.MenuChange="sfx_Menu_Change",e.MenuMatchFound="sfx_Menu_MatchFound",e.StunBlock="sfx_Stun_Block",e.StunHitSmall="sfx_Stun_HitSmall",e.StunHitLarge="sfx_Stun_HitLarge",e.MeterGain="sfx_Meter_Gain",e.MeterRapid="sfx_Meter_Rapid",e.MeterBurst="sfx_Meter_Burst",e.MeterReject="sfx_Meter_Reject",e.Blep="sfx_UI_Blep",e.Bling="sfx_UI_Bling",e.Love="sfx_UI_Love",e.CarbDash="sfx_Carb_Dash",e.CarbDeath="sfx_Carb_Death",e.Deprecated_CarbFist="sfx_Carb_Fist",e.CarbFrenzy="sfx_Carb_Frenzy",e.Deprecated_CarbGrounder="sfx_Carb_Grounder",e.CarbJump="sfx_Carb_Jump",e.CarbPrepSoup="sfx_Carb_PrepSoup",e.CarbThrowStart="sfx_Carb_ThrowStart",e.CarbThrowHit="sfx_Carb_ThrowHit",e.CarbServeSoup="sfx_Carb_ServeSoup",e.CarbSlap="sfx_Carb_Slap",e.CarbSoupBowl="sfx_Carb_SoupBowl",e.CarbSwat="sfx_Carb_Swat",e.CarbSwipe="sfx_Carb_Swipe",e.CarbTrample="sfx_Carb_Trample",e.CarbTeleport="sfx_Carb_Teleport",e.CarbWhip="sfx_Carb_Whip",e.CarbWhip2="sfx_Carb_Whip2",e.CarbWhip3="sfx_Carb_Whip3",e.CarbGrunt="sfx_Carb_Grunt",e.CarbMisc="sfx_Carb_Misc",e.MeatChop="sfx_Meat_Chop",e.MeatDeath="sfx_Meat_Death",e.MeatFlex="sfx_Meat_Flex",e.MeatWin="sfx_Meat_Win",e.MeatLaugh="sfx_Meat_Laugh",e.MeatTaunt="sfx_Meat_Taunt",e.MeatJump="sfx_Meat_Jump",e.MeatThrowStart="sfx_Meat_ThrowStart",e.MeatThrowHit="sfx_Meat_ThrowHit",e.MeatLemon="sfx_Meat_Lemon",e.MeatGutpunch="sfx_Meat_Gutpunch",e.MeatPunch="sfx_Meat_Punch",e.MeatUppercut1="sfx_Meat_Uppercut1",e.MeatUppercut2="sfx_Meat_Uppercut2",e.MeatSpikeSetup="sfx_Meat_SpikeSetup",e.MeatSpikeHit="sfx_Meat_SpikeHit",e.MeatCaberStart="sfx_Meat_CaberStart",e.MeatToss="sfx_Meat_Toss",e.MeatMisc="sfx_Meat_Misc",e.SpiceFlick="sfx_Spice_Flick",e.SpiceSweep="sfx_Spice_Sweep",e.SpiceRoundhouse="sfx_Spice_Roundhouse",e.SpiceTrip="sfx_Spice_Trip",e.SpiceJump="sfx_Spice_Jump",e.SpiceThrowStart="sfx_Spice_ThrowStart",e.SpiceThrowHit="sfx_Spice_ThrowHit",e.SpiceHopkick="sfx_Spice_Hopkick",e.SpiceParry="sfx_Spice_Parry",e.SpiceParryHit="sfx_Spice_ParryHit",e.SpiceDash="sfx_Spice_Dash",e.SpiceSneak="sfx_Spice_Sneak",e.SpiceBackflip="sfx_Spice_Backflip",e.SpiceDeath="sfx_Spice_Death",e.SpiceMisc="sfx_Spice_Misc",e}({}),Ce=function(e){return e.Unused="U",e.HitAirborne="HA",e.HitGrounded="HG",e.HitTumbling="HT",e.Block="B",e.Armored="AR",e.Parried="PR",e.ProjectileClash="PC",e}({}),Ae=function(e){return e[e.Alive=0]="Alive",e[e.Expired=1]="Expired",e[e.Voided=2]="Voided",e[e.Blocked=3]="Blocked",e[e.Hit=4]="Hit",e}({}),Te=function(e){return e.Inactive="Inactive",e.ReadyForAttack="ReadyForAttack",e.ReadyForMovement="ReadyForMovement",e.Recording="Recording",e.Loop="Loop",e.Reversal="Reversal",e}({}),Me=function(e){return e[e.LoadIn=1]="LoadIn",e[e.Ready=2]="Ready",e[e.Fight=3]="Fight",e[e.Gameplay=4]="Gameplay",e[e.KnockoutStartup=5]="KnockoutStartup",e[e.KnockoutSplash=6]="KnockoutSplash",e[e.KnockoutWrapup=7]="KnockoutWrapup",e[e.TimeoverSplash=8]="TimeoverSplash",e[e.TimeoverWrapup=9]="TimeoverWrapup",e[e.Finished=10]="Finished",e}({}),Pe=function(e){return e.Draw="draw",e.Perfect="perfect",e.Knockout="ko",e.Chip="chip",e.Timeout="time",e}({}),Re=function(e){return e.Unused="U",e.Press="P",e.Hold="H",e.Release="R",e}({}),Ie=function(e){return e.Default="default",e.Birthday="birthday",e.AprilFools="aprilfools",e.Halloween="halloween",e}({}),Be=function(e){return e.Emote="emote",e.Coordinator="coord",e}({}),De=function(e){return e.Emote="emote",e.MissingInputRequest="MIREQ",e.MissingInputResponse="MIRES",e}({}),He=function(e){return e.OpponentAccount="OPPACCOUNT",e.GuestConfig="GUESTCONFIG",e.HostConfig="HOSTCONFIG",e.RankedRecorded="RANKED_RECORDED",e.MatchmakerConfirm="MM_CONFIRM",e}({}),Ee=function(e){return e.Official="official",e.Community="community",e}({}),_e=Ee.Community,Fe=function(e){return e.Undefined="U",e.Host="H",e.Guest="G",e}({});function Le(e){return Ge.apply(this,arguments)}function Ge(){return(Ge=Object(u.a)(Object(c.a)().mark((function e(t){return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){setTimeout(e,t)})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ze(e,t){return We.apply(this,arguments)}function We(){return(We=Object(u.a)(Object(c.a)().mark((function e(t,n){var a,r,i;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=[],r=0;case 2:if(!(r<t.length)){e.next=10;break}return e.next=5,n(t[r]);case 5:i=e.sent,a.push(i);case 7:r++,e.next=2;break;case 10:return e.abrupt("return",a);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ne(e,t){return Ue.apply(this,arguments)}function Ue(){return(Ue=Object(u.a)(Object(c.a)().mark((function e(t,n){return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ze(t,n);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var qe={now:function(){return(new Date).getTime()}},Ve=function(){function e(){Object(l.a)(this,e),this.id=void 0}return Object(h.a)(e,[{key:"isPending",get:function(){return void 0!==this.id}},{key:"schedule",value:function(e,t){var n=this;this.clear(),this.id=setTimeout((function(){n.clear(),e()}),t)}},{key:"clear",value:function(){void 0!==this.id&&(clearTimeout(this.id),this.id=void 0)}}]),e}(),Ye=function(){function e(){Object(l.a)(this,e),this.timer=new Ve}return Object(h.a)(e,[{key:"isPending",get:function(){return this.timer.isPending}},{key:"start",value:function(e){this.timer.schedule((function(){}),e)}}]),e}(),Je=n(40),Ke=n(69);function Qe(e){return Ze.apply(this,arguments)}function Ze(){return(Ze=Object(u.a)(Object(c.a)().mark((function e(t){return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){setTimeout(e,t)})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Xe(e,t){return $e.apply(this,arguments)}function $e(){return($e=Object(u.a)(Object(c.a)().mark((function e(t,n){var a,r,i;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=[],r=0;case 2:if(!(r<t.length)){e.next=10;break}return e.next=5,n(t[r]);case 5:i=e.sent,a.push(i);case 7:r++,e.next=2;break;case 10:return e.abrupt("return",a);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var et=function(){function e(){Object(l.a)(this,e),this.map=new Map}return Object(h.a)(e,[{key:"size",value:function(){return this.map.size}},{key:"subscribe",value:function(e,t){this.map.set(e,t)}},{key:"unsubscribe",value:function(e){this.map.delete(e)}},{key:"anon",value:function(t){var n=this,a="cbmap-"+e.counter++;return this.subscribe(a,t),function(){return n.unsubscribe(a)}}},{key:"all",value:function(){return Array.from(this.map.values())}},{key:"forEach",value:function(e){Array.from(this.map.values()).forEach(e)}}]),e}();et.counter=0;var tt=function(){function e(){Object(l.a)(this,e),this.buffer=[],this.index=0,this.max=60}return Object(h.a)(e,[{key:"push",value:function(e){this.buffer[this.index%this.max]=e,this.index++}},{key:"peek",value:function(){return this.buffer[(this.index-1)%this.max]}},{key:"getAll",value:function(){return this.index<this.max?this.buffer.slice(0,this.index):this.buffer}}]),e}();function nt(e,t){return e===t?0:e>t?1:-1}function at(e){for(var t=[],n=0;n<e;n++)t.push(n);return t}function rt(e){var t=e.concat();return t.sort(nt),t[Math.floor(t.length/2)]}function it(e){var t=e.reduce((function(e,t){return e+t}),0);return e.length?t/e.length:void 0}var ot=new(function(){function e(){Object(l.a)(this,e),this.log=function(){}}return Object(h.a)(e,[{key:"enable",value:function(){this.log=console.log.bind(window.console)}}]),e}()),st=function(){function e(){Object(l.a)(this,e)}return Object(h.a)(e,null,[{key:"now",value:function(){return performance.now()}},{key:"sleepUntil",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(t){var n=this;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,a){setTimeout(e,t-n.now())})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"instance",value:function(){return this.instanceSingleton}}]),e}();function ct(e){return Math.floor(Math.random()*Math.pow(10,e)).toString().padStart(e,"0")}function ut(){return ct(8)}function lt(){var e=function(){},t=function(){},n=!1,a=!1;return{promise:new Promise((function(r,i){e=function(e){n=!0,r(e)},t=function(e){a=!0,i(e)}})),resolve:e,reject:t,hasResolved:function(){return n},hasErrored:function(){return a}}}st.appStart=st.now(),st.instanceSingleton={now:function(){return st.now()},sleepUntil:function(e){return st.sleepUntil(e)}};var ht=function(){function e(){Object(l.a)(this,e)}return Object(h.a)(e,[{key:"syncByPing",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(t){var n,a,r,i,o,s;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.waitForSyncPingStart();case 2:if(n=0,!t.isHost){e.next=17;break}a=30,r=[],i=0;case 7:if(!(i<a)){e.next=15;break}return e.next=10,t.syncPing();case 10:o=e.sent,r.push(o);case 12:i++,e.next=7;break;case 15:s=r.map((function(e){var t=(e.localEnd-e.localStart)/2,n=e.localStart+t;return e.remoteStart-n})),n=rt(s);case 17:return e.next=19,t.waitForSyncPingComplete();case 19:return e.abrupt("return",{remoteOffset:n});case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"syncConnection",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(t){var n;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncByPing(t);case 2:return n=e.sent,ot.log("ping offset:",n.remoteOffset),t.setHostSyncOffset(n),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),dt=function(e){return e.Input="I",e.Message="ANY",e.Event="EVENT",e.PingSend="PING_SEND",e.PingReply="PING_REPLY",e.SyncStart="SYNC_START",e.ClockStart="CLOCKSTART",e.SyncComplete="SYNC",e.LoadingFinish="LOADED",e.SyncPingSend="SYNC_PING_SEND",e.SyncPingReply="SYNC_PING_REPLY",e.SyncPingStart="SYNC_PING_START",e.SyncPingComplete="SYNC_PING_COMPLETE",e}({}),pt=function(e){return e.Rematch="REMATCH",e.ExitSignal="EXIT",e}({}),ft=function(){function e(t){Object(l.a)(this,e),this.timeKeeper=void 0,this.localInput=[],this.remoteInput=[],this.delta=[],this.timeKeeper=t}return Object(h.a)(e,[{key:"setLocalInput",value:function(e){this.localInput[e]=this.timeKeeper.now(),void 0!==this.remoteInput[e]&&(this.delta[e]=this.remoteInput[e]-this.localInput[e])}},{key:"setRemoteInput",value:function(e){this.remoteInput[e]=this.timeKeeper.now(),void 0!==this.localInput[e]&&(this.delta[e]=this.remoteInput[e]-this.localInput[e])}},{key:"getLocalLatest",value:function(){return this.delta.slice(-1)[0]}},{key:"getLocalMedian",value:function(){var e=rt(this.delta.filter((function(e){return void 0!==e})));return void 0!==e?e:0}}]),e}(),bt=function(){function e(t,n,a){var r=this;Object(l.a)(this,e),this.conn=void 0,this.timeKeeper=st.instance(),this.isHost=void 0,this.testingLag=void 0,this.local1=void 0,this.local2=void 0,this.resolvableByInputType={},this.latestMessageByType={},this.resolvableByEvent={},this.latestMessageByEvent={},this.delayTracker=new ft(this.timeKeeper),this.remoteOffset=0,this.pingMS=void 0,this.receiveInputData=function(e){},this.receiveMessageCallbacks=new et,this.isHost=t,this.conn=n,this.testingLag=null===a||void 0===a?void 0:a.lag,this.local1=t,this.local2=!t,n.setDataCallback((function(e){return r.receiveMessage(JSON.parse(e))}))}return Object(h.a)(e,[{key:"isClosed",value:function(){return this.conn.isClosed()}},{key:"terminate",value:function(){this.conn.isClosed()||this.conn.close()}},{key:"recommendInputDelay",value:function(e,t){if(void 0===this.pingMS)throw new Error("ping should be calculated by now!");var n=1e3/e,a=Math.ceil(this.pingMS/n);return Math.max(t,a)}},{key:"sendMessage",value:function(e,t){var n=this;if(this.conn.isClosed())ot.log(new Error("stop sending data, connection is closed!"));else{var a={sent:this.timeKeeper.now(),type:e,data:void 0!==t?t:null},r=JSON.stringify(a);void 0!==this.testingLag?Qe(this.testingLag).then((function(){return n.conn.send(r)})):this.conn.send(r)}}},{key:"sendInput",value:function(e){this.delayTracker.setLocalInput(e.tick);var t=Object(g.a)(Object(g.a)({},e),{},{delay:this.delayTracker.getLocalLatest()});this.sendMessage(dt.Input,t)}},{key:"sendUserMessage",value:function(e){this.sendMessage(dt.Message,e)}},{key:"sendExitSignal",value:function(){this.sendGenericEvent(pt.ExitSignal)}},{key:"preReceiveInput",value:function(e){var t=this.delayTracker,n=e.tick;t.setRemoteInput(n),this.receiveInputData(e)}},{key:"receiveMessage",value:function(e){var t,n,a=e.type,r=e.data;switch(this.latestMessageByType[a]=e,null===(t=this.resolvableByInputType[a])||void 0===t||t.resolve(e),a){case dt.PingSend:this.pingReply();break;case dt.SyncPingSend:this.syncPingReply();break;case dt.Input:this.preReceiveInput(r);break;case dt.Message:this.receiveMessageCallbacks.forEach((function(e){return e(r)}));break;case dt.Event:var i=r.event;this.latestMessageByEvent[i]=e,null===(n=this.resolvableByEvent[i])||void 0===n||n.resolve(e);break;case dt.PingReply:case dt.SyncStart:case dt.ClockStart:case dt.SyncComplete:case dt.LoadingFinish:case dt.SyncPingReply:case dt.SyncPingStart:case dt.SyncPingComplete:break;default:ot.log("received unexpected type:",e)}}},{key:"waitFor",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(t){var n,a,r,i,o,s,u;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ot.log("waiting for:",t),a=this.latestMessageByType,r=this.resolvableByInputType,null===(n=r[t])||void 0===n||n.resolve(new Error("conflicting wait")),!(o=a[t])){e.next=8;break}i=o.data,e.next=16;break;case 8:return s=lt(),r[t]=s,e.next=12,s.promise;case 12:if(!((u=e.sent)instanceof Error)){e.next=15;break}throw u;case 15:i=u.data;case 16:return delete a[t],delete r[t],e.abrupt("return",i);case 19:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearEvents",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(t){var n;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null===(n=this.resolvableByEvent[t])||void 0===n||n.resolve(new Error("clear: "+t)),delete this.latestMessageByEvent[t],delete this.resolvableByEvent[t];case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"waitForEvent",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(t){var n,a,r,i,o,s,u;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ot.log("waiting for event:",t),a=this.latestMessageByEvent,r=this.resolvableByEvent,null===(n=r[t])||void 0===n||n.resolve(new Error("conflicting wait")),!(o=a[t])){e.next=8;break}i=o.data,e.next=16;break;case 8:return s=lt(),r[t]=s,e.next=12,s.promise;case 12:if(!((u=e.sent)instanceof Error)){e.next=15;break}throw u;case 15:i=u.data;case 16:return delete a[t],delete r[t],e.abrupt("return",i.value);case 19:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendGenericEvent",value:function(e,t){var n=void 0===t?{event:e,value:null}:{event:e,value:t};return this.sendMessage(dt.Event,n)}},{key:"waitForExitSignal",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(){return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.waitForEvent(pt.ExitSignal);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"waitForSyncStart",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(){var t;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isHost){e.next=9;break}return e.next=3,this.calculatePing();case 3:return t=e.sent,this.sendMessage(dt.SyncStart),e.next=7,Qe(t);case 7:e.next=11;break;case 9:return e.next=11,this.waitFor(dt.SyncStart);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"waitForLoadingFinish",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(){return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.sendMessage(dt.LoadingFinish),e.next=3,this.waitFor(dt.LoadingFinish);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"calculatePing",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(){var t,n,a=this;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Xe(at(5),Object(u.a)(Object(c.a)().mark((function e(){return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.pingSend();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))));case 2:return t=e.sent,n=rt(t)||0,ot.log("ping:",n),this.pingMS=n,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"pingSend",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(){var t,n;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.timeKeeper.now(),this.sendMessage(dt.PingSend),e.next=4,this.waitFor(dt.PingReply);case 4:return n=this.timeKeeper.now()-t,e.abrupt("return",n/2);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"pingReply",value:function(){this.sendMessage(dt.PingReply)}},{key:"syncPing",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(){var t,n;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.timeKeeper.now(),this.sendMessage(dt.SyncPingSend,t),e.next=4,this.waitFor(dt.SyncPingReply);case 4:return n=e.sent,e.abrupt("return",{localStart:t,localEnd:this.timeKeeper.now(),remoteStart:n});case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"syncPingReply",value:function(){this.sendMessage(dt.SyncPingReply,this.timeKeeper.now())}},{key:"waitForSyncPingStart",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(){return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.sendMessage(dt.SyncPingStart),e.next=3,this.waitFor(dt.SyncPingStart);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"waitForSyncPingComplete",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(){return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.sendMessage(dt.SyncPingComplete),e.next=3,this.waitFor(dt.SyncPingComplete);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setHostSyncOffset",value:function(e){this.isHost?this.remoteOffset=e.remoteOffset:this.remoteOffset=0,ot.log("guest offset:",this.remoteOffset)}},{key:"waitForClockStart",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(){var t,n,a,r;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.isHost,n=this.remoteOffset,a=0,!t){e.next=9;break}a=this.timeKeeper.now()+1e3,r=a+n,this.sendMessage(dt.ClockStart,r),ot.log("sent ".concat(dt.ClockStart)),e.next=13;break;case 9:return e.next=11,this.waitFor(dt.ClockStart);case 11:a=e.sent,ot.log("received ".concat(dt.ClockStart));case 13:return e.abrupt("return",{localEpoch:a});case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"waitForRematch",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(){return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.sendGenericEvent(pt.Rematch),e.next=3,this.waitForEvent(pt.Rematch);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"clearRematch",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(){return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.clearEvents(pt.Rematch);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"waitForEventEcho",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(t){return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.sendGenericEvent(t),e.next=3,this.waitForEvent(t);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"subscribe",value:function(e,t){return this.receiveMessageCallbacks.subscribe(e,t)}},{key:"unsubscribe",value:function(e){return this.receiveMessageCallbacks.unsubscribe(e)}},{key:"getGuestOffset",value:function(){return this.remoteOffset}}]),e}(),gt=n(103),mt=n.n(gt),vt=function(){function e(){var t=this;Object(l.a)(this,e),this.wasClosed=!1,this.callbackOnSignal=ot.log,this.setOnSignal=function(e){t.callbackOnSignal=e},this.onSignal=function(e){ot.log("sending signal:",e),t.callbackOnSignal(e)},this.callbackOnClose=function(){},this.setOnClose=function(e){t.callbackOnClose=e},this.onClose=function(){t.wasClosed||(ot.log("connection closed"),t.callbackOnClose())},this.callbackOnData=ot.log,this.setOnData=function(e){t.callbackOnData=e},this.onData=function(e){t.callbackOnData(e)},this.callbackOnError=function(e){},this.setOnError=function(e){t.callbackOnError=e},this.onError=function(e){t.wasClosed||(ot.log("connection error"),ot.log(e),t.callbackOnError(e))}}return Object(h.a)(e,[{key:"setClosed",value:function(){this.wasClosed=!0}}]),e}(),kt=function(){function e(t,n){Object(l.a)(this,e),this.isHost=void 0,this.peer=void 0,this.isConnected=void 0,this.callback=new vt,this.isHost=n.isHost,this.peer=t;var a=this.callback;this.isConnected=new Promise((function(e,n){t.on("connect",(function(){ot.log("connected!"),e()}))})),a.setOnSignal(n.onSignal),a.setOnClose(n.onDisconnect),a.setOnError(n.onDisconnect),t.on("data",a.onData),t.on("signal",a.onSignal),t.on("close",a.onClose),t.on("error",a.onError)}return Object(h.a)(e,[{key:"receiveSignal",value:function(e){ot.log("received signal:",e),this.peer.signal(e)}},{key:"getConnection",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(){var t,n,a,r;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.isHost,n=this.peer,a=this.callback,r=new bt(t,{send:function(e){return n.send(e)},close:function(){a.setClosed(),n.destroy()},isClosed:function(){return n.destroyed},setDataCallback:function(e){return a.setOnData(e)}}),e.next=5,this.isConnected;case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}],[{key:"getOptions",value:function(e){return{initiator:e.isHost,trickle:!0,config:e.rtcConfig}}},{key:"asHost",value:function(t){return new e(new mt.a(this.getOptions({isHost:!0,rtcConfig:t.rtcConfig})),{isHost:!0,onSignal:function(e){return t.onSignal(JSON.stringify(e))},onDisconnect:t.onDisconnect})}},{key:"asGuest",value:function(t){return new e(new mt.a(this.getOptions({isHost:!1,rtcConfig:t.rtcConfig})),{isHost:!1,onSignal:function(e){return t.onSignal(JSON.stringify(e))},onDisconnect:t.onDisconnect})}}]),e}(),jt=function(){function e(t){Object(l.a)(this,e),this.config=t,this.isConnectionSuccess=!1,this.intentionallyClosed=!1}return Object(h.a)(e,[{key:"connectAsHost",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(t){return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.connect("connect/".concat(this.config.version),t,!0));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"connectAsGuest",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(t){return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.connect("connect/".concat(this.config.version),t,!1));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onClose",value:function(){this.isConnectionSuccess?ot.log("handshake socket was closed after success"):this.intentionallyClosed?ot.log("handshake socket was closed intentionally"):this.config.onServerDisconnect()}},{key:"connect",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(t,n,a){var r,i,o,s,u,l,h,d,p,f=this;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.config.url.split("://"),i=Object(m.a)(r,2),o=i[0],s=i[1],(u=new WebSocket(("https"===o?"wss://":"ws://")+s+t)).addEventListener("close",(function(){return f.onClose()})),u.addEventListener("error",(function(){return f.onClose()})),e.next=7,new Promise((function(e){u.addEventListener("open",e)}));case 7:return l={type:"register",message:n},u.send(JSON.stringify(l)),h={rtcConfig:this.config.rtcConfig,onSignal:function(e){var t={type:"signal",message:e};u.send(JSON.stringify(t))},onDisconnect:this.config.onPeerDisconnect,testingOptions:this.config.testingOptions},d=a?kt.asHost(h):kt.asGuest(h),u.addEventListener("message",(function(e){var t=JSON.parse(e.data);"signal"===t.type&&d.receiveSignal(JSON.parse(t.message))})),p=d.getConnection(),e.abrupt("return",{connection:p.then((function(e){return f.isConnectionSuccess=!0,u.close(),e})),disconnect:function(){f.intentionallyClosed=!0,u.close()}});case 14:case"end":return e.stop()}}),e,this)})));return function(t,n,a){return e.apply(this,arguments)}}()}],[{key:"createPrivateSignalId",value:function(){return ct(7)}}]),e}(),yt=function(e){return e.Dynamic="dynamic",e.Fixed60="60fps",e.Fixed30="30fps",e}({}),xt=[{label:"Dynamic",value:yt.Dynamic},{label:"60 FPS",value:yt.Fixed60},{label:"30 FPS",value:yt.Fixed30}],Ot=function(){function e(t){var n;Object(l.a)(this,e),this.options=t,this.tasks={step:function(){},draw:function(){}},this.ticks=0,this.inputDelay=0,this.skipped=0,this.isStopped=!0,this.isTerminated=!1,this.pausedAt=void 0,this.epoch=void 0,this.lastStartTime=void 0,this.stepBuffer=new tt,this.drawBuffer=new tt,this.deprecated_sleepBuffer=new tt,this.loopBuffer=new tt,this.fps=void 0,this.frameRate=void 0,this.canPause=void 0,this.msPerFrame=void 0,this.timeKeeper=void 0,this.fps=t.fps,this.frameRate=t.frameRate,this.canPause=t.canPause,this.timeKeeper=t.timeKeeper,this.epoch=null!==(n=t.epoch)&&void 0!==n?n:this.timeKeeper.now(),this.msPerFrame=1e3/t.fps,this.lastStartTime=this.epoch}return Object(h.a)(e,[{key:"debug",value:function(){var e=this.timeKeeper.now(),t=this.getMeasurements(),n={tick:this.ticks,perfTime:e,frameRate:this.frameRate,loopMeasurement:t};this.ticks+=1,this.tasks.step(n),this.tasks.draw(n)}},{key:"loop",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(){var t,n,a,r,i,o,s,u,l,h,d,p;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.startTimeForLoop(this.ticks+1),this.lastStartTime=this.timeKeeper.now(),e.next=4,this.sleep(t-this.lastStartTime);case 4:if(!this.isStopped){e.next=7;break}return e.abrupt("return");case 7:return this.ticks+=1,n=this.timeKeeper.now(),this.loopBuffer.push(n-this.lastStartTime),this.lastStartTime=n,a=this.frameRate===yt.Fixed30||this.frameRate===yt.Dynamic&&n>this.startTimeForLoop(this.ticks+1),r=this.startTimeForLoop(this.ticks+(a?2:1)),i=Math.max(0,Math.round(r-n)),o=this.sleep(i),s={tick:this.ticks,perfTime:n,frameRate:this.frameRate,loopMeasurement:this.getMeasurements()},this.tasks.step(s),u=this.timeKeeper.now(),this.stepBuffer.push(u-n),a&&(this.skipped+=1,this.ticks+=1,l=u,this.loopBuffer.push(l-this.lastStartTime),this.lastStartTime=l,s={tick:this.ticks,perfTime:l,frameRate:this.frameRate,loopMeasurement:this.getMeasurements()},this.tasks.step(s),h=this.timeKeeper.now(),this.stepBuffer.push(h-l)),d=this.timeKeeper.now(),this.tasks.draw(s),p=this.timeKeeper.now(),this.drawBuffer.push(p-d),e.next=26,o;case 26:e.next=4;break;case 28:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"sleep",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(t){return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){setTimeout(e,t)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getMeasurements",value:function(){var e,t,n,a,r,i,o,s,c,u,l,h,d=this.stepBuffer.getAll(),p=this.drawBuffer.getAll(),f=this.deprecated_sleepBuffer.getAll(),b=this.loopBuffer.getAll();return{skipped:this.skipped,latest:{step:null!==(e=this.stepBuffer.peek())&&void 0!==e?e:0,draw:null!==(t=this.drawBuffer.peek())&&void 0!==t?t:0,sleep:null!==(n=this.deprecated_sleepBuffer.peek())&&void 0!==n?n:0,loop:null!==(a=this.loopBuffer.peek())&&void 0!==a?a:0},median:{step:null!==(r=rt(d))&&void 0!==r?r:0,draw:null!==(i=rt(p))&&void 0!==i?i:0,sleep:null!==(o=rt(f))&&void 0!==o?o:0,loop:null!==(s=rt(b))&&void 0!==s?s:0},mean:{step:null!==(c=it(d))&&void 0!==c?c:0,draw:null!==(u=it(p))&&void 0!==u?u:0,sleep:null!==(l=it(f))&&void 0!==l?l:0,loop:null!==(h=it(b))&&void 0!==h?h:0}}}},{key:"startTimeForLoop",value:function(e){return this.epoch+(e+this.inputDelay/2)*this.msPerFrame}},{key:"setInputDelay",value:function(e){this.inputDelay=e}},{key:"register",value:function(e){var t;this.tasks={step:e.step,draw:null!==(t=e.draw)&&void 0!==t?t:function(){}}}},{key:"start",value:function(){this.isTerminated||(this.resume(),this.isStopped&&(this.isStopped=!1,this.loop()))}},{key:"stop",value:function(){this.isStopped=!0}},{key:"terminate",value:function(){this.stop(),this.isTerminated=!0}},{key:"isRunning",value:function(){return!this.isStopped}},{key:"pause",value:function(){this.canPause&&void 0===this.pausedAt&&(this.pausedAt=this.timeKeeper.now(),this.stop())}},{key:"resume",value:function(){if(this.canPause&&!this.isTerminated&&void 0!==this.pausedAt){var e=this.timeKeeper.now(),t=this.startTimeForLoop(this.ticks)-this.epoch;this.epoch=e-t,this.pausedAt=void 0,this.start()}}}]),e}(),wt=function(){function e(t,n){Object(l.a)(this,e),this.fps=60,this.msPerFrame=1e3/this.fps,this.label=void 0,this.loopFactory=void 0,this.label=t,this.loopFactory=n}return Object(h.a)(e,[{key:"expected",value:function(e,t){return Math.floor(e+t*this.msPerFrame)}},{key:"run",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(t){var n,a,r,i,o,s,u,l,h,d,p,f,b=this;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.loopFactory(this.fps),a=this.fps*t,r=[],i=function(e){return r.push(e)},o=0,e.next=7,new Promise((function(e,t){n.register({step:function(t){t.tick>a||(t.tick===a?(o=t.perfTime,e()):i(t))}}),n.start()}));case 7:return n.stop(),s=r[0].perfTime,l=r.map((function(e){var t=Math.floor(u?e.perfTime-u.perfTime-b.msPerFrame:0),n=b.expected(s,e.tick),a=n-e.perfTime;return u=e,Object(g.a)(Object(g.a)({},e),{},{expected:n,delta:t,drift:a})})),h=Math.min.apply(Math,Object(k.a)(l.map((function(e){return e.delta})))),d=Math.max.apply(Math,Object(k.a)(l.map((function(e){return e.delta})))),p=Math.min.apply(Math,Object(k.a)(l.map((function(e){return e.drift})))),f=Math.max.apply(Math,Object(k.a)(l.map((function(e){return e.drift})))),e.abrupt("return",{label:this.label,seconds:t,epoch:s,finishedAt:o,steps:l,earliestDrift:p,latestDrift:f,earliestDelta:h,latestDelta:d});case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"EagerLoop",value:function(){return new e("Eager",(function(e){return new Ot({fps:e,frameRate:yt.Dynamic,canPause:!1,timeKeeper:st.instance()})}))}}]),e}(),St=Object(Ke.a)("latest"),Ct=function(){function e(){var t=this;Object(l.a)(this,e),this.callbacks=new et,Object.defineProperty(this,St,{writable:!0,value:null}),this.broadcast=function(e){Object(Je.a)(t,St)[St]=e,t.callbacks.forEach((function(t){return t(e)}))}}return Object(h.a)(e,[{key:"subscribe",value:function(e,t){return null!==Object(Je.a)(this,St)[St]&&t&&e(Object(Je.a)(this,St)[St]),this.callbacks.anon(e)}}]),e}();var At=n(188);function Tt(e,t){return Object.keys(e).map((function(n){return t(n,e[n])}))}function Mt(e,t){return e.reduce((function(e,n){return e[t(n)]=n,e}),{})}function Pt(e,t){return e.map((function(e){var n=t[e];return void 0!==n?n:e}))}function Rt(e,t,n){return e.reduce((function(e,a){return e[t(a)]=n(a),e}),{})}function It(e,t){return Object.keys(e).reduce((function(e,n){return e[n]=t(n),e}),{})}function Bt(e){return e.filter((function(e){return null!==e&&void 0!==e}))}function Dt(e,t){return e===t?0:e>t?1:-1}function Ht(e,t){e.sort((function(e,n){return Dt(t(e),t(n))}))}function Et(e,t){var n=e.concat();return Ht(n,t),n}function _t(e){var t=e.concat();return t.sort(Dt),t[Math.floor(t.length/2)]}function Ft(e){for(var t=[],n=0;n<e;n++)t.push(n);return t}function Lt(e){var t=[];return e.forEach((function(e){t.includes(e)||t.push(e)})),t}function Gt(e,t){var n=[],a={};return e.forEach((function(e){var r=t(e);a[r]||(n.push(e),a[r]=!0)})),n}function zt(e){return e[e.length-1]}function Wt(e){return e.reduce((function(e,t){return e+t}),0)}function Nt(e,t,n){var a=n?t.filter((function(t){return n(t,e)}))[0]:void 0,r=t.indexOf(null!==a&&void 0!==a?a:e);return t[(t.length+r-1)%t.length]}function Ut(e,t,n){var a=n?t.filter((function(t){return n(t,e)}))[0]:void 0,r=t.indexOf(null!==a&&void 0!==a?a:e);return t[(t.length+r+1)%t.length]}function qt(e){return e[Math.floor(Math.random()*e.length)]}function Vt(e){var t=[];return e.forEach((function(e){return t.push.apply(t,Object(k.a)(e))})),t}function Yt(e){return Et(Object.keys(e).map((function(t){return{key:t,val:e[t]}})),(function(e){return e.key}))}function Jt(e,t){if(!e===!!t)return!1;var n=function(e,t){return t instanceof Object&&!(t instanceof Array)?Object.keys(t).sort().reduce((function(e,n){return e[n]=t[n],e}),{}):t};function a(e){return JSON.stringify(e,n)}return a(e)===a(t)}function Kt(e){if(void 0!==e)return null===e?null:JSON.parse(JSON.stringify(e))}function Qt(e,t){return Object(At.sha512_256)(t).slice(0-e)}function Zt(e){return"string"===typeof e}function Xt(e){return window.location.search.toLowerCase().split("&").some((function(t){return t.includes(e.toLowerCase())}))}function $t(e){var t=window.location.search;return new URLSearchParams(t).get(e)}function en(e){var t=window.location.search,n=new URLSearchParams(t).get(e);if(n){var a=window.location.href.replace("".concat(e,"=").concat(n),"");a.endsWith("?")&&(a=a.slice(0,-1)),window.history.pushState({path:a},"",a)}return n}function tn(e){return Math.floor(Math.random()*Math.pow(10,e)).toString().padStart(e,"0")}function nn(){return tn(8)}function an(e,t){return rn.apply(this,arguments)}function rn(){return(rn=Object(u.a)(Object(c.a)().mark((function e(t,n){var a,r,i,o,s;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i={retries:null!==(a=(null!==n&&void 0!==n?n:{}).retries)&&void 0!==a?a:3,cooldownMs:null!==(r=(null!==n&&void 0!==n?n:{}).cooldownMs)&&void 0!==r?r:500},e.prev=1,o=t(),e.next=5,Promise.resolve(o);case 5:return s=e.sent,e.abrupt("return",s);case 9:if(e.prev=9,e.t0=e.catch(1),!(i.retries<=0)){e.next=13;break}throw e.t0;case 13:return e.next=15,Le(i.cooldownMs);case 15:return e.abrupt("return",an(t,Object(g.a)(Object(g.a)({},i),{},{retries:i.retries-1})));case 16:case"end":return e.stop()}}),e,null,[[1,9]])})))).apply(this,arguments)}function on(e,t,n){var a=n.r-t.r,r=n.g-t.g,i=n.b-t.b;return{r:t.r+Math.floor(a*e),g:t.g+Math.floor(r*e),b:t.b+Math.floor(i*e)}}function sn(e,t){var n,a;return"rgba(".concat(e.r,", ").concat(e.g,", ").concat(e.b,", ").concat(null!==(n=null!==(a=e.o)&&void 0!==a?a:t)&&void 0!==n?n:1,")")}var cn=function(){function e(){Object(l.a)(this,e),this.values=[]}return Object(h.a)(e,[{key:"length",get:function(){return this.values.length}},{key:"peek",value:function(){return this.values[this.values.length-1]}},{key:"pop",value:function(){return this.values.pop()}},{key:"push",value:function(e){this.remove(e),this.values.push(e)}},{key:"remove",value:function(e){var t=this.values.indexOf(e);return t>-1&&(this.values.splice(t,1),!0)}},{key:"dequeue",value:function(e){return e<1?[]:this.values.splice(0,e)}}]),e}();function un(e){return e.endsWith("/")?e:e+"/"}function ln(e){return window.location.search.toLowerCase().split("&").some((function(t){return t.includes(e.toLowerCase())}))}function hn(e){return new URLSearchParams(window.location.search).get(e)||null}var dn=function(){function e(t,n,a){Object(l.a)(this,e),this.major=void 0,this.minor=void 0,this.patch=void 0,this.major=t,this.minor=n,this.patch=a}return Object(h.a)(e,[{key:"lessThanOrEqual",value:function(e){return this.major<e.major||!(this.major>e.major)&&(this.minor<e.minor||!(this.minor>e.minor)&&(this.patch<e.patch||!(this.patch>e.patch)))}},{key:"isGreaterThan",value:function(e){return!this.lessThanOrEqual(e)}},{key:"toString",value:function(){return[this.major,this.minor,this.patch].join(".")}},{key:"escaped",value:function(){return this.toString().split(".").join("-")}}],[{key:"parse",value:function(t){var n=t.split(".").map(parseFloat);return new e(n[0],n[1],n[2])}},{key:"matchesMin",value:function(t,n){return e.parse(n).lessThanOrEqual(e.parse(t))}}]),e}(),pn=function(){function e(t){var n,a,r=this;Object(l.a)(this,e),this.flags=[],this.isDebugPlatform=void 0,this.enableDevCodes=void 0,this.checkQueryParam=void 0,this.getQueryParam=void 0,this.checkDebugFlag=function(e,t){if(!r.enableDevCodes&&!t)return!1;var n=r.checkQueryParam(e),a=!!t||n;return r.flags.push({code:e,value:a}),Ht(r.flags,(function(e){return e.code})),a},this.readDebugFlag=function(e){if(!r.enableDevCodes)return null;var t=r.getQueryParam(e);return r.flags.push({code:e,value:t}),Ht(r.flags,(function(e){return e.code})),t||null},this.isDebugPlatform=!!t.isDebugPlatform,this.enableDevCodes=!!t.enableDevCodes,this.checkQueryParam=null!==(n=t.checkQueryParam)&&void 0!==n?n:ln,this.getQueryParam=null!==(a=t.getQueryParam)&&void 0!==a?a:hn}return Object(h.a)(e,[{key:"Flags",value:function(){var e=this.isDebugPlatform,t=this.checkDebugFlag,n=this.readDebugFlag;return{GoogleCloudAssets:t("assetsgcp"),DevHostedAssets:t("assetsdev"),LocalPublicAssets:t("assetslocal"),RefillHealth:t("health"),RefillMeter:t("meter"),HideBoxes:t("hidebox"),ShowBoxes:t("showbox"),ShowInputs:t("showinputs"),DisableBlocking:t("unblock"),HideReplayInfo:t("hidereplay"),HideBackground:t("hidebg"),ShowStats:t("stats"),ShowLogs:t("log",e),PeekData:t("peek",e),ShowIntent:t("intent"),ShowBosses:t("boss"),ShowIntro:t("forceintro"),ShowPatchNotes:t("forcepatchnotes"),ShowNews:t("news"),SkipMenuEventBlocks:t("skipeventblock"),ImpersonateSteam:t("steam"),DebugEmote:t("emote"),ForceTheme:n("theme"),FirstToOne:t("ft1"),ShortAttract:t("shortattract"),ShortEvent:t("shortevent"),ShortTimer:t("shortround"),BuffDamage:t("damage"),MuteBGM:t("mute"),Slowmo:t("slow"),AddLag:t("lag"),OfflineRollback:t("rollback"),DropInputs:t("dropinputs"),SkipConfirm:t("skipconfirm"),SkipChars:t("skipchar"),FailHandshake:t("failhandshake"),P1Noodle:t("p1noodle"),P1Rice:t("p1rice"),P1Beef:t("p1beef"),P1Pork:t("p1pork"),P1Onion:t("p1onion"),P1Garlic:t("p1garlic"),P1BossPork:t("p1bosspork"),P1BossGarlic:t("p1bossgarlic"),P2Noodle:t("p2noodle"),P2Rice:t("p2rice"),P2Beef:t("p2beef"),P2Pork:t("p2pork"),P2Onion:t("p2onion"),P2Garlic:t("p2garlic"),P2BossPork:t("p2bosspork"),P2BossGarlic:t("p2bossgarlic"),LocalApi:t("apilocal"),LocalCache:t("cachelocal"),LocalHandshake:t("handlocal"),ProdHandshake:t("handprod"),LocalMatchmaker:t("mmlocal"),BetaMatchmaker:t("mmbeta"),ProdMatchmaker:t("mmprod"),LocalPresence:t("prezlocal"),BetaPresence:t("prezbeta"),ProdPresence:t("prezprod"),LocalServerLobby:t("lobbylocal"),LeaderboardFakeData:t("fakeleader"),SkipIce:t("skipice"),ShowBetaMenu:t("showbeta"),HideBetaMenu:t("hidebeta"),CheatsOn:t("cheetah"),Flags:this.flags}}}]),e}();var fn=n(189),bn=n(190),gn=function(e){return e[e.Unknown=1]="Unknown",e[e.IOS=2]="IOS",e[e.Electron=3]="Electron",e[e.ReactDev=4]="ReactDev",e[e.LocalStaticServer=5]="LocalStaticServer",e[e.PublicWeb=6]="PublicWeb",e}({}),mn=function(){function e(){var t=this;Object(l.a)(this,e),this.forceDesktop=Xt("forced"),this.forceMobile=Xt("forcem"),this.isReactDevelopment=!1,this.isProduction=!this.isReactDevelopment,this.isKiosk=Xt("kiosk"),this.isIosApp=!!$t("ios"),this.isElectron=navigator.userAgent.includes("Electron"),this.isNativeApp=!!(this.isElectron||this.isKiosk||this.isIosApp),this.isMobile=this.forceMobile||!this.forceDesktop&&!this.isKiosk&&!!(this.isIosApp||Object(fn.isMobile)({tablet:!0})||bn.isMobile),this.isDomainLocalHost=window.location.href.startsWith("http://localhost:")||window.location.href.startsWith("http://mpw.local:"),this.isDomainProdMain=window.location.href.startsWith("https://toughlovearena.com"),this.isDomainProdFire=window.location.href.startsWith("https://fire.toughlovearena.com"),this.isDomainProdProxy=window.location.href.startsWith("https://mirror.toughlovearena.com")||window.location.href.startsWith("https://beefnoodlestew.site")||window.location.href.startsWith("https://toughlove.space")||this.isReactDevelopment&&ln("proxy"),this.isDomainCanary=window.location.href.startsWith("https://canary.toughlovearena.com")||this.isReactDevelopment&&ln("canary"),this.platformType=t.isIosApp?gn.IOS:t.isElectron?gn.Electron:t.isReactDevelopment?gn.ReactDev:t.isDomainLocalHost?gn.LocalStaticServer:gn.PublicWeb}return Object(h.a)(e,[{key:"matches",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.includes(this.platformType)}}]),e}(),vn=new mn;var kn=new(function(){function e(){var t,n,a,r=this;Object(l.a)(this,e),this.isTest=void 0!==Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).JEST_WORKER_ID,this.noMouseKeyboard=vn.isKiosk||vn.isMobile,this.isDebug=vn.isReactDevelopment||vn.isDomainCanary,this.DebugReader=new pn({isDebugPlatform:this.isDebug,enableDevCodes:"4fbe4904"===Qt(8,null!==(t=null===(n=localStorage)||void 0===n?void 0:n.getItem("enableDebug"))&&void 0!==t?t:"")}),this.Debug=this.DebugReader.Flags(),this.PatchVersion="0.106.3",this.MinVersionAssets="0.103.1",this.MinVersionCombat="0.106.2",this.MinVersionSettings="0.42.11",this.OnlineVersion=(vn.isReactDevelopment?"dev-":"")+dn.parse(this.MinVersionCombat).escaped(),this.ProbeCanvas="debugcanvas",this.ProbeLoop="debugloop",this.ProbeReplay="debugreplay",this.DebugParam="debug",this.ChangelogParam="changelog",this.FaqParam="faq",this.RoadmapParam="todo",this.LicensesParam="licenses",this.HomepageUrl=un(window.location.href.split("?")[0]),this.LocalFolder=function(e){if(e.endsWith("/"))return e;if(e.endsWith("/index.html")){var t=e.lastIndexOf("/");return e.slice(0,t+1)}return un(e)}(window.location.href.split("?")[0]),this.Links={HomepageUrl:this.HomepageUrl,VersionUrl:vn.isNativeApp?"https://toughlovearena.com/version.json":"version.json",ChangelogUrl:"".concat(this.HomepageUrl,"?").concat(this.ChangelogParam),FaqUrl:"".concat(this.HomepageUrl,"?").concat(this.FaqParam),RoadmapUrl:"".concat(this.HomepageUrl,"?").concat(this.RoadmapParam),LicensesUrl:"".concat(this.HomepageUrl,"?").concat(this.LicensesParam),DebugUrl:"".concat(this.HomepageUrl,"?").concat(this.DebugParam),ChangelogYaml:"".concat(this.LocalFolder,"data/changelog.yaml"),TournamentsYaml:"https://about.toughlovearena.com/data/fame.yaml"},this.QueryParams={Assets:"assets",PrivateMatch:"join",ServerLobby:"lobby",Replay:"replay"},this.External={About:"https://about.toughlovearena.com",Download:"https://download.toughlovearena.com",AprilFools:"https://aprilfools.toughlovearena.com",Status:"https://status.toughlovearena.com",Email:"mailto:toughlovearena@gmail.com",Facebook:"https://www.facebook.com/ToughLoveArena",Twitter:"https://twitter.com/ToughLoveArena",Twitch:"https://twitch.tv/mpaulweeks",YouTube:"https://www.youtube.com/c/ToughLoveArena",Discord:"https://discord.gg/gMBRaUPDT7",Redbubble:"https://www.redbubble.com/people/toughlovearena",PayPal:"https://paypal.me/toughlovearena",Patreon:"https://www.patreon.com/toughlovearena",Bandcamp:"https://visager.bandcamp.com/album/tough-love-arena-original-game-soundtrack"},this.AssetCacheBuster=[vn.isDomainCanary?"c":"",dn.parse(this.MinVersionAssets).escaped()].join(""),this.GoogleCloudAssets="https://assets.toughlovearena.cloud",this.DevHostedAssets="http://localhost:8080",this.LocalPublicAssets="assets",this.AssetsOverride=$t(this.QueryParams.Assets),this.AssetsBase=this.Debug.GoogleCloudAssets&&this.GoogleCloudAssets||this.Debug.DevHostedAssets&&this.DevHostedAssets||this.Debug.LocalPublicAssets&&this.LocalPublicAssets||this.AssetsOverride||vn.isDomainLocalHost&&this.LocalPublicAssets||vn.isDomainProdMain&&this.GoogleCloudAssets||vn.isDomainProdFire&&this.GoogleCloudAssets||vn.isDomainProdProxy&&this.GoogleCloudAssets||vn.isDomainCanary&&this.GoogleCloudAssets||this.LocalPublicAssets,this.AssetsPath=function(e){return"".concat(r.AssetsBase,"/").concat(e,"?v=").concat(r.AssetCacheBuster)},this.OggPath=function(e){var t=document.createElement("audio"),n=!!t.canPlayType("audio/ogg");t.remove();var a=n?e:e.replace(".ogg",".mp3");return r.AssetsPath(a)},this.urlPrivateMatch=en(this.QueryParams.PrivateMatch),this.urlServerLobby=en(this.QueryParams.ServerLobby),this.urlReplay=en(this.QueryParams.Replay),this.isAppStart=!0,this.Redirect={ProbeCanvas:Xt(this.ProbeCanvas),ProbeLoop:Xt(this.ProbeLoop),ProbeReplay:Xt(this.ProbeReplay),Debug:Xt(this.ProbeCanvas)||Xt(this.ProbeLoop)||Xt(this.ProbeReplay)||Xt(this.DebugParam),Changelog:Xt(this.ChangelogParam),Faq:Xt(this.FaqParam),Roadmap:Xt(this.RoadmapParam),Licenses:Xt(this.LicensesParam)},this.Theme=null!==(a=this.Debug.ForceTheme)&&void 0!==a?a:function(e){var t=new Date(e.toISOString()).toLocaleDateString("en-US",{timeZone:"America/New_York"}).split("/").map((function(e){return parseInt(e)})),n=Object(m.a)(t,2),a=n[0],r=n[1],i=10===a&&r>=9&&r<=31;return 1===a&&r>=1&&r<=7&&Ie.Birthday||i&&Ie.Halloween||Ie.Default}(new Date),this.isArchive=!1,this.isAprilFools=this.Theme===Ie.AprilFools,this.Electron=function(e){if(!e.isElectron)return{isDownloadStarted:function(){throw new Error("Cannot check download progress if not in the correct environment")},isDownloadComplete:function(){throw new Error("Cannot check download progress if not in the correct environment")},isSteam:function(){return e.impersonateSteam},exit:function(){throw new Error("Cannot exit if not in the correct environment")}};var t=window;return{isDownloadStarted:function(){return!!t.ELECTRON_DOWNLOAD_STARTED},isDownloadComplete:function(){return!!t.ELECTRON_DOWNLOAD_COMPLETE},isSteam:function(){return!!t.ELECTRON_IS_STEAM},exit:function(){return t.ELECTRON_API.exit()}}}({isElectron:vn.isElectron,impersonateSteam:this.Debug.ImpersonateSteam}),this.hideBetaMenu=this.Debug.HideBetaMenu||!this.Debug.ShowBetaMenu,this.FPS=this.Debug.Slowmo?10:60,this.msPerFrame=1e3/this.FPS,this.TestingRollbackLag=this.Debug.AddLag?70:void 0,this.AttackBuffer=5,this.KaraWindow=2,this.IdleThrowInvulnBuffer=3,this.EmptySound="dne.mp3",this.MinHealth=1,this.StandardHealth=1e3,this.BlueLifeRegenPerFrame=.1,this.BlueLifeRegenPerAttack=12,this.MeterOneBar=1e3,this.MaxMeter=2*this.MeterOneBar,this.MeterPerWalkingFrame=3,this.MeterGainCooldownMax=40,this.MaxGuardStun=100,this.MeterForRejection=this.MeterOneBar,this.MeterForRapid=this.MeterOneBar,this.MeterForBurst=2*this.MeterOneBar,this.MeterGainAttackOnHit=.1*this.MeterOneBar,this.MeterGainAttackOnBlock=.08*this.MeterOneBar,this.MeterGainDefendOnBlock=.05*this.MeterOneBar,this.DefaultOrigin={center:{x:0,y:0},size:{x:1,y:1}},this.AntiAirStartupTumble={dx:.5,dy:-1,juggles:2,canRelaunch:!1,nextHitSetsAngle:!1,skipStartupAnimation:!1},this.AntiAirRecoveryTumble={dx:.5,dy:-1,juggles:4,canRelaunch:!1,nextHitSetsAngle:!1,skipStartupAnimation:!1},this.AutoBlockCooldown=30,this.MaxGameFreeze=10,this.CapturedTimeout=30,this.ThrowTechWindow=8,this.ThrowTechstun=40,this.Phase={ThrowingPhase:"throwing",ThrowStunPhase:"throw",ThrowTechStunPhase:"teching"},this.StageFloor=0,this.ScreenWidth=1e5,this.ScreenTotalWidth=Math.floor(1.5*this.ScreenWidth),this.CharacterSize={x:.12*this.ScreenWidth,y:.264*this.ScreenWidth},this.CharacterTumblingScale={x:1,y:.8},this.CharacterTumblingSize={x:this.CharacterSize.x*this.CharacterTumblingScale.x,y:this.CharacterSize.y*this.CharacterTumblingScale.y},this.CharacterOriginBox={center:{x:0,y:0},size:Object(g.a)({},this.CharacterSize)},this.CharacterSpriteHeightScale=1.6,this.CharacterDrawHeight=this.CharacterSize.y*this.CharacterSpriteHeightScale,this.ImpactDrawHeight=1.5*this.CharacterDrawHeight,this.ParticleDrawHeight=1.5*this.CharacterDrawHeight,this.FighterMargin=this.CharacterSize.x/2,this.Spawns=function(){var e=r.ScreenTotalWidth/2,t=.3*r.ScreenWidth,n=.3*r.ScreenWidth;return{left:{x:e-t,y:r.StageFloor},right:{x:e+t,y:r.StageFloor},leftCornerLeft:{x:0,y:r.StageFloor},leftCornerRight:{x:n,y:r.StageFloor},rightCornerLeft:{x:r.ScreenTotalWidth-n,y:r.StageFloor},rightCornerRight:{x:r.ScreenTotalWidth,y:r.StageFloor},closeLeft:{x:e-t/4,y:r.StageFloor},closeRight:{x:e+t/4,y:r.StageFloor}}}(),this.FontFamily="Fightura",this.DrawFloor=.96,this.DrawAspectRatio=1.6,this.TouchIconHeightPercent=.14,this.FunctionalKeys=new Set(["F1","F2","F3","F4","F5","F6","F7","F8","F9","F10","F11","F12"]),this.IgnoredKeyCodes=new Set(Object(k.a)(this.FunctionalKeys)),this.ReservedKeyCodes=new Set([].concat(Object(k.a)(this.FunctionalKeys),["Tab","Escape","Enter"])),this.EmptyControls={left:["leftEmpty"],right:["rightEmpty"],attack1:["attack1Empty"],attack2:["attack2Empty"],attack3:["attack3Empty"],attack4:["attack4Empty"],menu:["menuEmpty"]},this.TrainingDummyControls={left:["leftTrainingDummy"],right:["rightTrainingDummy"],attack1:["attack1TrainingDummy"],attack2:["attack2TrainingDummy"],attack3:["attack3TrainingDummy"],attack4:["attack4TrainingDummy"],menu:["menuTrainingDummy"]},this.ComputerOneControls={left:["leftComputerOne"],right:["rightComputerOne"],attack1:["attack1ComputerOne"],attack2:["attack2ComputerOne"],attack3:["attack3ComputerOne"],attack4:["attack4ComputerOne"],menu:["menuComputerOne"]},this.ComputerTwoControls={left:["leftComputerTwo"],right:["rightComputerTwo"],attack1:["attack1ComputerTwo"],attack2:["attack2ComputerTwo"],attack3:["attack3ComputerTwo"],attack4:["attack4ComputerTwo"],menu:["menuComputerTwo"]},this.DefaultControls1={left:["KeyA"],right:["KeyD"],attack1:["KeyJ"],attack2:["KeyK"],attack3:["KeyL"],attack4:["Semicolon"],menu:["KeyP"]},this.DefaultControls2={left:[],right:[],attack1:[],attack2:[],attack3:[],attack4:[],menu:[]},this.DEPRECATED_DefaultControls1={left:"KeyA",right:"KeyD",attack1:"KeyJ",attack2:"KeyK",attack3:"KeyL",attack4:"Semicolon",menu:"KeyP"},this.DEPRECATED_DefaultControls2={left:"",right:"",attack1:"",attack2:"",attack3:"",attack4:"",menu:""},this.DefaultTouchRadius=.28,this.DefaultTouchConfig={left:{diameterRatio:this.DefaultTouchRadius,vertRef:"bottom",horiRef:"left",vertOffset:.5,horiOffset:.5},right:{diameterRatio:this.DefaultTouchRadius,vertRef:"bottom",horiRef:"left",vertOffset:.5,horiOffset:1.5},attack1:{diameterRatio:this.DefaultTouchRadius,vertRef:"bottom",horiRef:"right",vertOffset:.5,horiOffset:1.5},attack2:{diameterRatio:this.DefaultTouchRadius,vertRef:"bottom",horiRef:"right",vertOffset:.5,horiOffset:.5},attack3:{diameterRatio:this.DefaultTouchRadius,vertRef:"bottom",horiRef:"right",vertOffset:1.5,horiOffset:.5},attack4:{diameterRatio:this.DefaultTouchRadius,vertRef:"bottom",horiRef:"right",vertOffset:.5,horiOffset:2.5}},this.Color={Heart:{r:234,g:119,b:248},White:{r:255,g:255,b:255},Black:{r:0,g:0,b:0},LifeYellow:{r:255,g:208,b:25},LifeBlue:{r:64,g:224,b:208},LifeRed:{r:255,g:0,b:0},MeterPartial:{r:136,g:44,b:212},MeterFull:{r:240,g:113,b:255},MeterGained:{r:255,g:37,b:81},Steak:{r:255,g:83,b:46},Reject:{r:0,g:0,b:0},RapidPurple:{r:140,g:5,b:177},BurstPink:{r:255,g:72,b:112},RapidUsed:{r:136,g:44,b:212},PushBox:{r:0,g:0,b:255},DrawBox:{r:255,g:165,b:0,o:.3},HitBoxUnused:{r:255,g:0,b:0},HitBoxConsumed:{r:255,g:0,b:255},ThrowableBox:{r:130,g:0,b:130},HurtBoxArmor:{r:30,g:30,b:30},HurtBoxAirArmor:{r:180,g:180,b:180},HurtBoxParry:{r:255,g:255,b:255},HurtBoxStun:{r:255,g:255,b:0},HurtBoxNormal:{r:100,g:255,b:100},HurtBoxRecovery:{r:0,g:128,b:128},RemoteOrigin:{r:0,g:255,b:255}},this.FirstToOptions=[1,2,3,4,5]}return Object(h.a)(e,[{key:"setAppAsStarted",value:function(){this.isAppStart=!1}},{key:"prettyControlsProp",value:function(e){var t;return(t={},Object(v.a)(t,te.left,"Left"),Object(v.a)(t,te.right,"Right"),Object(v.a)(t,te.attack1,"Light"),Object(v.a)(t,te.attack2,"Heavy"),Object(v.a)(t,te.attack3,"Special"),Object(v.a)(t,te.attack4,"Throw"),Object(v.a)(t,te.menu,"Pause"),t)[e]}},{key:"prettyControlsCode",value:function(e){if(e.includes("Vendor")){var t=e.split(" ")[0],n=e.split(",").slice(-1)[0];return"".concat(t,":").concat(n)}return e.includes("Key")?e.slice(3):""===e?"":e.length>12?e.slice(0,9)+"...":e}},{key:"prettyControls",value:function(e){var t=this;return e.map((function(e){return t.prettyControlsCode(e)})).join(" & ")||"-"}},{key:"prettyWins",value:function(e){return 1===e?e+" win":e+" wins"}},{key:"prettyFirstTo",value:function(e){return(2*e-1).toString()}},{key:"prettyRoundTime",value:function(e){return e===oe?"\u221e":e}}]),e}()),jn=new(function(){function e(){Object(l.a)(this,e),this.ModCodePrefix="mod_"}return Object(h.a)(e,[{key:"isModCode",value:function(e){return e.startsWith(this.ModCodePrefix)}},{key:"isModId",value:function(e){return e.startsWith(this.ModCodePrefix)}},{key:"isLocked",value:function(e){var t=vn.isDomainCanary||e.theme===kn.Theme||e.unlockSteam&&kn.Electron.isSteam(),n=[e.requireCode,e.requireMMR,e.requirePremium].some((function(e){return void 0!==e}));return!t&&n}}]),e}()),yn="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAYAAAB5fY51AAABJ2lDQ1BrQ0dDb2xvclNwYWNlQWRvYmVSR0IxOTk4AAAokWNgYFJILCjIYRJgYMjNKykKcndSiIiMUmB/xsDIwMnAx2DIIJ2YXFzgGBDgwwAEMBoVfLsGVA0El3VBZmHK4wVcKanFyUD6DxBnJxcUlTAwMGYA2crlJQUgdg+QLZKUDWYvALGLgA4EsreA2OkQ9gmwGgj7DlhNSJAzkP0ByOZLArOZQHbxpUPYAiA21F4QEHRMyU9KVQD5XsPQ0tJCk0Q/EAQlqRUlINo5v6CyKDM9o0TBERhSqQqeecl6OgpGBkZGDAygcIeo/hwIDk9GsTMIMQRAiM2RYGDwX8rAwPIHIWbSy8CwQIeBgX8qQkzNkIFBQJ+BYd+c5NKiMqgxjEzGDAyE+AAwgUpeJpFxiwAAAORlWElmTU0AKgAAAAgABwESAAMAAAABAAEAAAEaAAUAAAABAAAAYgEbAAUAAAABAAAAagEoAAMAAAABAAIAAAExAAIAAAAfAAAAcgEyAAIAAAAUAAAAkodpAAQAAAABAAAApgAAAAAAAAEsAAAAAQAAASwAAAABQWRvYmUgUGhvdG9zaG9wIDIyLjQgKFdpbmRvd3MpAAAyMDIxOjA2OjIwIDEzOjMyOjU5AAADkAQAAgAAABQAAADQoAIABAAAAAEAAAEsoAMABAAAAAEAAAEsAAAAADIwMjE6MDY6MjAgMTM6MzE6NDIAgSvruAAAAAlwSFlzAAAuIwAALiMBeKU/dgAAEkBpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IlhNUCBDb3JlIDUuNC4wIj4KICAgPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgICAgICAgICAgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iCiAgICAgICAgICAgIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIgogICAgICAgICAgICB4bWxuczpzdEV2dD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlRXZlbnQjIgogICAgICAgICAgICB4bWxuczpwaG90b3Nob3A9Imh0dHA6Ly9ucy5hZG9iZS5jb20vcGhvdG9zaG9wLzEuMC8iCiAgICAgICAgICAgIHhtbG5zOmV4aWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vZXhpZi8xLjAvIgogICAgICAgICAgICB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iCiAgICAgICAgICAgIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIKICAgICAgICAgICAgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iPgogICAgICAgICA8eG1wTU06RGVyaXZlZEZyb20gcmRmOnBhcnNlVHlwZT0iUmVzb3VyY2UiPgogICAgICAgICAgICA8c3RSZWY6aW5zdGFuY2VJRD54bXAuaWlkOjUxYzI1YjRjLWM3MWMtMTY0My1iMjNmLTc1NWU5MGEwYTI3Mjwvc3RSZWY6aW5zdGFuY2VJRD4KICAgICAgICAgICAgPHN0UmVmOm9yaWdpbmFsRG9jdW1lbnRJRD54bXAuZGlkOmJmYmJiMjgxLWNjZGUtYmU0YS1hMjUyLWQ4MTE1NDk3MDdiYjwvc3RSZWY6b3JpZ2luYWxEb2N1bWVudElEPgogICAgICAgICAgICA8c3RSZWY6ZG9jdW1lbnRJRD54bXAuZGlkOmJmYmJiMjgxLWNjZGUtYmU0YS1hMjUyLWQ4MTE1NDk3MDdiYjwvc3RSZWY6ZG9jdW1lbnRJRD4KICAgICAgICAgPC94bXBNTTpEZXJpdmVkRnJvbT4KICAgICAgICAgPHhtcE1NOkluc3RhbmNlSUQ+eG1wLmlpZDo3ZDczMTQ4OS00NzFlLTc1NDEtYmIxMy1kMDIxZDJhYzhiYjI8L3htcE1NOkluc3RhbmNlSUQ+CiAgICAgICAgIDx4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ+eG1wLmRpZDpiZmJiYjI4MS1jY2RlLWJlNGEtYTI1Mi1kODExNTQ5NzA3YmI8L3htcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD4KICAgICAgICAgPHhtcE1NOkRvY3VtZW50SUQ+YWRvYmU6ZG9jaWQ6cGhvdG9zaG9wOmRkZmUxYzQ5LTMyODctYmU0YS05ZjgwLTE1OTUzNTZhZjQ0MDwveG1wTU06RG9jdW1lbnRJRD4KICAgICAgICAgPHhtcE1NOkhpc3Rvcnk+CiAgICAgICAgICAgIDxyZGY6U2VxPgogICAgICAgICAgICAgICA8cmRmOmxpIHJkZjpwYXJzZVR5cGU9IlJlc291cmNlIj4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OnNvZnR3YXJlQWdlbnQ+QWRvYmUgUGhvdG9zaG9wIDIyLjQgKFdpbmRvd3MpPC9zdEV2dDpzb2Z0d2FyZUFnZW50PgogICAgICAgICAgICAgICAgICA8c3RFdnQ6d2hlbj4yMDIxLTA2LTIwVDEzOjMxOjQyKzAyOjAwPC9zdEV2dDp3aGVuPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6aW5zdGFuY2VJRD54bXAuaWlkOmJmYmJiMjgxLWNjZGUtYmU0YS1hMjUyLWQ4MTE1NDk3MDdiYjwvc3RFdnQ6aW5zdGFuY2VJRD4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OmFjdGlvbj5jcmVhdGVkPC9zdEV2dDphY3Rpb24+CiAgICAgICAgICAgICAgIDwvcmRmOmxpPgogICAgICAgICAgICAgICA8cmRmOmxpIHJkZjpwYXJzZVR5cGU9IlJlc291cmNlIj4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OnNvZnR3YXJlQWdlbnQ+QWRvYmUgUGhvdG9zaG9wIDIyLjQgKFdpbmRvd3MpPC9zdEV2dDpzb2Z0d2FyZUFnZW50PgogICAgICAgICAgICAgICAgICA8c3RFdnQ6Y2hhbmdlZD4vPC9zdEV2dDpjaGFuZ2VkPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6d2hlbj4yMDIxLTA2LTIwVDEzOjMxOjU3KzAyOjAwPC9zdEV2dDp3aGVuPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6aW5zdGFuY2VJRD54bXAuaWlkOjNiNDQxNGU3LTQ2ZGUtYjA0OS1iNDk5LTI1ODA2YjBkYjdiMTwvc3RFdnQ6aW5zdGFuY2VJRD4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OmFjdGlvbj5zYXZlZDwvc3RFdnQ6YWN0aW9uPgogICAgICAgICAgICAgICA8L3JkZjpsaT4KICAgICAgICAgICAgICAgPHJkZjpsaSByZGY6cGFyc2VUeXBlPSJSZXNvdXJjZSI+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDpzb2Z0d2FyZUFnZW50PkFkb2JlIFBob3Rvc2hvcCAyMi40IChXaW5kb3dzKTwvc3RFdnQ6c29mdHdhcmVBZ2VudD4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OmNoYW5nZWQ+Lzwvc3RFdnQ6Y2hhbmdlZD4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OndoZW4+MjAyMS0wNi0yMFQxMzozMjo1OSswMjowMDwvc3RFdnQ6d2hlbj4KICAgICAgICAgICAgICAgICAgPHN0RXZ0Omluc3RhbmNlSUQ+eG1wLmlpZDo1MWMyNWI0Yy1jNzFjLTE2NDMtYjIzZi03NTVlOTBhMGEyNzI8L3N0RXZ0Omluc3RhbmNlSUQ+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDphY3Rpb24+c2F2ZWQ8L3N0RXZ0OmFjdGlvbj4KICAgICAgICAgICAgICAgPC9yZGY6bGk+CiAgICAgICAgICAgICAgIDxyZGY6bGkgcmRmOnBhcnNlVHlwZT0iUmVzb3VyY2UiPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6YWN0aW9uPmNvbnZlcnRlZDwvc3RFdnQ6YWN0aW9uPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6cGFyYW1ldGVycz5mcm9tIGFwcGxpY2F0aW9uL3ZuZC5hZG9iZS5waG90b3Nob3AgdG8gaW1hZ2UvcG5nPC9zdEV2dDpwYXJhbWV0ZXJzPgogICAgICAgICAgICAgICA8L3JkZjpsaT4KICAgICAgICAgICAgICAgPHJkZjpsaSByZGY6cGFyc2VUeXBlPSJSZXNvdXJjZSI+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDphY3Rpb24+ZGVyaXZlZDwvc3RFdnQ6YWN0aW9uPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6cGFyYW1ldGVycz5jb252ZXJ0ZWQgZnJvbSBhcHBsaWNhdGlvbi92bmQuYWRvYmUucGhvdG9zaG9wIHRvIGltYWdlL3BuZzwvc3RFdnQ6cGFyYW1ldGVycz4KICAgICAgICAgICAgICAgPC9yZGY6bGk+CiAgICAgICAgICAgICAgIDxyZGY6bGkgcmRmOnBhcnNlVHlwZT0iUmVzb3VyY2UiPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6c29mdHdhcmVBZ2VudD5BZG9iZSBQaG90b3Nob3AgMjIuNCAoV2luZG93cyk8L3N0RXZ0OnNvZnR3YXJlQWdlbnQ+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDpjaGFuZ2VkPi88L3N0RXZ0OmNoYW5nZWQ+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDp3aGVuPjIwMjEtMDYtMjBUMTM6MzI6NTkrMDI6MDA8L3N0RXZ0OndoZW4+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDppbnN0YW5jZUlEPnhtcC5paWQ6N2Q3MzE0ODktNDcxZS03NTQxLWJiMTMtZDAyMWQyYWM4YmIyPC9zdEV2dDppbnN0YW5jZUlEPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6YWN0aW9uPnNhdmVkPC9zdEV2dDphY3Rpb24+CiAgICAgICAgICAgICAgIDwvcmRmOmxpPgogICAgICAgICAgICA8L3JkZjpTZXE+CiAgICAgICAgIDwveG1wTU06SGlzdG9yeT4KICAgICAgICAgPHBob3Rvc2hvcDpDb2xvck1vZGU+MzwvcGhvdG9zaG9wOkNvbG9yTW9kZT4KICAgICAgICAgPHBob3Rvc2hvcDpJQ0NQcm9maWxlPkFkb2JlIFJHQiAoMTk5OCk8L3Bob3Rvc2hvcDpJQ0NQcm9maWxlPgogICAgICAgICA8cGhvdG9zaG9wOlRleHRMYXllcnM+CiAgICAgICAgICAgIDxyZGY6QmFnPgogICAgICAgICAgICAgICA8cmRmOmxpIHJkZjpwYXJzZVR5cGU9IlJlc291cmNlIj4KICAgICAgICAgICAgICAg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",xn=n(191);function On(){var e=Object(xn.a)();return e?{name:e.name,os:e.os,version:e.version,isNotRecommended:["firefox"].includes(e.name)}:void 0}var wn=kn.Debug.ShowLogs&&!kn.isTest?console.log.bind(window.console):function(){},Sn=n(104),Cn=n.n(Sn),An="-----BEGIN PUBLIC KEY-----\nMIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQCUIDuJHq/4ztsyLgsPkP1cV7kQ\nyxPyUxqfKyQhnSogwFoixWl3z1nQ8UHUNRIJdvBP+S0z1heGvkP1f+c7EjuivuNm\ne2eKRObfWTZGBpzSCLuJTPJWJvoT96KRowcgT3mF44POgUmXUHN7YNze/FkatZ7u\n5rLy/W4r0dMexx3C5QIDAQAB\n-----END PUBLIC KEY-----",Tn=function(){function e(t){if(Object(l.a)(this,e),this.jwt=void 0,this.token=void 0,this.jwt=t,this.token=Cn.a.verify(t,An),"auth"!==this.token.type)throw new Error("wrong token type")}return Object(h.a)(e,[{key:"email",value:function(){return this.token.email}}]),e}(),Mn=function(){function e(t){Object(l.a)(this,e),this.jwt=void 0,this.account=void 0,this.jwt=t;var n=Cn.a.verify(t,An);if("account"!==n.type)throw new Error("wrong token type");this.account=Object(g.a)(Object(g.a)({},S()),n.account)}return Object(h.a)(e,[{key:"aid",value:function(){return this.account.aid}},{key:"isAnon",get:function(){return!!this.account.isAnon}},{key:"isPaid",value:function(){return this.account.paid}},{key:"isVip",value:function(){return this.account.vip}},{key:"unlocksCode",value:function(e){return this.getFlavors().includes(e)}},{key:"unlocksMMR",value:function(e){var t=e.stats.flavor.requireMMR,n=this.getCharacterMMR(e.stats.code);return!!t&&!!n&&n.peak>=t}},{key:"getTag",value:function(){return this.account.display}},{key:"getNameWithoutHash",value:function(){var e=this.getTag().split(" #");return e.pop(),e.join(" #")}},{key:"getFavoriteId",value:function(){return this.account.favoriteId||void 0}},{key:"getFlavors",value:function(){var e;return null!==(e=this.account.flavors)&&void 0!==e?e:[]}},{key:"getCharacterMMR",value:function(e){return this.account.rank_b1[e]}},{key:"getCharacterMMROrDefault",value:function(e){var t;return null!==(t=this.getCharacterMMR(e))&&void 0!==t?t:C()}},{key:"getCharacterRanks",value:function(){var e=this.account.rank_b1;return Object.keys(e).map((function(t){return Object(g.a)(Object(g.a)({},e[t]),{},{code:t})}))}},{key:"filterUnranked",value:function(e){return e.filter((function(e){return e.peak>0}))}},{key:"getBestRankByPeak",value:function(){var e=this.getCharacterRanks();return Et(this.filterUnranked(e),(function(e){return e.peak})).reverse()[0]}},{key:"canUnlock",value:function(e){if(e.stats.isBoss)return!!this.account.unlocked[e.stats.code];if(jn.isLocked(e.stats.flavor)){var t=e.stats.flavor;return!!(t.requireCode&&this.unlocksCode(t.requireCode)||t.requireMMR&&this.unlocksMMR(e)||t.requirePremium&&(this.isPaid()||this.isVip()))}return!0}}],[{key:"tryParse",value:function(t){if(t)try{return new e(t)}catch(n){return}}}]),e}(),Pn=Object(h.a)((function e(t){Object(l.a)(this,e),this.jwt=void 0,this.auth=void 0,this.account=void 0,this.isReal=!0,this.isAnon=!1,this.jwt=t,this.auth=new Tn(t.auth),this.account=new Mn(t.account)})),Rn=Object(h.a)((function e(t){Object(l.a)(this,e),this.jwt=void 0,this.account=void 0,this.isReal=!1,this.isAnon=!0,this.jwt=t,this.account=new Mn(t.account)})),In=function(e){return e.GenericWarning="warning",e.CharMissing="fighter_missing",e.ModMissing="mod_missing",e}({}),Bn=function(){function e(t){Object(l.a)(this,e),this.message=t,this.warningType=In.GenericWarning}return Object(h.a)(e,[{key:"toString",value:function(){return"[".concat(this.warningType,"] ").concat(this.message)}},{key:"toError",value:function(){return new Error(this.toString())}}],[{key:"is",value:function(e){return e instanceof this}}]),e}(),Dn=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).warningType=In.CharMissing,e}return Object(h.a)(n)}(Bn),Hn=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).warningType=In.ModMissing,e}return Object(h.a)(n)}(Bn),En=function(){function e(t,n,a){var r=this;Object(l.a)(this,e),this.debugId=void 0,this.value=void 0,this.retries=-1,this.loaded=void 0,this.debugId=t,this.value=n,this.loaded=new Promise(function(){var e=Object(u.a)(Object(c.a)().mark((function e(n,i){var o;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,an((function(){return r.retries++,a()}),{retries:3,cooldownMs:500});case 3:o=e.sent,r.value=o,e.next=10;break;case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",i("retries: ".concat(r.retries," | asset not found: ").concat(t)));case 10:if(!(r.retries<0)){e.next=12;break}return e.abrupt("return",i("invalid number of loading retries"));case 12:return r.retries>0&&wn("asset loading required retries!",r.retries,r.debugId),e.abrupt("return",n({success:!0,retries:r.retries}));case 14:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}())}return Object(h.a)(e,[{key:"get",value:function(){return this.value}}],[{key:"combineInfos",value:function(e){return{success:e.every((function(e){return e.success})),retries:Wt(e.map((function(e){return e.retries})))}}}]),e}(),_n=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(e,a){return Object(l.a)(this,n),t.call(this,e,n.placeholder,a)}return Object(h.a)(n,[{key:"loadMirror",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(){var t,a,r,i;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loaded;case 2:return t=document.createElement("canvas"),a=t.getContext("2d"),r=this.get(),t.width=r.width,t.height=r.height,a.translate(r.width,0),a.scale(-1,1),a.drawImage(r,0,0),i=n.loadImage(t.toDataURL()),t.remove(),e.abrupt("return",i);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}],[{key:"loadImage",value:function(e,t){var n=document.createElement("img"),a=new Promise((function(t,a){n.onload=function(){return t()},n.onerror=function(){return a("image url not found: "+e)}}));return t&&(n.crossOrigin="Anonymous"),n.src=e,a.then((function(){return n}))}},{key:"fromUrl",value:function(e,t){return new n(e,(function(){return n.loadImage(e,t)}))}},{key:"createMirror",value:function(e){return new n("mirror-".concat(e.debugId),(function(){return e.loadMirror()}))}}]),n}(En);_n.placeholder=function(){var e=document.createElement("img");return e.src=yn,e}();var Fn=Object(h.a)((function e(t){Object(l.a)(this,e),this.dx=void 0,this.dy=void 0,this.juggles=void 0,this.canRelaunch=void 0,this.nextHitSetsAngle=void 0,this.skipStartupAnimation=void 0;var n=kn.ScreenWidth/100;this.dx=t.dx*n,this.dy=t.dy*n,this.juggles=t.juggles,this.canRelaunch=t.canRelaunch,this.nextHitSetsAngle=t.nextHitSetsAngle,this.skipStartupAnimation=t.skipStartupAnimation})),Ln=Object(h.a)((function e(t,n){Object(l.a)(this,e),this.data=void 0,this.seqData=void 0,this.pushback=void 0,this.tumble=void 0,this.tumbleOnAirborne=void 0,this.tumbleOnTumbling=void 0,this.data=t,this.seqData=n,this.pushback=t.pushback*kn.CharacterSize.x,this.tumble=t.tumble&&new Fn(t.tumble),this.tumbleOnAirborne=t.tumbleOnAirborne&&new Fn(t.tumbleOnAirborne),this.tumbleOnTumbling=t.tumbleOnTumbling&&new Fn(t.tumbleOnTumbling)})),Gn=function(){function e(t,n,a,r,i){Object(l.a)(this,e),this.bp=void 0,this.hitboxes=void 0,this.snapTowards=void 0,this.consumedCallback=void 0,this.bp=t,this.hitboxes=t.data.hitboxes.map((function(e){return n.scale(e).position(a,r)})),this.snapTowards=t.data.snapTowards?n.scale({center:t.data.snapTowards.center,size:{x:0,y:0}}).position(a,r).center:void 0,this.consumedCallback=i}return Object(h.a)(e,[{key:"setConsumed",value:function(e){this.consumedCallback(e)}}]),e}(),zn=n(197),Wn=kn.isTest?{}:new zn.a;function Nn(){return(Nn=Object(u.a)(Object(c.a)().mark((function e(t){var n,a,r;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!kn.isTest){e.next=2;break}return e.abrupt("return",Promise.resolve({}));case 2:return e.next=4,fetch(t);case 4:return n=e.sent,e.next=7,n.arrayBuffer();case 7:return a=e.sent,e.next=10,Wn.decodeAudioData(a);case 10:return r=e.sent,e.abrupt("return",r);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Un(){if(kn.isTest){var e={value:0,setValueAtTime:function(t){return e.value=t}};return{gain:e}}var t=Wn.createGain();return t.connect(Wn.destination),t}var qn=Un(),Vn=Un(),Yn=Un();function Jn(e,t){e.gain.setValueAtTime(t,Wn.currentTime)}var Kn,Qn,Zn,Xn,$n=new(function(){function e(){Object(l.a)(this,e),this.screenCenter=0,this.screenLeft=0,this.screenRight=0,this.screenIsLeft=!0,this.maxMoveDelta=kn.ScreenWidth/200,this.updateCenter(kn.ScreenTotalWidth/2)}return Object(h.a)(e,[{key:"updateCenter",value:function(e,t){var n=Math.floor(kn.ScreenWidth/2);e=Math.max(e,0+n);var a=(e=Math.min(e,kn.ScreenTotalWidth-n))-this.screenCenter;t&&(a=Math.min(a,this.maxMoveDelta),a=Math.max(a,0-this.maxMoveDelta)),this.screenCenter=Math.floor(this.screenCenter+a),this.screenLeft=this.screenCenter-n,this.screenRight=this.screenCenter+n,this.screenIsLeft=this.screenCenter<kn.ScreenTotalWidth/2}}]),e}()),ea=function(){function e(t){Object(l.a)(this,e),this.center=void 0,this.size=void 0,this.center=Object(g.a)({},t.center),this.size=Object(g.a)({},t.size)}return Object(h.a)(e,[{key:"getSides",value:function(){var e=this.center,t=this.size;return{left:e.x-t.x/2,right:e.x+t.x/2,top:e.y-t.y/2,bottom:e.y+t.y/2}}},{key:"touches",value:function(e){var t=Jt(this.center,e.center),n=this.getSides(),a=e.getSides();return t||!(n.right<a.left||a.right<n.left||n.bottom<a.top||a.bottom<n.top)}},{key:"getHorizontalOverlap",value:function(e){var t=this.getSides(),n=e.getSides();return t.left<n.left?t.right-n.left:n.left<t.left?n.right-t.left:Math.min(this.size.x,e.size.x)/2}},{key:"calcLocalFacing",value:function(e,t){var n=this.getSides(),a=e.getSides();return t?!(a.left<n.left&&a.right<n.right):n.left<a.left&&n.right<a.right}}]),e}(),ta=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(e,a){var r;return Object(l.a)(this,n),(r=t.call(this,e)).facingRight=void 0,r.facingRight=a,r}return Object(h.a)(n)}(ea),na=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"scale",value:function(e){return new n({center:{x:this.center.x+this.size.x*e.center.x,y:this.center.y+this.size.y*e.center.y},size:{x:this.size.x*e.size.x,y:this.size.y*e.size.y}})}},{key:"position",value:function(e,t){var n=this.center,a=this.size;return t||(n=Object(g.a)(Object(g.a)({},n),{},{x:-1*n.x})),new ta({center:{x:n.x+e.x,y:n.y+e.y},size:a},t)}},{key:"clone",value:function(){return new n({center:this.center,size:this.size})}},{key:"cloneOnScreen",value:function(e,t){var a=this.position(e,t),r=this.center,i=this.size,o=i.x/2,s=a.center.x;s=Math.max(s,$n.screenLeft+o),s=Math.min(s,$n.screenRight-o);var c=(t?1:-1)*(a.center.x-s);return new n({center:Object(g.a)(Object(g.a)({},r),{},{x:r.x-c}),size:Object(g.a)({},i)})}},{key:"cloneOnStage",value:function(e,t){var a=this.position(e,t),r=this.center,i=this.size,o=i.x/2,s=a.center.x;s=Math.max(s,0+o),s=Math.min(s,kn.ScreenTotalWidth-o);var c=(t?1:-1)*(a.center.x-s);return new n({center:Object(g.a)(Object(g.a)({},r),{},{x:r.x-c}),size:Object(g.a)({},i)})}}]),n}(ea),aa=function(){function e(){Object(l.a)(this,e),this.state={combo:void 0,stale:!0,ticksSinceHit:0,ticksRemaining:0},this.TTL=1*kn.FPS}return Object(h.a)(e,[{key:"step",value:function(e){e.count>1||e.isAntiAir||e.counterhit||e.punish?(!this.state.combo||e.count>this.state.combo.count?this.state.ticksSinceHit=0:this.state.ticksSinceHit=this.state.ticksSinceHit+1,this.state.combo=Object(g.a)({},e),this.state.stale=!1,this.state.ticksRemaining=this.TTL):(this.state.ticksSinceHit=this.state.ticksSinceHit+1,this.state.stale=!0,this.state.ticksRemaining=Math.max(0,this.state.ticksRemaining-1),0===this.state.ticksRemaining&&(this.state.combo=void 0))}},{key:"getState",value:function(){return this.state}},{key:"loadState",value:function(e){e&&(this.state=e)}}]),e}(),ra=function(){function e(){Object(l.a)(this,e),this.normalInputBase=4,this.normalInputLength=6,this.compressInputBase=36,this.compressInputLength=(Math.pow(this.normalInputBase,this.normalInputLength)-1).toString(this.compressInputBase).length}return Object(h.a)(e,[{key:"compressInput",value:function(e){var t=[e.left,e.right,e.attack1,e.attack2,e.attack3,e.attack4].map((function(e){return(e===Re.Press?"1":e===Re.Hold&&"2")||e===Re.Release&&"3"||"0"}));return parseInt(t.join(""),this.normalInputBase).toString(this.compressInputBase).padStart(this.compressInputLength,"0")}},{key:"decompressInput",value:function(e){var t=parseInt(e,this.compressInputBase).toString(this.normalInputBase).padStart(this.normalInputLength,"0").split("").map((function(e){return"1"===e&&Re.Press||"2"===e&&Re.Hold||"3"===e&&Re.Release||Re.Unused}));return{left:t[0],right:t[1],attack1:t[2],attack2:t[3],attack3:t[4],attack4:t[5],menu:Re.Unused}}},{key:"compressMany",value:function(e){var t=this;return e.map((function(e){return t.compressInput(e)})).join("")}},{key:"decompressMany",value:function(e){var t=this;return function(e,t){for(var n=[],a=0;a<e.length;)n.push(e.slice(a,a+t)),a+=t;return n}(e.split(""),this.compressInputLength).map((function(e){return t.decompressInput(e.join(""))}))}}]),e}(),ia=new(function(){function e(){Object(l.a)(this,e)}return Object(h.a)(e,[{key:"isKaraInput",value:function(e,t){var n=e[0],a=t[0],r=e.slice(1);return!(t.slice(1)!==r)&&("5"===n&&"5"!==a)}},{key:"getUnusedController",value:function(){return{left:Re.Unused,right:Re.Unused,attack1:Re.Unused,attack2:Re.Unused,attack3:Re.Unused,attack4:Re.Unused,menu:Re.Unused}}},{key:"configIsInvalid",value:function(e){return Bn.is(e.fighter1)||Bn.is(e.fighter2)}},{key:"replayIsInvalid",value:function(e){return this.configIsInvalid(e.gameConfig)}},{key:"isOnline",value:function(e){return e.isCasual||e.isRanked||e.isPrivate||e.isLobbyPlaying||e.isLobbySpectator}},{key:"getAllSequences",value:function(e){return[].concat(Object(k.a)(Object.values(e.actions)),Object(k.a)(e.attacks),Object(k.a)(Vt(e.projectiles.map((function(e){return Bt([e.sequence,e.onBlock,e.onHit])})))))}}]),e}()),oa=function(){function e(t){Object(l.a)(this,e),this.state=ia.getUnusedController(),t&&(this.state=t)}return Object(h.a)(e,[{key:"onlyMovement",value:function(){return new e(this.state&&Object(g.a)(Object(g.a)({},this.state),{},{attack1:Re.Unused,attack2:Re.Unused,attack3:Re.Unused}))}},{key:"getInput",value:function(e){var t="5";return this.isMovingLeft()&&(t=e?"4":"6"),this.isMovingRight()&&(t=e?"6":"4"),this.isAttacking1()&&(t+="a"),this.isAttacking2()&&(t+="b"),this.isAttacking3()&&(t+="c"),this.isAttacking4()&&(t+="d"),t}},{key:"isMovingLeft",value:function(){return[Re.Press,Re.Hold].includes(this.state.left)&&![Re.Press,Re.Hold].includes(this.state.right)}},{key:"isMovingRight",value:function(){return[Re.Press,Re.Hold].includes(this.state.right)&&![Re.Press,Re.Hold].includes(this.state.left)}},{key:"isAttacking1",value:function(){return!this.isAttacking2()&&!this.isAttacking3()&&!this.isAttacking4()&&this.state.attack1===Re.Press}},{key:"isAttacking2",value:function(){return!this.isAttacking3()&&!this.isAttacking4()&&this.state.attack2===Re.Press}},{key:"isAttacking3",value:function(){return!this.isAttacking4()&&this.state.attack3===Re.Press}},{key:"isAttacking4",value:function(){return this.state.attack4===Re.Press}},{key:"isAttacking",value:function(){return this.isAttacking1()||this.isAttacking2()||this.isAttacking3()||this.isAttacking4()}},{key:"isThrowTeching",value:function(){return this.isAttacking4()}},{key:"isMovingForward",value:function(e){return"6"===this.getInput(e)[0]}},{key:"isMovingBackward",value:function(e){return"4"===this.getInput(e)[0]}},{key:"isEmpty",value:function(){return"5"===this.getInput(!0)}},{key:"mergePrevState",value:function(e){e&&([Re.Press,Re.Hold].includes(e.left)&&(this.state.left=e.left),[Re.Press,Re.Hold].includes(e.right)&&(this.state.right=e.right),e.attack1===Re.Press&&(this.state.attack1=e.attack1),e.attack2===Re.Press&&(this.state.attack2=e.attack2),e.attack3===Re.Press&&(this.state.attack3=e.attack3),e.attack4===Re.Press&&(this.state.attack4=e.attack4))}},{key:"getState",value:function(){return this.state}},{key:"loadState",value:function(e){e&&(this.state=e)}}],[{key:"parseInput",value:function(e,t){var n=ia.getUnusedController();return t.includes("6")&&(e?n.right=Re.Press:n.left=Re.Press),t.includes("4")&&(e?n.left=Re.Press:n.right=Re.Press),t.includes("a")&&(n.attack1=Re.Press),t.includes("b")&&(n.attack2=Re.Press),t.includes("c")&&(n.attack3=Re.Press),t.includes("d")&&(n.attack4=Re.Press),n}},{key:"equalState",value:function(e,t){return e&&t&&e.left===t.left&&e.right===t.right&&e.attack1===t.attack1&&e.attack2===t.attack2&&e.attack3===t.attack3&&e.attack4===t.attack4}}]),e}(),sa=function(){function e(){Object(l.a)(this,e),this.defaultBuffer={attack1:0,attack2:0,attack3:0,attack4:0},this.buffer=Object(g.a)({},this.defaultBuffer),this.state=ia.getUnusedController()}return Object(h.a)(e,[{key:"step",value:function(e,t){var n=this.buffer,a=this.state,r=a.attack1;n.attack1>0?n.attack1-=1:(r=e.attack1)===Re.Press&&(n.attack1=t);var i=a.attack2;n.attack2>0?n.attack2-=1:(i=e.attack2)===Re.Press&&(n.attack2=t);var o=a.attack3;n.attack3>0?n.attack3-=1:(o=e.attack3)===Re.Press&&(n.attack3=t);var s=a.attack4;n.attack4>0?n.attack4-=1:(s=e.attack4)===Re.Press&&(n.attack4=t),this.state={left:e.left,right:e.right,attack1:r,attack2:i,attack3:o,attack4:s,menu:e.menu}}},{key:"getState",value:function(){return Object(g.a)({},this.state)}},{key:"reset",value:function(){this.buffer=Object(g.a)({},this.defaultBuffer),this.state=ia.getUnusedController()}}]),e}(),ca=function(){function e(t){var n=this;Object(l.a)(this,e),this.controls=t,this.allCodes=void 0,this.allCodes=new Set;for(var a=0,r=Object.entries(t);a<r.length;a++){r[a][1].forEach((function(e){n.allCodes.add(e)}))}}return Object(h.a)(e,[{key:"equal",value:function(e,t){var n=new Set(e),a=new Set(t);return n.size===a.size&&e.every((function(e){return a.has(e)}))}},{key:"left",value:function(e){return this.equal(this.controls.left,[e])}},{key:"right",value:function(e){return this.equal(this.controls.right,[e])}},{key:"attack1",value:function(e){return this.equal(this.controls.attack1,[e])}},{key:"attack2",value:function(e){return this.equal(this.controls.attack2,[e])}},{key:"attack3",value:function(e){return this.equal(this.controls.attack3,[e])}},{key:"attack4",value:function(e){return this.equal(this.controls.attack4,[e])}},{key:"menu",value:function(e){return this.equal(this.controls.menu,[e])}},{key:"includes",value:function(e){return this.allCodes.has(e)}}]),e}(),ua=Object(h.a)((function e(t){var n=this;Object(l.a)(this,e),this.p1=void 0,this.p2=void 0,this.either={left:function(e){return n.p1.left(e)||n.p2.left(e)},right:function(e){return n.p1.right(e)||n.p2.right(e)},attack1:function(e){return n.p1.attack1(e)||n.p2.attack1(e)},attack2:function(e){return n.p1.attack2(e)||n.p2.attack2(e)},attack3:function(e){return n.p1.attack3(e)||n.p2.attack3(e)},attack4:function(e){return n.p1.attack4(e)||n.p2.attack4(e)},menu:function(e){return n.p1.menu(e)||n.p2.menu(e)},includes:function(e){return n.p1.includes(e)||n.p2.includes(e)}},this.p1=new ca(t[re.left]),this.p2=new ca(t[re.right])})),la=function(){function e(){Object(l.a)(this,e),this.recordsByIndex={},this.unorderedRecords=[],this.maxIndex=-1,this.missingIndexes=new Set}return Object(h.a)(e,[{key:"has",value:function(e){return void 0!==this.recordsByIndex[e+""]}},{key:"get",value:function(e){var t=this.recordsByIndex[e+""];return t?Object(g.a)(Object(g.a)({},t),{},{value:Kt(t.value)}):{index:e,value:void 0}}},{key:"predict",value:function(e){for(var t=0;t<kn.FPS;t++){var n=e-t,a=this.get(n);if(void 0!==a.value)return a}return this.get(e)}},{key:"set",value:function(e,t){if(e<0)throw new Error("cannot have negative history");var n={index:e,value:Kt(t)},a=this.recordsByIndex[e.toString()];if(a)a.value=n.value;else{for(var r=this.maxIndex+1;r<e;r++)this.missingIndexes.add(r);this.missingIndexes.delete(e),this.unorderedRecords.push(n),this.recordsByIndex[e.toString()]=n,this.maxIndex=Math.max(this.maxIndex,e)}}},{key:"prune",value:function(e){var t=this.unorderedRecords.filter((function(t){return t.index>=e}));t.length<this.unorderedRecords.length&&(this.unorderedRecords=t,this.recordsByIndex=Mt(t,(function(e){return e.index.toString()})),this.maxIndex=t.length>0?Math.max.apply(Math,Object(k.a)(t.map((function(e){return e.index})))):0)}},{key:"latest",value:function(){return this.get(this.maxIndex)}},{key:"size",value:function(){return this.unorderedRecords.length}},{key:"missing",value:function(){return this.missingIndexes}},{key:"normalizeRecords",value:function(e,t){var n=this;return Ft(t-e+1).map((function(t){return n.get(t+e)}))}},{key:"exportFull",value:function(){return this.normalizeRecords(0,this.maxIndex).map((function(e){return e.value}))}},{key:"slice",value:function(e,t){return this.normalizeRecords(e,t)}},{key:"sliceValues",value:function(e,t){return this.normalizeRecords(e,t).map((function(e){return e.value}))}}]),e}(),ha=function(){function e(t){Object(l.a)(this,e),this.source=void 0,this.source=t}return Object(h.a)(e,[{key:"read",value:function(){var e=this.source.getGamepads(),t=[],n=[];return Array.from(e).forEach((function(e,a){e&&(e.axes.forEach((function(r,i){var o="".concat(a,",").concat(e.id,",p:").concat(i),s="".concat(a,",").concat(e.id,",n:").concat(i),c=r>.5,u=r<-.5;o.toLowerCase().includes("razer panthera")&&(c=.2<r&&r<1.2,u=-1<r&&r<0),o.toLowerCase().includes("qanba joystick plus")&&(c=-.8<r&&r<-.15,u=.42<r&&r<1.1),o.toLowerCase().includes("drone")&&(c=-.43<r&&r<-.42,u=.71<r&&r<.72),c?t.push(o):n.push(o),u?t.push(s):n.push(s)})),e.buttons.forEach((function(r,i){var o="".concat(a,",").concat(e.id,",b:").concat(i);r.pressed?t.push(o):n.push(o)})))})),{pressed:t,released:n}}}],[{key:"fromWindow",value:function(){return new e(kn.isTest?{getGamepads:function(){return[]}}:navigator)}}]),e}(),da=new(function(){function e(){Object(l.a)(this,e)}return Object(h.a)(e,[{key:"default",value:function(){return this.firstTo(kn.Debug.FirstToOne?1:2)}},{key:"firstTo",value:function(e){return{firstTo:e,rounds:[]}}},{key:"getWinner",value:function(e){var t=e.rounds.filter((function(e){return[j.Player1,j.Draw].includes(e.winner)})).length,n=e.rounds.filter((function(e){return[j.Player2,j.Draw].includes(e.winner)})).length;return t===n&&t>=e.firstTo?j.Draw:t>n&&t>=e.firstTo?j.Player1:t<n&&n>=e.firstTo?j.Player2:void 0}},{key:"isAllPerfect",value:function(e){return e.rounds.length===e.firstTo&&e.rounds.every((function(e){return e.finish===Pe.Perfect}))}}]),e}()),pa=n(50),fa=n.n(pa),ba=17,ga={center:{x:0,y:-.32},size:{x:1,y:1.3*kn.CharacterSpriteHeightScale}},ma={center:{x:0,y:-.32},size:{x:1,y:1.3*kn.CharacterSpriteHeightScale}},va={center:{x:0,y:-.16},size:{x:1,y:1.4*kn.CharacterSpriteHeightScale}},ka={center:{x:0,y:-.32},size:{x:1,y:1.3*kn.CharacterSpriteHeightScale}},ja={jumpSmoke:{seqid:E.JumpSmoke,frames:[{sprite:"fx_jumpsmoke_0001",duration:6},{sprite:"fx_jumpsmoke_0002",duration:6},{sprite:"fx_jumpsmoke_0003",duration:6}]},landSmoke:{seqid:E.LandSmoke,frames:[{sprite:"fx_landsmoke_0001",behind:"fx_landsmoke_behind_0001",duration:6},{sprite:"fx_landsmoke_0002",behind:"fx_landsmoke_behind_0002",duration:6},{sprite:"fx_landsmoke_0003",behind:"fx_landsmoke_behind_0003",duration:6}]},landSpark:{seqid:E.LandSpark,frames:[{sprite:"fx_landspark_0001",behind:"fx_landspark_behind_0001",duration:6},{sprite:"fx_landspark_0002",behind:"fx_landspark_behind_0002",duration:6},{sprite:"fx_landspark_0003",behind:"fx_landspark_behind_0003",duration:6}]},rejectionFx:{seqid:E.RejectionFx,frames:["fx_reject_0001","fx_reject_0002","fx_reject_0003","fx_reject_0004","fx_reject_0005","fx_reject_0006","fx_reject_0007","fx_reject_0008","fx_reject_0009","fx_reject_0011","fx_reject_0011"].map((function(e){return{sprite:void 0,behind:e,duration:5,drawBox:ga}}))},rapidFx:{seqid:E.RapidFx,drawBox:ma,frames:[{sprite:void 0,behind:"fx_rapid_0001",duration:5},{sprite:void 0,behind:"fx_rapid_0002",duration:5},{sprite:void 0,behind:"fx_rapid_0003",duration:5},{sprite:void 0,behind:"fx_rapid_0004",duration:5},{sprite:void 0,behind:"fx_rapid_0005",duration:5},{sprite:void 0,behind:"fx_rapid_0006",duration:5}]},burstFx:{seqid:E.BurstFx,drawBox:va,frames:[{sprite:void 0,behind:"fx_burst_0001",duration:5},{sprite:void 0,behind:"fx_burst_0002",duration:5},{sprite:void 0,behind:"fx_burst_0003",duration:5},{sprite:void 0,behind:"fx_burst_0004",duration:5},{sprite:void 0,behind:"fx_burst_0005",duration:5},{sprite:void 0,behind:"fx_burst_0006",duration:5},{sprite:void 0,behind:"fx_burst_0007",duration:5}]},DEPRECATED_deflectFx:{seqid:E.Deprecated_DeflectFx,drawBox:ka,frames:[{sprite:"fx_deflect_0001",duration:5},{sprite:"fx_deflect_0002",duration:5},{sprite:"fx_deflect_0003",duration:5},{sprite:"fx_deflect_0004",duration:5}]},cackleStartFx:{seqid:E.CackleStartFx,drawBox:ka,frames:[{sprite:"fx_deflect_0001",duration:5}]},cackleAttackFx:{seqid:E.CackleAttackFx,drawBox:ka,frames:[{sprite:"fx_deflect_0002",duration:5},{sprite:"fx_deflect_0003",duration:5},{sprite:"fx_deflect_0004",duration:5}]},sneakFx:{seqid:E.SneakFx,frames:[{sprite:"fx_sneak_0001",duration:5},{sprite:"fx_sneak_0002",duration:5},{sprite:"fx_sneak_0003",duration:5},{sprite:"fx_sneak_0004",duration:5},{sprite:"fx_sneak_0005",duration:15},{sprite:"fx_sneak_0006",duration:5},{sprite:"fx_sneak_0007",duration:5},{sprite:"fx_sneak_0008",duration:5}]},smallPuffFx:{seqid:E.SmallPuffFx,drawBox:ka,frames:[{sprite:"fx_sneak_0006",duration:5},{sprite:"fx_sneak_0007",duration:5},{sprite:"fx_sneak_0008",duration:5}]},smallPuffAirFx:{seqid:E.SmallPuffAirFx,drawBox:{center:{x:0,y:-.6},size:{x:1,y:1.3*kn.CharacterSpriteHeightScale}},frames:[{sprite:"fx_sneak_0006",duration:5},{sprite:"fx_sneak_0007",duration:5},{sprite:"fx_sneak_0008",duration:5}]},throwTechFx:{seqid:E.ThrowTechFx,drawBox:{center:{x:1,y:-.2},size:{x:1,y:1.4}},frames:[{mirrorImage:!0,sprite:"../sparks/fx_block_0001",duration:6},{mirrorImage:!0,sprite:"../sparks/fx_block_0002",duration:6},{mirrorImage:!0,sprite:"../sparks/fx_block_0003",duration:6}]}},ya=new(Object(h.a)((function e(){var t=this;Object(l.a)(this,e),this.Commands={throw:["4d","5d","6d"],rapid:["6d"],burst:["4d"],reject:["6d"]},this.FullBox={center:{x:0,y:0},size:{x:1,y:1}},this.HurtBox=Object(g.a)({},this.FullBox),this.LandingHurtBox=Object(g.a)(Object(g.a)({},this.FullBox),{},{size:{x:1.4,y:1}}),this.WalkBackwardThrowableBox={center:{x:.1,y:0},size:{x:1.2,y:1}},this.FallingHurtBox=Object(g.a)({},this.FullBox),this.AirborneHurtBox=Object(g.a)(Object(g.a)({},this.FallingHurtBox),{},{size:Object(g.a)({},kn.CharacterTumblingScale)}),this.JumpAttackHurtbox=Object(g.a)(Object(g.a)({},this.FallingHurtBox),{},{size:{x:1,y:.6}}),this.PushBox={center:{x:0,y:0},size:{x:1,y:3}},this.SkinnyPushBox={center:{x:0,y:0},size:{x:.6,y:3}},this.DrawBox={center:{x:0,y:-.21},size:{x:1,y:kn.CharacterSpriteHeightScale}},this.AirborneDrawBox={center:{x:0,y:0},size:{x:1,y:kn.CharacterSpriteHeightScale}},this.BossFullBox=Object(g.a)(Object(g.a)({},this.FullBox),{},{size:{x:1.4,y:1.4}}),this.BossHurtBox=Object(g.a)({},this.BossFullBox),this.BossFallingHurtBox=Object(g.a)({},this.BossHurtBox),this.BossAirborneHurtBox=Object(g.a)(Object(g.a)({},this.BossFallingHurtBox),{},{size:Object(g.a)({},this.AirborneHurtBox.size)}),this.BossPushBox={center:{x:0,y:0},size:{x:1,y:3}},this.BossDrawBox={center:{x:0,y:-.485},size:{x:1,y:1.4*kn.CharacterSpriteHeightScale}},this.BossAirborneDrawBox={center:{x:0,y:0},size:{x:1,y:1.4*kn.CharacterSpriteHeightScale}},this.JumpLandDuration=5,this.DownedWiggleDuration=5,this.DownedWiggleMixin1={duration:this.DownedWiggleDuration,hover:0},this.DownedWiggleMixin2={duration:this.DownedWiggleDuration,hover:0},this.DownedWiggleMixin3={duration:this.DownedWiggleDuration,hover:0},this.DownedGetupDuration=15,this.ThrowAttemptStartupDuration=5,this.ThrowAttemptAttackDuration=10,this.ThrowAttemptRecoveryDuration=10,this.ThrowHitStartupDuration=20,this.ThrowAttemptStartup={duration:this.ThrowAttemptStartupDuration},this.ThrowAttemptAttack=function(e){return{duration:t.ThrowAttemptAttackDuration,cancel:{duration:11,onHit:{auto:F.ThrowHit}},attack:{setStunPhase:kn.Phase.ThrowStunPhase,ignoreParry:!0,isThrowStart:!0,impactType:B.None,sameSide:!1,damage:0,meterGainAttackOnHit:0,blockstun:0,hitstun:30,hitboxes:[e],capture:!0,snapTo:{x:.8,y:0}}}},this.ThrowAttemptRecovery1={duration:this.ThrowAttemptRecoveryDuration/2},this.ThrowAttemptRecovery2={duration:this.ThrowAttemptRecoveryDuration/2},this.ThrowAttackHitStartup={duration:this.ThrowHitStartupDuration,slide:.01,pushboxes:[]},this.ThrowAttackHitLift={duration:5,pushboxes:[],attack:{stunPhase:kn.Phase.ThrowStunPhase,setStunPhase:kn.Phase.ThrowStunPhase,impactType:B.None,sameSide:!0,damage:0,meterGainAttackOnHit:0,onBlock:0,tumble:{dx:0,dy:0,juggles:1,canRelaunch:!0},capture:!0,snapTo:{x:.1,y:-.5},hitboxes:[{center:{x:0,y:0},size:{x:4,y:2}}]}},this.ThrowAttackHitLaunch={duration:5,pushboxes:[],attack:{stunPhase:kn.Phase.ThrowStunPhase,impactType:B.None,sameSide:!0,damage:.2,meterGainAttackOnHit:kn.MeterOneBar/2,onBlock:0,tumble:{dx:2,dy:.2,juggles:0,canRelaunch:!0,skipStartupAnimation:!0},hitboxes:[{center:{x:0,y:0},size:{x:4,y:2}}]}},this.ThrowAttackHitRecovery={duration:5},this.ThrowTechFrames=function(e){return[{sprite:e,_phase:kn.Phase.ThrowTechStunPhase,duration:5,sound:Se.MeterReject,attack:{impactType:B.None,damage:0,onHit:0,onBlock:0,pushback:1,stunPhase:kn.Phase.ThrowingPhase,setStunPhase:kn.Phase.ThrowTechStunPhase,hitboxes:[{center:{x:.5,y:0},size:{x:2,y:1}}]}},{sprite:e,_phase:kn.Phase.ThrowTechStunPhase,duration:1,particle:ja.throwTechFx}]},this.LandingFrame={sprite:"land_0001",isAirborne:!1,particle:ja.landSmoke,duration:this.JumpLandDuration,drawBox:this.DrawBox,hurtboxes:[this.LandingHurtBox],pushboxes:[this.PushBox]},this.Landing={frames:[this.LandingFrame]},this.Rapid=function(e){return{meterCost:kn.MeterForRapid,frames:[e.startup,e.active,e.hold1,e.hold2,e.hold3,e.hold4,e.recovery].map((function(e,t){var n;return 1===t&&(n=[M.RapidBackgroundPurple]),t>1&&(n=[M.RapidBackgroundBlack]),{sprite:e,duration:5,freezeOther:!0,sound:1===t?Se.MeterRapid:void 0,particle:1===t?ja.rapidFx:void 0,effects:n,hurtboxes:[],pushboxes:[]}}))}},this.Burst=function(e){return{meterCost:kn.MeterForBurst,next:F.Falling,isAirborne:!0,drawBox:ya.AirborneDrawBox,hurtboxes:[ya.AirborneHurtBox],frames:[{sprite:e.tweenIn,duration:5,hurtboxes:[],cannotBePushed:!0,hover:-.15},{sprite:e.rising1,duration:5,hurtboxes:[],cannotBePushed:!0,hover:-.1},{sprite:e.rising2,sound:Se.MeterBurst,duration:5,hurtboxes:[],cannotBePushed:!0,hover:-.08,effects:[M.BurstBackgroundIn]},{sprite:e.preburst,duration:5,hurtboxes:[],cannotBePushed:!0,hover:-.06,particle:ja.burstFx,effects:[M.BurstBackgroundPink]},{sprite:e.active,duration:2,hurtboxes:[],cannotBePushed:!0,attack:{ignoreArmor:!0,damage:0,onBlock:0,meterGainAttackOnBlock:0,meterGainAttackOnHit:0,meterGainDefendOnBlock:0,meterGainDefendOnHit:0,tumble:{dx:5,dy:-1,juggles:0,canRelaunch:!0},hitboxes:[{center:{x:0,y:0},size:{x:5,y:2}}]},effects:[M.BurstBackgroundPink]},{sprite:e.active,duration:3,effects:[M.BurstBackgroundPink]},{sprite:e.hold1,duration:5,effects:[M.BurstBackgroundPink]},{sprite:e.hold2,duration:5,effects:[M.BurstBackgroundPink]},{sprite:e.hold3,duration:5,effects:[M.BurstBackgroundPink]},{sprite:e.hold4,duration:5,effects:[M.BurstBackgroundOut]},{sprite:e.falling,duration:5,hover:.05}]}},this.Rejection=function(e){return{meterCost:kn.MeterForRejection,frames:[{effects:[M.RejectionBackgroundIn],sprite:e.startup1,duration:5,hurtboxes:[]},{effects:[M.RejectionBackgroundActive],particle:ja.rejectionFx,sprite:e.startup2,duration:1,hurtboxes:[]},{effects:[M.RejectionBackgroundActive],sprite:e.startup2,duration:4,hurtboxes:[]},{effects:[M.RejectionBackgroundActive],sprite:e.active,sound:Se.MeterReject,duration:5,hurtboxes:[],attack:{setStunPhase:"reject",hitstop:10,damage:0,pushback:1,onBlock:-2,meterGainAttackOnBlock:0,meterGainAttackOnHit:0,meterGainDefendOnBlock:0,meterGainDefendOnHit:0,tumble:{dx:1,dy:-.38,juggles:1,canRelaunch:!0},hitboxes:[{center:{x:1.4,y:0},size:{x:1.8,y:1}}]}},{effects:[M.RejectionBackgroundActive],sprite:e.recovery1,duration:5},{effects:[M.RejectionBackgroundActive],sprite:e.recovery2,duration:5},{effects:[M.RejectionBackgroundIn],sprite:e.recovery3,duration:5}]}}}))),xa={center:{x:.3,y:0},size:{x:1.6,y:1}},Oa={center:{x:.6,y:-.5},size:{x:1.2,y:1}},wa={center:{x:1,y:.15},size:{x:1,y:.4}},Sa={dx:.5,dy:-1.7,juggles:3},Ca={dx:.2,dy:-.4,juggles:1,canRelaunch:!0},Aa=function(e){var t,n,a;return{engine:ba,name:e.name,setup:{code:e.code,imagePrefix:null!==(t=e.imagePrefix)&&void 0!==t?t:"".concat(e.code,"_"),winSound:e.winSound,flavors:e.flavors,stats:{maxHealth:1.05*kn.StandardHealth,speedForward:.055,speedBackward:.04},defaults:{drawBox:ya.DrawBox,pushboxes:[ya.PushBox],strikeHurtboxes:[ya.HurtBox],throwHurtboxes:[ya.HurtBox]},commands:ya.Commands,input:Object(g.a)({"4a":W.Gutpunch,"5a":W.Gutpunch,"6a":W.Gutpunch,"4b":W.HeavyPunch,"5b":W.HeavyPunch,"6b":W.HeavyPunch,"4c":W.Jump,"5c":W.Jump,"6c":W.Jump},e.input)},projectiles:null!==(n=e.projectiles)&&void 0!==n?n:{},actions:{poseWin:["rapid_0001","rapid_0002"],poseLose:["hitstun_0001","hitstun_0002","hitstun_0003"],rejection:ya.Rejection({startup1:"punch_0001",startup2:"punch_0002",active:"punch_0003",recovery1:"punch_0004",recovery2:"punch_0005",recovery3:"punch_0006"}),rapid:ya.Rapid({startup:"rapid_0001",active:"rapid_0002",hold1:"rapid_0003",hold2:"rapid_0004",hold3:"rapid_0003",hold4:"rapid_0004",recovery:"rapid_0005"}),burst:ya.Burst({tweenIn:"burst_0001",rising1:"burst_0002",rising2:"burst_0003",preburst:"burst_0004",active:"burst_0005",hold1:"burst_0006",hold2:"burst_0007",hold3:"burst_0007",hold4:"burst_0007",falling:"burst_0008"}),downed:{frames:[Object(g.a)(Object(g.a)({},ya.DownedWiggleMixin1),{},{sprite:"down_0001"}),Object(g.a)(Object(g.a)({},ya.DownedWiggleMixin2),{},{sprite:"down_0002"}),Object(g.a)(Object(g.a)({},ya.DownedWiggleMixin3),{},{sprite:"down_0003"}),{duration:5,sprite:"down_0004"},{duration:5,sprite:"down_0005"},{duration:5,sprite:"down_0006"},{duration:5,sprite:"down_0007"},{duration:5,sprite:"down_0008"}]},standing:{frames:[{duration:8,sprite:"stand_0001"},{duration:8,sprite:"stand_0002"},{duration:8,sprite:"stand_0003"},{duration:8,sprite:"stand_0004"}]},walkBackward:{throwHurtboxes:[ya.WalkBackwardThrowableBox],frames:[{duration:5,sprite:"walk_backward_0001"},{duration:5,sprite:"walk_backward_0002"},{duration:5,sprite:"walk_backward_0003"},{duration:5,sprite:"walk_backward_0004"},{duration:5,sprite:"walk_backward_0005"},{duration:5,sprite:"walk_backward_0006"},{duration:5,sprite:"walk_backward_0007"},{duration:5,sprite:"walk_backward_0008"}]},walkForward:{frames:[{duration:5,sprite:"walk_forward_0001"},{duration:5,sprite:"walk_forward_0002"},{duration:5,sprite:"walk_forward_0003"},{duration:5,sprite:"walk_forward_0004"},{duration:5,sprite:"walk_forward_0005"},{duration:5,sprite:"walk_forward_0006"},{duration:5,sprite:"walk_forward_0007"},{duration:5,sprite:"walk_forward_0008"}]},blockstun:{palindromeAnimation:!0,frames:[{duration:5,sprite:"blockstun_0001"},{duration:5,sprite:"blockstun_0002"},{duration:1,sprite:"blockstun_0003"}]},hitstun:{palindromeAnimation:!0,frames:[{duration:5,sprite:"hitstun_0001"},{duration:5,sprite:"hitstun_0002"},{duration:1,sprite:"hitstun_0003"}]},throwstun:{frames:[{duration:5,sprite:"throwstun_0001"},{duration:1,sprite:"throwstun_0002"}]},tumbling:{drawBox:ya.AirborneDrawBox,hurtboxes:[ya.AirborneHurtBox],frames:[{duration:5,sprite:"tumbling_0001"},{duration:5,sprite:"tumbling_0002"}].concat(Object(k.a)(Vt(Ft(50).map((function(e){return[{duration:5,sprite:"tumbling_0003"},{duration:5,sprite:"tumbling_0004"},{duration:5,sprite:"tumbling_0005"}]})))))},exhausted:{drawBox:ya.AirborneDrawBox,frames:[{duration:5,sprite:"tumbling_0001"},{duration:5,sprite:"tumbling_0002"},{duration:5,sprite:"exhausted_0001"},{duration:1,sprite:"exhausted_0002"}]},throwStart:{frames:[Object(g.a)({sound:Se.MeatThrowStart,sprite:"throwStart_0001"},ya.ThrowAttemptStartup),Object(g.a)({sprite:"throwStart_0002"},ya.ThrowAttemptAttack({center:{x:.75,y:0},size:{x:.5,y:1}})),Object(g.a)({sprite:"throwStart_0003"},ya.ThrowAttemptRecovery1),Object(g.a)({sprite:"throwStart_0004"},ya.ThrowAttemptRecovery2)]},throwHit:{frames:[Object(g.a)({sprite:"throwStart_0002"},ya.ThrowAttackHitStartup),Object(g.a)({sound:Se.MeatThrowHit,sprite:"throwHit_0001"},ya.ThrowAttackHitLift),Object(g.a)({sprite:"throwHit_0002"},ya.ThrowAttackHitLaunch),Object(g.a)({sprite:"throwHit_0003"},ya.ThrowAttackHitRecovery),Object(g.a)({sprite:"throwHit_0004"},ya.ThrowAttackHitRecovery),Object(g.a)({sprite:"throwHit_0004"},ya.ThrowAttackHitRecovery),Object(g.a)({sprite:"throwHit_0004"},ya.ThrowAttackHitRecovery),Object(g.a)({sprite:"throwHit_0005"},ya.ThrowAttackHitRecovery),Object(g.a)({sprite:"throwHit_0006"},ya.ThrowAttackHitRecovery)]},falling:{drawBox:ya.AirborneDrawBox,hurtboxes:[ya.FallingHurtBox],frames:[{duration:5,sprite:"fall_0001"},{duration:5,sprite:"fall_0002"},{duration:5,sprite:"fall_0003"}]},landing:ya.Landing},attacks:Object(g.a)((a={},Object(v.a)(a,W.Gutpunch,{displayName:"Gutpunch",displayIndex:0,displayInput:"a",frames:[{sprite:"gutpunch_0001",duration:kn.KaraWindow},{sound:Se.MeatGutpunch,sprite:"gutpunch_0001",duration:5-kn.KaraWindow},{sprite:"gutpunch_0002",duration:5,cancel:{duration:14,onHit:Object(g.a)({"4b":W.HeavyPunch,"5b":W.HeavyPunch,"6b":W.HeavyPunch},e.gutpunchCancel),onBlock:Object(g.a)({"4b":W.HeavyPunch,"5b":W.HeavyPunch,"6b":W.HeavyPunch},e.gutpunchCancel)},attack:{damage:.05,addScalingFirstHit:2,onBlock:1,onHit:5,hitboxes:[{center:{x:.85,y:.05},size:{x:.7,y:.3}}]}},{sprite:"gutpunch_0003",duration:5,copyPrevAttack:!0},{sprite:"gutpunch_0004",duration:5},{sprite:"gutpunch_0005",duration:5}]}),Object(v.a)(a,W.HeavyPunch,{displayName:"Heavy Punch",displayIndex:1,displayInput:"b",frames:[{sprite:"punch_0001",duration:kn.KaraWindow},{sound:Se.MeatPunch,sprite:"punch_0001",duration:4-kn.KaraWindow},{sprite:"punch_0002",duration:5},{sprite:"punch_0003",duration:5,cancel:{duration:10,canRapid:!0,onHit:Object(g.a)({"4a":W.Palm,"5a":W.Palm,"6a":W.Palm,"4b":W.Uppercut,"5b":W.Uppercut,"6b":W.Uppercut},e.heavyCancel),onBlock:Object(g.a)({"4a":W.Palm,"5a":W.Palm,"6a":W.Palm,"4b":W.Uppercut,"5b":W.Uppercut,"6b":W.Uppercut},e.heavyCancel),aiOnHit:W.Uppercut,aiOnBlock:W.Palm},attack:{impactType:B.Large,damage:.08,onBlock:-5,onHit:5,hitboxes:[{center:{x:1.35,y:-.3},size:{x:1.7,y:.3}}]}},{sprite:"punch_0004",duration:5,strikeHurtboxes:[xa]},{sprite:"punch_0005",duration:5,strikeHurtboxes:[xa]},{sprite:"punch_0006",duration:5,strikeHurtboxes:[xa]}]}),Object(v.a)(a,W.Uppercut,{displayName:"Uppercut",displayIndex:2,displayInput:"b > b",frames:[{sprite:"uppercut_0001",duration:5},{sound:Se.MeatUppercut1,sprite:"uppercut_0002",duration:5},{sprite:"uppercut_0003",duration:5,slide:1.6,cancel:{duration:10,canRapid:!0,aiRapidOnHit:!0},attack:{damage:.04,meterGainAttackOnBlock:.5*kn.MeterGainAttackOnBlock,meterGainAttackOnHit:.5*kn.MeterGainAttackOnHit,meterGainDefendOnBlock:.5*kn.MeterGainDefendOnBlock,blockstun:35,hitstun:35,hitboxes:[{center:{x:.4,y:-.25},size:{x:.8,y:.5}}],tumbleOnAirborne:Ca}},{sprite:"uppercut_0004",duration:5,slide:1.6,copyPrevAttack:!0},{sound:Se.MeatUppercut2,sprite:"uppercut_0005",duration:5},{sprite:"uppercut_0006",duration:5},{sprite:"uppercut_0007",duration:5,slide:.1,cancel:{duration:10,canRapid:!0,aiRapidOnBlock:!0},attack:{impactType:B.Large,damage:.08,meterGainAttackOnBlock:.5*kn.MeterGainAttackOnBlock,meterGainAttackOnHit:.5*kn.MeterGainAttackOnHit,meterGainDefendOnBlock:.5*kn.MeterGainDefendOnBlock,onBlock:-20,tumble:Sa,tumbleOnTumbling:{dx:.1,dy:-1.4,juggles:0,canRelaunch:!0},hitboxes:[Oa]}},{sprite:"uppercut_0008",duration:5,slide:.1,copyPrevAttack:!0},{sprite:"uppercut_0009",duration:5,slide:.05},{sprite:"uppercut_0010",duration:5},{sprite:"uppercut_0011",duration:6},{sprite:"uppercut_0012",duration:6},{sprite:"uppercut_0013",duration:6},{sprite:"uppercut_0014",duration:6,aiNextOnHit:W.Jump}]}),Object(v.a)(a,W.Palm,{displayName:"Palm",displayIndex:4,displayInput:"b > a",frames:[{sound:Se.MeatPunch,sprite:"punch_0005",duration:3},{sprite:"punch_0006",duration:5},{sprite:"palm_0001",duration:5},{sprite:"palm_0002",duration:5,cancel:{duration:10,canRapid:!0,onHit:Object(g.a)({},e.palmCancel),onBlock:Object(g.a)({},e.palmCancel)},attack:{damage:.07,chip:.02,pushback:.4,onBlock:-8,tumble:{dx:.2,dy:-.6,juggles:1},tumbleOnAirborne:{dx:.8,dy:-0,juggles:0,canRelaunch:!0},hitboxes:[{center:{x:1.5,y:-.25},size:{x:2,y:.4}}]}},{sprite:"palm_0003",duration:5},{sprite:"palm_0004",duration:5},{sprite:"palm_0005",duration:5},{sprite:"palm_0006",duration:5}]}),Object(v.a)(a,W.Jump,{displayName:"Jump Attack",displayIndex:10,displayInput:"6c",drawBox:ya.AirborneDrawBox,hurtboxes:[ya.AirborneHurtBox],cannotCounterHit:!0,frames:[{sprite:"jump_0001",throwHurtboxes:[],duration:4,drawBox:ya.DrawBox,hurtboxes:[ya.HurtBox],cannotCounterHit:!1},{sprite:"jump_0001",throwHurtboxes:[],sound:Se.MeatJump,particle:ja.jumpSmoke,duration:1,drawBox:ya.DrawBox,hurtboxes:[ya.HurtBox],cannotCounterHit:!1},{sprite:"jump_0002",isAirborne:!0,duration:6,slide:1.2,hover:-.5,armorVsAirborne:!0,armorVsProjectile:!0},{sprite:"jump_0003",isAirborne:!0,duration:6,slide:1.2,hover:-.5,armorVsAirborne:!0,armorVsProjectile:!0,aiIgnoreAttack:!0,cancel:{duration:7,onHitAirborne:{auto:W.Spike}},attack:{hitstop:10,damage:.025,meterGainAttackOnHit:0,onBlock:0,hitsAirborneOnly:!0,tumble:{canRelaunch:!0,dx:0,dy:0,juggles:1},hitboxes:[{center:{x:.75,y:.1},size:{x:.5,y:.4}}],capture:!0,snapTo:{x:.8,y:.1}}},{sprite:"jump_0003",isAirborne:!0,duration:1,slide:.1/6,hover:-.1/6},{sprite:"jump_0004",isAirborne:!0,duration:1,slide:.1/6,hover:-.1/6,cancel:{duration:1,onWhiff:Object(g.a)({},e.jumpCancel)}},{sprite:"jump_0004",isAirborne:!0,duration:4,slide:.4/6,hover:-.4/6},{sprite:"jump_0005",isAirborne:!0,duration:6,slide:.1,hover:.1,hurtboxes:[ya.JumpAttackHurtbox]},{sprite:"jump_0006",isAirborne:!0,duration:6,slide:.1,hover:.4,hurtboxes:[ya.JumpAttackHurtbox]},{sprite:"jump_0007",isAirborne:!0,duration:6,slide:.1,hover:.6,hurtboxes:[ya.JumpAttackHurtbox],attack:{impactType:B.Large,damage:.1,addScalingFirstHit:1,onBlock:10,onHit:20,hitboxes:[wa]}}].concat(Object(k.a)(ya.Landing.frames))}),Object(v.a)(a,W.Spike,{displayName:"Spike",displayIndex:11,displayInput:"6c > on hit",drawBox:ya.AirborneDrawBox,hurtboxes:[],isAirborne:!0,next:F.Falling,frames:[{sound:Se.MeatSpikeSetup,sprite:"spike_0001",duration:5,hover:-.03},{sound:Se.MeatSpikeSetup,sprite:"spike_0002",duration:5,hover:-.02},{sound:Se.MeatSpikeHit,sprite:"spike_0003",duration:5,attack:{impactType:B.Large,damage:.125,onBlock:0,tumble:{canRelaunch:!0,dx:1.2,dy:0,juggles:0},hitboxes:[wa]}},{sprite:"spike_0004",duration:5},{sprite:"spike_0005",duration:5}]}),a),e.attacks)}},Ta={next:N.FlexHit,onProjectile:N.FlexProjectile},Ma=function(e){return[{sprite:"flex_0002",freezeOther:e.freezeOther,duration:1,hurtboxes:[],effects:[M.SteakScreen]},{sprite:"flex_0002",meterGain:.5*kn.MeterOneBar,freezeOther:e.freezeOther,duration:1,hurtboxes:[],effects:[M.SteakScreen]},{sprite:"flex_0002",freezeOther:e.freezeOther,duration:3,hurtboxes:[],effects:[M.SteakScreen]},{sprite:"flex_0003",freezeOther:e.freezeOther,duration:5,hurtboxes:[],effects:[M.SteakScreen]},{sprite:"flex_0004",freezeOther:e.freezeOther,duration:5,hurtboxes:[],effects:[M.SteakScreen]},{sprite:"flex_0005",freezeOther:e.freezeOther,duration:5,hurtboxes:[],effects:[M.SteakScreen]},{sprite:"flexHit_0001",sound:Se.MeatLaugh,duration:5,hurtboxes:[],effects:[M.SteakScreen]},{sprite:"flexHit_0002",duration:5,hurtboxes:[],effects:[M.SteakScreen]},{sprite:"flexHit_0003",duration:1,hurtboxes:[],effects:[M.SteakScreen],cancel:{duration:10,canRapidHitAirborne:!0,canRapidHitGrounded:!0},attack:{impactType:B.Large,damage:.16,chip:.06,addScalingFirstHit:4,onBlock:-5,tumble:{dx:.4,dy:-1.6,juggles:9,canRelaunch:!0},hitboxes:[{center:{x:1.4,y:-.1},size:{x:1.8,y:.3}}],impactScale:2}},{sprite:"flexHit_0003",duration:4,effects:[M.SteakScreen],strikeHurtboxes:[{center:{x:.5,y:0},size:{x:3,y:1}}]},{sprite:"flexHit_0004",duration:5,effects:[M.SteakScreen],strikeHurtboxes:[{center:{x:.5,y:0},size:{x:3,y:1}}]},{sprite:"flexHit_0005",duration:5,effects:[M.SteakScreen],strikeHurtboxes:[{center:{x:.5,y:0},size:{x:3,y:1}}]},{sprite:"flexHit_0006",duration:5,effects:[M.SteakScreen],strikeHurtboxes:[{center:{x:.5,y:0},size:{x:3,y:1}}]},{sprite:"flexHit_0007",duration:5,effects:[M.SteakScreen],strikeHurtboxes:[{center:{x:.5,y:0},size:{x:3,y:1}}]},{sprite:"flexHit_0008",duration:5,effects:[M.SteakScreen],strikeHurtboxes:[{center:{x:.25,y:0},size:{x:2.5,y:1}}]}]},Pa=Aa({name:"Beef",code:"beef",imagePrefix:"beef_",winSound:Se.AnnouncerMatchWinBeef,flavors:[{fid:"default",name:"Beef",folder:"beef_default"},{fid:"striped",name:"Striped Beef",folder:"beef_stripes"},{fid:"grape",name:"Grape Soda Beef",folder:"beef_grapefanta"},{fid:"babyblue",name:"Baby Blue Beef",folder:"beef_babyblue"},{fid:"plaid",name:"Plaid Beef",folder:"beef_plaid",requireMMR:ee},{fid:"halloween",name:"Bloody Beef",folder:"beef_bloody",unlockSteam:!0,requireCode:"halloween_beef",theme:Ie.Halloween},{fid:"birthday",name:"Tiramisu Beef",folder:"beef_tiramisu",unlockSteam:!0,requireCode:"birthday_beef",theme:Ie.Birthday},{fid:"normal",name:"Normal Beef",folder:"beef_normal",unlockSteam:!0,requireCode:"normal_beef",theme:Ie.AprilFools},{fid:"pattern",name:"Checkered Beef",folder:"beef_pattern",requirePremium:!0}],input:{"5c":N.LemonThrow,"4c":N.FlexStart},gutpunchCancel:{"4c":N.LemonThrow,"5c":N.LemonThrow,"6c":N.LemonThrow},heavyCancel:{"4c":N.LemonThrow,"5c":N.LemonThrow,"6c":N.LemonThrow},palmCancel:{},jumpCancel:{4:N.AirLemon,"4a":N.AirLemon,"4b":N.AirLemon,"4c":N.AirLemon},projectiles:(Kn={},Object(v.a)(Kn,Q.Lemon,{displayName:"Lemon",displayIndex:0,dieOnConsume:!0,loop:!0,offset:{x:1.3,y:0},sequence:{drawBox:ya.DrawBox,pushboxes:[],hurtboxes:[],frames:Ft(8).map((function(e){var t=0===e?{isProjectile:!0,damage:.1,chip:.03,blockstun:30,hitstun:40,hitboxes:[{center:{x:0,y:.4},size:{x:.3,y:.15}}]}:void 0;return{duration:5,sprite:"fireball_lemon_000".concat(e+1),slide:.5,attack:t,copyPrevAttack:0!==e}}))}}),Object(v.a)(Kn,Q.AirLemon,{displayName:"Air Lemon",displayIndex:0,dieOnConsume:!0,loop:!1,offset:{x:1.5,y:-.2},sequence:{drawBox:ya.DrawBox,pushboxes:[],hurtboxes:[],frames:Ft(12).map((function(e){return{duration:5,sprite:"fireball_lemon_noshadow_000".concat(e%8+1),slide:.5,hover:.1,attack:0===e?{isProjectile:!0,damage:.1,chip:.03,blockstun:25,hitstun:35,hitboxes:[{center:{x:0,y:.4},size:{x:.3,y:.15}}]}:void 0,copyPrevAttack:0!==e}}))}}),Kn),attacks:(Qn={},Object(v.a)(Qn,N.LemonFake,{displayName:"Indecisive Lemon",displayIndex:21,displayInput:"5c > 4",displayCancelsFrom:N.LemonThrow,frames:[{sprite:"fireball_0003",duration:1,forceRecovery:!0},{sprite:"fireball_0002",duration:5,forceRecovery:!0},{sprite:"fireball_0001",duration:5,forceRecovery:!0}]}),Object(v.a)(Qn,N.LemonThrow,{displayName:"Lemon Roll",displayIndex:20,displayInput:"5c",projectileLimit:1,frames:[{sprite:"fireball_0001",duration:5},{sprite:"fireball_0002",duration:5},{sprite:"fireball_0003",duration:4},{sprite:"fireball_0003",duration:1,cancel:{duration:1,onWhiff:{4:N.LemonFake}}},{sprite:"fireball_0004",duration:2},{sound:Se.MeatLemon,sprite:"fireball_0005",duration:5},{sprite:"fireball_0006",duration:5},{sprite:"fireball_0007",duration:1,projectileId:Q.Lemon},{sprite:"fireball_0007",duration:4,cancel:{duration:10,canWhiffRapid:!0}},{sprite:"fireball_0008",duration:3},{sprite:"fireball_0009",duration:2},{sprite:"fireball_0010",duration:3},{sprite:"fireball_0011",duration:2},{sprite:"fireball_0012",duration:3},{sprite:"fireball_0013",duration:2},{sprite:"fireball_0014",duration:5},{sprite:"fireball_0015",duration:5}]}),Object(v.a)(Qn,N.FlexStart,{displayName:"Flex",displayIndex:30,displayInput:"4c",frames:[{sound:Se.MeatFlex,sprite:"flex_0001",duration:8,onParry:Ta},{sprite:"flex_0002",duration:5},{sprite:"flex_0003",duration:5,meterGain:.05*kn.MeterOneBar},{sprite:"flex_0004",duration:5,meterGain:.05*kn.MeterOneBar},{sprite:"flex_0005",duration:5},{sprite:"flex_0006",duration:5},{sprite:"flex_0007",duration:5},{sprite:"flex_0008",duration:5}]}),Object(v.a)(Qn,N.FlexHit,{displayName:"BEEFCAKE",displayIndex:31,displayInput:"4c > on hit",frames:Ma({freezeOther:!0})}),Object(v.a)(Qn,N.FlexProjectile,{displayName:"BEEFCAKE (Projectile Parry)",displayIndex:32,displayInput:"4c > on hit",frames:Ma({freezeOther:!1})}),Object(v.a)(Qn,N.AirLemon,{displayName:"Air Lemon",displayIndex:12,displayInput:"6c > 4",displayCancelsFrom:W.Jump,isAirborne:!0,cannotCounterHit:!0,drawBox:ya.AirborneDrawBox,hurtboxes:[ya.FullBox],frames:[{sprite:"jump_0005",duration:5,hover:-.5/6},{sprite:"jump_0006",duration:6,hover:0},{sprite:"jump_0006",duration:6,hover:.1},{sprite:"jump_0006",duration:6,hover:.2},{sound:Se.MeatLemon,sprite:"spike_0001",duration:3,hover:.15},{sprite:"spike_0002",duration:3,hover:.15},{sprite:"spike_0003",duration:1,hover:.5/6,projectileId:Q.AirLemon},{sprite:"spike_0003",duration:5,hover:2.5/6}].concat(Object(k.a)(ya.Landing.frames))}),Qn)}),Ra=.3,Ia=[{center:{x:0,y:0},size:{x:1,y:1}},{center:{x:.4,y:.3},size:{x:1.8,y:.4}}],Ba=[{center:{x:.9,y:0},size:{x:.8,y:.8}}],Da=[{sound:Se.SpiceRoundhouse,sprite:"roundhouse_0001",duration:4},{sprite:"roundhouse_0002",duration:4,slide:.3},{sprite:"roundhouse_0003",duration:4},{sprite:"roundhouse_0004",duration:5,cancel:{duration:10,canRapid:!0,aiRapidOnBlock:!0},attack:{impactType:B.Large,damage:.08,chip:.02,onBlock:-8,tumble:{dx:.5,dy:-1.6,juggles:4},hitboxes:[{center:{x:1.2,y:-.25},size:{x:1.4,y:.5}}]}},{sprite:"roundhouse_0005",duration:5,strikeHurtboxes:[ya.HurtBox,{center:{x:.8,y:0},size:{x:.6,y:1}}]},{sprite:"roundhouse_0006",duration:5,strikeHurtboxes:[ya.HurtBox,{center:{x:.8,y:0},size:{x:.6,y:1}}]},{sprite:"roundhouse_0007",duration:5}],Ha=[{sound:Se.SpiceTrip,sprite:"trip_0001",duration:5},{sprite:"trip_0002",duration:5,slide:.21},{sprite:"trip_0003",duration:5,cancel:{duration:10,canRapid:!0},attack:{damage:.06,pushback:.4,onBlock:5,onHit:7,hitboxes:[{center:{x:.8,y:.3},size:{x:.6,y:.4}}]}},{sprite:"trip_0004",duration:5,copyPrevAttack:!0},{sprite:"trip_0005",duration:5},{sprite:"trip_0006",duration:5}],Ea=function(e){var t,n,a;return{engine:ba,name:e.name,setup:{code:e.code,imagePrefix:null!==(t=e.imagePrefix)&&void 0!==t?t:"".concat(e.code,"_"),winSound:e.winSound,flavors:e.flavors,stats:{maxHealth:1*kn.StandardHealth,speedForward:.065,speedBackward:.05},defaults:{drawBox:ya.DrawBox,pushboxes:[ya.PushBox],strikeHurtboxes:[ya.HurtBox],throwHurtboxes:[ya.HurtBox]},commands:ya.Commands,input:Object(g.a)({"4a":q.Trip,"5a":q.Flick,"6a":q.Flick,"4b":q.Roundhouse,"5b":q.Sweep,"6b":q.Sweep,"4c":q.Jump,"5c":q.Jump,"6c":q.Jump},e.input)},projectiles:null!==(n=e.projectiles)&&void 0!==n?n:{},actions:{poseWin:["rapid_0001","rapid_0002","rapid_0003"],poseLose:["hitstun_0001","hitstun_0002","hitstun_0003"],rejection:ya.Rejection({startup1:"roundhouse_0002",startup2:"roundhouse_0003",active:"roundhouse_0004",recovery1:"roundhouse_0005",recovery2:"roundhouse_0006",recovery3:"roundhouse_0007"}),rapid:ya.Rapid({startup:"rapid_0001",active:"rapid_0002",hold1:"rapid_0003",hold2:"rapid_0003",hold3:"rapid_0003",hold4:"rapid_0003",recovery:"rapid_0004"}),burst:ya.Burst({tweenIn:"burst_0001",rising1:"burst_0002",rising2:"burst_0002",preburst:"burst_0003",active:"burst_0004",hold1:"burst_0005",hold2:"burst_0005",hold3:"burst_0005",hold4:"burst_0005",falling:"burst_0006"}),downed:{frames:[Object(g.a)(Object(g.a)({},ya.DownedWiggleMixin1),{},{sprite:"down_0001"}),Object(g.a)(Object(g.a)({},ya.DownedWiggleMixin2),{},{sprite:"down_0002"}),Object(g.a)(Object(g.a)({},ya.DownedWiggleMixin3),{},{sprite:"down_0003"}),{duration:5,sprite:"down_0004"},{duration:5,sprite:"down_0005"},{duration:5,sprite:"down_0006"},{duration:5,sprite:"down_0007"},{duration:5,sprite:"down_0008"}]},standing:{frames:[{duration:5,sprite:"stand_0001"},{duration:5,sprite:"stand_0002"},{duration:5,sprite:"stand_0003"},{duration:5,sprite:"stand_0004"}]},walkBackward:{throwHurtboxes:[ya.WalkBackwardThrowableBox],frames:[{duration:6,sprite:"walk_backward_0001"},{duration:6,sprite:"walk_backward_0002"},{duration:6,sprite:"walk_backward_0003"},{duration:6,sprite:"walk_backward_0004"}]},walkForward:{frames:[{duration:6,sprite:"walk_forward_0001"},{duration:6,sprite:"walk_forward_0002"},{duration:6,sprite:"walk_forward_0003"},{duration:6,sprite:"walk_forward_0004"}]},blockstun:{palindromeAnimation:!0,frames:[{duration:5,sprite:"blockstun_0001"},{duration:5,sprite:"blockstun_0002"},{duration:1,sprite:"blockstun_0003"}]},hitstun:{palindromeAnimation:!0,frames:[{duration:5,sprite:"hitstun_0001"},{duration:5,sprite:"hitstun_0002"},{duration:1,sprite:"hitstun_0003"}]},throwstun:{frames:[{duration:5,sprite:"throwstun_0001"},{duration:1,sprite:"throwstun_0002"}]},tumbling:{drawBox:ya.AirborneDrawBox,hurtboxes:[ya.AirborneHurtBox],frames:[{duration:5,sprite:"tumbling_0001"},{duration:5,sprite:"tumbling_0002"}].concat(Object(k.a)(Vt(Ft(50).map((function(e){return[{duration:5,sprite:"tumbling_0003"},{duration:5,sprite:"tumbling_0004"},{duration:5,sprite:"tumbling_0005"}]})))))},exhausted:{drawBox:ya.AirborneDrawBox,frames:[{duration:5,sprite:"tumbling_0001"},{duration:5,sprite:"tumbling_0002"},{duration:5,sprite:"exhausted_0001"},{duration:1,sprite:"exhausted_0002"}]},falling:{drawBox:ya.AirborneDrawBox,hurtboxes:[ya.FallingHurtBox],frames:[{duration:5,sprite:"fall_0001"},{duration:5,sprite:"fall_0002"},{duration:5,sprite:"fall_0003"}]},landing:ya.Landing,throwStart:{frames:[Object(g.a)({sound:Se.SpiceThrowStart,sprite:"throwStart_0001"},ya.ThrowAttemptStartup),Object(g.a)({sprite:"throwStart_0002"},ya.ThrowAttemptAttack({center:{x:.7,y:0},size:{x:.4,y:1}})),Object(g.a)({sprite:"throwStart_0003"},ya.ThrowAttemptRecovery1),Object(g.a)({sprite:"throwStart_0004"},ya.ThrowAttemptRecovery2)]},throwHit:{frames:[Object(g.a)({sprite:"throwHit_0001"},ya.ThrowAttackHitStartup),Object(g.a)({sound:Se.SpiceThrowHit,sprite:"throwHit_0002"},ya.ThrowAttackHitLift),Object(g.a)({sprite:"throwHit_0003"},ya.ThrowAttackHitLaunch),Object(g.a)({sprite:"throwHit_0004"},ya.ThrowAttackHitRecovery),Object(g.a)({sprite:"throwHit_0005"},ya.ThrowAttackHitRecovery),Object(g.a)({sprite:"throwHit_0006"},ya.ThrowAttackHitRecovery),Object(g.a)({sprite:"throwHit_0006"},ya.ThrowAttackHitRecovery),Object(g.a)({sprite:"throwHit_0006"},ya.ThrowAttackHitRecovery),Object(g.a)({sprite:"throwHit_0007"},ya.ThrowAttackHitRecovery)]}},attacks:Object(g.a)((a={},Object(v.a)(a,q.Flick,{displayName:"Flick",displayIndex:0,displayInput:"a",frames:[{sprite:"flick_0001",duration:kn.KaraWindow},{sound:Se.SpiceFlick,sprite:"flick_0001",duration:5-kn.KaraWindow},{sprite:"flick_0002",duration:5,cancel:{duration:14,onHit:{"4b":q.Roundhouse,"5b":q.Sweep,"6b":q.Sweep},onBlock:{"4b":q.Roundhouse,"5b":q.Sweep,"6b":q.Sweep}},attack:{damage:.04,addScalingFirstHit:2,onBlock:1,onHit:5,hitboxes:[{center:{x:.8,y:-.3},size:{x:.6,y:.3}}]}},{sprite:"flick_0003",duration:5,copyPrevAttack:!0},{sprite:"flick_0004",duration:5},{sprite:"flick_0005",duration:5}]}),Object(v.a)(a,q.Sweep,{displayName:"Sweep",displayIndex:1,displayInput:"b",frames:[{sprite:"sweep_0001",duration:kn.KaraWindow},{sound:Se.SpiceSweep,sprite:"sweep_0001",duration:4-kn.KaraWindow},{sprite:"sweep_0002",duration:3},{sprite:"sweep_0003",duration:7,cancel:{duration:10,canRapid:!0,onHit:Object(g.a)({"4a":q.Trip,"5a":q.Trip,"6a":q.Trip,"4b":q.Roundhouse,"5b":q.Roundhouse,"6b":q.Roundhouse},e.sweepCancel),onBlock:Object(g.a)({"4b":q.Roundhouse,"5b":q.Roundhouse,"6b":q.Roundhouse},e.sweepCancel),aiOnHit:q.Roundhouse,aiOnBlock:Y.Backflip,aiRapidOnHit:!0},attack:{damage:.07,onBlock:-2,onHit:5,hitboxes:[{center:{x:1.1,y:.3},size:{x:1.2,y:.4}}]}},{sprite:"sweep_0004",duration:5,strikeHurtboxes:Ia},{sprite:"sweep_0005",duration:4,strikeHurtboxes:Ia},{sprite:"sweep_0006",duration:4}]}),Object(v.a)(a,q.Roundhouse,{displayName:"Roundhouse",displayIndex:2,displayInput:"4b",frames:Da}),Object(v.a)(a,q.Trip,{displayName:"Trip",displayIndex:3,displayInput:"4a",frames:Ha}),Object(v.a)(a,q.Jump,{displayName:"Jump Attack",displayIndex:10,displayInput:"6c",cannotCounterHit:!0,drawBox:ya.AirborneDrawBox,pushboxes:[ya.AirborneDrawBox],hurtboxes:[ya.AirborneHurtBox],frames:[{sprite:"jump_0001",throwHurtboxes:[],duration:4,drawBox:ya.DrawBox,hurtboxes:[ya.HurtBox],cannotCounterHit:!1},{sprite:"jump_0001",throwHurtboxes:[],sound:Se.SpiceJump,particle:ja.jumpSmoke,duration:1,drawBox:ya.DrawBox,hurtboxes:[ya.HurtBox],cannotCounterHit:!1},{sprite:"jump_0002",isAirborne:!0,duration:5,slide:Ra,hover:-.6},{sprite:"jump_0003",isAirborne:!0,duration:5,slide:Ra,hover:-.4},{sprite:"jump_0004",isAirborne:!0,duration:1,slide:Ra/5,hover:-.04,cancel:{duration:1,onWhiff:Object(g.a)({},e.jumpCancel)}},{sprite:"jump_0004",isAirborne:!0,duration:4,slide:4*Ra/5,hover:-.16},{sprite:"jump_0005",isAirborne:!0,duration:6,slide:Ra,hover:.2,hurtboxes:[ya.JumpAttackHurtbox]},{sprite:"jump_0006",isAirborne:!0,duration:6,slide:Ra,hover:.4,hurtboxes:[ya.JumpAttackHurtbox]},{sprite:"jump_0007",isAirborne:!0,duration:6,slide:Ra,hover:.6,hurtboxes:[ya.JumpAttackHurtbox],attack:{impactType:B.Large,damage:.1,addScalingFirstHit:1,onBlock:10,onHit:20,hitboxes:Ba}}].concat(Object(k.a)(ya.Landing.frames))}),a),e.attacks)}},_a=[{sound:Se.SpiceDash,sprite:"dash_0002",duration:5,pushboxes:[],slide:.8,invulnVsProjectile:!0},{sprite:"dash_0003",duration:5,pushboxes:[],slide:.5,invulnVsProjectile:!0,cancel:{duration:5,onWhiff:{"4a":Y.DashLight,"5a":Y.DashLight,"6a":Y.DashLight,"4b":Y.DashHeavy,"5b":Y.DashHeavy,"6b":Y.DashHeavy,"4c":Y.DashBack,"5c":Y.Sneak,"6c":Y.DashAgain}}},{sprite:"dash_0004",duration:4,pushboxes:[],slide:.2,invulnVsProjectile:!0},{sprite:"dash_0005",duration:4,forceRecovery:!0,crossupOnOverlap:!0}],Fa=_a.map((function(e){var t;return Object(g.a)(Object(g.a)({},e),{},{sprite:e.sprite,mirrorImage:!0,slide:-1*(null!==(t=e.slide)&&void 0!==t?t:0),cancel:e.cancel&&Object(g.a)(Object(g.a)({},e.cancel),{},{onWhiff:Object(g.a)(Object(g.a)({},e.cancel.onWhiff),{},{"4a":q.Jump,"5a":q.Jump,"6a":q.Jump,"4b":q.Roundhouse,"5b":q.Roundhouse,"6b":q.Roundhouse,"4c":Y.DashAgain})})})})),La=Ea({name:"Garlic",code:"legsb",winSound:Se.AnnouncerMatchWinGarlic,flavors:[{fid:"default",name:"Garlic",folder:"garlic_rough_default"},{fid:"striped",name:"Striped Garlic",folder:"alt_stripe2_garlic_rough_default"},{fid:"yellow",name:"Highlighter Garlic",folder:"alt_rotate2_garlic_rough_default"},{fid:"polka",name:"Polka Garlic",folder:"alt_polka2_garlic_rough_default"},{fid:"plaid",name:"Plaid Garlic",folder:"alt_plaid_1_garlic_rough_default",requireMMR:ee},{fid:"halloween",name:"Vampire Garlic",folder:"garlic_rough_vampire",unlockSteam:!0,requireCode:"halloween_garlic",theme:Ie.Halloween},{fid:"birthday",name:"Macaron Garlic",folder:"garlic_rough_macaron",unlockSteam:!0,requireCode:"birthday_garlic",theme:Ie.Birthday},{fid:"normal",name:"Normal Garlic",folder:"garlic_rough_normal",unlockSteam:!0,requireCode:"normal_garlic",theme:Ie.AprilFools}],input:{"4c":Y.Backflip,"5c":Y.DashStart},sweepCancel:{"4c":Y.Backflip,"5c":Y.DashAgain,"6c":Y.DashAgain},jumpCancel:{4:Y.JumpRoundhouse,"4a":Y.JumpRoundhouse,"4b":Y.JumpRoundhouse,"4c":Y.JumpRoundhouse},attacks:(Zn={},Object(v.a)(Zn,Y.Backflip,{displayName:"Backflip",displayIndex:30,displayInput:"4c",frames:[{sprite:"backflip_0001",duration:4,hurtboxes:[],slide:0},{sound:Se.SpiceBackflip,sprite:"backflip_0002",duration:4,hurtboxes:[],slide:-.5},{sprite:"backflip_0003",duration:4,hurtboxes:[],slide:-.3},{sprite:"backflip_0004",duration:4,hurtboxes:[],slide:-.2},{sprite:"land_0001",particle:ja.landSmoke,duration:1,slide:-.04,forceRecovery:!0},{sprite:"land_0001",duration:5,slide:-.1,forceRecovery:!0,cancel:{duration:9,onWhiff:{"4b":q.Roundhouse,"5b":q.Roundhouse,"6b":q.Roundhouse,"4c":q.Jump,"5c":q.Jump,"6c":q.Jump}}},{sprite:"land_0001",duration:4,slide:0,forceRecovery:!0}]}),Object(v.a)(Zn,Y.DashStart,{displayName:"Dash",displayIndex:20,displayInput:"5c",cannotCounterHit:!0,frames:[{sprite:"dash_0001",duration:3,invulnVsProjectile:!0},{sprite:"dash_0001",duration:2,pushboxes:[],slide:.3,invulnVsProjectile:!0}].concat(_a)}),Object(v.a)(Zn,Y.DashAgain,{displayName:"Dash Again",displayIndex:24,displayInput:"5b > 5c",cannotCounterHit:!0,frames:[{sprite:"dash_0003",duration:4,pushboxes:[],slide:.3,invulnVsProjectile:!0}].concat(_a)}),Object(v.a)(Zn,Y.DashBack,{displayName:"Dash Back",displayIndex:25,displayInput:"5c > 4c",cannotCounterHit:!0,frames:[{sprite:"dash_0003",mirrorImage:!0,duration:4,pushboxes:[],slide:-.3,invulnVsProjectile:!0}].concat(Object(k.a)(Fa))}),Object(v.a)(Zn,Y.DashLight,{displayName:"Dashing Trip",displayIndex:21,displayInput:"5c > a",keepFacingRight:!0,frames:[{sprite:"trip_0001",duration:4,pushboxes:[],slide:.8,invulnVsProjectile:!0},{sprite:"trip_0001",duration:1,slide:.2,crossupOnOverlap:!0},{sprite:"trip_0001",duration:1,updateFacingRight:!0}].concat(Object(k.a)(Ha))}),Object(v.a)(Zn,Y.DashHeavy,{displayName:"Dashing Roundhouse",displayIndex:22,displayInput:"5c > b",keepFacingRight:!0,frames:[{sprite:"roundhouse_0001",duration:4,pushboxes:[],slide:.8,invulnVsProjectile:!0},{sprite:"roundhouse_0001",duration:1,slide:.2,crossupOnOverlap:!0},{sprite:"roundhouse_0001",duration:1,updateFacingRight:!0}].concat(Object(k.a)(Da))}),Object(v.a)(Zn,Y.Sneak,{displayName:"Sneak",displayIndex:23,displayInput:"5c > 5c",keepFacingRight:!0,frames:[{sound:Se.SpiceSneak,sprite:"sneak_0001",duration:5,pushboxes:[],invulnVsProjectile:!0},{sprite:void 0,particle:ja.sneakFx,duration:1,pushboxes:[],hurtboxes:[]},{sprite:void 0,isAirborne:!0,duration:1,drawBox:ya.AirborneDrawBox,pushboxes:[ya.AirborneDrawBox],hurtboxes:[],teleportToOther:!0,crossupOnOverlap:!0,hover:-.8,slide:1.8},{sprite:void 0,isAirborne:!0,duration:3,drawBox:ya.AirborneDrawBox,pushboxes:[ya.AirborneDrawBox],hurtboxes:[],updateFacingRight:!0},{sprite:"sneak_0002",isAirborne:!0,duration:5,drawBox:ya.AirborneDrawBox,pushboxes:[ya.AirborneDrawBox],hurtboxes:[]},{sprite:"sneak_0003",isAirborne:!0,duration:5,hover:.4,slide:.5,drawBox:ya.AirborneDrawBox,pushboxes:[ya.AirborneDrawBox],hurtboxes:[ya.AirborneHurtBox]},{sprite:"sneak_0004",isAirborne:!0,duration:5,hover:.4,slide:.5,drawBox:ya.AirborneDrawBox,pushboxes:[ya.AirborneDrawBox],hurtboxes:[ya.AirborneHurtBox],attack:{hitstop:12,damage:.06,chip:.02,onBlock:-5,onHit:5,hitboxes:Ba}},Object(g.a)(Object(g.a)({},ya.LandingFrame),{},{duration:8})]}),Object(v.a)(Zn,Y.JumpRoundhouse,{displayName:"Jump Roundhouse",displayIndex:11,displayInput:"6c > 4",displayCancelsFrom:q.Jump,keepFacingRight:!0,cannotCounterHit:!0,frames:[{sprite:"jump_0004",isAirborne:!0,duration:5,slide:Ra,hover:-.2},{sprite:"jump_0005",duration:5,slide:Ra,hover:.2,isAirborne:!0,drawBox:ya.AirborneDrawBox,hurtboxes:[ya.JumpAttackHurtbox]},{sprite:"sneak_0002",duration:5,slide:Ra,hover:.2,isAirborne:!0,drawBox:ya.AirborneDrawBox,hurtboxes:[]},{sprite:void 0,duration:1,hover:.8,slide:-.6,isAirborne:!0,drawBox:ya.AirborneDrawBox,pushboxes:[],hurtboxes:[]},{sprite:void 0,isAirborne:!0,duration:1,drawBox:ya.AirborneDrawBox,pushboxes:[ya.AirborneDrawBox],hurtboxes:[]},{sprite:"sneak_0001",duration:5}].concat(Object(k.a)(Da))}),Zn)}),Ga=[{delay:3,opacity:.6,dieOnFighterHit:!0},{delay:6,opacity:.4,dieOnFighterHit:!0}],za=[{code:"unplayable_bosslegs",maxHealth:1.5*kn.StandardHealth},{code:"bosslegs",maxHealth:La.setup.stats.maxHealth}].map((function(e){var t;return Object(g.a)(Object(g.a)({},La),{},{name:"Secret Spice",setup:Object(g.a)(Object(g.a)({},La.setup),{},{code:e.code,imagePrefix:"legsb_",flavors:[{fid:"default",name:"Secret Spice",folder:"alt_boss_garlic_rough_default"},{fid:"invert",name:"Inverted Secret Spice",folder:"alt_boss_invert_garlic_rough_default"}],stats:{speedForward:.09,speedBackward:.07,maxHealth:e.maxHealth,isBoss:!0},input:{"4a":K.QuickFlick,"5a":K.QuickFlick,"6a":K.QuickFlick,"4b":K.BossRoundhouse,"5b":K.SlideSweep,"6b":K.SlideSweep,"4c":K.BossFlip,"5c":K.CrossGrab,"6c":K.Divekick}}),attacks:(t={},Object(v.a)(t,K.QuickFlick,Object(g.a)(Object(g.a)({},La.attacks[q.Flick]),{},{afterimages:Ga,frames:La.attacks[q.Flick].frames.map((function(e){return Object(g.a)(Object(g.a)({},e),{},{cancel:e.cancel&&{window:10,onBlock:{"4a":K.QuickFlick,"5a":K.QuickFlick,"6a":K.QuickFlick,"4b":K.BossRoundhouse,"5b":K.SlideSweep,"6b":K.SlideSweep},onHit:{"4a":K.QuickFlick,"5a":K.QuickFlick,"6a":K.QuickFlick,"4b":K.BossRoundhouse,"5b":K.SlideSweep,"6b":K.SlideSweep},aiOnBlock:K.SlideSweep,aiOnHit:K.BossRoundhouse},attack:e.attack&&Object(g.a)(Object(g.a)({},e.attack),{},{onBlock:-5,onHit:-2})})}))})),Object(v.a)(t,K.SlideSweep,Object(g.a)(Object(g.a)({},La.attacks[q.Sweep]),{},{afterimages:Ga,frames:La.attacks[q.Sweep].frames.map((function(e){return Object(g.a)(Object(g.a)({},e),{},{cancel:e.cancel&&{window:10,onBlock:{"4b":K.BossRoundhouse,"5b":K.BossRoundhouse,"6b":K.BossRoundhouse,"4c":K.BossFlip,"5c":K.CrossGrab,"6c":K.Divekick},onHit:{"4b":K.BossRoundhouse,"5b":K.BossRoundhouse,"6b":K.BossRoundhouse,"4c":K.BossFlip,"5c":K.CrossGrab,"6c":K.Divekick},aiOnBlock:K.BossFlip,aiOnHit:K.BossRoundhouse},slide:e.attack?.8:0})}))})),Object(v.a)(t,K.BossRoundhouse,Object(g.a)(Object(g.a)({},La.attacks[q.Roundhouse]),{},{afterimages:Ga,frames:La.attacks[q.Roundhouse].frames.map((function(e){return Object(g.a)(Object(g.a)({},e),{},{cancel:e.cancel&&{window:10,onBlock:{"4c":K.BossFlip,"5c":K.CrossGrab,"6c":K.Divekick},onHit:{"4c":K.BossFlip,"5c":K.CrossGrab,"6c":K.Divekick},aiOnBlock:K.BossFlip,aiOnHit:K.Divekick},attack:e.attack&&Object(g.a)(Object(g.a)({},e.attack),{},{tumble:e.attack.tumble&&Object(g.a)(Object(g.a)({},e.attack.tumble),{},{dx:.8,dy:-1.2,juggles:9})})})}))})),Object(v.a)(t,K.BossFlip,{displayName:"Flip Out",displayIndex:33,displayInput:"4c",afterimages:Ga,frames:[{sprite:"backflip_0001",duration:4,slide:0},{sound:Se.SpiceDash,sprite:"backflip_0002",duration:4,slide:-.8},{sprite:"backflip_0003",duration:4,slide:-.5},{sprite:"backflip_0004",duration:4,slide:-.3},{sprite:"land_0001",particle:ja.landSmoke,duration:1,slide:-.1,forceRecovery:!0},{sprite:"land_0001",duration:5,slide:-.1,forceRecovery:!0},{sprite:"land_0001",duration:8,slide:0,forceRecovery:!0}]}),Object(v.a)(t,K.Divekick,{displayName:"Divekick",displayIndex:31,displayInput:"6c",afterimages:Ga,cannotCounterHit:!0,frames:[{sprite:"sneak_0001",duration:5,hurtboxes:[],pushboxes:[]},{sprite:void 0,particle:ja.jumpSmoke,duration:14,hurtboxes:[],pushboxes:[]},{sprite:void 0,isAirborne:!0,duration:1,drawBox:ya.AirborneDrawBox,pushboxes:[ya.AirborneDrawBox],hurtboxes:[],teleportToOther:!0,hover:-1,slide:-2},{sprite:"sneak_0002",isAirborne:!0,duration:5,hover:.2,slide:.5,drawBox:ya.AirborneDrawBox,pushboxes:[ya.AirborneDrawBox],hurtboxes:[],updateFacingRight:!0},{sprite:"sneak_0003",isAirborne:!0,duration:5,hover:.4,slide:.5,armorVsAirborne:!0,drawBox:ya.AirborneDrawBox,pushboxes:[ya.AirborneDrawBox],hurtboxes:[ya.AirborneHurtBox]},{sprite:"sneak_0004",isAirborne:!0,duration:5,hover:.4,slide:.5,armorVsAirborne:!0,drawBox:ya.AirborneDrawBox,pushboxes:[ya.AirborneDrawBox],hurtboxes:[ya.AirborneHurtBox],attack:{damage:.1,chip:.02,onBlock:5,onHit:10,hitboxes:[{center:{x:.9,y:0},size:{x:.8,y:.8}}],tumbleOnAirborne:{juggles:0,dx:.5,dy:2,canRelaunch:!0}}},Object(g.a)(Object(g.a)({},ya.LandingFrame),{},{sprite:"land_0001",duration:8})]}),Object(v.a)(t,K.CrossGrab,{displayName:"Nothing Personnel",displayIndex:32,displayInput:"5c",afterimages:Ga,next:F.ThrowStart,frames:[{sprite:"rapid_0001",duration:5},{sound:Se.SpiceDash,sprite:"rapid_0002",duration:5},{sprite:"rapid_0004",duration:5},{sprite:void 0,duration:1,particle:ja.landSmoke},{sprite:void 0,duration:1,hurtboxes:[],teleportToOther:!0,crossupOnOverlap:!0,slide:1},{sprite:void 0,duration:9,hurtboxes:[]},{sprite:"land_0001",particle:ja.landSmoke,duration:5,updateFacingRight:!0}]}),t)})})),Wa=Object(m.a)(za,2),Na=Wa[0],Ua=Wa[1],qa={center:{x:.8,y:0},size:{x:.6,y:1}},Va=[{sprite:"bearHug_0002",duration:1,slide:0,cancel:{duration:65,onWhiff:{4:U.CaberTossCancel,"4a":U.CaberTossCancel,"4b":U.CaberTossCancel,"4c":U.CaberTossCancel},onHit:{auto:U.CaberTossHit}},attack:{setStunPhase:kn.Phase.ThrowStunPhase,ignoreParry:!0,isThrowStart:!0,impactType:B.None,damage:0,blockstun:0,hitstun:30,hitboxes:[{center:{x:.6,y:0},size:{x:.2,y:1}}],capture:!0,snapTo:{x:.8,y:0}}},{sprite:"bearHug_0003",copyPrevAttack:!0,duration:9,slide:0},{sprite:"bearHug_0004",copyPrevAttack:!0,duration:5,slide:0,cancel:{duration:55,onHit:{auto:U.CaberTossHit}}},{sprite:"bearHug_0005",sound:Se.MeatCaberStart,copyPrevAttack:!0,duration:4,slide:.8},{sprite:"bearHug_0006",copyPrevAttack:!0,duration:4,slide:.7},{sprite:"bearHug_0007",sound:Se.MeatCaberStart,copyPrevAttack:!0,duration:4,slide:.6},{sprite:"bearHug_0004",copyPrevAttack:!0,duration:4,slide:.5},{sprite:"bearHug_0005",sound:Se.MeatCaberStart,copyPrevAttack:!0,duration:4,slide:.4},{sprite:"bearHug_0006",copyPrevAttack:!0,duration:4,slide:.3},{sprite:"bearHug_0007",sound:Se.MeatCaberStart,copyPrevAttack:!0,duration:4,slide:.2},{sprite:"bearHug_0004",copyPrevAttack:!0,duration:4,slide:.1},{sprite:"bearHug_0005",sound:Se.MeatCaberStart,copyPrevAttack:!0,duration:4,slide:.05,cancel:{duration:32,onHit:{auto:U.CaberTossHit}}},{sprite:"bearHug_0006",copyPrevAttack:!0,duration:4,slide:0},{sprite:"bearHug_0007",sound:Se.MeatCaberStart,copyPrevAttack:!0,duration:4,slide:0},{sprite:"tossStart_0002",copyPrevAttack:!0,duration:5},{sprite:"tossStart_0003",duration:5},{sprite:"tossStart_0004",duration:5},{sprite:"tossStart_0005",duration:5}],Ya=Aa({name:"Pork",code:"beefb",imagePrefix:"beefb_",winSound:Se.AnnouncerMatchWinPork,flavors:[{fid:"default",name:"Pork",folder:"pork_default"},{fid:"striped",name:"Striped Pork",folder:"pork_stripes"},{fid:"mint",name:"Mint Pork",folder:"pork_mint"},{fid:"peach",name:"Peach Pork",folder:"pork_peach"},{fid:"plaid",name:"Plaid Pork",folder:"pork_plaid",requireMMR:ee},{fid:"halloween",name:"Porkenstein",folder:"pork_porkenstein",unlockSteam:!0,requireCode:"halloween_pork",theme:Ie.Halloween},{fid:"birthday",name:"Golden Pork",folder:"pork_golden",unlockSteam:!0,requireCode:"birthday_pork",theme:Ie.Birthday},{fid:"normal",name:"Normal Pork",folder:"pork_normal",unlockSteam:!0,requireCode:"normal_pork",theme:Ie.AprilFools},{fid:"pattern",name:"Rose Pork",folder:"pork_pattern",requirePremium:!0}],input:{"5c":U.CaberTossStart,"4c":U.Chop},gutpunchCancel:{"4c":U.CaberTossStart,"5c":U.CaberTossStart,"6c":U.CaberTossStart},heavyCancel:{"4c":U.CaberTossStart,"5c":U.CaberTossStart,"6c":U.CaberTossStart},palmCancel:{"4c":U.Chop,"5c":U.Chop,"6c":U.Chop},jumpCancel:{4:U.EmptyJump,"4a":U.EmptyJump,"4b":U.EmptyJump,"4c":U.EmptyJump},attacks:(Xn={},Object(v.a)(Xn,U.CaberTossStart,{displayName:"Caber Toss",displayIndex:20,displayInput:"5c",frames:[{sprite:"bearHug_0001",duration:kn.KaraWindow},{sprite:"bearHug_0001",sound:Se.MeatCaberStart,duration:5-kn.KaraWindow},{sprite:"bearHug_0002",duration:5}].concat(Va)}),Object(v.a)(Xn,U.CaberTossCancel,{displayName:"Shy Caber Toss",displayIndex:22,displayInput:"5c > 4",forceRecovery:!0,frames:[{sprite:"bearHug_0001",duration:10}]}),Object(v.a)(Xn,U.CaberTossHit,{displayName:"Caber Toss Launch",displayIndex:21,displayInput:"5c > on hit",pushboxes:[],frames:[{sprite:"tossStart_0002",duration:5},{sprite:"tossHit_0001",duration:ya.ThrowHitStartupDuration-5},{sprite:"tossHit_0001",sound:Se.MeatToss,duration:5},{sprite:"tossHit_0002",duration:5,attack:{stunPhase:kn.Phase.ThrowStunPhase,cannotBurst:!0,impactType:B.None,damage:.08,addScaling:2,onBlock:0,tumble:{dx:.2,dy:-1.2,juggles:9},hitboxes:[{center:{x:0,y:0},size:{x:4,y:2}}]}},{sprite:"tossHit_0003",duration:5},{sprite:"tossHit_0004",duration:5},{sprite:"tossHit_0005",duration:5}]}),Object(v.a)(Xn,U.Chop,{displayName:"Chop",displayIndex:30,displayInput:"4c",frames:[{sprite:"chop_0001",duration:kn.KaraWindow,armorVsAirborne:!0,armorVsProjectile:!0},{sound:Se.MeatChop,sprite:"chop_0001",duration:4-kn.KaraWindow,armorVsAirborne:!0,armorVsProjectile:!0},{sprite:"chop_0002",duration:6,armor:!0},{sprite:"chop_0003",duration:5,armor:!0,slide:.2},{sprite:"chop_0004",duration:5,armor:!0,slide:.4},{sprite:"chop_0005",duration:5,armor:!0,slide:.2,cancel:{duration:10,canRapidHitAirborne:!0,canRapidHitGrounded:!0},attack:{impactType:B.Large,damage:.1,chip:.03,addScalingFirstHit:3,onBlock:-8,onHit:9,hitboxes:[{center:{x:1.3,y:-.15},size:{x:1.6,y:.4}}],tumbleOnAirborne:{canRelaunch:!0,dx:0,dy:3,juggles:0}}},{sprite:"chop_0006",duration:5,strikeHurtboxes:[ya.HurtBox,qa]},{sprite:"chop_0007",duration:5,strikeHurtboxes:[ya.HurtBox,qa]},{sprite:"chop_0008",duration:5,strikeHurtboxes:[ya.HurtBox,qa]},{sprite:"chop_0009",duration:5,strikeHurtboxes:[ya.HurtBox,qa]}]}),Object(v.a)(Xn,U.EmptyJump,{displayName:"Empty Jump",displayIndex:11,displayInput:"6c > 4",displayCancelsFrom:W.Jump,frames:[{sprite:"jump_0004",duration:5,slide:.5/6,hover:-.5/6,isAirborne:!0,cannotCounterHit:!0,drawBox:ya.AirborneDrawBox,hurtboxes:[ya.JumpAttackHurtbox]},{sprite:"jump_0005",duration:6,slide:.1,hover:.1,isAirborne:!0,cannotCounterHit:!0,drawBox:ya.AirborneDrawBox,hurtboxes:[ya.JumpAttackHurtbox]},{sprite:"jump_0006",duration:6,slide:.1,hover:.4,isAirborne:!0,cannotCounterHit:!0,drawBox:ya.AirborneDrawBox,hurtboxes:[ya.JumpAttackHurtbox]},{sprite:"jump_0005",duration:5,slide:.1,hover:.6,isAirborne:!0,cannotCounterHit:!0,drawBox:ya.AirborneDrawBox,hurtboxes:[ya.JumpAttackHurtbox]},{sprite:"stand_0001",duration:1,particle:ja.landSmoke}]}),Xn)}),Ja=[{code:"unplayable_bosspork",maxHealth:2*kn.StandardHealth},{code:"bosspork",maxHealth:Ya.setup.stats.maxHealth}].map((function(e){var t;return{engine:ba,name:"Mystery Meat",setup:{code:e.code,imagePrefix:Ya.setup.imagePrefix,winSound:Ya.setup.winSound,flavors:[{fid:"default",name:"Mystery Meat",folder:"alt_boss_pork_default"},{fid:"invert",name:"Inverted Mystery Meat",folder:"alt_boss_invert_pork_default"}],stats:{speedForward:.03,speedBackward:.02,maxHealth:e.maxHealth,disableMeter:!0,isBoss:!0},defaults:{drawBox:ya.BossDrawBox,pushboxes:[ya.BossPushBox],strikeHurtboxes:[ya.BossHurtBox],throwHurtboxes:[ya.BossHurtBox]},commands:ya.Commands,input:{"4a":J.Gutpunch,"5a":J.Gutpunch,"6a":J.Gutpunch,"4b":J.HeavyPunch,"5b":J.HeavyPunch,"6b":J.HeavyPunch,"4c":J.Tackle,"5c":J.ChopInTwo,"6c":J.Hop}},projectiles:{},actions:Object(g.a)(Object(g.a)({},Ya.actions),{},{tumbling:Object(g.a)(Object(g.a)({},Ya.actions.tumbling),{},{drawBox:ya.BossAirborneDrawBox,hurtboxes:[ya.BossAirborneHurtBox]}),exhausted:Object(g.a)(Object(g.a)({},Ya.actions.exhausted),{},{drawBox:ya.BossAirborneDrawBox}),falling:Object(g.a)(Object(g.a)({},Ya.actions.falling),{},{drawBox:ya.BossAirborneDrawBox,hurtboxes:[ya.BossFallingHurtBox]})}),attacks:(t={},Object(v.a)(t,J.Gutpunch,{displayName:"Mystery Jab",displayIndex:1,displayInput:"5a",frames:[{sound:Se.MeatGutpunch,sprite:"gutpunch_0001",duration:8},{sprite:"gutpunch_0002",duration:5,attack:{damage:.1,onBlock:0,hitboxes:[{center:{x:1,y:0},size:{x:1,y:1.2}}],tumble:{dx:0,dy:-1.2,juggles:1},tumbleOnTumbling:{dx:.2,dy:-.5,juggles:1,canRelaunch:!0}}},{sprite:"gutpunch_0003",duration:5},{sprite:"gutpunch_0004",duration:5},{sprite:"gutpunch_0005",duration:5}]}),Object(v.a)(t,J.HeavyPunch,{displayName:"Mystery Punch",displayIndex:2,displayInput:"5b",frames:[{sound:Se.MeatPunch,sprite:"punch_0001",duration:7},{sprite:"punch_0002",duration:5},{sprite:"punch_0003",duration:5,attack:{damage:.2,chip:.02,onBlock:-10,onHit:9,hitboxes:[{center:{x:1.35,y:-.5},size:{x:3,y:1}}],tumbleOnTumbling:{dx:.5,dy:-.5,juggles:1,canRelaunch:!0}}},{sprite:"punch_0004",duration:5},{sprite:"punch_0005",duration:5},{sprite:"punch_0006",duration:5}]}),Object(v.a)(t,J.Tackle,{displayName:"Rocket",displayIndex:12,displayInput:"4c",frames:[{sound:Se.MeatUppercut1,sprite:"uppercut_0001",duration:5,armor:!0},{sprite:"uppercut_0002",duration:5,armor:!0},{sprite:"uppercut_0003",duration:5,armor:!0,slide:.65,cancel:{duration:31,onArmor:{auto:J.Uppercut},onBlock:{auto:J.Uppercut},onHit:{auto:J.Uppercut}},attack:{damage:.05,blockstun:20,hitstun:20,hitboxes:[{center:{x:.6,y:-.4},size:{x:1,y:.6}}],tumbleOnTumbling:{dx:.5,dy:-.5,juggles:1,canRelaunch:!0}}},{sprite:"uppercut_0004",duration:5,armor:!0,slide:.65,copyPrevAttack:!0},{sprite:"uppercut_0004",duration:5,armor:!0,slide:.65,copyPrevAttack:!0},{sprite:"uppercut_0004",duration:5,armor:!0,slide:.65,copyPrevAttack:!0},{sprite:"uppercut_0004",duration:5,armor:!0,slide:.65,copyPrevAttack:!0},{sprite:"uppercut_0004",duration:5,armor:!0,slide:.65,copyPrevAttack:!0},{sprite:"uppercut_0005",duration:5}]}),Object(v.a)(t,J.Uppercut,{displayName:"Launch",displayIndex:13,displayInput:"4c > on hit",frames:[{sound:Se.MeatUppercut2,sprite:"uppercut_0005",duration:5},{sprite:"uppercut_0006",duration:5},{sprite:"uppercut_0007",duration:5,cancel:{duration:10,canRapid:!0,aiRapidOnBlock:!0},attack:{damage:.2,onBlock:-20,tumble:{dx:0,dy:-2,juggles:1},hitboxes:[{center:{x:1,y:-.5},size:{x:1,y:2}}]}},{sprite:"uppercut_0008",duration:5,copyPrevAttack:!0},{sprite:"uppercut_0009",duration:5},{sprite:"uppercut_0010",duration:5},{sprite:"uppercut_0011",duration:5},{sprite:"uppercut_0012",duration:5,slide:-.1},{sprite:"uppercut_0013",duration:5,slide:-.1},{sprite:"uppercut_0014",duration:5,aiNextOnHit:J.HeavyPunch}]}),Object(v.a)(t,J.ChopInTwo,{displayName:"Hammer",displayIndex:11,displayInput:"5c",frames:[{sound:Se.MeatPunch,sprite:"chop_0001",duration:5},{sprite:"chop_0002",duration:15},{sprite:"chop_0003",duration:5},{sprite:"chop_0004",duration:5},{sprite:"chop_0005",duration:5,attack:{unblockable:!0,damage:.2,onBlock:0,hitboxes:[{center:{x:1.7,y:-.2},size:{x:2.4,y:1}}],tumble:{canRelaunch:!0,dx:0,dy:3,juggles:0}}},{sprite:"chop_0006",duration:5},{sprite:"chop_0007",duration:5},{sprite:"chop_0008",duration:5},{sprite:"chop_0009",duration:5}]}),Object(v.a)(t,J.Hop,{displayName:"Dropkick",displayIndex:10,displayInput:"6c",cannotCounterHit:!0,frames:[{sprite:"jump_0001",duration:4},{sprite:"jump_0001",sound:Se.MeatJump,particle:ja.jumpSmoke,duration:1},{sprite:"jump_0004",isAirborne:!0,drawBox:ya.BossAirborneDrawBox,hurtboxes:[ya.BossAirborneHurtBox],duration:5,slide:.1,hover:-.4},{sprite:"jump_0005",isAirborne:!0,drawBox:ya.BossAirborneDrawBox,hurtboxes:[ya.BossAirborneHurtBox],duration:5,slide:.1,hover:-.2},{sprite:"jump_0006",isAirborne:!0,drawBox:ya.BossAirborneDrawBox,hurtboxes:[ya.BossAirborneHurtBox],duration:5,slide:.1,hover:-.1},{sprite:"jump_0007",isAirborne:!0,drawBox:ya.BossAirborneDrawBox,hurtboxes:[ya.BossAirborneHurtBox],duration:5,slide:.1,hover:.2,attack:{damage:.3,pushback:1,onBlock:-30,tumble:{dx:3,dy:-1,juggles:0,canRelaunch:!0},hitboxes:[{center:{x:1.3,y:.2},size:{x:1.6,y:.6}}]}},{sprite:"jump_0007",isAirborne:!0,drawBox:ya.BossAirborneDrawBox,hurtboxes:[ya.BossAirborneHurtBox],duration:5,slide:.1,hover:.5}].concat(Object(k.a)(Ya.actions.downed.frames))}),t)}})),Ka=Object(m.a)(Ja,2),Qa=Ka[0],Za=Ka[1],Xa={center:{x:.3,y:0},size:{x:1.6,y:1}},$a={damage:.05,addScalingFirstHit:1,blockstun:20,hitstun:20,hitboxes:[{center:{x:1,y:0},size:{x:1,y:.4}}]},er={damage:.05,addScalingFirstHit:1,onBlock:10,onHit:20,hitboxes:[{center:{x:1,y:0},size:{x:1,y:.4}}]},tr=Object(g.a)(Object(g.a)({},kn.AntiAirStartupTumble),{},{dx:.2,dy:-1.2,juggles:3}),nr=[{center:{x:1.75,y:.3},size:{x:2.5,y:.4}},{center:{x:.8,y:.2},size:{x:.6,y:.6}}],ar={center:{x:1.25,y:.1},size:{x:1.5,y:.8}},rr={center:{x:1,y:0},size:{x:1,y:1}},ir={center:{x:1.4,y:0},size:{x:1.8,y:1}};var or,sr=function(e){var t,n,a,r;return{engine:ba,name:e.name,setup:{code:e.code,imagePrefix:null!==(t=e.imagePrefix)&&void 0!==t?t:"".concat(e.code,"_"),winSound:e.winSound,flavors:e.flavors,stats:{maxHealth:.95*kn.StandardHealth,speedForward:.045,speedBackward:.035},defaults:{drawBox:ya.DrawBox,pushboxes:[ya.PushBox],strikeHurtboxes:[ya.HurtBox],throwHurtboxes:[ya.HurtBox]},commands:ya.Commands,input:Object(g.a)({"4a":L.Slap,"5a":L.Slap,"6a":L.Slap,"4b":L.Whip1,"5b":L.Whip1,"6b":L.Whip1,"4c":L.Jump,"5c":L.Jump,"6c":L.Jump},e.input)},projectiles:null!==(n=e.projectiles)&&void 0!==n?n:{},actions:{poseWin:["rapid_0001","rapid_0002","rapid_0003"],poseLose:["hitstun_0001","hitstun_0002","hitstun_0003"],rejection:ya.Rejection({startup1:"whipFinal_0001",startup2:"whipFinal_0002",active:"whipFinal_0003",recovery1:"whipFinal_0004",recovery2:"whipFinal_0005",recovery3:"whipFinal_0006"}),rapid:ya.Rapid({startup:"rapid_0001",active:"rapid_0002",hold1:"rapid_0003",hold2:"rapid_0003",hold3:"rapid_0003",hold4:"rapid_0003",recovery:"rapid_0004"}),burst:ya.Burst({tweenIn:"burst_0001",rising1:"burst_0002",rising2:"burst_0003",preburst:"burst_0004",active:"burst_0005",hold1:"burst_0006",hold2:"burst_0007",hold3:"burst_0008",hold4:"burst_0009",falling:"burst_0010"}),downed:{frames:[Object(g.a)(Object(g.a)({},ya.DownedWiggleMixin1),{},{sprite:"down_0001"}),Object(g.a)(Object(g.a)({},ya.DownedWiggleMixin2),{},{sprite:"down_0002"}),Object(g.a)(Object(g.a)({},ya.DownedWiggleMixin3),{},{sprite:"down_0003"}),{duration:5,sprite:"down_0004"},{duration:5,sprite:"down_0005"},{duration:5,sprite:"down_0006"},{duration:5,sprite:"down_0007"},{duration:5,sprite:"down_0008"}]},standing:{frames:[{duration:8,sprite:"stand_0001"},{duration:8,sprite:"stand_0002"},{duration:8,sprite:"stand_0003"},{duration:8,sprite:"stand_0004"}]},walkBackward:{throwHurtboxes:[ya.WalkBackwardThrowableBox],frames:[{duration:5,sprite:"walk_backward_0001"},{duration:5,sprite:"walk_backward_0002"},{duration:5,sprite:"walk_backward_0003"},{duration:5,sprite:"walk_backward_0004"},{duration:5,sprite:"walk_backward_0005"},{duration:5,sprite:"walk_backward_0006"},{duration:5,sprite:"walk_backward_0007"},{duration:5,sprite:"walk_backward_0008"}]},walkForward:{frames:[{duration:5,sprite:"walk_forward_0001"},{duration:5,sprite:"walk_forward_0002"},{duration:5,sprite:"walk_forward_0003"},{duration:5,sprite:"walk_forward_0004"},{duration:5,sprite:"walk_forward_0005"},{duration:5,sprite:"walk_forward_0006"},{duration:5,sprite:"walk_forward_0007"},{duration:5,sprite:"walk_forward_0008"}]},blockstun:{palindromeAnimation:!0,frames:[{duration:5,sprite:"blockstun_0001"},{duration:5,sprite:"blockstun_0002"},{duration:1,sprite:"blockstun_0003"}]},hitstun:{palindromeAnimation:!0,frames:[{duration:5,sprite:"hitstun_0001"},{duration:5,sprite:"hitstun_0002"},{duration:1,sprite:"hitstun_0003"}]},throwstun:{frames:[{duration:5,sprite:"throwstun_0001"},{duration:1,sprite:"throwstun_0002"}]},tumbling:{drawBox:ya.AirborneDrawBox,hurtboxes:[ya.AirborneHurtBox],frames:[{duration:5,sprite:"tumbling_0001"},{duration:5,sprite:"tumbling_0002"}].concat(Object(k.a)(Vt(Ft(50).map((function(e){return[{duration:5,sprite:"tumbling_0003"},{duration:5,sprite:"tumbling_0004"},{duration:5,sprite:"tumbling_0005"}]})))))},exhausted:{drawBox:ya.AirborneDrawBox,frames:[{duration:5,sprite:"tumbling_0001"},{duration:5,sprite:"tumbling_0002"},{duration:5,sprite:"exhausted_0001"},{duration:1,sprite:"exhausted_0002"}]},falling:{drawBox:ya.AirborneDrawBox,hurtboxes:[ya.FallingHurtBox],frames:[{duration:5,sprite:"fall_0001"},{duration:5,sprite:"fall_0002"},{duration:5,sprite:"fall_0003"}]},landing:ya.Landing,throwStart:{frames:[Object(g.a)({sound:Se.CarbThrowStart,sprite:"throwStart_0001"},ya.ThrowAttemptStartup),Object(g.a)({sprite:"throwStart_0002"},ya.ThrowAttemptAttack({center:{x:.8,y:0},size:{x:.6,y:1}})),Object(g.a)({sprite:"throwStart_0003"},ya.ThrowAttemptRecovery1),Object(g.a)({sprite:"throwStart_0004"},ya.ThrowAttemptRecovery2)]},throwHit:{frames:[Object(g.a)({sprite:"throwStart_0002"},ya.ThrowAttackHitStartup),Object(g.a)({sound:Se.CarbThrowHit,sprite:"throwHit_0001"},ya.ThrowAttackHitLift),Object(g.a)({sprite:"throwHit_0002"},ya.ThrowAttackHitLaunch),Object(g.a)({sprite:"throwHit_0003"},ya.ThrowAttackHitRecovery),Object(g.a)({sprite:"throwHit_0003"},ya.ThrowAttackHitRecovery),Object(g.a)({sprite:"throwHit_0004"},ya.ThrowAttackHitRecovery),Object(g.a)({sprite:"throwHit_0004"},ya.ThrowAttackHitRecovery),Object(g.a)({sprite:"throwHit_0004"},ya.ThrowAttackHitRecovery),Object(g.a)({sprite:"throwHit_0005"},ya.ThrowAttackHitRecovery)]}},attacks:Object(g.a)((a={},Object(v.a)(a,L.Slap,{displayName:"Slap",displayIndex:0,displayInput:"a",frames:[{sprite:"slap_0001",duration:kn.KaraWindow},{sound:Se.CarbSlap,sprite:"slap_0001",duration:5-kn.KaraWindow},{sprite:"slap_0002",duration:5,cancel:{duration:6,onHit:Object(g.a)({},e.slapCancel),onBlock:Object(g.a)({},e.slapCancel)},attack:{damage:.04,addScalingFirstHit:2,meterGainAttackOnBlock:.5*kn.MeterGainAttackOnBlock,meterGainAttackOnHit:.5*kn.MeterGainAttackOnHit,meterGainDefendOnBlock:.5*kn.MeterGainDefendOnBlock,blockstun:20,hitstun:20,hitboxes:[{center:{x:.75,y:-.3},size:{x:.5,y:.5}}],tumbleOnAirborne:tr}},{sprite:"slap_0003",duration:5,cannotCounterHit:!0},{sprite:"slap_0003",sound:Se.CarbSlap,duration:2,cannotCounterHit:!0},{sprite:"slap_0004",duration:5,cancel:{duration:6,onHit:Object(g.a)({},e.slapCancel),onBlock:Object(g.a)({},e.slapCancel)},attack:{damage:.06,addScalingFirstHit:2,meterGainAttackOnBlock:.5*kn.MeterGainAttackOnBlock,meterGainAttackOnHit:.5*kn.MeterGainAttackOnHit,meterGainDefendOnBlock:.5*kn.MeterGainDefendOnBlock,onBlock:1,onHit:5,hitboxes:[{center:{x:.9,y:-.4},size:{x:.8,y:.2}}],tumbleOnAirborne:tr}},{sprite:"slap_0005",duration:7},{sprite:"slap_0006",duration:5}]}),Object(v.a)(a,L.Whip1,{displayName:"Whip",displayIndex:1,displayInput:"b",frames:[{sprite:"whip_0001",duration:kn.KaraWindow},{sound:Se.CarbWhip,sprite:"whip_0001",duration:5-kn.KaraWindow},{sprite:"whip_0002",duration:5},{sprite:"whip_0003",duration:3,cancel:{duration:12,canRapid:!0,onHit:Object(g.a)({"4b":L.Whip2,"5b":L.Whip2,"6b":L.Whip2},e.whipFirstCancel),onBlock:Object(g.a)({"4b":L.Whip2,"5b":L.Whip2,"6b":L.Whip2},e.whipFirstCancel)},attack:{damage:.06,onBlock:-5,onHit:0,hitboxes:nr},strikeHurtboxes:[Xa]},{sprite:"whip_0004",duration:4,strikeHurtboxes:[Xa,ar]},{sprite:"whip_0005",duration:4,strikeHurtboxes:[Xa,ar]},{sprite:"whip_0006",duration:4,strikeHurtboxes:[Xa]},{sprite:"whip_0007",duration:4,strikeHurtboxes:[Xa]}]}),Object(v.a)(a,L.Whip2,{displayName:"Whip Pounce",displayIndex:3,displayInput:"b > b",frames:[{sound:Se.CarbWhip2,sprite:"whipAgain_0001",duration:5,slide:0},{sprite:"whipAgain_0002",duration:5,slide:1.2,particle:ja.jumpSmoke},{sprite:"whipAgain_0003",duration:5,slide:.8,cancel:{duration:6,canRapid:!0,onHit:Object(g.a)({"4b":L.Whip3,"5b":L.Whip3,"6b":L.Whip3},e.whipAgainCancel),onBlock:Object(g.a)({"4b":L.Whip3,"5b":L.Whip3,"6b":L.Whip3},e.whipAgainCancel)},attack:{damage:.06,onBlock:-5,hitboxes:[rr],tumble:{dx:.5,dy:-.5,juggles:3}}},{sprite:"land_0001",duration:5,slide:.4,particle:ja.landSmoke},{sprite:"land_0001",duration:5,slide:.2},{sprite:"land_0001",duration:5,slide:.1},{sprite:"land_0001",duration:5,slide:0}]}),Object(v.a)(a,L.Whip3,{displayName:"Whip Splash",displayIndex:3,displayInput:"b > b > b",frames:[{sprite:"whipFinal_0001",duration:5},{sprite:"whipFinal_0002",duration:5}].concat(Object(k.a)((r=e.whipSplashHitCancel,[{sound:Se.CarbWhip3,sprite:"whipFinal_0003",duration:5,cancel:{duration:10,canRapidBlock:!0,onHit:Object(g.a)({},r)},attack:{impactType:B.Large,damage:.07,onBlock:-15,tumble:{canRelaunch:!0,dx:.5,dy:-.94,juggles:0},hitboxes:[ir]}},{sprite:"whipFinal_0004",duration:7},{sprite:"whipFinal_0005",duration:7},{sprite:"whipFinal_0006",duration:7},{sprite:"whipFinal_0007",duration:7}])))}),Object(v.a)(a,L.Jump,{displayName:"Jump Attack",displayIndex:10,displayInput:"6c",cannotCounterHit:!0,drawBox:ya.AirborneDrawBox,hurtboxes:[ya.AirborneHurtBox],frames:[{sprite:"jump_0001",throwHurtboxes:[],duration:4,drawBox:ya.DrawBox,hurtboxes:[ya.HurtBox],cannotCounterHit:!1},{sprite:"jump_0001",throwHurtboxes:[],sound:Se.CarbJump,particle:ja.jumpSmoke,duration:1,drawBox:ya.DrawBox,hurtboxes:[ya.HurtBox],cannotCounterHit:!1},{sprite:"jump_0002",isAirborne:!0,duration:5,slide:.4,hover:-.6},{sprite:"jump_0003",isAirborne:!0,duration:5,slide:.4,hover:-.4},{sprite:"jump_0004",isAirborne:!0,duration:3,slide:.24,hover:-.1},{sprite:"jump_0004",isAirborne:!0,duration:3,slide:.24,hover:-.05},{sprite:"jump_0005",isAirborne:!0,duration:3,slide:.32,hover:0},{sprite:"jump_0005",isAirborne:!0,duration:1,slide:.06,hover:.0375,hurtboxes:[ya.JumpAttackHurtbox],cancel:{onWhiff:Object(g.a)({},e.jumpCancel1)}},{sprite:"jump_0005",isAirborne:!0,duration:3,slide:.18,hover:.15*3/4,hurtboxes:[ya.JumpAttackHurtbox]},{sprite:"jump_0006",isAirborne:!0,duration:3,slide:.24,hover:.2,hurtboxes:[ya.JumpAttackHurtbox]},{sprite:"jump_0006",isAirborne:!0,duration:1,slide:.08,hover:.05,hurtboxes:[ya.JumpAttackHurtbox],cancel:{onWhiff:Object(g.a)({},e.jumpCancel2)}},{sprite:"jump_0006",isAirborne:!0,duration:3,slide:.24,hover:.2*3/4,hurtboxes:[ya.JumpAttackHurtbox]},{sprite:"jump_0007",isAirborne:!0,duration:5,slide:.16,hover:.15,hurtboxes:[ya.JumpAttackHurtbox],attack:$a},{sprite:"jump_0008",isAirborne:!0,duration:5,slide:.16,hover:.15,hurtboxes:[ya.JumpAttackHurtbox],copyPrevAttack:!0},{sprite:"jump_0009",isAirborne:!0,duration:5,slide:.16,hover:.15,hurtboxes:[ya.JumpAttackHurtbox],attack:er},{sprite:"jump_0010",isAirborne:!0,duration:5,slide:.16,hover:.15,hurtboxes:[ya.JumpAttackHurtbox],copyPrevAttack:!0}].concat(Object(k.a)(ya.Landing.frames))}),a),e.attacks)}},cr=["frenzy_0004","frenzy_0005","frenzy_0006","frenzy_0007","frenzy_0008"],ur=cr.length;var lr,hr,dr=[{sprite:"trample_0001",duration:4,slide:.2},{sound:Se.CarbTrample,sprite:"trample_0002",duration:4,slide:.8}].concat(Object(k.a)(Ft(8).map((function(e,t,n){var a=[.5,.5,.35,.35,.2,.2,.1,.1][e],r=6===e,i=e%2===0;return Object(g.a)({sprite:["trample_0003","trample_0004","trample_0005","trample_0006","trample_0003","trample_0004","trample_0005","trample_0006"][e],duration:5,slide:a,cancel:{duration:10,canRapid:!0}},i?{attack:{impactType:r?B.Large:void 0,damage:.04,chip:.01,meterGainAttackOnHit:.5*kn.MeterGainAttackOnHit,meterGainAttackOnBlock:.5*kn.MeterGainAttackOnBlock,meterGainDefendOnBlock:.5*kn.MeterGainDefendOnBlock,blockstun:r?23:20,hitstun:r?30:25,hitboxes:[{center:{x:.7,y:0},size:{x:.4,y:.3}}],tumbleOnAirborne:{dx:r?1:a/5,dy:r?-.4:-.23,juggles:4,canRelaunch:!0}}}:{copyPrevAttack:!0})}))),[{sprite:"trample_0007",duration:5,slide:.2},{sprite:"trample_0008",duration:5,slide:.1},{sprite:"trample_0009",duration:5}]),pr=[{duration:5,sprite:"soup_0004",teleportToStoredPosition:!0},{sprite:"soup_0005",duration:5},{sprite:"soup_0006",duration:5},{sprite:"soup_0007",duration:5},{sprite:"soup_0008",duration:3},{sprite:"soup_0008",duration:2,sound:Se.CarbSoupBowl},{sprite:"soup_0009",duration:5},{sprite:"soup_0010",duration:5},{sprite:"soup_0011",duration:5},{sprite:"soup_0012",duration:5},{sprite:"soup_0013",duration:5},{duration:240,sprite:"soup_0014",attack:{impactAutoCorrect:!0,isProjectile:!0,damage:.05,chip:.03,blockstun:20,hitboxes:[{center:{x:0,y:.4},size:{x:.4,y:.2}}],tumble:{dx:0,dy:-.9,juggles:9,canRelaunch:!0,nextHitSetsAngle:!0}}},{duration:1,sprite:"soup_0014",particle:ja.jumpSmoke}].map((function(e){return Object(g.a)(Object(g.a)({},e),{},{invulnVsAirborne:!0})})),fr=[{sprite:"fist_0002",duration:1,sound:Se.CarbServeSoup,projectileId:Q.Soup},{sprite:"fist_0002",duration:4},{sprite:"fist_0003",duration:5},{sprite:"fist_0004",duration:5},{sprite:"fist_0003",duration:5},{sprite:"fist_0004",duration:5},{sprite:"fist_0005",duration:5}],br=[{sprite:"fist_0001",duration:kn.KaraWindow},{sound:Se.CarbPrepSoup,sprite:"fist_0001",duration:5-kn.KaraWindow},{sprite:"fist_0002",duration:5,remote:{sprite:"soup_0003",offset:{x:1.5,y:0},relativeDrawBox:{center:{x:0,y:0},size:{x:1,y:1}},keepOnScreen:!0}}].concat(Object(k.a)(Ft(9).map((function(e){return{sprite:"fist_0003",duration:5,cancel:{onWhiff:{4:G.ServeSoup,6:G.ServeSoup,"4a":G.ServeSoup,"5a":G.ServeSoup,"6a":G.ServeSoup,"4b":G.ServeSoup,"5b":G.ServeSoup,"6b":G.ServeSoup,"4c":G.ServeSoup,"5c":G.ServeSoup,"6c":G.ServeSoup}},remote:{sprite:(e%3===1?"soup_0002":e%3===2&&"soup_0003")||"soup_0001",slide:.5,offset:{x:1.5+4.5*e/9,y:0},relativeDrawBox:{center:{x:0,y:0},size:{x:1,y:1}},keepOnScreen:!0,storePosition:!0}}})))),gr=function(e){return{pushback:0,damage:.04,chip:.015,meterGainAttackOnHit:.5*kn.MeterGainAttackOnHit,meterGainAttackOnBlock:.5*kn.MeterGainAttackOnBlock,meterGainDefendOnBlock:.5*kn.MeterGainDefendOnBlock,hitstop:5,hitboxes:[{center:{x:0,y:-.15},size:{x:2.4,y:.5}}],blockstun:e?19:10,hitstun:e?void 0:20,tumble:e?{dx:.6,dy:-.45,juggles:9}:void 0,tumbleOnAirborne:e?{dx:.2,dy:-.15,juggles:0,canRelaunch:!0}:{dx:0,dy:-.15,juggles:1,canRelaunch:!0}}},mr=sr({name:"Noodle",code:"arms",winSound:Se.AnnouncerMatchWinNoodle,flavors:[{fid:"default",name:"Noodle",folder:"noodle"},{fid:"striped",name:"Striped Noodle",folder:"noodle_stripes"},{fid:"pistachio",name:"Pistachio Noodle",folder:"noodle_pistachio"},{fid:"strawberry",name:"Strawberry Noodle",folder:"noodle_strawberry"},{fid:"plaid",name:"Plaid Noodle",folder:"noodle_plaid",requireMMR:ee},{fid:"halloween",name:"Mummy Noodle",folder:"noodle_mummy",unlockSteam:!0,requireCode:"halloween_noodle",theme:Ie.Halloween},{fid:"birthday",name:"Candle Noodle",folder:"noodle_candle",unlockSteam:!0,requireCode:"birthday_noodle",theme:Ie.Birthday},{fid:"normal",name:"Normal Noodle",folder:"noodle_normal",unlockSteam:!0,requireCode:"normal_noodle",theme:Ie.AprilFools},{fid:"pattern",name:"Wavy Noodle",folder:"noodle_pattern",requirePremium:!0}],input:{"4b":G.Trample,"5c":G.PrepSoup,"4c":G.Frenzy},slapCancel:{"4b":G.Trample,"5b":G.Trample,"6b":L.Whip3},whipFirstCancel:{},whipAgainCancel:{},whipSplashHitCancel:{"4c":G.PrepSoup,"5c":G.PrepSoup,"6c":G.PrepSoup},jumpCancel1:{},jumpCancel2:{4:G.BuzzSaw,"4a":G.BuzzSaw,"4b":G.BuzzSaw,"4c":G.BuzzSaw},projectiles:Object(v.a)({},Q.Soup,{displayName:"Soup",displayIndex:22,dieOnConsume:!0,dieOnFighterHit:!0,loop:!1,offset:{x:0,y:0},sequence:{drawBox:ya.DrawBox,pushboxes:[],strikeHurtboxes:[{center:{x:0,y:0},size:{x:.6,y:1}}],frames:pr},onBlock:{drawBox:ya.DrawBox,pushboxes:[],hurtboxes:[],frames:[{duration:1,sprite:"soup_0014",particle:ja.jumpSmoke}]},onHit:{drawBox:ya.DrawBox,pushboxes:[],hurtboxes:[],frames:[{duration:15,sprite:"soup_0015"}]},hideImpactOnVoid:!0}),attacks:(or={},Object(v.a)(or,G.Trample,{displayName:"Trample",displayIndex:15,displayInput:"4b",frames:dr}),Object(v.a)(or,G.PrepSoup,{displayName:"Prep Soup",displayIndex:20,displayInput:"5c",projectileLimit:2,frames:br,next:G.ServeSoup}),Object(v.a)(or,G.ServeSoup,{displayName:"Serve Soup",displayIndex:21,displayInput:"5c > c",frames:fr}),Object(v.a)(or,G.Frenzy,{displayName:"Frenzy",displayIndex:30,displayInput:"4c",frames:[{sound:Se.CarbFrenzy,sprite:"frenzy_0001",duration:5,armor:!0,strikeHurtboxes:[ya.HurtBox,{center:{x:.7,y:-.2},size:{x:.4,y:.2}}]},{sprite:"frenzy_0002",duration:5,armor:!0,strikeHurtboxes:[ya.HurtBox,{center:{x:.7,y:-.2},size:{x:.4,y:.2}}]},{sprite:"frenzy_0003",duration:5,armor:!0,strikeHurtboxes:[ya.HurtBox,{center:{x:.7,y:-.2},size:{x:.4,y:.2}}]}].concat(Object(k.a)(Ft(ur).map((function(e){return function(e){var t=e===ur-1;return{sprite:cr[e%cr.length],duration:6,slide:t?0:.2,armor:0===e,cancel:t?{duration:15,canRapidHitAirborne:!0,canRapidHitGrounded:!0}:void 0,attack:{impactType:t?B.Large:void 0,damage:0===e||1===e||2===e||3===e?.025:.05,chip:.01,addScaling:t?1:-1,addScalingFirstHit:3+(t?1:-1),meterGainAttackOnHit:kn.MeterGainAttackOnHit*(t?1:.25),meterGainAttackOnBlock:kn.MeterGainAttackOnBlock*(t?1:.25),meterGainDefendOnBlock:kn.MeterGainDefendOnBlock*(t?1:.25),onBlock:-30,pushback:0,tumble:t?{dx:.3,dy:-1.05,juggles:9,canRelaunch:!0}:{dx:0,dy:-.8,juggles:1,canRelaunch:!0},snapTowards:{percent:t?1:.7,center:{y:-.4}},hitboxes:[{center:{x:1.2,y:0+-.05*e},size:{x:1.4,y:.8+.1*e}}]}}}(e)}))),[{sprite:"frenzy_0009",duration:5},{sprite:"frenzy_0010",duration:5},{sprite:"frenzy_0011",duration:5},{sprite:"frenzy_0012",duration:5},{sprite:"frenzy_0013",duration:5},{sprite:"frenzy_0014",duration:10},{sprite:"frenzy_0015",duration:5}])}),Object(v.a)(or,G.BuzzSaw,{displayName:"Buzz Saw",displayIndex:11,displayInput:"6c > 4",displayCancelsFrom:L.Jump,isAirborne:!0,cannotCounterHit:!0,drawBox:ya.AirborneDrawBox,hurtboxes:[ya.AirborneHurtBox],frames:[{sprite:"jump_0006",duration:5,slide:.1,hover:.2,hurtboxes:[ya.JumpAttackHurtbox]},{sprite:"jump_0010",duration:5,slide:0,hover:.1,pushboxes:[ya.SkinnyPushBox],attack:gr(),sound:Se.CarbSlap},{sprite:"jump_0009",duration:5,slide:0,hover:.1,pushboxes:[ya.SkinnyPushBox],attack:gr()},{sprite:"jump_0010",duration:5,slide:0,hover:.08,pushboxes:[ya.SkinnyPushBox],attack:gr(),sound:Se.CarbSlap},{sprite:"jump_0009",mirrorImage:!0,duration:5,slide:0,hover:.08,pushboxes:[ya.SkinnyPushBox],attack:gr()},{sprite:"jump_0010",duration:5,slide:0,hover:.07,pushboxes:[ya.SkinnyPushBox],attack:gr(),sound:Se.CarbSlap},{sprite:"jump_0009",duration:5,slide:0,hover:.07,pushboxes:[ya.SkinnyPushBox],attack:gr(!0)},{sprite:"jump_0006",duration:5,slide:0,hover:.1,pushboxes:[ya.SkinnyPushBox]},{sprite:"land_0001",isAirborne:!1,particle:ja.landSmoke,duration:8,drawBox:ya.DrawBox,hurtboxes:[ya.LandingHurtBox],pushboxes:[ya.PushBox]}]}),or)}),vr={next:V.DeflectHit,onProjectile:V.DeflectProjectile},kr=function(e){return[{sprite:"deflectStart_0002",duration:1,hurtboxes:[],freezeOther:e.freezeOther,effects:[M.OnionLightning1]},{sprite:"deflectStart_0002",meterGain:.1*kn.MeterOneBar,duration:4,hurtboxes:[],freezeOther:e.freezeOther,effects:[M.OnionLightning1]},{sprite:"deflectStart_0003",duration:5,hurtboxes:[],freezeOther:e.freezeOther,effects:[M.OnionLightning1]},{sprite:"deflectStart_0004",duration:5,hurtboxes:[],freezeOther:e.freezeOther,effects:[M.OnionLightning1]},{sprite:"deflectStart_0005",duration:5,hurtboxes:[],freezeOther:e.freezeOther,effects:[M.OnionLightning1]},{sprite:"deflectSuccess_0001",sound:Se.SpiceParryHit,effects:[M.OnionLightning1],duration:5,cancel:{duration:10,onWhiff:{"4a":V.DeflectAgain,"5a":V.DeflectAgain,"6a":V.DeflectAgain}}},{sprite:"deflectSuccess_0002",effects:[M.OnionLightning1],particle:ja.cackleStartFx,duration:5},{sprite:"deflectSuccess_0003",effects:[M.OnionLightning1],particle:ja.cackleAttackFx,duration:5,cancel:{duration:10,canRapidHitAirborne:!0,canRapidHitGrounded:!0},attack:{impactType:B.Large,damage:.1,chip:.05,addScalingFirstHit:4,onHit:12,onBlock:-5,pushback:0,hitboxes:[{center:{x:0,y:0},size:{x:3.6,y:1}}]}},{sprite:"deflectSuccess_0002",effects:[M.OnionLightning2],duration:5},{sprite:"deflectSuccess_0003",effects:[M.OnionLightning2],duration:5},{sprite:"deflectSuccess_0002",effects:[M.OnionLightning2],duration:5},{sprite:"deflectSuccess_0001",effects:[M.OnionLightning2],duration:5}]},jr=Ea({name:"Onion",code:"legs",winSound:Se.AnnouncerMatchWinOnion,flavors:[{fid:"default",name:"Onion",folder:"onion_default"},{fid:"striped",name:"Striped Onion",folder:"onion_stripes"},{fid:"blue",name:"Midnight Onion",folder:"onion_midnight"},{fid:"green",name:"Green Onion Onion",folder:"onion_green"},{fid:"plaid",name:"Plaid Onion",folder:"onion_plaid",requireMMR:ee},{fid:"halloween",name:"Ghost Onion",folder:"onion_ghost",unlockSteam:!0,requireCode:"halloween_onion",theme:Ie.Halloween},{fid:"birthday",name:"Rainbow Sprinkle Onion",folder:"onion_rainbowsprinkle",unlockSteam:!0,requireCode:"birthday_onion",theme:Ie.Birthday},{fid:"normal",name:"Normal Onion",folder:"onion_normal",unlockSteam:!0,requireCode:"normal_onion",theme:Ie.AprilFools},{fid:"pattern",name:"Galaxy Onion",folder:"onion_pattern",requirePremium:!0}],input:{"4c":V.DeflectStart,"5c":V.Hopkick},sweepCancel:{"4c":V.Hopkick,"5c":V.Hopkick,"6c":V.Hopkick},jumpCancel:{4:V.LongJump,"4a":V.LongJump,"4b":V.LongJump,"4c":V.LongJump},attacks:(lr={},Object(v.a)(lr,V.DeflectStart,{displayName:"Feint",displayIndex:30,displayInput:"4c",frames:[{sound:Se.SpiceParry,sprite:"deflectStart_0001",duration:8,onParry:vr},{sprite:"deflectStart_0002",duration:7},{sprite:"deflectStart_0003",duration:7},{sprite:"deflectStart_0004",duration:7},{sprite:"deflectStart_0005",duration:7},{sprite:"deflectStart_0006",duration:7}]}),Object(v.a)(lr,V.DeflectAgain,{displayName:"Feint Again",displayIndex:32,displayInput:"4c > on hit > 5a",frames:[{sound:Se.SpiceParry,effects:[M.OnionLightning1],sprite:"deflectStart_0001",duration:8,onParry:vr},{sprite:"deflectStart_0002",effects:[M.OnionLightning1],duration:7,onParry:vr},{sprite:"deflectStart_0003",duration:7},{sprite:"deflectStart_0004",duration:7},{sprite:"deflectStart_0005",duration:7},{sprite:"deflectStart_0006",duration:7}]}),Object(v.a)(lr,V.DeflectHit,{displayName:"Cackle",displayIndex:31,displayInput:"4c > on hit",frames:kr({freezeOther:!0})}),Object(v.a)(lr,V.DeflectProjectile,{displayName:"Cackle (Projectile Parry)",displayIndex:32,displayInput:"4c > on hit",frames:kr({freezeOther:!1})}),Object(v.a)(lr,V.Hopkick,{displayName:"Hopkick",displayIndex:20,displayInput:"5c",frames:[{sprite:"hopkick_0001",duration:5,slide:-.6},{sound:Se.SpiceHopkick,sprite:"hopkick_0002",duration:4,slide:-.4},{sprite:"hopkick_0002",duration:1,slide:0,cancel:{onWhiff:{4:V.HopFake,"4a":V.HopFake,"4b":V.HopFake,"4c":V.HopFake}}},{sprite:"hopkick_0003",particle:ja.jumpSmoke,invulnVsProjectile:!0,throwHurtboxes:[],duration:5,slide:.2},{sprite:"hopkick_0004",invulnVsProjectile:!0,throwHurtboxes:[],duration:5,slide:1.2},{sprite:"hopkick_0005",invulnVsProjectile:!0,throwHurtboxes:[],duration:5,slide:1,cancel:{duration:10,canRapid:!0,aiRapidOnHit:!0},attack:{impactType:B.Large,damage:.09,chip:.03,onHit:1,onBlock:-5,hitboxes:[{center:{x:.9,y:.05},size:{x:.8,y:.4}}]}},{sprite:"hopkick_0006",invulnVsProjectile:!0,throwHurtboxes:[],duration:5,slide:.3},{sprite:"land_0001",particle:ja.landSmoke,duration:5,slide:.1},{sprite:"land_0001",duration:5}]}),Object(v.a)(lr,V.HopFake,{displayName:"Empty Hop",displayIndex:21,displayInput:"5c > 4",displayCancelsFrom:V.Hopkick,frames:[{sprite:"hopkick_0003",particle:ja.jumpSmoke,invulnVsProjectile:!0,throwHurtboxes:[],duration:5,slide:.2},{sprite:"hopkick_0006",invulnVsProjectile:!0,throwHurtboxes:[],duration:5,slide:1.2,forceRecovery:!0},{sprite:"hopkick_0006",invulnVsProjectile:!0,throwHurtboxes:[],duration:3,slide:.2,forceRecovery:!0},{sprite:"land_0001",particle:ja.landSmoke,duration:5,slide:.1,forceRecovery:!0}]}),Object(v.a)(lr,V.LongJump,{displayName:"Long Jump",displayIndex:11,displayInput:"6c > 4",displayCancelsFrom:q.Jump,isAirborne:!0,cannotCounterHit:!0,drawBox:ya.AirborneDrawBox,hurtboxes:[ya.AirborneHurtBox],frames:[{sprite:"jump_0004",duration:5,slide:.3,hover:-.1},{sprite:"jump_0005",duration:6,slide:.3,hover:-.05},{sprite:"jump_0006",duration:6,slide:.3,hover:.25},{sprite:"jump_0006",duration:5,slide:.3,hover:.35},{sprite:"jump_0006",duration:5,slide:.3,hover:.45},{sprite:"burst_0004",duration:6,slide:.3,hover:.1,attack:{impactType:B.Large,damage:.1,addScalingFirstHit:1,onBlock:10,onHit:20,hitboxes:[{center:{x:1,y:0},size:{x:1,y:.4}}]}}].concat(Object(k.a)(ya.Landing.frames))}),lr)}),yr={center:{x:.5,y:0},size:{x:2,y:1}};function xr(e){return[{sound:Se.CarbTeleport,sprite:"teleport_0002",duration:5},{sprite:"teleport_0003",duration:5,hurtboxes:[],pushboxes:[]},{sprite:void 0,duration:1,hurtboxes:[],pushboxes:[],meterGain:e.meterGain,teleportToOther:e.toOpponent,slide:e.slide,allowOffStage:!0},{sprite:void 0,duration:1,hurtboxes:[],pushboxes:[],allowOffStage:!0},{sprite:void 0,duration:1,hurtboxes:[],crossupOnOverlap:!0},{sprite:"teleport_0003",updateFacingRight:!0,duration:1,hurtboxes:[],forceRecovery:!0},{sprite:"teleport_0003",duration:4,forceRecovery:!0},{sprite:"teleport_0002",duration:5,forceRecovery:!0},{sprite:"teleport_0001",duration:5,forceRecovery:!0}]}var Or=sr({name:"Rice",code:"armsb",winSound:Se.AnnouncerMatchWinRice,flavors:[{fid:"default",name:"Rice",folder:"rice"},{fid:"striped",name:"Striped Rice",folder:"rice_stripes"},{fid:"chocolate",name:"Chocolate Rice",folder:"rice_chocolate"},{fid:"aqua",name:"Aqua Rice",folder:"rice_aqua"},{fid:"plaid",name:"Plaid Bice",folder:"rice_plaid",requireMMR:ee},{fid:"halloween",name:"Pumpkin Spice Rice",folder:"rice_pumpkinspice",unlockSteam:!0,requireCode:"halloween_rice",theme:Ie.Halloween},{fid:"birthday",name:"Strawberry Cake Rice",folder:"rice_ricecake",unlockSteam:!0,requireCode:"birthday_rice",theme:Ie.Birthday},{fid:"normal",name:"Normal Rice",folder:"rice_normal",unlockSteam:!0,requireCode:"normal_rice",theme:Ie.AprilFools},{fid:"pattern",name:"Polka Rice",folder:"rice_pattern",requirePremium:!0}],input:{"4b":z.Swipe,"5c":z.SwatStart,"4c":z.Teleport},slapCancel:{"4b":z.Swipe,"5b":z.Swipe,"6b":L.Whip3,"4c":z.QuickportBack,"6c":z.QuickportClose},whipFirstCancel:{"4a":z.Swipe,"5a":z.Swipe,"6a":z.Swipe,"4c":z.QuickportBack,"5c":z.SwatStart,"6c":z.QuickportClose},whipAgainCancel:{"4c":z.QuickportSemiClose,"5c":z.SwatStart,"6c":z.QuickportClose},whipSplashHitCancel:{},jumpCancel1:{4:z.JumpDrill,"4a":z.JumpDrill,"4b":z.JumpDrill,"4c":z.JumpDrill},jumpCancel2:{},attacks:(hr={},Object(v.a)(hr,z.Swipe,{displayName:"Swipe",displayIndex:9,displayInput:"4b",frames:[{sprite:"swat_0001",duration:kn.KaraWindow},{sound:Se.CarbSwipe,sprite:"swat_0001",duration:5-kn.KaraWindow},{sprite:"swipe_0001",duration:5},{sprite:"swipe_0002",duration:5},{sprite:"swipe_0003",duration:5,cancel:{duration:10,canRapid:!0},attack:{impactType:B.Large,hitstop:10,damage:.08,chip:.03,meterGainAttackOnBlock:.5*kn.MeterGainAttackOnBlock,meterGainAttackOnHit:.5*kn.MeterGainAttackOnHit,meterGainDefendOnBlock:.5*kn.MeterGainDefendOnBlock,onBlock:-8,onHit:-2,hitboxes:[{center:{x:1.6,y:-.1},size:{x:2.2,y:1.2}}]}},{sprite:"swipe_0004",duration:5,strikeHurtboxes:[yr],cancel:{duration:10,canRapid:!0},attack:{hitsGroundedOnly:!0,impactType:B.Small,hitstop:10,damage:.04,chip:.01,pushback:-.1,meterGainAttackOnBlock:.5*kn.MeterGainAttackOnBlock,meterGainAttackOnHit:.5*kn.MeterGainAttackOnHit,meterGainDefendOnBlock:.5*kn.MeterGainDefendOnBlock,onBlock:-2,onHit:7,hitboxes:[{center:{x:.8,y:.4},size:{x:.6,y:.2}}]}},{sprite:"swipe_0005",duration:6,strikeHurtboxes:[yr]},{sprite:"swipe_0006",duration:5,strikeHurtboxes:[yr]},{sprite:"swipe_0007",duration:5}]}),Object(v.a)(hr,z.SwatStart,{displayName:"Swat",displayIndex:20,displayInput:"5c",frames:[{sprite:"swat_0001",duration:kn.KaraWindow},{sound:Se.CarbSwat,sprite:"swat_0001",duration:5-kn.KaraWindow},{sprite:"swat_0002",duration:5},{sprite:"swat_0003",duration:1,invulnVsAirborne:!0,invulnVsProjectile:!0,cancel:{duration:2,onHitAirborne:{auto:z.SwatSlam}},attack:{hitstop:10,damage:.04,meterGainAttackOnHit:0,onBlock:0,hitsAirborneOnly:!0,tumble:{canRelaunch:!0,dx:0,dy:0,juggles:1},hitboxes:[{center:{x:2,y:-.65},size:{x:3,y:1}}],capture:!0,snapTo:{x:2.2,y:-.8}}},{sprite:"swat_0003",duration:9},{sprite:"swat_0004",duration:5},{sprite:"swat_0005",duration:5}]}),Object(v.a)(hr,z.SwatSlam,{displayName:"Swat Slam",displayIndex:21,displayInput:"5c > on hit",frames:[{sprite:"swatDown_0001",duration:5,hurtboxes:[]},{sprite:"swatDown_0002",duration:5,hurtboxes:[],cancel:{duration:10,canRapid:!0},attack:{impactType:B.Large,damage:.08,onBlock:0,tumble:{canRelaunch:!0,dx:0,dy:-.75,juggles:9,nextHitSetsAngle:!0},hitboxes:[{center:{x:2,y:.5},size:{x:3,y:3}}],snapTo:{x:2.2,y:0}}},{sprite:"swatDown_0003",duration:5},{sprite:"swatDown_0004",duration:5},{sprite:"swatDown_0005",duration:6},{sprite:"swatDown_0006",duration:5}]}),Object(v.a)(hr,z.Teleport,{displayName:"Teleport",displayIndex:30,displayInput:"4c",frames:[{sound:Se.CarbTeleport,sprite:"teleport_0001",duration:5,armor:!0},{sprite:"teleport_0002",duration:5,armor:!0},{sprite:"teleport_0003",duration:5,hurtboxes:[],pushboxes:[]},{sprite:void 0,duration:1,hurtboxes:[],pushboxes:[],slide:5,allowOffStage:!0},{sprite:void 0,duration:13,hurtboxes:[],pushboxes:[],allowOffStage:!0},{sprite:void 0,duration:1,hurtboxes:[],crossupOnOverlap:!0},{sprite:"teleport_0003",updateFacingRight:!0,duration:1,hurtboxes:[],forceRecovery:!0},{sprite:"teleport_0003",duration:4,forceRecovery:!0},{sprite:"teleport_0002",duration:5,forceRecovery:!0},{sprite:"teleport_0001",duration:5,forceRecovery:!0,cancel:{duration:10,onWhiff:{"4d":F.ThrowStart,"5d":F.ThrowStart,"6d":F.ThrowStart}}},{sprite:"teleport_0004",duration:5,forceRecovery:!0}]}),Object(v.a)(hr,z.QuickportBack,{displayName:"Quickport (retreat)",displayIndex:31,displayInput:"b > 4c",frames:xr({slide:-1})}),Object(v.a)(hr,z.QuickportSemiClose,{displayName:"Quickport (semi-close)",displayIndex:32,displayInput:"b > b > 4c",frames:xr({slide:-2,toOpponent:!0})}),Object(v.a)(hr,z.QuickportClose,{displayName:"Quickport (close)",displayIndex:32,displayInput:"b > 6c",frames:xr({slide:-.5,meterGain:kn.MeterGainAttackOnBlock,toOpponent:!0})}),Object(v.a)(hr,z.JumpDrill,{displayName:"Jump Drill",displayIndex:11,displayInput:"6c > 4",displayCancelsFrom:L.Jump,isAirborne:!0,cannotCounterHit:!0,drawBox:ya.AirborneDrawBox,hurtboxes:[ya.AirborneHurtBox],frames:[{sprite:"jump_0006",duration:5,slide:.4,hover:.35,sound:Se.CarbSlap},{sprite:"jump_0007",mirrorImage:!0,duration:5,slide:.6,hover:.4,pushboxes:[ya.SkinnyPushBox],attack:{damage:.05,hitstop:12,addScalingFirstHit:1,onBlock:-1,onHit:-1,tumbleOnAirborne:{dx:.1,dy:-.6,juggles:1,canRelaunch:!0},hitboxes:[{center:{x:.4,y:.5},size:{x:.6,y:.2}}]}},{sprite:"jump_0008",mirrorImage:!0,duration:5,slide:.6,hover:.4,pushboxes:[ya.SkinnyPushBox],copyPrevAttack:!0}].concat(Object(k.a)(ya.Landing.frames))}),hr)});function wr(e,t){return"".concat(e).concat(t||"",".png")}function Sr(e){var t,n,a=e.defaults,r=e.seqid,i=e.imagePrefix,o=e.sc,s=e.displayName||r,c=o.frames.reduce((function(e,t){return t.duration+e}),0),u=0,l=o.frames.some((function(e){var t;return(null===(t=e.attack)||void 0===t?void 0:t.stunPhase)===kn.Phase.ThrowStunPhase}));var h=o.frames.some((function(e){return e.attack}));return{displayName:s,displayIndex:o.displayIndex||0,displayInput:o.displayInput||"",displayCancelsFrom:o.displayCancelsFrom||"",seqid:r,meterCost:null!==(t=o.meterCost)&&void 0!==t?t:0,requireInstall:o.requireInstall,canBlock:!!o.canBlock,isIdle:!!o.isIdle,isInStun:!!o.isInStun,isDowned:!!o.isDowned,isWalkingForward:!!o.isWalkingForward,hasAttacks:h,next:o.next,onLand:o.onLand,keepFacingRight:!!o.keepFacingRight,palindromeAnimation:!!o.palindromeAnimation,projectileLimit:null!==(n=o.projectileLimit)&&void 0!==n?n:0,frames:o.frames.map((function(e){var t,n,s,h,d,p,f,b,m,v,k,j,y,x,O,w,S,C,A,T,M,P,R,I,D,H,E,_,F,L,G,z,W,N,U,q,V,Y,J,K,Q,X,$,ee,te,ne,ae,re,ie,oe,se,ce;if(!Number.isInteger(e.duration))throw new Error("non-integer duration! something went wrong during configs");var ue,le,he,de,pe=e.cancel?Object(g.a)(Object(g.a)({},e.cancel.onHit||{}),e.cancel.onHitAirborne||{}):{},fe=e.cancel?Object(g.a)(Object(g.a)({},e.cancel.onHit||{}),e.cancel.onHitGrounded||{}):{},be=e.cancel?Object(g.a)(Object(g.a)(Object(g.a)({},e.cancel.onHit||{}),e.cancel.onHitAirborne||{}),e.cancel.onHitTumbling||{}):{},ge=!!(null!==(t=e.isAirborne)&&void 0!==t?t:o.isAirborne),me=e.attack||o.attack,ve=void 0!==(null===me||void 0===me?void 0:me.damage)?Math.floor(me.damage*kn.StandardHealth):0;if(me){var ke=void 0===me.blockstun&&void 0===me.onBlock,je=void 0===me.tumble&&void 0===me.hitstun&&void 0===me.onHit;if(ke&&je)throw new Error("cannot have attack with hit or block defined");var ye=c-u;if(void 0===me.blockstun?ue=ye+(he=me.onBlock):he=(ue=me.blockstun)-ye,me.tumble){if(void 0!==me.hitstun||void 0!==me.onHit)throw new Error("do not specify hitstun alongside tumble: "+r);de=ye-(le=0)}else void 0===me.hitstun?le=ye+(de=me.onHit):de=(le=me.hitstun)-ye}return u+=e.duration,{sound:e.sound,imageSrc:e.sprite?wr(i,e.sprite):void 0,behindSrc:e.behind?wr(i,e.behind):void 0,mirrorImage:!!e.mirrorImage,particle:e.particle?Cr(e.particle):void 0,duration:e.duration,effects:e.effects||[],freezeOther:!!e.freezeOther,isAirborne:ge,armor:!!e.armor,armorVsAirborne:!!e.armorVsAirborne,armorVsGrounded:!!e.armorVsGrounded,armorVsProjectile:!!e.armorVsProjectile,invulnVsAirborne:!!e.invulnVsAirborne,invulnVsProjectile:!!e.invulnVsProjectile,hover:null!==(n=e.hover)&&void 0!==n?n:0,slide:null!==(s=e.slide)&&void 0!==s?s:0,storePosition:!!e.storePosition,eraseStoredPosition:!!e.eraseStoredPosition,recoverBlue:null!==(h=e.recoverBlue)&&void 0!==h?h:0,onParry:e.onParry?{next:e.onParry.next,onProjectile:e.onParry.onProjectile}:void 0,healthGain:null!==(d=e.healthGain)&&void 0!==d?d:0,meterGain:null!==(p=e.meterGain)&&void 0!==p?p:0,isInStun:!!o.isInStun,isDowned:!!o.isDowned,forceRecovery:!!(null!==(f=e.forceRecovery)&&void 0!==f?f:o.forceRecovery),cannotCounterHit:!!(null!==(b=e.cannotCounterHit)&&void 0!==b?b:o.cannotCounterHit),cannotBePushed:!!(null!==(m=e.cannotBePushed)&&void 0!==m?m:o.cannotBePushed),slowPushback:!!(null!==(v=e.slowPushback)&&void 0!==v?v:o.slowPushback),opacity:null!==(k=e.opacity)&&void 0!==k?k:1,afterimages:(null!==(j=null!==(y=null!==(x=e.afterimages)&&void 0!==x?x:o.afterimages)&&void 0!==y?y:a.afterimages)&&void 0!==j?j:[]).map((function(e){var t;return Object(g.a)(Object(g.a)({},e),{},{opacity:null!==(t=e.opacity)&&void 0!==t?t:1,dieOnFighterHit:!!e.dieOnFighterHit})})),drawBox:null!==(O=null!==(w=e.drawBox)&&void 0!==w?w:o.drawBox)&&void 0!==O?O:a.drawBox,pushboxes:null!==(S=null!==(C=e.pushboxes)&&void 0!==C?C:o.pushboxes)&&void 0!==S?S:a.pushboxes,strikeHurtboxes:null!==(A=null!==(T=null!==(M=null!==(P=e.strikeHurtboxes)&&void 0!==P?P:e.hurtboxes)&&void 0!==M?M:o.strikeHurtboxes)&&void 0!==T?T:o.hurtboxes)&&void 0!==A?A:a.strikeHurtboxes,throwHurtboxes:null!==(R=null!==(I=null!==(D=null!==(H=e.throwHurtboxes)&&void 0!==H?H:e.hurtboxes)&&void 0!==D?D:o.throwHurtboxes)&&void 0!==I?I:o.hurtboxes)&&void 0!==R?R:a.throwHurtboxes,setInstall:e.exitInstall?Z.None:e.setInstall,phase:l?kn.Phase.ThrowingPhase:e._phase,_autoTech:!!e._autoTech,aiIgnoreAttack:!!e.aiIgnoreAttack,aiNextOnHit:e.aiNextOnHit,copyPrevAttack:!!e.copyPrevAttack,updateFacingRight:!!e.updateFacingRight,teleportToOther:!!e.teleportToOther,teleportToStoredOrigin:!!e.teleportToStoredPosition,allowOffStage:!!e.allowOffStage,crossupOnOverlap:!!e.crossupOnOverlap,cancel:{window:e.cancel?null!==(E=e.cancel.duration)&&void 0!==E?E:e.duration:0,canRapidBlock:!(!e.cancel||!e.cancel.canRapid&&!e.cancel.canRapidBlock),canRapidHitGrounded:!(!e.cancel||!e.cancel.canRapid&&!e.cancel.canRapidHitGrounded),canRapidHitAirborne:!(!e.cancel||!e.cancel.canRapid&&!e.cancel.canRapidHitAirborne),canWhiffRapid:!(!e.cancel||!e.cancel.canWhiffRapid),onArmor:e.cancel&&e.cancel.onArmor?e.cancel.onArmor:{},onBlock:e.cancel&&e.cancel.onBlock?e.cancel.onBlock:{},onHitAirborne:pe,onHitGrounded:fe,onHitTumbling:be,onWhiff:e.cancel&&e.cancel.onWhiff?e.cancel.onWhiff:{},aiOnBlock:e.cancel&&e.cancel.aiOnBlock,aiOnHit:e.cancel&&e.cancel.aiOnHit,aiRapidOnBlock:e.cancel&&e.cancel.aiRapidOnBlock,aiRapidOnHit:e.cancel&&e.cancel.aiRapidOnHit},projectileId:e.projectileId,remote:e.remote&&{imageSrc:e.remote.sprite?wr(i,e.remote.sprite):void 0,mirrorImage:!!e.remote.mirrorImage,relativeDrawBox:null!==(_=e.remote.relativeDrawBox)&&void 0!==_?_:{center:{x:0,y:0},size:{x:1,y:1}},keepOnScreen:!!e.remote.keepOnScreen,keepOnStage:!!e.remote.keepOnStage,offset:e.remote.offset,slide:null!==(F=e.remote.slide)&&void 0!==F?F:0,hover:null!==(L=e.remote.hover)&&void 0!==L?L:0,storePosition:!!e.remote.storePosition,eraseStoredPosition:!!e.remote.eraseStoredPosition},attack:me&&Object(g.a)(Object(g.a)({},me),{},{damage:ve,hitstop:null!==(G=me.hitstop)&&void 0!==G?G:Math.min(Math.round(Math.abs(ve)/5),kn.MaxGameFreeze),addScalingAfterFirst:null!==(z=me.addScaling)&&void 0!==z?z:0,addScalingFirstHit:null!==(W=null!==(N=me.addScalingFirstHit)&&void 0!==N?N:me.addScaling)&&void 0!==W?W:0,ignoreScaling:!!me.ignoreScaling,chip:void 0===me.chip?0:Math.floor(me.chip*kn.StandardHealth),blueDamage:void 0===me.blueDamage?0:Math.floor(me.blueDamage*kn.StandardHealth),blueOnBlock:void 0===me.blueOnBlock?0:Math.floor(me.blueOnBlock*kn.StandardHealth),meterGainAttackOnBlock:Math.floor(null!==(U=me.meterGainAttackOnBlock)&&void 0!==U?U:kn.MeterGainAttackOnBlock),meterGainAttackOnHit:Math.floor(null!==(q=me.meterGainAttackOnHit)&&void 0!==q?q:kn.MeterGainAttackOnHit),meterGainDefendOnBlock:Math.floor(null!==(V=me.meterGainDefendOnBlock)&&void 0!==V?V:kn.MeterGainDefendOnBlock),meterGainDefendOnHit:Math.floor(null!==(Y=me.meterGainDefendOnHit)&&void 0!==Y?Y:Math.abs(1.5*ve)),onBlock:he,onHit:de,blockstun:ue,hitstun:le,ignoreArmor:!!me.ignoreArmor,ignoreParry:!!me.ignoreParry,unblockable:!!me.unblockable,isThrowStart:!!me.isThrowStart,sameSide:!!me.sameSide,isProjectile:!!me.isProjectile,isAirborne:ge,hitsAirborneOnly:!!me.hitsAirborneOnly,hitsGroundedOnly:!!me.hitsGroundedOnly,impactAutoCorrect:!!me.impactAutoCorrect,impactType:null!==(J=me.impactType)&&void 0!==J?J:B.Small,impactScale:void 0===me.impactScale?1:me.impactScale,pushback:void 0===me.pushback?.2:me.pushback,noCornerPushback:!!me.isProjectile,tumble:me.tumble&&{dx:null!==(K=me.tumble.dx)&&void 0!==K?K:0,dy:null!==(Q=me.tumble.dy)&&void 0!==Q?Q:0,juggles:null!==(X=me.tumble.juggles)&&void 0!==X?X:0,canRelaunch:!!me.tumble.canRelaunch,nextHitSetsAngle:!!me.tumble.nextHitSetsAngle,skipStartupAnimation:!!me.tumble.skipStartupAnimation},tumbleOnAirborne:me.tumbleOnAirborne&&{dx:null!==($=me.tumbleOnAirborne.dx)&&void 0!==$?$:0,dy:null!==(ee=me.tumbleOnAirborne.dy)&&void 0!==ee?ee:0,juggles:null!==(te=me.tumbleOnAirborne.juggles)&&void 0!==te?te:0,canRelaunch:!!me.tumbleOnAirborne.canRelaunch,nextHitSetsAngle:!!me.tumbleOnAirborne.nextHitSetsAngle,skipStartupAnimation:!!me.tumbleOnAirborne.skipStartupAnimation},tumbleOnTumbling:me.tumbleOnTumbling&&{dx:null!==(ne=me.tumbleOnTumbling.dx)&&void 0!==ne?ne:0,dy:null!==(ae=me.tumbleOnTumbling.dy)&&void 0!==ae?ae:0,juggles:null!==(re=me.tumbleOnTumbling.juggles)&&void 0!==re?re:0,canRelaunch:!!me.tumbleOnTumbling.canRelaunch,nextHitSetsAngle:!!me.tumbleOnTumbling.nextHitSetsAngle,skipStartupAnimation:!!me.tumbleOnTumbling.skipStartupAnimation},cannotBurst:!!me.cannotBurst,capture:!!me.capture,snapTowards:me.snapTowards&&{percent:me.snapTowards.percent,center:{x:null!==(ie=me.snapTowards.center.x)&&void 0!==ie?ie:0,y:null!==(oe=me.snapTowards.center.y)&&void 0!==oe?oe:0},ignoreX:void 0===me.snapTowards.center.x,ignoreY:void 0===me.snapTowards.center.y}||me.snapTo&&{percent:1,center:{x:null!==(se=me.snapTo.x)&&void 0!==se?se:0,y:null!==(ce=me.snapTo.y)&&void 0!==ce?ce:0},ignoreX:void 0===me.snapTo.x,ignoreY:void 0===me.snapTo.y}||void 0,stunPhase:me.stunPhase||null,setStunPhase:me.setStunPhase||null})}}))}}function Cr(e){return Sr({defaults:{drawBox:ya.DrawBox,pushboxes:[ya.PushBox],strikeHurtboxes:[ya.HurtBox],throwHurtboxes:[ya.HurtBox],afterimages:[]},seqid:e.seqid,imagePrefix:"particles/",sc:e})}function Ar(e,t,n){var a,r,i=e.name,o=e.setup,s=o.code,c=o.defaults,u="".concat(n.folder,"/").concat(e.setup.imagePrefix);return{previewUrl:kn.AssetsPath("preview/comp2000/portrait_"+wr(n.folder)),hudUrl:kn.AssetsPath("preview/comp2000/hud_"+wr(n.folder)),stats:Object(g.a)(Object(g.a)({},o.stats),{},{id:"".concat(s,":").concat(n.fid),code:s,name:i,winSound:null!==(a=o.winSound)&&void 0!==a?a:Se.Empty,colorIndex:t,flavor:{name:n.name,folder:n.folder,theme:n.theme,requireCode:n.requireCode,requireMMR:n.requireMMR,requirePremium:n.requirePremium,unlockSteam:n.unlockSteam},maxHealth:o.stats.maxHealth||kn.StandardHealth,disableMeter:!!o.stats.disableMeter,isMod:jn.isModCode(s),isBoss:!!o.stats.isBoss}),commands:o.commands,input:Object(g.a)(Object(g.a)({},Rt(o.commands.throw,(function(e){return e}),(function(e){return F.ThrowStart}))),o.input),introSequence:o.introSequence,actions:{rejection:Sr({defaults:c,seqid:F.Rejection,displayName:"Rejection",imagePrefix:u,sc:Object(g.a)({},e.actions.rejection)}),rapid:Sr({defaults:c,seqid:F.Rapid,displayName:"Rapid",imagePrefix:u,sc:Object(g.a)({},e.actions.rapid)}),burst:Sr({defaults:c,seqid:F.Burst,displayName:"Burst",imagePrefix:u,sc:Object(g.a)({},e.actions.burst)}),downed:Sr({defaults:c,seqid:F.Downed,displayName:"Knockdown",imagePrefix:u,sc:Object(g.a)({isDowned:!0,slowPushback:!0,hurtboxes:[]},e.actions.downed)}),standing:Sr({defaults:c,seqid:F.Standing,displayName:"Standing",imagePrefix:u,sc:Object(g.a)({canBlock:!0,isIdle:!0},e.actions.standing)}),blockstun:Sr({defaults:c,seqid:F.Blockstun,displayName:"Blockstun",imagePrefix:u,sc:Object(g.a)({canBlock:!0,isInStun:!0,slowPushback:!0},e.actions.blockstun)}),hitstun:Sr({defaults:c,seqid:F.Hitstun,displayName:"Hitstun",imagePrefix:u,sc:Object(g.a)({isInStun:!0,slowPushback:!0},e.actions.hitstun)}),throwstun:Sr({defaults:c,seqid:F.Throwstun,displayName:"Throwstun",imagePrefix:u,sc:Object(g.a)(Object(g.a)({isInStun:!0},e.actions.throwstun),{},{frames:e.actions.throwstun.frames.map((function(e){return Object(g.a)(Object(g.a)({},e),{},{isProjectileInvuln:!0})}))})}),tumbling:Sr({defaults:c,seqid:F.Tumbling,displayName:"Tumbling",imagePrefix:u,sc:Object(g.a)({isAirborne:!0,isInStun:!0,slowPushback:!0},e.actions.tumbling)}),exhausted:Sr({defaults:c,seqid:F.Exhausted,displayName:"Exhausted",imagePrefix:u,sc:Object(g.a)({isAirborne:!0,isInStun:!0,slowPushback:!0,hurtboxes:[]},e.actions.exhausted)}),falling:Sr({defaults:c,seqid:F.Falling,displayName:"Falling",imagePrefix:u,sc:Object(g.a)({isAirborne:!0,forceRecovery:!0},e.actions.falling)}),landing:Sr({defaults:c,seqid:F.Landing,displayName:"Landing",imagePrefix:u,sc:Object(g.a)({canBlock:!1,forceRecovery:!0},e.actions.landing)}),walkBackward:Sr({defaults:c,seqid:F.WalkBackward,displayName:"Walk Backwards",imagePrefix:u,sc:Object(g.a)({canBlock:!0,isIdle:!0},e.actions.walkBackward)}),walkForward:Sr({defaults:c,seqid:F.WalkForward,displayName:"Walk Forwards",imagePrefix:u,sc:Object(g.a)(Object(g.a)({isIdle:!0,isWalkingForward:!0},e.actions.walkForward),{},{frames:e.actions.walkForward.frames.map((function(e){var t;return Object(g.a)(Object(g.a)({},e),{},{meterGain:(null!==(t=e.meterGain)&&void 0!==t?t:0)+e.duration*kn.MeterPerWalkingFrame})}))})}),throwStart:Sr({defaults:c,seqid:F.ThrowStart,displayName:"Throw",imagePrefix:u,sc:Object(g.a)(Object(g.a)({},e.actions.throwStart),{},{frames:e.actions.throwStart.frames.map((function(e,t,n){return Object(g.a)(Object(g.a)({},e),{},{_autoTech:t<n.findIndex((function(e){return e.attack}))||void 0})}))})}),throwHit:Sr({defaults:c,seqid:F.ThrowHit,displayName:"Throwing",imagePrefix:u,sc:Object(g.a)({},e.actions.throwHit)}),throwTech:Sr({defaults:c,seqid:F.ThrowTech,displayName:"Throw Tech",imagePrefix:u,sc:{frames:ya.ThrowTechFrames(e.actions.blockstun.frames[0].sprite)}}),poseWin:Mr({defaults:c,seqid:F.PoseWin,displayName:"Winning Pose",imagePrefix:u,frames:e.actions.poseWin}),poseLose:Pr({defaults:c,seqid:F.PoseLose,displayName:"Losing Pose",imagePrefix:u,frames:e.actions.poseLose})},attacks:Bt(Tt(e.attacks,(function(e,t){return t?Sr({defaults:c,seqid:e,imagePrefix:u,sc:t,displayName:t.displayName}):void 0}))),projectiles:Bt(Tt(e.projectiles,(function(e,t){return t?function(e){var t=e.defaults,n=e.projid,a=e.imagePrefix,r=e.pc,i=Object(g.a)(Object(g.a)({},r.sequence),{},{displayName:r.displayName,displayIndex:r.displayIndex,displayInput:""});return{projid:n,loop:r.loop,offset:r.offset,dieOnConsume:r.dieOnConsume,dieOnFighterHit:!!r.dieOnFighterHit,impactOnVoid:r.hideImpactOnVoid?B.None:B.Small,sequence:Sr({defaults:t,seqid:n,imagePrefix:a,sc:i,displayName:i.displayName}),onBlock:r.onBlock&&Sr({defaults:t,seqid:n+"_Block",imagePrefix:a,sc:r.onBlock,displayName:i.displayName+" on Block"}),onHit:r.onHit&&Sr({defaults:t,seqid:n+"_Hit",imagePrefix:a,sc:r.onHit,displayName:i.displayName+" on Hit"})}}({defaults:Object(g.a)(Object(g.a)({},c),{},{throwHurtboxes:[]}),projid:e,imagePrefix:u,pc:t}):void 0}))),installs:Bt(Tt(null!==(r=e.installs)&&void 0!==r?r:{},(function(e,t){var n,a,r,i,o,s,c,u;return t?{installid:e,duration:null!==(n=t.duration)&&void 0!==n?n:null,speedForward:null!==(a=t.speedForward)&&void 0!==a?a:null,speedBackward:null!==(r=t.speedBackward)&&void 0!==r?r:null,healthGainPer15:null!==(i=t.healthGainPer15)&&void 0!==i?i:null,meterGainPer15:null!==(o=t.meterGainPer15)&&void 0!==o?o:null,input:null!==(s=t.input)&&void 0!==s?s:{},sequenceOverride:null!==(c=t.sequenceOverride)&&void 0!==c?c:{},afterimages:(null!==(u=t.afterimages)&&void 0!==u?u:[]).map((function(e){var t;return Object(g.a)(Object(g.a)({},e),{},{opacity:null!==(t=e.opacity)&&void 0!==t?t:1,dieOnFighterHit:!!e.dieOnFighterHit})}))}:void 0})))}}function Tr(e){var t=function(e,t){var n=[],a=[];return e.forEach((function(e){t(e)?n.push(e):a.push(e)})),[].concat(n,a)}(e.setup.flavors.map((function(t,n){return Ar(e,n,t)})),(function(e){return e.stats.flavor.theme===kn.Theme}));return{name:e.name,code:e.setup.code,config:fa()(e),original:t[0],colors:t,meta:{modAuthor:e.modAuthor,modDescription:e.modDescription,modVersion:e.modVersion}}}function Mr(e){var t=e.frames.map((function(e){return{sprite:e,duration:5}})),n={sprite:e.frames[e.frames.length-1],duration:300,cancel:{onWhiff:{4:F.Standing,6:F.Standing,"4a":F.Standing,"4b":F.Standing,"4c":F.Standing,"5a":F.Standing,"5b":F.Standing,"5c":F.Standing,"6a":F.Standing,"6b":F.Standing,"6c":F.Standing}}},a={frames:t.concat(n)};return Sr(Object(g.a)(Object(g.a)({},e),{},{sc:a}))}function Pr(e){var t=e.frames.map((function(e){return{sprite:e,duration:5}})),n={sprite:e.frames[e.frames.length-1],duration:300},a={frames:t.concat(n)};return Sr(Object(g.a)(Object(g.a)({},e),{},{sc:a}))}var Rr=n(18);function Ir(e){if(9===e.engine)return e;if(8===e.engine)return Ir(function(e){var t=Kt(e);t.engine=9;var n={pork_rough:{name:"Pork",folder:"pork_default"},alt_stripe2_pork_rough:{name:"Striped Pork",folder:"pork_stripes"},alt_rotate2_pork_rough:{name:"Mint Pork",folder:"pork_mint"},alt_polka2_pork_rough:{name:"Peach Pork",folder:"pork_peach"},alt_plaid_1_pork_rough:{name:"Plaid Pork",folder:"pork_plaid"},pork_rough_porkenstein:{name:"Porkenstein",folder:"pork_porkenstein"},alt_boss_pork_rough:{name:"Mystery Meat",folder:"alt_boss_pork_default"},alt_boss_invert_pork_rough:{name:"Inverted Mystery Meat",folder:"alt_boss_invert_pork_default"}};function a(e){for(var t in n)if(e.includes(t)){var r=n[t];return a(e.replace(t,r.folder))}return e}t.setup.flavors.forEach((function(e){for(var t in n)if(e.folder===t){var a=n[t];e.name=a.name,e.folder=a.folder}}));var r=[].concat(Object(k.a)(Object.values(t.actions).filter((function(e){return!!e.frames}))),Object(k.a)(Object.values(t.attacks)));return[].concat(Object(k["a"])(r),Object(k["a"])(Vt(r.map((function(e){return Bt(e.frames.map((function(e){var t;return(t=e.projectile)===null||t===void 0?void 0:t.sequence})))}))))).forEach((function(e){e.frames.forEach((function(e){e.sprite=a(e.sprite),e.behind&&(e.behind=a(e.behind)),e.remote&&(e.remote.sprite=a(e.remote.sprite))}))})),t}(e));if(7===e.engine)return Ir(function(e){var t=Kt(e);t.engine=8;var n={noodle:"Noodle",noodle_stripes:"Striped Noodle",noodle_pistachio:"Pistachio Noodle",noodle_strawberry:"Strawberry Noodle",noodle_plaid:"Plaid Noodle",noodle_mummy:"Mummy Noodle",noodle_pattern:"Wavy Noodle",rice:"Rice",rice_stripes:"Striped Rice",rice_chocolate:"Chocolate Rice",rice_aqua:"Aqua Rice",rice_plaid:"Plaid Bice",rice_pumpkinspice:"Pumpskin Spice Rice",rice_pattern:"Polka Rice",beef_default:"Beef",beef_stripes:"Striped Beef",beef_grapefanta:"Grape Soda Beef",beef_babyblue:"Baby Blue Beef",beef_plaid:"Plaid Beef",beef_bloody:"Bloody Beef",beef_pattern:"Checkered Beef",pork_rough:"Pork",alt_stripe2_pork_rough:"Striped Pork",alt_rotate2_pork_rough:"Neon Pork",alt_polka2_pork_rough:"Polka Pork",alt_plaid_1_pork_rough:"Plaid Pork",pork_rough_porkenstein:"Porkenstein",legs:"Onion",alt_stripe2_legs:"Striped Onion",alt_rotate1_legs:"Blue Onion",alt_polka1_legs:"Polka Onion",alt_plaid_1_legs:"Plaid Onion",legs_ghost:"Ghost Onion",legsb:"Garlic",alt_stripe2_legsb:"Striped Garlic",alt_rotate2_legsb:"Highlighter Garlic",alt_polka2_legsb:"Polka Garlic",alt_plaid_1_legsb:"Plaid Garlic",legsb_vampire:"Vampire Garlic",alt_boss_pork_rough:"Mystery Meat",alt_boss_invert_pork_rough:"Inverted Mystery Meat",alt_boss_legsb:"Secret Spice",alt_boss_invert_legsb:"Inverted Secret Spice"},a={noodle_mummy:"halloween_noodle",rice_pumpkinspice:"halloween_rice",beef_bloody:"halloween_beef",pork_rough_porkenstein:"halloween_pork",legs_ghost:"halloween_onion",legsb_vampire:"halloween_garlic"},r=[];return e.setup.colors.forEach((function(e){var t,i={name:null!==(t=n[e])&&void 0!==t?t:e,folder:e};a[e]&&(i.requireCode=a[e]),r.push(i)})),e.setup.lockedByCheevo.forEach((function(e){var t;r.push({name:null!==(t=n[e])&&void 0!==t?t:e,folder:e,requireMMR:1700})})),e.setup.lockedByPayment.forEach((function(e){var t;r.push({name:null!==(t=n[e])&&void 0!==t?t:e,folder:e,requirePremium:!0})})),delete t.setup.colors,delete t.setup.lockedByCheevo,delete t.setup.lockedByPayment,t.setup.flavors=r,t}(e));if(6===e.engine)return Ir(function(e){var t=Kt(e);if(t.engine=7,["beef_","beefb_"].includes(t.setup.imagePrefix)){var n=function(e){var t=r[e];return void 0!==t?t:e},a={beef:"beef_default",alt_rotate1_beef:"beef_grapefanta",alt_stripe2_beef:"beef_stripes",alt_polka1_beef:"beef_babyblue",alt_plaid_1_beef:"beef_plaid",beefb:"pork_rough",alt_rotate2_beefb:"alt_rotate2_pork_rough",alt_stripe2_beefb:"alt_stripe2_pork_rough",alt_polka2_beefb:"alt_polka2_pork_rough",alt_plaid_1_beefb:"alt_plaid_1_pork_rough"};t.setup.colors=Pt(t.setup.colors,a),t.setup.lockedByCheevo=Pt(t.setup.lockedByCheevo,a),t.setup.lockedByPayment=Pt(t.setup.lockedByPayment,a);var r={burst_0003:"burst_0004",burst_0004:"burst_0005",burst_0005:"burst_0007",burst_0006:"burst_0008",exhausted_0001:"tumbling_0001",exhausted_0002:"tumbling_0002",exhausted_0003:"exhausted_0002",getup_0001:"down_0006",getup_0002:"down_0007",getup_0003:"down_0008",fireball_0008:"fireball_0009",fireball_0009:"fireball_0011",fireball_0010:"fireball_0013",fireball_0011:"fireball_0014",fireball_0012:"fireball_0015",fireball_lemon:"fireball_lemon_0001",flexhit_0001:"flexHit_0001",flexhit_0002:"flexHit_0002",flexhit_0003:"flexHit_0003",flexhit_0004:"flexHit_0004",flexhit_0005:"flexhit_0008",palm_0004:"palm_0005",palm_0005:"palm_0006",rapid_0003:"rapid_0005",spike_0002:"spike_0003",spike_0003:"spike_0004",spike_0004:"spike_0005",stand_0002:"stand_0001",stand_0003:"stand_0002",stand_0004:"stand_0002",stand_0005:"stand_0003",stand_0006:"stand_0003",stand_0007:"stand_0004",stand_0008:"stand_0004",throwHit_0001:"throwStart_0002",throwHit_0002:"throwHit_0001",throwHit_0003:"throwHit_0002",throwHit_0004:"throwHit_0003",throwHit_0005:"throwHit_0004",throwHit_0006:"throwHit_0005",throwHit_0007:"throwHit_0006"},i=[].concat(Object(k.a)(Object.values(t.actions).filter((function(e){return!!e.frames}))),Object(k.a)(Object.values(t.attacks)));[].concat(Object(k.a)(i),Object(k.a)(Vt(i.map((function(e){return Bt(e.frames.map((function(e){var t;return null===(t=e.projectile)||void 0===t?void 0:t.sequence})))}))))).forEach((function(e){e.frames.forEach((function(e){e.sprite=n(e.sprite),e.behind&&(e.behind=n(e.behind)),e.remote&&(e.remote.sprite=n(e.remote.sprite))}))}))}return t}(e));if(5===e.engine)return Ir(function(e){var t,n=Kt(e);n.engine=6;var a=(t={},Object(v.a)(t,mr.setup.imagePrefix,mr.setup.winSound),Object(v.a)(t,Or.setup.imagePrefix,Or.setup.winSound),Object(v.a)(t,Pa.setup.imagePrefix,Pa.setup.winSound),Object(v.a)(t,Ya.setup.imagePrefix,Ya.setup.winSound),Object(v.a)(t,jr.setup.imagePrefix,jr.setup.winSound),Object(v.a)(t,La.setup.imagePrefix,La.setup.winSound),t);return n.setup.winSound=a[n.setup.imagePrefix],[].concat(Object(k["a"])(Object.values(n.actions).filter((function(e){return!!e.frames}))),Object(k["a"])(Object.values(n.attacks))).forEach((function(e){e.frames.forEach((function(e){e.attack&&(!0===e.attack.noImpact?(delete e.attack.noImpact,e.attack.impactType=B.None):e.attack.damage>=100&&(e.attack.impactType=B.Large))}))})),n}(e));if(4===e.engine)return Ir(function(e){var t=Kt(e);t.engine=5;var n={0:Se.CarbDash,1:Se.CarbDeath,2:Se.Deprecated_CarbFist,3:Se.CarbFrenzy,4:Se.CarbJump,5:Se.CarbSwat,6:Se.CarbWhip,7:Se.CarbMisc,8:Se.MeatChop,9:Se.MeatDeath,10:Se.MeatFlex,11:Se.MeatWin,12:Se.MeatTaunt,13:Se.MeatJump,14:Se.MeatLemon,15:Se.MeatPunch,16:Se.MeatSpikeSetup,17:Se.MeatSpikeHit,18:Se.MeatToss,19:Se.MeatMisc,20:Se.SpiceDash,21:Se.SpiceDeath,22:Se.SpiceHopkick,23:Se.SpiceJump,24:Se.SpiceParry,25:Se.SpiceMisc};return[].concat(Object(k["a"])(Object.values(t.actions).filter((function(e){return!!e.frames}))),Object(k["a"])(Object.values(t.attacks))).forEach((function(e){e.frames.forEach((function(e){void 0!==e.sound&&"number"===typeof e.sound&&(e.sound=n[e.sound])}))})),t}(e));if(3===e.version)return Ir(function(e){var t=Kt(e);return delete t.version,t.actions.rapid.meterCost=kn.MeterForRapid,t.actions.burst.meterCost=kn.MeterForBurst,t.actions.rejection.meterCost=kn.MeterForRejection,t.actions.burst.frames.forEach((function(e){e.attack&&(e.attack.meterGainAttackOnBlock=0,e.attack.meterGainAttackOnHit=0,e.attack.meterGainDefendOnBlock=0,e.attack.meterGainDefendOnHit=0)})),t.actions.rejection.frames.forEach((function(e){e.attack&&(e.attack.onBlock=-2,e.attack.meterGainAttackOnBlock=0,e.attack.meterGainAttackOnHit=0,e.attack.meterGainDefendOnBlock=0,e.attack.meterGainDefendOnHit=0)})),{engine:4,name:t.name,modAuthor:t.modAuthor,modDescription:t.modDescription,modVersion:e.modRevision,setup:t.setup,actions:t.actions,attacks:t.attacks}}(e));if(2===e.version)return Ir(function(e){var t=Kt(e);t.version=3;var n=t.actions.rapid.frames,a=t.actions.hitstun.frames;return t.actions.poseWin=Lt([n[0].sprite,n[1].sprite,n[2].sprite]),t.actions.poseLose=Lt(a.map((function(e){return e.sprite}))),t}(e));if(1===e.version)return Ir(function(e){var t=Kt(e);t.version=2;var n=["dash_0002b","dash_0003b","dash_0004b","dash_0005b"];return Object.values(t.attacks).forEach((function(e){e.frames.forEach((function(e){n.includes(e.sprite)&&(e.sprite=e.sprite.substring(0,e.sprite.length-1),e.mirrorImage=!0)}))})),t}(e));if(void 0===e.version)return Ir(function(e){var t=Kt(e),n=t.attacks[N.LemonFake];n&&(n.displayInput="5c > 4");return Object(g.a)({version:1},t)}(e));throw new Error("unsupported version #: "+e.version)}function Br(e){return e.engine===ba?e:16===e.engine?Br(function(e){var t=Kt(e);return t.engine=17,[].concat(Object(k["a"])(Object.values(t.actions).filter((function(e){return!!e.frames}))),Object(k["a"])(Object.values(t.attacks)),Object(k["a"])(Object.values(t.projectiles).map((function(e){return e.sequence})))).filter((function(e){return e.frames.some((function(e){var t;return((t=e.attack)===null||t===void 0?void 0:t.stunPhase)==="throw"}))})).forEach((function(e){var t;0===(null===(t=e.hurtboxes)||void 0===t?void 0:t.length)&&delete e.hurtboxes,e.frames.forEach((function(e){var t;0===(null===(t=e.hurtboxes)||void 0===t?void 0:t.length)&&delete e.hurtboxes}))})),Object.entries(t.attacks).filter((function(e){return e[0].includes("Jump")})).forEach((function(e){var t,n=e[1],a=Object(Rr.a)(n.frames);try{for(a.s();!(t=a.n()).done;){var r=t.value;if(r.isAirborne)break;r.throwHurtboxes=[]}}catch(i){a.e(i)}finally{a.f()}})),t}(e)):15===e.engine?Br(function(e){var t=Kt(e);if(t.engine=16,["legs_","legsb_"].includes(t.setup.imagePrefix)){var n=function(e){for(var t in r)if(e.includes(t)){var n=r[t];return e.replace(t,n)}return e},a={legs:"onion_default",alt_stripe2_legs:"onion_stripes",alt_rotate1_legs:"onion_midnight",alt_polka1_legs:"onion_green",alt_plaid_1_legs:"onion_plaid",legs_ghost:"onion_ghost",legs_rainbowsprinkle:"onion_rainbowsprinkle",legs_normal:"onion_normal",legsb:"garlic_rough_default",alt_stripe2_legsb:"alt_stripe2_garlic_rough_default",alt_rotate2_legsb:"alt_rotate2_garlic_rough_default",alt_polka2_legsb:"alt_polka2_garlic_rough_default",alt_plaid_1_legsb:"alt_plaid_1_garlic_rough_default",legsb_vampire:"garlic_rough_vampire",legsb_macaron:"garlic_rough_macaron",legsb_normal:"garlic_rough_normal",alt_boss_legsb:"alt_boss_garlic_rough_default",alt_boss_invert_legsb:"alt_boss_invert_garlic_rough_default"};t.setup.flavors.forEach((function(e){var t=a[e.folder];void 0!==t&&(e.folder=t)}));var r={exhausted_0001:"tumbling_0001",exhausted_0002:"tumbling_0002",exhausted_0003:"exhausted_0001",getup_0001:"down_0006",getup_0002:"down_0007",getup_0003:"down_0008",rapid_0002:"rapid_0003",rapid_0003:"rapid_0004"};[].concat(Object(k.a)(Object.values(t.actions).filter((function(e){return!!e.frames}))),Object(k.a)(Object.values(t.attacks)),Object(k.a)(Object.values(t.projectiles).map((function(e){return e.sequence})))).forEach((function(e){e.frames.forEach((function(e){var t;e.sprite&&(e.sprite=n(e.sprite)),e.behind&&(e.behind=n(e.behind)),null!==(t=e.remote)&&void 0!==t&&t.sprite&&(e.remote.sprite=n(e.remote.sprite))}))}))}return t}(e)):14===e.engine?Br(function(e){var t,n,a,r=Kt(e);r.engine=15,r.setup.defaults.strikeHurtboxes=e.setup.defaults.hurtboxes,r.setup.defaults.throwHurtboxes=e.setup.defaults.hurtboxes,delete r.setup.defaults.hurtboxes,r.setup.commands={throw:["4d","5d","6d"],rapid:["6d"],burst:["4d"],reject:["6d"]},r.actions.walkBackward.throwHurtboxes=[{center:{x:.1,y:0},size:{x:1.2,y:1}}],r.actions.blockstun.palindromeAnimation=!0,r.actions.hitstun.palindromeAnimation=!0,r.actions.throwStart.frames.forEach((function(e){var t,n,a;e.attack&&5===e.duration&&6===(null===(t=e.cancel)||void 0===t?void 0:t.duration)&&"seqid_Shared_ThrowHit"===(null===(n=e.cancel)||void 0===n||null===(a=n.onHit)||void 0===a?void 0:a.auto)&&(e.duration=10,e.cancel.duration=11)}));var i=null===(t=r.actions.throwCheck)||void 0===t||null===(n=t.frames[0])||void 0===n||null===(a=n.attack)||void 0===a?void 0:a.hitboxes;i&&r.actions.throwStart.frames.forEach((function(e){e.attack&&(e.attack.hitboxes=i)}));return delete r.actions.throwCheck,[].concat(Object(k["a"])(Object.values(r.actions).filter((function(e){return!!e.frames}))),Object(k["a"])(Object.values(r.attacks)),Object(k["a"])(Object.values(r.projectiles).map((function(e){return e.sequence})))).forEach((function(e){e.frames.forEach((function(e){void 0!==e.hurtboxes&&(0===e.hurtboxes.length||(e.strikeHurtboxes=e.hurtboxes,delete e.hurtboxes))}))})),r}(e)):13===e.engine?Br(function(e){var t=Kt(e);return t.engine=14,t.setup.flavors.forEach((function(e,t){e.fid="".concat(e.folder,"-").concat(t)})),t}(e)):12===e.engine?Br(function(e){var t=Kt(e);return t.engine=13,t.projectiles={},[].concat(Object(k.a)(Bt(Object.keys(t.actions).map((function(e){var n=t.actions[e];if(n.frames)return{id:e,name:e,seq:n}})))),Object(k.a)(Object.keys(t.attacks).map((function(e){var n=t.attacks[e];return{id:e,name:n.displayName,seq:n}})))).forEach((function(e){var n=0;e.seq.frames.forEach((function(a){if(a.projectile){n++;var r=e.name+" Projectile #"+n,i=e.id+"_Projectile_"+n,o={displayName:r,displayIndex:100+n,loop:a.projectile.loop,offset:a.projectile.offset,dieOnConsume:a.projectile.dieOnConsume,dieOnFighterHit:a.projectile.dieOnFighterHit,hideImpactOnVoid:a.projectile.hideImpactOnVoid,sequence:a.projectile.sequence,onBlock:a.projectile.onBlock?a.projectile.onBlock:void 0,onHit:a.projectile.onHit?a.projectile.onHit:void 0};t.projectiles[i]=o,a.projectileId=i}delete a.projectile}))})),[].concat(Object(k["a"])(Object.values(t.actions).filter((function(e){return!!e.frames}))),Object(k["a"])(Object.values(t.attacks)),Object(k["a"])(Object.values(t.projectiles).map((function(e){return e.sequence})))).forEach((function(e){e.frames.forEach((function(e){e.isProjectileInvuln&&(e.invulnVsProjectile=!0),delete e.isProjectileInvuln}))})),t}(e)):11===e.engine?Br(function(e){var t=Kt(e);t.engine=12;var n=[].concat(Object(k.a)(Object.values(t.actions).filter((function(e){return!!e.frames}))),Object(k.a)(Object.values(t.attacks)));return[].concat(Object(k["a"])(n),Object(k["a"])(Vt(n.map((function(e){return Bt(e.frames.map((function(e){var t;return(t=e.projectile)===null||t===void 0?void 0:t.sequence})))}))))).forEach((function(e){e.frames.filter((function(e){return!!e.projectile})).length>0&&(e.projectileLimit=1),e.frames.forEach((function(e){if(e.remote){var t;null!==(t=e.remote)&&void 0!==t&&t.onScreen&&(e.remote.keepOnStage=!0,delete e.remote.onScreen);var n=e.remote.drawBox;e.remote.offset=Object(g.a)({},n.center),1===n.size.x&&1===n.size.y||(e.remote.relativeDrawBox={center:{x:0,y:0},size:n.size}),delete e.remote.drawBox}}))})),t}(e)):10===e.engine?Br(function(e){var t=Kt(e);t.engine=11;var n=t.actions.rapid.frames[1];n&&(n.sound=Se.MeterRapid);var a=t.actions.burst.frames[2];a&&(a.sound=Se.MeterBurst);var r=t.actions.rejection.frames[3];r&&(r.sound=Se.MeterReject,r.attack&&(r.attack.impactType=B.None));var i={hopkick_0003b:"hopkick_0003",hopkick_0004b:"hopkick_0004",hopkick_0005b:"hopkick_0005",hopkick_0006b:"hopkick_0006"};function o(e){for(var t in i)if(e.includes(t)){var n=i[t];return o(e.replace(t,n))}return e}var s=[].concat(Object(k.a)(Object.values(t.actions).filter((function(e){return!!e.frames}))),Object(k.a)(Object.values(t.attacks)));return[].concat(Object(k["a"])(s),Object(k["a"])(Vt(s.map((function(e){return Bt(e.frames.map((function(e){var t;return(t=e.projectile)===null||t===void 0?void 0:t.sequence})))}))))).forEach((function(e){e.frames.forEach((function(e){e.sprite=o(e.sprite),e.behind&&(e.behind=o(e.behind)),e.remote&&(e.remote.sprite=o(e.remote.sprite))}))})),t}(e)):9===e.engine?Br(function(e){var t=Kt(e);return t.engine=10,t.actions.rejection.frames.forEach((function(e){var t;e.attack&&(e.attack.hitstop=null!==(t=e.attack.hitstop)&&void 0!==t?t:10)})),t}(e)):Br(Ir(e))}function Dr(e){for(var t=Object.entries(e).map((function(e){return{key:e[0],value:e[1]}})),n=function(){var e=t.pop(),n=e.key,a=e.value;if(null===a)throw new Error("null is not a valid value for "+n);if(Array.isArray(a))t.push.apply(t,Object(k.a)(a.map((function(e,t){return{key:"".concat(n,"[").concat(t,"]"),value:e}}))));else if("object"===typeof a)t.push.apply(t,Object(k.a)(Object.entries(a).map((function(e){return{key:n+"."+e[0],value:e[1]}}))));else if(Number.isNaN(a))throw new Error("NaN is not a valid value for "+n)};t.length;)n();var a=e.setup.flavors.map((function(e){return e.fid}));if(a.length!==new Set(a).size)throw new Error("all flavors must have unique ids")}function Hr(e){var t,n=[].concat(Object(k.a)(Object.values(e.actions).filter((function(e){return!!e.frames}))),Object(k.a)(e.attacks),Object(k.a)(Vt(e.projectiles.map((function(e){return Bt([e.sequence,e.onBlock,e.onHit])}))))),a=new Set,r=n.map((function(e){return e.seqid})),i=Object(Rr.a)(r);try{for(i.s();!(t=i.n()).done;){var o=t.value;if(a.has(o))throw new Error("Cannot re-use SequenceID: "+o);a.add(o)}}catch(c){i.e(c)}finally{i.f()}function s(t){if(![].concat(Object(k.a)(Object.values(e.actions)),Object(k.a)(e.attacks)).filter((function(e){return e.seqid===t}))[0])throw new Error("SequenceID not found: "+t)}Object.values(e.input).forEach(s),n.forEach((function(e){e.frames.forEach((function(e){var t,n,a,r,i,o;e.cancel&&Bt([].concat(Object(k.a)(Object.values(null!==(t=e.cancel.onHitAirborne)&&void 0!==t?t:{})),Object(k.a)(Object.values(null!==(n=e.cancel.onHitGrounded)&&void 0!==n?n:{})),Object(k.a)(Object.values(null!==(a=e.cancel.onHitTumbling)&&void 0!==a?a:{})),Object(k.a)(Object.values(null!==(r=e.cancel.onArmor)&&void 0!==r?r:{})),Object(k.a)(Object.values(null!==(i=e.cancel.onBlock)&&void 0!==i?i:{})),Object(k.a)(Object.values(null!==(o=e.cancel.onWhiff)&&void 0!==o?o:{})))).forEach(s)}))}))}var Er,_r=Tr(mr),Fr=Tr(Or),Lr=Tr(Pa),Gr=Tr(Ya),zr=Tr(jr),Wr=Tr(La),Nr=Tr(Qa),Ur=Tr(Za),qr=Tr(Na),Vr=Tr(Ua),Yr=[mr,Or,Pa,Ya,jr,La,Qa,Za,Na,Ua],Jr=function(e){var t={drawBox:Object(g.a)({},kn.DefaultOrigin),pushboxes:[],strikeHurtboxes:[],throwHurtboxes:[],afterimages:[]},n="sparks/";return{blockChip:Sr({defaults:t,seqid:_.BlockChip,imagePrefix:n,sc:e.blockChip}),blockNormal:Sr({defaults:t,seqid:_.BlockNormal,imagePrefix:n,sc:e.blockNormal}),hitLarge:Sr({defaults:t,seqid:_.HitLarge,imagePrefix:n,sc:e.hitLarge}),hitSmall:Sr({defaults:t,seqid:_.HitSmall,imagePrefix:n,sc:e.hitSmall}),parry:Sr({defaults:t,seqid:_.Parry,imagePrefix:n,sc:e.parry})}}({blockChip:{frames:[{sprite:"fx_block_chip_0001",duration:6},{sprite:"fx_block_chip_0002",duration:6},{sprite:"fx_block_chip_0003",duration:6}]},blockNormal:{frames:[{sprite:"fx_block_0001",duration:6},{sprite:"fx_block_0002",duration:6},{sprite:"fx_block_0003",duration:6}]},hitLarge:{frames:[{sprite:"fx_bighit_0001",duration:6},{sprite:"fx_bighit_0002",duration:6},{sprite:"fx_bighit_0003",duration:6},{sprite:"fx_bighit_0004",duration:6}]},hitSmall:{frames:[{sprite:"fx_smallhit_0001",duration:6},{sprite:"fx_smallhit_0002",duration:6},{sprite:"fx_smallhit_0003",duration:6}]},parry:{drawBox:{center:{x:0,y:0},size:{x:.5,y:.5}},frames:[{sprite:"fx_block_0001",duration:6},{sprite:"fx_block_0002",duration:6},{sprite:"fx_block_0003",duration:6}]}}),Kr=Cr(ja.landSmoke),Qr=Cr(ja.landSpark),Zr=n(41),Xr=n(29),$r=function(){function e(){Object(l.a)(this,e),this.keys=new Set,this.fighters=[]}return Object(h.a)(e,[{key:"key",value:function(e){return e.fighter.code}},{key:"get",value:function(){return this.fighters.concat()}},{key:"has",value:function(e){return this.keys.has(e.fighter.code)}},{key:"push",value:function(e){var t=this.key(e);this.keys.has(t)||(this.keys.add(t),this.fighters.push(e))}},{key:"remove",value:function(e){var t=this,n=this.key(e);this.keys.delete(n),this.fighters=this.fighters.filter((function(e){return t.key(e)!==n}))}}]),e}(),ei=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).onUpload=function(){},e.onRemove=function(){},e.onSet=function(){},e}return Object(h.a)(n,[{key:"init",value:function(e){this.clear(),this.onUpload=e.onUpload,this.onRemove=e.onRemove}},{key:"setTrigger",value:function(e){this.onSet=e}},{key:"push",value:function(e){Object(Zr.a)(Object(Xr.a)(n.prototype),"push",this).call(this,e),this.onUpload(e)}},{key:"remove",value:function(e){Object(Zr.a)(Object(Xr.a)(n.prototype),"remove",this).call(this,e),this.onRemove(e)}},{key:"clear",value:function(){this.keys=new Set,this.fighters=[]}},{key:"set",value:function(e){var t=this;this.clear(),e.forEach((function(e){return Object(Zr.a)(Object(Xr.a)(n.prototype),"push",t).call(t,e)})),this.onSet()}}]),n}($r),ti=function(){function e(){var t=this;Object(l.a)(this,e),this.DefaultBranding={Splash:kn.AssetsPath("menu/welcomepage_beta.jpg"),Logo:kn.AssetsPath("menu/logo_beta.png")},this.AprilFoolsBranding={Splash:kn.AssetsPath("menu/welcomepage_apf.jpg"),Logo:kn.AssetsPath("menu/logo_apf.png")},this.SteamBranding={Splash:kn.AssetsPath("menu/welcomepage_beta_steam.jpg"),Logo:kn.AssetsPath("menu/logo_beta_steam.png")},this.HalloweenBranding={Splash:kn.AssetsPath("menu/welcomepage_halloween.jpg"),Logo:this.DefaultBranding.Logo},this.BirthdayBranding={Splash:kn.AssetsPath("menu/welcomepage_bday.jpg"),Logo:this.DefaultBranding.Logo},this.Music={Title:kn.AssetsPath("music/title_20200424.mp3"),CharSelect:kn.AssetsPath("music/charselect_20200424.mp3"),Training:kn.OggPath("music/training_20210227.ogg"),Apartment:kn.OggPath("music/apartment_20220606.ogg"),GroceryStore:kn.AssetsPath("music/grocery_20200410.mp3"),Playground:kn.AssetsPath("music/playground_20200410.mp3"),ParkingLot:kn.AssetsPath("music/parkinglot_20200409.mp3")},this.MenuArt={Favicon:"favicon320.gif",ButtonHeart:kn.AssetsPath("menu/heart_pink.png"),UnknownFighter:kn.AssetsPath("menu/questionmark.png"),CharacterSelectMods:kn.AssetsPath("menu/mod.png"),CharacterSelectModPortrait:kn.AssetsPath("menu/mod_portrait.png"),CharacterSelectCustomControls:kn.AssetsPath("menu/gears.png"),LockedColor:kn.AssetsPath("menu/lock.png"),SoundBlackOff:kn.AssetsPath("menu/sound_black_off.svg"),SoundBlackOn:kn.AssetsPath("menu/sound_black_on.svg"),SoundWhiteOff:kn.AssetsPath("menu/sound_white_off.svg"),SoundWhiteOn:kn.AssetsPath("menu/sound_white_on.svg"),Spikeball:kn.AssetsPath("menu/spikeball.png"),IntroTimer:kn.AssetsPath("menu/intro_timer.png"),RandomStage:kn.AssetsPath("menu/random_stage_v02.jpg"),Spinner:kn.AssetsPath("menu/spikeball_spin_500_v03.gif"),ModDownload:kn.AssetsPath("menu/download.png"),SnesController:kn.AssetsPath("menu/snes.png")},this.Social={Twitter:kn.AssetsPath("social/twitter.png"),Twitch:kn.AssetsPath("social/twitch.png"),Discord:kn.AssetsPath("social/discord.png"),Redbubble:kn.AssetsPath("social/redbubble.png"),Patreon:kn.AssetsPath("social/patreon.png"),Bandcamp:kn.AssetsPath("social/bandcamp.png")},this.RankedTierArt={Rank0:kn.AssetsPath("icon/rank_0.png"),Rank1:kn.AssetsPath("icon/rank_1.png"),Rank2:kn.AssetsPath("icon/rank_2.png"),Rank3:kn.AssetsPath("icon/rank_3.png"),Rank4:kn.AssetsPath("icon/rank_4.png")},this.SlidingPuzzle={HeroNoodle:kn.AssetsPath("sliding_puzzle/noodle.png"),HeroRice:kn.AssetsPath("sliding_puzzle/rice.png"),HeroBeef:kn.AssetsPath("sliding_puzzle/beef.png"),HeroPork:kn.AssetsPath("sliding_puzzle/pork.png"),HeroOnion:kn.AssetsPath("sliding_puzzle/onion.png"),HeroGarlic:kn.AssetsPath("sliding_puzzle/garlic.png"),FloorNoodle:kn.AssetsPath("sliding_puzzle/slide_noodle_floor.png"),FloorRice:kn.AssetsPath("sliding_puzzle/slide_rice_floor.png"),FloorBeef:kn.AssetsPath("sliding_puzzle/slide_beef_floor.png"),FloorPork:kn.AssetsPath("sliding_puzzle/slide_pork_floor.png"),FloorOnion:kn.AssetsPath("sliding_puzzle/slide_onion_floor.png"),FloorGarlic:kn.AssetsPath("sliding_puzzle/slide_garlic_floor.png"),WallNoodle:kn.AssetsPath("sliding_puzzle/slide_noodle_wall.png"),WallRice:kn.AssetsPath("sliding_puzzle/slide_rice_wall.png"),WallBeef:kn.AssetsPath("sliding_puzzle/slide_beef_wall.png"),WallPork:kn.AssetsPath("sliding_puzzle/slide_pork_wall.png"),WallOnion:kn.AssetsPath("sliding_puzzle/slide_onion_wall.png"),WallGarlic:kn.AssetsPath("sliding_puzzle/slide_garlic_wall.png"),StartHeart:kn.AssetsPath("sliding_puzzle/slide_start.png"),Spikeball:kn.AssetsPath("sliding_puzzle/spikeball.png")},this.Faq={SelfPortrait:kn.AssetsPath("faq/paul_and_amy.jpg"),DebugFirefox:kn.AssetsPath("faq/debug_firefox_settings.png")},this.HudOverlay={SkeletonSrc:"hud_v02.png",ReadySrc:"ready.png",FightSrc:"fight.png",KnockoutSrc:"ko.png",TimeOverSrc:"timeover.png"},this.HudAnimations={MeterGainSmall:["hud_meter_sm_0001.png","hud_meter_sm_0002.png","hud_meter_sm_0003.png","hud_meter_sm_0004.png","hud_meter_sm_0005.png","hud_meter_sm_0006.png","hud_meter_sm_0007.png","hud_meter_sm_0008.png"],MeterGainBig:["hud_meter_big_0001.png","hud_meter_big_0002.png","hud_meter_big_0003.png","hud_meter_big_0004.png","hud_meter_big_0005.png","hud_meter_big_0006.png","hud_meter_big_0007.png","hud_meter_big_0008.png","hud_meter_big_0009.png","hud_meter_big_0010.png","hud_meter_big_0011.png"]},this.HudFx={RoundHeartEmpty:kn.AssetsPath("hud_fx/hud_heart_empty.png"),RoundHeartFull:kn.AssetsPath("hud_fx/hud_heart_full.png"),SteakMeat:kn.AssetsPath("hud_fx/steak.png"),SteakFire:kn.AssetsPath("hud_fx/steak_fire.png")},this.Emotes={HeartOpen:kn.AssetsPath("emotes/emote_heart_red.png"),HeartClose:kn.AssetsPath("emotes/emote_heart_black.png"),GoodGameSmall:kn.AssetsPath("emotes/emote_gg_sm.png"),HelloSmall:kn.AssetsPath("emotes/emote_hello_sm.png"),LagSmall:kn.AssetsPath("emotes/emote_lag_sm.png"),LastOneSmall:kn.AssetsPath("emotes/emote_lastone_sm.png"),NahSmall:kn.AssetsPath("emotes/emote_nah_sm.png"),NiceSmall:kn.AssetsPath("emotes/emote_nice_sm.png"),ThankYouSmall:kn.AssetsPath("emotes/emote_ty_sm.png"),OopsSmall:kn.AssetsPath("emotes/emote_oops_sm.png"),RematchSmall:kn.AssetsPath("emotes/emote_rematch_sm.png"),YehSmall:kn.AssetsPath("emotes/emote_yeh_sm.png"),GoodGameLarge:kn.AssetsPath("emotes/emote_gg_lg.png"),HelloLarge:kn.AssetsPath("emotes/emote_hello_lg.png"),LagLarge:kn.AssetsPath("emotes/emote_lag_lg.png"),LastOneLarge:kn.AssetsPath("emotes/emote_lastone_lg.png"),NahLarge:kn.AssetsPath("emotes/emote_nah_lg.png"),NiceLarge:kn.AssetsPath("emotes/emote_nice_lg.png"),ThankYouLarge:kn.AssetsPath("emotes/emote_ty_lg.png"),OopsLarge:kn.AssetsPath("emotes/emote_oops_lg.png"),RematchLarge:kn.AssetsPath("emotes/emote_rematch_lg.png"),YehLarge:kn.AssetsPath("emotes/emote_yeh_lg.png")},this.Notation={left:kn.AssetsPath("notation/left.png"),right:kn.AssetsPath("notation/right.png"),attack1:kn.AssetsPath("notation/light.png"),attack2:kn.AssetsPath("notation/heavy.png"),attack3:kn.AssetsPath("notation/special.png"),attack4:kn.AssetsPath("notation/throw.png"),menu:kn.AssetsPath("notation/pause.png"),cancel:kn.AssetsPath("notation/cancel.png")},this.Impacts={GuardBreak:Jr.blockChip,Parry:Jr.parry,BlockChip:Jr.blockChip,BlockNormal:Jr.blockNormal,HitLarge:Jr.hitLarge,HitSmall:Jr.hitSmall},this.Particle={LandSmoke:Kr,LandSpark:Qr},this.Characters={Noodle:_r,Rice:Fr,Beef:Lr,Pork:Gr,Onion:zr,Garlic:Wr,UnplayableBossPork:Nr,PlayableBossPork:Ur,UnplayableBossGarlic:qr,PlayableBossGarlic:Vr},this.Stages={Notebook:{name:"Notebook",backgroundSrc:"trainingroom_v01.jpg",musicSrc:this.Music.Training},GroceryStore:{name:"Grocery Store",backgroundSrc:"grocery_v02.jpg",musicSrc:this.Music.GroceryStore},Playground:{name:"Playground",backgroundSrc:"playground_v02.jpg",musicSrc:this.Music.Playground},ParkingLot:{name:"Parking Lot",backgroundSrc:"parkinglot_v01.jpg",musicSrc:this.Music.ParkingLot},Apartment:{name:"Apartment",backgroundSrc:"apartment_v02.jpg",musicSrc:this.Music.Apartment}},this.OfflineMods=new $r,this.LobbyMods=new ei,this.TopRowFighterWrappers=[this.Characters.Noodle,this.Characters.Beef,this.Characters.Onion],this.BottomRowFighterWrappers=[this.Characters.Rice,this.Characters.Pork,this.Characters.Garlic],this.SortedFighterWrappers=[].concat(Object(k.a)(this.TopRowFighterWrappers),Object(k.a)(this.BottomRowFighterWrappers)),this.FighterDataOriginal=this.SortedFighterWrappers.map((function(e){return e.original})),this.FighterDataAllColors=Vt(this.SortedFighterWrappers.map((function(e){return e.colors}))),this.DefaultStages=[this.Stages.Apartment,this.Stages.Notebook,this.Stages.Playground,this.Stages.GroceryStore,this.Stages.ParkingLot],this.SortedFighterWrappersWithBosses=this.SortedFighterWrappers.concat(this.Characters.UnplayableBossPork,this.Characters.PlayableBossPork,this.Characters.UnplayableBossGarlic,this.Characters.PlayableBossGarlic),this.FighterDataOriginalWithBosses=this.SortedFighterWrappersWithBosses.map((function(e){return e.original})),this.FighterDataAllColorsWithBosses=Vt(this.SortedFighterWrappersWithBosses.map((function(e){return e.colors}))),this.AllParticles=function(){var e=Bt(Vt(t.FighterDataOriginalWithBosses.map((function(e){return[].concat(Object(k.a)(Object.values(e.actions)),Object(k.a)(Object.values(e.attacks)))})))),n=Bt(Vt(e.map((function(e){return e.frames}))));return Gt(Bt(n.map((function(e){return e.particle}))),(function(e){return e.seqid}))}(),this.allCoreMoves=Vt(this.FighterDataOriginalWithBosses.map(ia.getAllSequences)),this.allCoreMovesBySeqId=Mt(this.allCoreMoves,(function(e){return e.seqid}))}return Object(h.a)(e,[{key:"Branding",get:function(){return kn.isAprilFools&&this.AprilFoolsBranding||kn.Theme===Ie.Birthday&&this.BirthdayBranding||kn.Theme===Ie.AprilFools&&this.AprilFoolsBranding||kn.Theme===Ie.Halloween&&this.HalloweenBranding||kn.Electron.isSteam()&&this.SteamBranding||this.DefaultBranding}},{key:"getAllColorsIncludingMods",value:function(){return[].concat(Object(k.a)(this.FighterDataAllColorsWithBosses),Object(k.a)(Vt(this.OfflineMods.get().map((function(e){return e.fighter.colors})))),Object(k.a)(Vt(this.LobbyMods.get().map((function(e){return e.fighter.colors})))))}},{key:"getPrevCharacter",value:function(e){return Nt(e,this.FighterDataOriginal,(function(e,t){return e.stats.code===t.stats.code}))}},{key:"getNextCharacter",value:function(e){return Ut(e,this.FighterDataOriginal,(function(e,t){return e.stats.code===t.stats.code}))}},{key:"getPrevCharacterColor",value:function(e){var t=this.getAllColorsIncludingMods();return Nt(e,t.filter((function(t){return t.stats.code===e.stats.code})))}},{key:"getNextCharacterColor",value:function(e){var t=this.getAllColorsIncludingMods();return Ut(e,t.filter((function(t){return t.stats.code===e.stats.code})))}},{key:"getOriginal",value:function(e){var t;return null!==(t=this.FighterDataOriginal.filter((function(t){return t.stats.code===e.stats.code}))[0])&&void 0!==t?t:e}},{key:"fighterToId",value:function(e){return e.stats.id}},{key:"fighterFromId",value:function(e){var t=this.getAllColorsIncludingMods().filter((function(t){return t.stats.id===e}))[0];return t||(jn.isModCode(e)?new Hn("mod not found:"+e):new Dn("id not found:"+e))}},{key:"stageToId",value:function(e){return e.name}},{key:"stageFromId",value:function(e){return Object.values(this.Stages).filter((function(t){return t.name===e}))[0]}},{key:"serializeGameConfig",value:function(e){var t,n;return{matchId:e.matchId,firstTo:e.firstTo,roundTime:e.roundTime,stageId:this.stageToId(e.stage),fighter1Id:this.fighterToId(e.fighter1),fighter2Id:this.fighterToId(e.fighter2),account1:(null===(t=e.account1)||void 0===t?void 0:t.jwt)||null,account2:(null===(n=e.account2)||void 0===n?void 0:n.jwt)||null}}},{key:"deserializeGameConfig",value:function(e){return{matchId:e.matchId,firstTo:e.firstTo,roundTime:e.roundTime,stage:this.stageFromId(e.stageId),fighter1:this.fighterFromId(e.fighter1Id),fighter2:this.fighterFromId(e.fighter2Id),account1:Mn.tryParse(e.account1),account2:Mn.tryParse(e.account2)}}},{key:"fighterFromCode",value:function(e){return this.FighterDataOriginalWithBosses.filter((function(t){return t.stats.code===e}))[0]}},{key:"loadFavoriteFighter",value:function(e){if(e){var t=this.fighterFromId(e);if(!Bn.is(t)&&!t.stats.isMod&&!t.stats.isBoss)return t}}},{key:"fixGameConfig",value:function(e){var t=e.fighter1.previewUrl,n=e.fighter2.previewUrl,a=t===n?this.getAllColorsIncludingMods().filter((function(t){return t.stats.code===e.fighter2.stats.code&&t.previewUrl!==n}))[0]:void 0;return Object(g.a)(Object(g.a)({},e),{},{fighter2:null!==a&&void 0!==a?a:e.fighter2})}},{key:"getCoreFighterMove",value:function(e){var t=this.allCoreMovesBySeqId[e];if(!t)throw new Error("could not find fighter move: "+e);return t}},{key:"getMoveFromFighter",value:function(e,t){var n=Mt([].concat(Object(k.a)(Object.values(e.actions)),Object(k.a)(e.attacks)),(function(e){return e.seqid}))[t];if(!n)throw new Error("could not find fighter move: "+t);return n}},{key:"getProjectileFromFighter",value:function(e,t){var n=Mt(e.projectiles,(function(e){return e.projid}))[t];if(!n)throw new Error("could not find fighter move: "+t);return n}},{key:"getPlayableBoss",value:function(e){var t,n;return null!==(t=(n={},Object(v.a)(n,this.Characters.UnplayableBossPork.code,this.Characters.PlayableBossPork.original),Object(v.a)(n,this.Characters.UnplayableBossGarlic.code,this.Characters.PlayableBossGarlic.original),n)[e.stats.code])&&void 0!==t?t:e}}]),e}(),ni=new ti;var ai=(Er={},Object(v.a)(Er,X.Unranked,{tier:X.Unranked,name:"Unranked",iconUrl:ni.RankedTierArt.Rank0}),Object(v.a)(Er,X.Rank1,{tier:X.Rank1,name:"Mild",iconUrl:ni.RankedTierArt.Rank1}),Object(v.a)(Er,X.Rank2,{tier:X.Rank2,name:"Medium",iconUrl:ni.RankedTierArt.Rank2}),Object(v.a)(Er,X.Rank3,{tier:X.Rank3,name:"Hot",iconUrl:ni.RankedTierArt.Rank3}),Object(v.a)(Er,X.Rank4,{tier:X.Rank4,name:"Super",iconUrl:ni.RankedTierArt.Rank4}),Er);function ri(e){var t;return null!==(t=ai[e])&&void 0!==t?t:ai[X.Unranked]}var ii=[{name:"Similar Opponents",range:150},{name:"Stronger Opponents",range:400}],oi={getAssets:function(e){return ri(function(e){return e>=$[X.Rank4]?X.Rank4:e>=$[X.Rank3]?X.Rank3:e>=$[X.Rank2]?X.Rank2:e>=$[X.Rank1]?X.Rank1:X.Unranked}(e))},defaultRange:ii[0],getRanges:function(){return ii},defaultMaxInputDelay:5},si=function(){function e(){Object(l.a)(this,e)}return Object(h.a)(e,[{key:"upgradeControlsProp",value:function(e,t){var n=e[t];return n?[n]:[]}},{key:"upgradeControls",value:function(e){var t;return t={},Object(v.a)(t,te.left,this.upgradeControlsProp(e,te.left)),Object(v.a)(t,te.right,this.upgradeControlsProp(e,te.right)),Object(v.a)(t,te.attack1,this.upgradeControlsProp(e,te.attack1)),Object(v.a)(t,te.attack2,this.upgradeControlsProp(e,te.attack2)),Object(v.a)(t,te.attack3,this.upgradeControlsProp(e,te.attack3)),Object(v.a)(t,te.attack4,this.upgradeControlsProp(e,te.attack4)),Object(v.a)(t,te.menu,this.upgradeControlsProp(e,te.menu)),t}},{key:"upgradeControlsSetting",value:function(e){return{leftControl:this.upgradeControls(e.leftControl),rightControl:this.upgradeControls(e.rightControl)}}}]),e}(),ci=function(){function e(t){Object(l.a)(this,e),this.store=void 0,this.ver=void 0,this.clock=void 0,this.maxReplays=50,this.store=t.store,this.ver=t.version,this.clock=t.clock}return Object(h.a)(e,[{key:"clear",value:function(){throw this.store.clear(),new Error("this will enter the app into uncertain state!")}},{key:"remove",value:function(e){this.store.removeItem(e)}},{key:"set",value:function(e,t){var n={version:this.ver.patch,record:t};this.store.setItem(e,fa()(n))}},{key:"get",value:function(e,t){var n=this.store.getItem(t);if(n){var a=JSON.parse(n);if(dn.matchesMin(a.version,e))return a.record}}},{key:"getSetting",value:function(e){return this.get(this.ver.settings,e)}},{key:"ensureDeviceId",value:function(){var e=this.get(this.ver.settings,"deviceId");return e||(e=tn(12),this.set("deviceId",e)),e}},{key:"addCasualBlock",value:function(e){var t=e.aid,n=e.tag,a=e.durationMS,r=this.clock.now(),i=this.getCasualBlocks().filter((function(e){return e.aid!==t})).concat({expires:r+a,aid:t,tag:n});this.setCasualBlocks(i)}},{key:"removeCasualBlock",value:function(e){var t=this.getCasualBlocks().filter((function(t){return t.aid!==e}));this.setCasualBlocks(t)}},{key:"setCasualBlocks",value:function(e){var t=Et(e,(function(e){return e.expires})).reverse();this.set("casualBlock",t)}},{key:"getCasualBlocks",value:function(){var e=this.clock.now(),t=this.get(this.ver.settings,"casualBlock")||[],n=t.filter((function(t){return t.expires>e})).slice(0,5);return t.length!==n.length&&this.setCasualBlocks(n),n}},{key:"addReplay",value:function(e){if(!dn.matchesMin(e.version,this.ver.combat))throw new Error(e.version+" does not match "+this.ver.combat);var t=this.getReplays().filter((function(t){return t.hash!==e.hash})).slice(0,this.maxReplays-1);t.push(e);var n=Et(t,(function(e){return e.created})).reverse();this.setReplays(n)}},{key:"updateReplay",value:function(e,t){var n=this.getReplays(),a=n.findIndex((function(t){return t.hash===e}));a>=0&&(n[a]=Object(g.a)(Object(g.a)({},n[a]),{},{id:t.id}),this.setReplays(n))}},{key:"setReplays",value:function(e){this.set("replays",e)}},{key:"getReplays",value:function(){return this.get(this.ver.combat,"replays")||[]}},{key:"deleteToken",value:function(){this.set("jwt",void 0)}},{key:"setToken",value:function(e){this.set("jwt",e)}},{key:"getToken",value:function(){return this.get(this.ver.settings,"jwt")}},{key:"checkUsage",value:function(){var e=this;wn("Current local storage: ");var t="";Object.keys(this.store).forEach((function(n){var a=e.store[n]||"";t+=a,wn(n+" = "+(16*a.length/8192).toFixed(2)+" KB")}));var n=16*t.length/8192;wn(t?"Total space used: "+n.toFixed(2)+" KB":"Empty (0 KB)"),wn(t?"Approx. space remaining: "+(5120-n).toFixed(2)+" KB":"5 MB")}}],[{key:"usingLocalStorage",value:function(){return new e({store:window.localStorage,version:{patch:kn.PatchVersion,combat:kn.MinVersionCombat,settings:kn.MinVersionSettings},clock:qe})}}]),e}(),ui=function(){function e(t){var n;Object(l.a)(this,e),this.defaultValue=void 0,this.storageKey=void 0,this.getStorage=void 0,this.returnCopy=void 0,this.setCallback=void 0,this.validator=void 0,this.override=void 0,this.value=void 0,this.defaultValue=t.defaultValue,this.storageKey=t.storageKey,this.getStorage=t.getStorage,this.returnCopy=!!t.returnCopy,this.setCallback=t.setCallback,this.validator=null!==(n=t.validator)&&void 0!==n?n:function(){return!0},this.override=t.override,this.value=this.returnCopy?Kt(this.defaultValue):this.defaultValue}return Object(h.a)(e,[{key:"set",value:function(e){if(!this.validator(e))throw new Error("invalid setting update for ".concat(this.storageKey,": ").concat(e));this.getStorage().set(this.storageKey,e),this.value=this.returnCopy?Kt(e):e,this.setCallback&&this.setCallback()}},{key:"get",value:function(){var e=this.override,t=this.value,n=void 0!==e?e instanceof Function?e(t):e:void 0,a=null!==n&&void 0!==n?n:t;return this.returnCopy?Kt(a):a}},{key:"reset",value:function(){this.getStorage().remove(this.storageKey),this.value=this.returnCopy?Kt(this.defaultValue):this.defaultValue,this.setCallback&&this.setCallback()}},{key:"load",value:function(){var e;this.value=null!==(e=this.getStorage().getSetting(this.storageKey))&&void 0!==e?e:this.defaultValue}},{key:"stored",value:function(){return this.getStorage().getSetting(this.storageKey)}}]),e}(),li=new(function(){function e(t){var n,a,r=this;Object(l.a)(this,e),this.storage=void 0,this.allCaches=[],this.LastSeenVersion=this.createCache({defaultValue:kn.PatchVersion,storageKey:"lastSeenVersion"}),this.HasSeenIntroduction=this.createCache({defaultValue:!1,storageKey:"hasSeenIntroduction"}),this.Resolution=this.createCache({defaultValue:vn.isMobile?ce.Low:ce.Medium,storageKey:"resolution"}),this.FrameRate=this.createCache({defaultValue:vn.isMobile?yt.Fixed30:yt.Dynamic,storageKey:"frameRate"}),this.AttractMode=this.createCache({defaultValue:!vn.isMobile,storageKey:"attractMode"}),this.GamepadConnectedTrigger=this.createCache({defaultValue:me.OpenConfig,storageKey:"gamepadConnectedTrigger"}),this.UnloadSpritesFromMemory=this.createCache({defaultValue:!1,storageKey:"unloadSprites_V2"}),this.DefaultFirstTo=this.createCache({defaultValue:da.default().firstTo,storageKey:"defaultFirstTo"}),this.DefaultRoundTime=this.createCache({defaultValue:60,storageKey:"defaultRoundTime"}),this.VersusCpuDifficulty=this.createCache({defaultValue:D.Easy,storageKey:"versusCpuDifficulty"}),this.LobbyNickName=this.createCache({defaultValue:"",storageKey:"lobbyNickName"}),this.RankedMaxInputDelay=this.createCache({defaultValue:oi.defaultMaxInputDelay,storageKey:"rankedMaxInputDelay"}),this.RankedSearchRange=this.createCache({defaultValue:oi.defaultRange.range,storageKey:"rankedSearchRange"}),this.ScreenShake=this.createCache({defaultValue:!1,storageKey:"screenShake"}),this.ShowDesktopControls=this.createCache({defaultValue:!0,storageKey:"showDesktopControls"}),this.ShowEmotes=this.createCache({defaultValue:!0,storageKey:"showEmotes"}),this.ShowMobileControls=this.createCache({defaultValue:!0,storageKey:"showMobileControls"}),this.TrainingBlockingP1=this.createCache({defaultValue:be.Enabled,storageKey:"trainingBlockingP1"}),this.TrainingBlockingP2=this.createCache({defaultValue:be.Auto,storageKey:"trainingBlockingP2"}),this.TrainingCounterHit=this.createCache({defaultValue:ve.Normal,storageKey:"trainingCounterHit"}),this.TrainingDummyBehavior=this.createCache({defaultValue:ke.Player2,storageKey:"trainingDummyBehavior"}),this.TrainingDummyBurst=this.createCache({defaultValue:je.Never,storageKey:"trainingDummyBurst"}),this.TrainingHideHUD=this.createCache({defaultValue:!1,storageKey:"trainingHideHUD"}),this.TrainingShowHitboxes=this.createCache({defaultValue:xe.Hide,storageKey:"trainingShowHitboxes"}),this.TrainingShowInputDisplay=this.createCache({defaultValue:!1,storageKey:"trainingShowInputDisplay"}),this.TrainingMeter=this.createCache({defaultValue:ye.Refill,storageKey:"trainingMeter"}),this.MusicOverlayUrl=this.createCache({defaultValue:"",storageKey:"musicOverlayUrl"}),this.SoundToggleOn=this.createCache({defaultValue:!0,storageKey:"masterAudio",setCallback:function(){return r.updateVolume()}}),this.Controls=this.createCache({defaultValue:(n={},Object(v.a)(n,re.left,kn.DefaultControls1),Object(v.a)(n,re.right,kn.DefaultControls2),n),storageKey:"controlsV4",returnCopy:!0}),this.DEPRECATED_Controls=this.createCache({defaultValue:(a={},Object(v.a)(a,re.left,kn.DEPRECATED_DefaultControls1),Object(v.a)(a,re.right,kn.DEPRECATED_DefaultControls2),a),storageKey:"controlsV3",returnCopy:!0}),this.TouchControls=this.createCache({defaultValue:kn.DefaultTouchConfig,storageKey:"touchConfigV2"}),this.Volume=this.createCache({defaultValue:{announcer:.2,effect:.2,music:.2},storageKey:"sfxVolume",returnCopy:!0}),this.EventShowHitboxes=this.createCache({defaultValue:xe.Hide,storageKey:"eventShowHitboxes"}),this.isEventMode=this.createCache({defaultValue:!1,storageKey:"isEventMode"}),this.EventModeDipSwitch=this.createCache({defaultValue:Oe(),storageKey:"eventModeDipSwitch"}),this.EventModeBackupControls=this.createCache({defaultValue:null,storageKey:"eventModeControls",returnCopy:!0}),this.CanCheat=this.createCache({defaultValue:!1,storageKey:"canCheat",override:!!kn.Debug.CheatsOn||void 0}),this.storage=t,this.loadFromStorage()}return Object(h.a)(e,[{key:"createCache",value:function(e){var t=this,n=new ui(Object(g.a)(Object(g.a)({},e),{},{getStorage:function(){return t.storage}}));return this.allCaches.push(n),n}},{key:"resetAll",value:function(e){var t,n=(null!==(t=null===e||void 0===e?void 0:e.skip)&&void 0!==t?t:[]).map((function(e){return e.storageKey}));this.allCaches.forEach((function(e){n.includes(e.storageKey)||e.reset()}))}},{key:"loadFromStorage",value:function(){this.allCaches.forEach((function(e){return e.load()}));var e=new si,t=this.DEPRECATED_Controls.stored();if(void 0!==t&&void 0===this.Controls.stored()){var n=e.upgradeControlsSetting(t);this.Controls.set(n)}}},{key:"updateVolume",value:function(e){var t,n,a,r,i=this.SoundToggleOn.get(),o=this.Volume.get(),s=(null===e||void 0===e||null===(t=e.mute)||void 0===t?void 0:t.announcer)||!i;r=s?0:o.announcer,Jn(qn,1*r),function(e){Jn(Vn,.7*e)}((null===e||void 0===e||null===(n=e.mute)||void 0===n?void 0:n.effect)||!i?0:o.effect),function(e){Jn(Yn,.5*e)}((null===e||void 0===e||null===(a=e.mute)||void 0===a?void 0:a.music)||!i?0:o.music)}}]),e}())(ci.usingLocalStorage()),hi=function(){function e(t){Object(l.a)(this,e),this.controlsGetter=t,this.id=tn(10),this.tick=0,this.gamepadApi=ha.fromWindow(),this.realtime={},this.controls1=void 0,this.controls2=void 0,this.padTracker1=new sa,this.padTracker2=new sa;var n=this.controlsGetter(),a=n.controls1,r=n.controls2;this.controls1=a,this.controls2=r}return Object(h.a)(e,[{key:"getState",value:function(e){var t=this.realtime[e];return void 0!==t?t:Re.Unused}},{key:"getCombinedState",value:function(e){var t,n=this;if(1===e.length)return null!==(t=this.realtime[e[0]])&&void 0!==t?t:Re.Unused;if(0===e.length)return Re.Unused;var a=Bt(e.map((function(e){return n.realtime[e]})));if(a.length<e.length)return Re.Unused;var r=new Set(a);return r.has(Re.Unused)?Re.Unused:r.has(Re.Release)?Re.Release:r.has(Re.Press)?Re.Press:Re.Hold}},{key:"press",value:function(e){if(e){var t=this.getState(e);[Re.Press,Re.Hold].includes(t)||(this.realtime[e]=Re.Press)}}},{key:"release",value:function(e){e&&(this.realtime[e]=Re.Release)}},{key:"pressControls",value:function(e,t){var n=this;Re.Press===t.left?e.left.forEach((function(e){return n.press(e)})):e.left.forEach((function(e){return n.release(e)})),Re.Press===t.right?e.right.forEach((function(e){return n.press(e)})):e.right.forEach((function(e){return n.release(e)})),Re.Press===t.attack1?e.attack1.forEach((function(e){return n.press(e)})):e.attack1.forEach((function(e){return n.release(e)})),Re.Press===t.attack2?e.attack2.forEach((function(e){return n.press(e)})):e.attack2.forEach((function(e){return n.release(e)})),Re.Press===t.attack3?e.attack3.forEach((function(e){return n.press(e)})):e.attack3.forEach((function(e){return n.release(e)})),Re.Press===t.attack4?e.attack4.forEach((function(e){return n.press(e)})):e.attack4.forEach((function(e){return n.release(e)}))}},{key:"constructControllerState",value:function(e){return{left:this.getCombinedState(e.left),right:this.getCombinedState(e.right),attack1:this.getCombinedState(e.attack1),attack2:this.getCombinedState(e.attack2),attack3:this.getCombinedState(e.attack3),attack4:this.getCombinedState(e.attack4),menu:this.getCombinedState(e.menu)}}},{key:"checkGamepads",value:function(){var e=this,t=this.gamepadApi.read();t.pressed.forEach((function(t){return e.press(t)})),t.released.forEach((function(t){return e.release(t)}))}},{key:"step",value:function(){var e=this;if(this.tick++,this.tick%60===0){var t=this.controlsGetter(),n=t.controls1,a=t.controls2;this.controls1=n,this.controls2=a}this.checkGamepads();var r=this.controls1,i=this.controls2,o=this.realtime;this.padTracker1.step(this.constructControllerState(r),kn.AttackBuffer),this.padTracker2.step(this.constructControllerState(i),kn.AttackBuffer),Object.keys(o).forEach((function(t){var n=e.getState(t);n===Re.Press&&(o[t]=Re.Hold),n===Re.Release&&delete o[t]}))}},{key:"getPressedOrHeld",value:function(){var e=this;return Object.keys(this.realtime).filter((function(t){return[Re.Press,Re.Hold].includes(e.realtime[t])}))}},{key:"getEventMenuProp",value:function(e){if(li.isEventMode.get()){var t=li.EventModeDipSwitch.get();return e===t.p1menuUp?ae.p1menuUp:e===t.p1menuDown?ae.p1menuDown:e===t.p2menuUp?ae.p2menuUp:e===t.p2menuDown?ae.p2menuDown:void 0}}},{key:"getDefaultKeyboardControlProp",value:function(e){return"ArrowUp"===e?te.left:"ArrowDown"===e?te.right:"ArrowLeft"===e?te.left:"ArrowRight"===e?te.right:"Enter"===e?te.attack1:"Escape"===e?te.attack2:void 0}},{key:"getControlProp",value:function(e,t){var n=new ca(e);return n.left(t)?te.left:n.right(t)?te.right:n.attack1(t)?te.attack1:n.attack2(t)?te.attack2:n.attack3(t)?te.attack3:n.attack4(t)?te.attack4:n.menu(t)?te.menu:void 0}},{key:"getControl1Prop",value:function(e){return this.getControlProp(this.controls1,e)}},{key:"getControl2Prop",value:function(e){return this.getControlProp(this.controls2,e)}},{key:"reset",value:function(){this.realtime={},this.padTracker1.reset(),this.padTracker2.reset()}}],[{key:"fromGameType",value:function(t){var n=t.isOnlineHost,a=t.isOnlineGuest,r=t.isVersusCPU,i=t.isTraining;return new e(t.isTutorial?function(){return{controls1:li.Controls.get()[re.left],controls2:kn.EmptyControls}}:i?function(){var e=li.Controls.get();return{controls1:e[re.left],controls2:e[re.right]}}:r?function(){return{controls1:li.Controls.get()[re.left],controls2:kn.ComputerTwoControls}}:n?function(){return{controls1:li.Controls.get()[re.left],controls2:kn.EmptyControls}}:a?function(){var e=li.Controls.get();return{controls1:kn.EmptyControls,controls2:e[re.left]}}:function(){var e=li.Controls.get();return{controls1:e[re.left],controls2:e[re.right]}})}}]),e}(),di=function(e){return e.Mean="mean",e.Median="median",e}(di||{}),pi=function(){function e(t,n,a){Object(l.a)(this,e),this.name=void 0,this.values=[],this.memory=void 0,this.printType=void 0,this.memory=t,this.name=n,this.printType=a}return Object(h.a)(e,[{key:"record",value:function(e){var t=this.memory,n=this.values;for(n.push(e);n.length>t;)n.shift()}},{key:"median",value:function(){return _t(this.values)||0}},{key:"mean",value:function(){var e=this.values;return e.reduce((function(e,t){return e+t}),0)/(e.length||1)}},{key:"printValue",value:function(){var e,t=this.printType,n=(e={},Object(v.a)(e,di.Mean,this.mean()),Object(v.a)(e,di.Median,this.median()),e)[t];return Math.round(n)}},{key:"printWithLabel",value:function(e){var t,n=this.name,a=this.printType,r=(t={},Object(v.a)(t,di.Mean,this.mean()),Object(v.a)(t,di.Median,this.median()),t)[a];return"".concat(n.padStart(e," "),": ").concat(Math.round(r))}}]),e}(),fi=new(function(){function e(){Object(l.a)(this,e),this.statsArr=[new pi(kn.FPS,"logic ms",di.Mean),new pi(kn.FPS,"draw ms",di.Mean),new pi(kn.FPS,"frame ms",di.Mean),new pi(kn.FPS,"loop ms",di.Mean),new pi(kn.FPS,"loop fps",di.Mean),new pi(1,"skipped",di.Median),new pi(kn.FPS,"local delay",di.Mean),new pi(kn.FPS,"remote delay",di.Mean),new pi(1,"loop offset",di.Mean),new pi(kn.FPS,"rollback",di.Mean),new pi(kn.FPS,"history",di.Mean)],this.statsLookup=this.statsArr.reduce((function(e,t){return e[t.name]=t,e}),{})}return Object(h.a)(e,[{key:"record",value:function(e,t){var n=this.statsLookup[e];if(!n)throw new Error("unrecognized stat: "+e);return n.record(t),n}},{key:"recordFrameLogic",value:function(e){this.record("logic ms",e)}},{key:"recordFrameDraw",value:function(e){this.record("draw ms",e)}},{key:"recordFrame",value:function(e){this.record("frame ms",e)}},{key:"recordFullLoop",value:function(e){this.record("loop ms",e),this.record("loop fps",Math.floor(1e3/e))}},{key:"recordHistory",value:function(e){this.record("history",e)}},{key:"recordLocalDelay",value:function(e){return this.record("local delay",e)}},{key:"recordRemoteDelay",value:function(e){return this.record("remote delay",e)}},{key:"recordLoopOffset",value:function(e){return this.record("loop offset",e)}},{key:"recordRollback",value:function(e){this.record("rollback",e)}},{key:"recordSkipped",value:function(e){this.record("skipped",e)}},{key:"getLocalDelay",value:function(){return this.statsLookup["local delay"].printValue()}},{key:"getRemoteDelay",value:function(){return this.statsLookup["remote delay"].printValue()}},{key:"getRollback",value:function(){return this.statsLookup.rollback.printValue()}},{key:"getAll",value:function(){return this.statsArr}}]),e}()),bi=function(){function e(t){var n,a,r=this;if(Object(l.a)(this,e),this.inputDelay=void 0,this.ticks=0,this.oldestInput=0,this.trainingHistory=10*kn.FPS,this.inputDisplayHistory=this.trainingHistory/2,this.compressor=new ra,this.keyboard=void 0,this.game=void 0,this.gameMeta=void 0,this.cpu1=void 0,this.cpu2=void 0,this.local1=void 0,this.local2=void 0,this.isSinglePlayer=void 0,this.isSpectator=void 0,this.roundIndex=void 0,this.connection=void 0,this.replay=void 0,this.input1=new la,this.input2=new la,this.gh=new la,this.intent1=void 0,this.intent2=void 0,this.totalMissingTicks=0,this.totalRecoveredTicks=0,this.ignoreInputs=!1,this.sentInput1=function(e,t){return r.sendInput(r.input1,r.local1&&!r.local2,e,t)},this.sentInput2=function(e,t){return r.sendInput(r.input2,!r.local1&&r.local2,e,t)},this.game=t.game,this.gameMeta=t.gameMeta,this.cpu1=!!t.gameMeta.cpuDiff1,this.cpu2=!!t.gameMeta.cpuDiff2,this.local1=!t.network||t.network.connection.local1,this.local2=!t.network||t.network.connection.local2,this.isSinglePlayer=!!t.network||this.game.isTrainingMode,this.inputDelay=t.gameMeta.inputDelay||0,this.replay=t.replay,this.isSpectator=!!t.isSpectator,this.roundIndex=t.roundIndex||0,this.intent1=this.game.fighter1.genIntentManager(null!==(n=t.gameMeta.cpuDiff1)&&void 0!==n?n:D.Easy),this.intent2=this.game.fighter2.genIntentManager(null!==(a=t.gameMeta.cpuDiff2)&&void 0!==a?a:D.Easy),t.network){var i=t.network.connection;i.receiveInputData=function(e){var t=e.delay,n=e.round,a=e.inputs;if(n===r.roundIndex){var o=i.delayTracker.getLocalLatest();void 0!==o&&fi.recordLocalDelay(o),void 0!==t&&fi.recordRemoteDelay(t),r.game.isOver()||(r.local1?a.forEach((function(e){return r.sentInput2(e.tick,r.compressor.decompressInput(e.controller))})):a.forEach((function(e){return r.sentInput1(e.tick,r.compressor.decompressInput(e.controller))})))}},i.subscribe(Be.Coordinator,(function(e){if(e.key===De.MissingInputRequest){var t=e.value,n=t.round,a=t.missingTicks;if(n!==r.roundIndex)return;if(r.game.isOver())return;var o=r.local1?r.input1:r.input2,s=a.map((function(e){return o.get(e)})).filter((function(e){return void 0!==e.value})).map((function(e){return{tick:e.index,controller:r.compressor.compressInput(e.value)}}));if(s.length>0){var c={round:n,missing:s};i.sendUserMessage({key:De.MissingInputResponse,value:c})}}if(e.key===De.MissingInputResponse){var u=e.value,l=u.round,h=u.missing;if(l!==r.roundIndex)return;if(r.game.isOver())return;r.totalRecoveredTicks+=h.length,r.local1?h.forEach((function(e){return r.sentInput2(e.tick,r.compressor.decompressInput(e.controller))})):h.forEach((function(e){return r.sentInput1(e.tick,r.compressor.decompressInput(e.controller))}))}})),this.connection=i}this.keyboard=hi.fromGameType({isOnlineHost:!!this.connection&&this.local1,isOnlineGuest:!!this.connection&&this.local2,isVersusCPU:this.cpu2,isTraining:!!this.gameMeta.isTrainingMode,isTutorial:!!this.gameMeta.isTutorial}),this.gh.set(this.oldestInput,this.game.getState());for(var o=0;o<this.inputDelay;o++)this.local1&&this.sentInput1(o,ia.getUnusedController()),this.local2&&this.sentInput2(o,ia.getUnusedController());vn.isMobile}return Object(h.a)(e,[{key:"enableInputs",value:function(){this.ignoreInputs=!1}},{key:"disableInputs",value:function(){this.ignoreInputs=!0}},{key:"step",value:function(e){var t=this.keyboard,n=this.connection,a=this.roundIndex,r=this.game,i=this.cpu1,o=this.cpu2,s=this.local1,c=this.local2,u=this.isSpectator,l=this.input1,h=this.input2,d=this.gh,p=this.intent1,f=this.intent2,b=this.inputDelay,g=this.replay;if(e||t.step(),u);else if(g){var m,v;this.sentInput1(this.ticks,null!==(m=g.input1[this.ticks])&&void 0!==m?m:ia.getUnusedController()),this.sentInput2(this.ticks,null!==(v=g.input2[this.ticks])&&void 0!==v?v:ia.getUnusedController())}else if(this.ignoreInputs)s&&this.sentInput1(this.ticks+b,ia.getUnusedController()),c&&this.sentInput2(this.ticks+b,ia.getUnusedController());else{var k=li.TrainingDummyBehavior.get(),j=!r.isTrainingMode||k===ke.Player2;s&&this.sentInput1(this.ticks+b,t.padTracker1.getState()),c&&j&&this.sentInput2(this.ticks+b,t.padTracker2.getState());var y=!r.isTrainingMode||k===ke.Cpu;if(i&&this.sentInput1(this.ticks,p.step(r.fighter1,r.fighter2)),o&&y&&this.sentInput2(this.ticks,f.step(r.fighter2,r.fighter1)),r.tutorial){var x=r.tutorial.getDummyInput(r.fighter2.currentSequence.getState().facingRight);x&&this.sentInput2(this.ticks,x)}}kn.Debug.OfflineRollback&&this.ticks>10&&this.ticks%5===0&&(this.oldestInput=this.ticks-10);var O=this.ticks-this.oldestInput;if(fi.recordRollback(O),this.oldestInput<this.ticks){wn("rolling back");var w=d.get(this.oldestInput).value;w||wn("missing game state for tick:",this.oldestInput),r.loadState(w)}for(;this.oldestInput<=this.ticks;){var S=new oa,C=new oa;S.loadState(l.predict(this.oldestInput).value),C.loadState(h.predict(this.oldestInput).value);var A=r.getHitstop();if(A.total>0&&0===A.remaining)for(var T=Math.max(0,A.total-kn.AttackBuffer),M=this.oldestInput-T;M<this.oldestInput;M++)S.mergePrevState(l.predict(M).value),C.mergePrevState(h.predict(M).value);r.step(S,C),this.oldestInput++,d.set(this.oldestInput,r.getState())}this.ticks++;var P=1*kn.FPS;if(n&&this.ticks>0&&this.ticks%P===0){var R=(s?h:l).missing();if(R.size>0){var I={round:a,missingTicks:Array.from(R)};n.sendUserMessage({key:De.MissingInputRequest,value:I}),this.totalMissingTicks+=R.size}}kn.isDebug&&this.connection&&this.ticks%60===0&&(l.missing().size&&wn("missing input1:",l.missing()),h.missing().size&&wn("missing input2:",h.missing()),d.missing().size&&wn("missing gh:",d.missing()))}},{key:"draw",value:function(e){var t,n=this.game,a=this.replay,r=this.cpu2;(a||!vn.isMobile&&n.isTrainingMode||kn.Debug.ShowInputs)&&(t=this.exportRecentInputs());var i=(n.isTrainingMode||this.local1?this.input1:this.input2).predict(this.ticks).value,o=kn.Debug.ShowIntent&&r?this.intent2:void 0;n.draw({loopContext:e,inputHistory:t,touchControllerState:i,intent:o})}},{key:"pruneGameHistory",value:function(){if(this.game.isTrainingMode){var e=this.gh,t=this.input1,n=this.input2;t.prune(this.oldestInput-this.trainingHistory),n.prune(this.oldestInput-this.trainingHistory),e.prune(this.oldestInput-this.trainingHistory)}}},{key:"sendInput",value:function(e,t,n,a){var r=this,i=this.roundIndex,o=this.connection,s=e.predict(n).value;e.set(n,a),oa.equalState(s,a)||(this.oldestInput=Math.min(this.oldestInput,n));var c=kn.Debug.DropInputs&&Math.random()<.05;if(t&&o&&!c){var u=kn.Debug.DropInputs?1:9,l=e.slice(n-u,n).filter((function(e){return e.value})).map((function(e){return{tick:e.index,controller:r.compressor.compressInput(e.value)}}));o.sendInput({round:i,tick:n,inputs:l})}this.pruneGameHistory()}},{key:"getTicks",value:function(){return this.ticks}},{key:"getMissingTicks",value:function(){return{total:this.totalMissingTicks,recovered:this.totalRecoveredTicks}}},{key:"replayRewind",value:function(e){this.ticks=Math.max(0,this.ticks-e),this.oldestInput=this.ticks;var t=this.gh.get(this.ticks).value;t&&this.game.loadState(t)}},{key:"exportReplayInputs",value:function(){return{input1:this.input1.exportFull().map((function(e){return e||ia.getUnusedController()})),input2:this.input2.exportFull().map((function(e){return e||ia.getUnusedController()}))}}},{key:"exportRecentInputs",value:function(){return{input1:this.input1.sliceValues(this.ticks-this.inputDisplayHistory,this.ticks).map((function(e){return e||ia.getUnusedController()})),input2:this.input2.sliceValues(this.ticks-this.inputDisplayHistory,this.ticks).map((function(e){return e||ia.getUnusedController()}))}}},{key:"getSpectatorInputs",value:function(e,t){return{round:this.roundIndex,startTick:e,inputs:{input1:this.input1.sliceValues(e,t).map((function(e){return e||ia.getUnusedController()})),input2:this.input2.sliceValues(e,t).map((function(e){return e||ia.getUnusedController()}))}}}},{key:"feedSpectatorInputs",value:function(e){var t=this;e.inputs.input1.forEach((function(n,a){var r=a+e.startTick;t.sentInput1(r,n)})),e.inputs.input2.forEach((function(n,a){var r=a+e.startTick;t.sentInput2(r,n)}))}}]),e}(),gi=function(){function e(t){Object(l.a)(this,e),this.loaded=void 0,this.imageUrl=void 0,this.asset=void 0,this.imageUrl=t,this.asset=_n.fromUrl(this.imageUrl),this.loaded=this.asset.loaded}return Object(h.a)(e,null,[{key:"loadStaticImage",value:function(t){var n=this.cache[t];if(n)return n;var a=new e(t);return this.cache[t]=a,a}},{key:"loadBackgroundImage",value:function(e,t){var n,a=null!==t&&void 0!==t?t:li.Resolution.get(),r=(n={},Object(v.a)(n,ce.High,"comp1080"),Object(v.a)(n,ce.Medium,"comp1080"),Object(v.a)(n,ce.Low,"comp720"),n)[a],i=kn.AssetsPath("background/".concat(r,"/").concat(e));return this.loadStaticImage(i)}},{key:"loadHudOverlay",value:function(e){var t,n=li.Resolution.get(),a=(t={},Object(v.a)(t,ce.High,"compw1920"),Object(v.a)(t,ce.Medium,"compw1920"),Object(v.a)(t,ce.Low,"compw1280"),t)[n],r=kn.AssetsPath("hud_overlay/".concat(a,"/").concat(e));return this.loadStaticImage(r)}}]),e}();gi.cache={};var mi=function(){function e(t,n,a){Object(l.a)(this,e),this.loaded=void 0,this.cacheKey=void 0,this.imageUrl=void 0,this.image=void 0,this.mirrored=void 0;var r=n;this.cacheKey=a,this.imageUrl=kn.AssetsPath("sprite/".concat(t,"/original/").concat(r));var i=_n.fromUrl(this.imageUrl,!0);this.image=i,this.mirrored=_n.createMirror(i),this.loaded=Promise.all([this.image.loaded,this.mirrored.loaded]).then((function(e){return En.combineInfos(e)}))}return Object(h.a)(e,null,[{key:"trimCache",value:function(){var e=this,t=this.cacheKeyStack.dequeue(this.cacheKeyStack.length-1e3);t.forEach((function(t){delete e.cache[t]})),wn("Sprite.trimCache() removed ".concat(t.length,", keeping ").concat(Object.keys(this.cache).length))}},{key:"loadFromCache",value:function(e){return this.cache[e]}},{key:"loadSprite",value:function(t,n){var a,r=n?ce.Low:li.Resolution.get(),i=(a={},Object(v.a)(a,ce.High,"comp600"),Object(v.a)(a,ce.Medium,"comp600"),Object(v.a)(a,ce.Low,"comp300"),a)[r],o="".concat(i,"/").concat(t);this.cacheKeyStack.push(o);var s=this.cache[o];if(s)return s;var c=new e(i,t,o);return this.cache[o]=c,c}}]),e}();mi.cacheKeyStack=new cn,mi.cache={};var vi=function(){function e(t,n){Object(l.a)(this,e),this.draw=t,this.frame=n,this.ticks=0}return Object(h.a)(e,[{key:"delay",get:function(){return this.draw.delay-this.ticks}},{key:"isAlive",value:function(e){return!(e&&this.draw.dieOnFighterHit)&&this.delay>=0}},{key:"step",value:function(){this.ticks++}},{key:"drawAfterimage",value:function(e){if(0===this.delay){var t=this.frame,n=t.imageKey,a=t.facingRight,r=t.mirrorImage,i=t.origin;if(void 0!==n){var o=mi.loadFromCache(n);if(void 0!==o){var s=new ta(i,a),c=r?a?o.mirrored.get():o.image.get():a?o.image.get():o.mirrored.get(),u=s.size.y,l=u*c.width/c.height;e.drawFrame(c,s.center.x-l/2,s.center.y-u/2,l,u,this.draw.opacity)}}}}},{key:"getState",value:function(){return{draw:this.draw,frame:this.frame,ticks:this.ticks}}},{key:"loadState",value:function(e){this.ticks=e.ticks}}],[{key:"fromState",value:function(t){var n=new e(t.draw,t.frame);return n.loadState(t),n}},{key:"fromActiveFrame",value:function(t,n){var a;return new e(t,{imageKey:null===(a=n.bp.sprite)||void 0===a?void 0:a.cacheKey,facingRight:n.facingRight,mirrorImage:n.bp.data.mirrorImage,origin:{center:n.drawBox.center,size:n.drawBox.size}})}}]),e}(),ki=function(){function e(t,n,a,r){var i=this;if(Object(l.a)(this,e),this.buffer=void 0,this.source=void 0,this.gain=void 0,this.loop=void 0,this.url=void 0,this.loaded=void 0,this.throwUnderTest()&&kn.isTest)throw new Error("this should be mocked out!");this.loaded=new Promise((function(e,t){n.then((function(t){i.buffer=t,e()}))})),this.url=t,this.gain=a,this.loop=r}return Object(h.a)(e,[{key:"throwUnderTest",value:function(){return!0}},{key:"getSource",value:function(){return Wn.createBufferSource()}},{key:"play",value:function(e){this.buffer&&(this.source=this.getSource(),this.source.buffer=this.buffer,this.source.loop=this.loop,this.source.connect(this.gain),this.source.start(0,e))}},{key:"stop",value:function(){this.source&&this.source.stop()}}],[{key:"load",value:function(t,n,a){return new e(t,function(e){return Nn.apply(this,arguments)}(t),n,a)}}]),e}(),ji=function(){function e(t,n){Object(l.a)(this,e),this.gain=void 0,this.file=void 0,this.loaded=void 0,this.url=void 0,this.gain=t,this.file=n,this.url=n.url,this.loaded=n.loaded}return Object(h.a)(e,[{key:"play",value:function(){this.file.stop(),this.file.play()}}],[{key:"load",value:function(t,n){var a=this.cache[n];if(a)return a;var r=new e(t,ki.load(n,t,!1));return this.cache[n]=r,r}}]),e}();ji.cache={};var yi=function(){function e(){Object(l.a)(this,e)}return Object(h.a)(e,null,[{key:"load",value:function(e){return ji.load(qn,e)}}]),e}(),xi=function(){function e(){Object(l.a)(this,e)}return Object(h.a)(e,null,[{key:"load",value:function(e){return ji.load(Vn,e)}}]),e}(),Oi=function(){function e(){Object(l.a)(this,e)}return Object(h.a)(e,null,[{key:"load",value:function(e){return ji.load(Yn,e)}}]),e}(),wi={loaded:Promise.resolve(),url:kn.EmptySound,play:function(){}},Si=function(){function e(t){Object(l.a)(this,e),this.file=void 0,this.playing=!1,this.loaded=void 0,this.url=void 0,this.file=t,this.url=t.url,this.loaded=t.loaded}return Object(h.a)(e,[{key:"stop",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(){return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.playing&&(this.file.stop(),this.playing=!1);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"play",value:function(){kn.Debug.MuteBGM||this.playing||(e.stopAll(),this.file.play(),this.playing=!0)}},{key:"playWhenLoaded",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(){return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.file.loaded;case 2:this.play();case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isPlaying",value:function(){return this.playing}}],[{key:"load",value:function(t){var n=this.cache[t];if(n)return n;var a=new e(ki.load(t,Yn,!0));return this.cache[t]=a,a}},{key:"stopAll",value:function(){Object.values(e.cache).forEach((function(e){return e.stop()}))}}]),e}();Si.cache={};var Ci,Ai=function(){function e(t){Object(l.a)(this,e),this.cb=void 0,this.cb=t}return Object(h.a)(e,[{key:"load",value:function(){return this.cb()}},{key:"play",value:function(){return this.cb().play()}}]),e}(),Ti=function(){function e(t){if(Object(l.a)(this,e),this.clips=void 0,0===t.length)throw new Error("cannot create SoundRandomizer without sounds");this.clips=t}return Object(h.a)(e,[{key:"play",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.clips[e%this.clips.length].play()}}],[{key:"combine",value:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return new e(Vt(n.map((function(e){return e.clips}))))}}]),e}(),Mi=function(){function e(){var t,n,a,r=this;Object(l.a)(this,e),this.loadClip=function(e,t){if(t===kn.EmptySound)return new Ai((function(){return wi}));var n=kn.AssetsPath("sfx/".concat(t,".mp3"));if(kn.isTest){var a={play:function(){},url:n,loaded:Promise.resolve()};return new Ai((function(){return a}))}return new Ai((function(){return e(n)}))},this.loadAnnouncer=function(e){return r.loadClip(yi.load,e)},this.loadEffect=function(e){return r.loadClip(xi.load,e)},this.loadMusic=function(e){return r.loadClip(Oi.load,e)},this.rawAFX=(t={},Object(v.a)(t,Se.AnnouncerRoundReady,["v2/ancr/ancr_ready"]),Object(v.a)(t,Se.AnnouncerRoundFight,["v2/ancr/ancr_fight"]),Object(v.a)(t,Se.AnnouncerRoundKO,["v2/ancr/ancr_ko"]),Object(v.a)(t,Se.AnnouncerRoundTime,["v2/ancr/ancr_time"]),Object(v.a)(t,Se.AnnouncerRoundDraw,["v2/ancr/ancr_draw"]),Object(v.a)(t,Se.AnnouncerRoundPerfect,["v2/ancr/ancr_perfect","v2/ancr/ancr_perfect","v2/ancr/ancr_perfect","v2/ancr/ancr_perfect","v2/ancr/ancr_convincing"]),Object(v.a)(t,Se.AnnouncerMatchYouLose,["v2/ancr/ancr_you_lose"]),Object(v.a)(t,Se.AnnouncerMatchWinBeef,["v2/ancr/ancr_win_beef"]),Object(v.a)(t,Se.AnnouncerMatchWinGarlic,["v2/ancr/ancr_win_garlic"]),Object(v.a)(t,Se.AnnouncerMatchWinNoodle,["v2/ancr/ancr_win_noodle"]),Object(v.a)(t,Se.AnnouncerMatchWinOnion,["v2/ancr/ancr_win_onion"]),Object(v.a)(t,Se.AnnouncerMatchWinPork,["v2/ancr/ancr_win_pork"]),Object(v.a)(t,Se.AnnouncerMatchWinRice,["v2/ancr/ancr_win_rice"]),Object(v.a)(t,Se.AnnouncerTutorialNice,["v2/ancr/ancr_nice"]),Object(v.a)(t,Se.AnnouncerTutorialChallengeComplete,["v2/ancr/ancr_challenge_complete"]),Object(v.a)(t,Se.AnnouncerTutorialGreatJob,["v2/ancr/ancr_great_job"]),t),this.rawSFX=(n={},Object(v.a)(n,Se.Empty,[kn.EmptySound]),Object(v.a)(n,Se.MenuForward,["ui/menu_forward"]),Object(v.a)(n,Se.MenuBackward,["ui/menu_back"]),Object(v.a)(n,Se.MenuChange,["ui/menu_neutral"]),Object(v.a)(n,Se.MenuMatchFound,["ui/bell"]),Object(v.a)(n,Se.StunBlock,["v2/stun/blockstun_1","v2/stun/blockstun_2","v2/stun/blockstun_3","v2/stun/blockstun_4","v2/stun/blockstun_5","v2/stun/blockstun_6","v2/stun/blockstun_7"]),Object(v.a)(n,Se.StunHitSmall,["v2/stun/hitstun_sm_1","v2/stun/hitstun_sm_2","v2/stun/hitstun_sm_3","v2/stun/hitstun_sm_4"]),Object(v.a)(n,Se.StunHitLarge,["v2/stun/hitstun_big_1","v2/stun/hitstun_big_2"]),Object(v.a)(n,Se.MeterGain,["v2/ui/meter_gain_v1"]),Object(v.a)(n,Se.MeterRapid,["v2/ui/meter_rapid_v1"]),Object(v.a)(n,Se.MeterBurst,["v2/ui/meter_burst_v2"]),Object(v.a)(n,Se.MeterReject,["v2/ui/meter_reject_v2"]),Object(v.a)(n,Se.Blep,["v2/ui/ui_blep_1"]),Object(v.a)(n,Se.Bling,["v2/ui/ui_bling"]),Object(v.a)(n,Se.Love,["v2/ui/ui_love_1","v2/ui/ui_love_2","v2/ui/ui_love_3","v2/ui/ui_love_4"]),Object(v.a)(n,Se.CarbDash,["noodle/noodle_dash"]),Object(v.a)(n,Se.CarbDeath,["noodle/noodle_death"]),Object(v.a)(n,Se.Deprecated_CarbFist,["noodle/noodle_fist"]),Object(v.a)(n,Se.CarbFrenzy,["noodle/noodle_frenzy"]),Object(v.a)(n,Se.Deprecated_CarbGrounder,["v2/carb/noodle_groan_3"]),Object(v.a)(n,Se.CarbJump,["noodle/noodle_jump"]),Object(v.a)(n,Se.CarbPrepSoup,["noodle/noodle_misc_4"]),Object(v.a)(n,Se.CarbThrowStart,["v2/carb/noodle_ehh"]),Object(v.a)(n,Se.CarbThrowHit,["v2/carb/noodle_groan_1"]),Object(v.a)(n,Se.CarbTrample,["v2/carb/noodle_groan_3"]),Object(v.a)(n,Se.CarbServeSoup,["noodle/noodle_fist"]),Object(v.a)(n,Se.CarbSlap,["noodle/noodle_misc_1","noodle/noodle_misc_2","noodle/noodle_misc_3"]),Object(v.a)(n,Se.CarbSoupBowl,["v2/carb/noodle_bowl"]),Object(v.a)(n,Se.CarbSwat,["noodle/noodle_swat"]),Object(v.a)(n,Se.CarbSwipe,["v2/carb/noodle_swipe"]),Object(v.a)(n,Se.CarbTeleport,["v2/carb/noodle_groan_4"]),Object(v.a)(n,Se.CarbWhip,["noodle/noodle_whip_1","noodle/noodle_whip_2","noodle/noodle_whip_3","noodle/noodle_whip_again_1","noodle/noodle_whip_again_2"]),Object(v.a)(n,Se.CarbWhip2,["v2/carb/noodle_hop"]),Object(v.a)(n,Se.CarbWhip3,["v2/carb/noodle_groan_2"]),Object(v.a)(n,Se.CarbGrunt,["noodle/noodle_misc_5"]),Object(v.a)(n,Se.CarbMisc,["noodle/noodle_misc_5","v2/carb/noodle_im_noodle"]),Object(v.a)(n,Se.MeatChop,["beef/beef_armor"]),Object(v.a)(n,Se.MeatDeath,["beef/beef_death"]),Object(v.a)(n,Se.MeatFlex,["beef/beef_flex"]),Object(v.a)(n,Se.MeatLaugh,["v2/meat/beef_laugh"]),Object(v.a)(n,Se.MeatWin,["beef/beef_i_am_beef"]),Object(v.a)(n,Se.MeatTaunt,["beef/beef_i_am_made_of_meat"]),Object(v.a)(n,Se.MeatJump,["beef/beef_jump"]),Object(v.a)(n,Se.MeatThrowStart,["beef/beef_misc_9_menu"]),Object(v.a)(n,Se.MeatThrowHit,["v2/meat/beef_yah_big"]),Object(v.a)(n,Se.MeatLemon,["beef/beef_lemon"]),Object(v.a)(n,Se.MeatGutpunch,["beef/beef_misc_1","beef/beef_misc_2","beef/beef_misc_6"]),Object(v.a)(n,Se.MeatPunch,["beef/beef_punch_1","beef/beef_punch_2"]),Object(v.a)(n,Se.MeatUppercut1,["v2/meat/beef_grunt_sm"]),Object(v.a)(n,Se.MeatUppercut2,["v2/meat/beef_grunt_big"]),Object(v.a)(n,Se.MeatSpikeSetup,["beef/beef_spike_1"]),Object(v.a)(n,Se.MeatSpikeHit,["beef/beef_spike_2"]),Object(v.a)(n,Se.MeatCaberStart,["beef/beef_misc_3"]),Object(v.a)(n,Se.MeatToss,["beef/beef_suplex"]),Object(v.a)(n,Se.MeatMisc,["beef/beef_misc_4","beef/beef_misc_5","beef/beef_misc_7","beef/beef_misc_8","v2/meat/beef_yah_sm","v2/meat/beef_oy"]),Object(v.a)(n,Se.SpiceFlick,["onion/onion_misc_1","onion/onion_misc_2","onion/onion_misc_8"]),Object(v.a)(n,Se.SpiceSweep,["onion/onion_misc_4","onion/onion_misc_6","onion/onion_misc_7"]),Object(v.a)(n,Se.SpiceRoundhouse,["onion/onion_misc_9","onion/onion_misc_10"]),Object(v.a)(n,Se.SpiceTrip,["v2/spice/onion_hoh"]),Object(v.a)(n,Se.SpiceJump,["onion/onion_jump"]),Object(v.a)(n,Se.SpiceThrowStart,["onion/onion_misc_3"]),Object(v.a)(n,Se.SpiceThrowHit,["v2/spice/onion_laugh"]),Object(v.a)(n,Se.SpiceHopkick,["onion/onion_hopkick"]),Object(v.a)(n,Se.SpiceParry,["onion/onion_parry"]),Object(v.a)(n,Se.SpiceParryHit,["v2/spice/onion_yell"]),Object(v.a)(n,Se.SpiceDash,["onion/onion_dab_1","onion/onion_dab_2","onion/onion_dab_3"]),Object(v.a)(n,Se.SpiceSneak,["v2/spice/onion_sneak"]),Object(v.a)(n,Se.SpiceBackflip,["v2/spice/onion_snicker_1","v2/spice/onion_snicker_2"]),Object(v.a)(n,Se.SpiceDeath,["onion/onion_death"]),Object(v.a)(n,Se.SpiceMisc,["onion/onion_misc_5","onion/onion_misc_11","v2/spice/onion_hah_1","v2/spice/onion_hah_2","v2/spice/onion_hmmf","v2/spice/onion_hyah","v2/spice/onion_nyan_1","v2/spice/onion_nyan_2","v2/spice/onion_youre_too_slow"]),n),this.rawMFX=(a={},Object(v.a)(a,Se.MusicRoundOver,["ui/bell"]),Object(v.a)(a,Se.MusicMatchOver,["ui/victory"]),a),this.allById=Object(g.a)(Object(g.a)(Object(g.a)({},this.mapPathArrs(this.rawAFX,this.loadAnnouncer)),this.mapPathArrs(this.rawSFX,this.loadEffect)),this.mapPathArrs(this.rawMFX,this.loadMusic)),this.Menu={Forward:this.sfx(Se.MenuForward),Backward:this.sfx(Se.MenuBackward),Change:this.sfx(Se.MenuChange),OptionAnnouncer:this.sfx(Se.AnnouncerTutorialNice),MatchmakingFound:this.sfx(Se.MenuMatchFound),CheatOn:this.sfx(Se.CarbDeath),CheatOff:this.sfx(Se.CarbFrenzy)},this.Stun={Block:this.sfx(Se.StunBlock),StunHitSmall:this.sfx(Se.StunHitSmall),StunHitLarge:this.sfx(Se.StunHitLarge)},this.UI={Blep:this.sfx(Se.Blep),Bling:this.sfx(Se.Bling),Love:this.sfx(Se.Love)},this.Meter={Gain:this.sfx(Se.MeterGain)},this.Announcer={Nice:this.sfx(Se.AnnouncerTutorialNice),ChallengeComplete:this.sfx(Se.AnnouncerTutorialChallengeComplete),GreatJob:this.sfx(Se.AnnouncerTutorialGreatJob),RoundOverBell:this.sfx(Se.MusicRoundOver),Ready:this.sfx(Se.AnnouncerRoundReady),Fight:this.sfx(Se.AnnouncerRoundFight),KO:this.sfx(Se.AnnouncerRoundKO),Time:this.sfx(Se.AnnouncerRoundTime),Draw:this.sfx(Se.AnnouncerRoundDraw),Perfect:this.sfx(Se.AnnouncerRoundPerfect),MatchOverBell:this.sfx(Se.MusicMatchOver),YouLose:this.sfx(Se.AnnouncerMatchYouLose)},this.MiniGame={NoodleMove:this.combine(Se.CarbWhip,Se.CarbSlap),NoodleWin:this.sfx(Se.CarbFrenzy),RiceMove:this.combine(Se.CarbWhip,Se.CarbSwat),RiceWin:this.sfx(Se.CarbTeleport),BeefMove:this.combine(Se.MeatGutpunch,Se.MeatJump),BeefWin:this.sfx(Se.MeatLaugh),PorkMove:this.combine(Se.MeatGutpunch,Se.MeatPunch),PorkWin:this.sfx(Se.MeatChop),OnionMove:this.combine(Se.SpiceFlick,Se.SpiceSweep,Se.SpiceHopkick),OnionWin:this.sfx(Se.SpiceParryHit),GarlicMove:this.combine(Se.SpiceDash,Se.SpiceBackflip),GarlicWin:this.sfx(Se.SpiceSneak)}}return Object(h.a)(e,[{key:"mapPathArrs",value:function(e,t){return Object.keys(e).reduce((function(n,a){return n[a]=new Ti(e[a].map(t)),n}),{})}},{key:"sfx",value:function(e){var t=this.allById[e];if(void 0===t)throw new Error("unregistered sfx id: ".concat(e));return t}},{key:"combine",value:function(){for(var e=this,t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];var r=n.map((function(t){return e.sfx(t)}));return Ti.combine.apply(Ti,Object(k.a)(r))}}]),e}(),Pi=new Mi,Ri=function(e){return e.Idle="IDLE",e.Stun="STUN",e.Startup="STARTUP",e.Active="ACTIVE",e.Recovery="RECOVERY",e}({}),Ii=function(){function e(t,n,a,r){var i=this;Object(l.a)(this,e),this.data=void 0,this.seqData=void 0,this.sprite=void 0,this.behindSprite=void 0,this.sound=void 0,this.hoverPerFrame=void 0,this.slidePerFrame=void 0,this.recoverBluePerFrame=void 0,this.originBox=void 0,this.drawBox=void 0,this.pushboxes=void 0,this.strikeHurtboxes=void 0,this.throwHurtboxes=void 0,this.frameType=void 0,this.attack=void 0,this.remote=void 0,this.data=n,this.seqData=r,this.sprite=n.imageSrc?mi.loadSprite(n.imageSrc):void 0,this.behindSprite=n.behindSrc?mi.loadSprite(n.behindSrc):void 0,this.sound=n.sound?Pi.sfx(n.sound):void 0,this.hoverPerFrame=n.hover*t.size.y/n.duration,this.slidePerFrame=n.slide*t.size.x/n.duration,this.recoverBluePerFrame=Math.round(n.recoverBlue/n.duration),this.frameType=n.forceRecovery?Ri.Recovery:a;var o=!n.isAirborne&&a!==Ri.Stun;if(this.originBox=new na(t),this.drawBox=this.originBox.scale(n.drawBox),this.pushboxes=n.pushboxes.map((function(e){return i.originBox.scale(e)})),this.strikeHurtboxes=n.strikeHurtboxes.map((function(e){return i.originBox.scale(e)})),this.throwHurtboxes=o?n.throwHurtboxes.map((function(e){return i.originBox.scale(e)})):[],this.attack=n.attack&&new Ln(n.attack,r),n.remote){var s=n.remote.hover/n.duration,c=n.remote.slide/n.duration,u={center:{x:n.remote.relativeDrawBox.center.x+n.remote.offset.x+c*r.frameIndex,y:n.remote.relativeDrawBox.center.y+n.remote.offset.y+s*r.frameIndex},size:{x:1,y:1}},h={center:n.drawBox.center,size:{x:n.drawBox.size.x*n.remote.relativeDrawBox.size.x,y:n.drawBox.size.y*n.remote.relativeDrawBox.size.y}},d=this.originBox.scale(u),p=d.scale(h);this.remote=n.remote&&{sprite:n.remote.imageSrc?mi.loadSprite(n.remote.imageSrc):void 0,mirrorImage:n.remote.mirrorImage,originBox:d,drawBox:p,keepOnScreen:n.remote.keepOnScreen,keepOnStage:n.remote.keepOnStage,storePosition:n.remote.storePosition,eraseStoredPosition:n.remote.eraseStoredPosition}}}return Object(h.a)(e,[{key:"autoTech",get:function(){var e;return this.data._autoTech||(null===(e=this.attack)||void 0===e?void 0:e.data.isThrowStart)}},{key:"getRapid",value:function(e,t,n){return e.rapid.includes(t)&&(n===Ce.Block&&this.data.cancel.canRapidBlock||n===Ce.HitTumbling&&this.data.cancel.canRapidHitAirborne||n===Ce.HitAirborne&&this.data.cancel.canRapidHitAirborne||n===Ce.HitGrounded&&this.data.cancel.canRapidHitGrounded)?F.Rapid:void 0}},{key:"getWhiffRapid",value:function(e,t){return e.rapid.includes(t)&&this.data.cancel.canWhiffRapid?F.Rapid:void 0}},{key:"getCancelOnWhiff",value:function(e){return this.data.cancel.onWhiff.auto||this.data.cancel.onWhiff[e]}},{key:"getCancelOnHitAirborne",value:function(e){return this.data.cancel.onHitAirborne.auto||this.data.cancel.onHitAirborne[e]}},{key:"getCancelOnHitGrounded",value:function(e){return this.data.cancel.onHitGrounded.auto||this.data.cancel.onHitGrounded[e]}},{key:"getCancelOnHitTumbling",value:function(e){return this.data.cancel.onHitTumbling.auto||this.data.cancel.onHitTumbling[e]}},{key:"getCancelOnArmor",value:function(e){return this.data.cancel.onArmor.auto||this.data.cancel.onArmor[e]}},{key:"getCancelOnBlock",value:function(e){return this.data.cancel.onBlock.auto||this.data.cancel.onBlock[e]}}]),e}(),Bi=function(){function e(t){var n=t.blueprint,a=t.fighterPosition,r=t.facingRight,i=t.attackConsumed,o=t.isCaptured,s=t.isThrowInvulnWindow,c=t.sequenceState,u=t.stunPhase,h=t.attackCallback;Object(l.a)(this,e),this.bp=void 0,this.fighterPosition=void 0,this.slidePerFrame=void 0,this.originBox=void 0,this.drawBox=void 0,this.pushboxes=void 0,this.strikeHurtboxes=void 0,this.throwHurtboxes=void 0,this.remote=void 0,this.attack=void 0,this.facingRight=void 0,this.attackConsumed=void 0,this.sequenceState=void 0,this.sequencePercent=void 0,this.stunPhase=void 0,this.bp=n,this.fighterPosition=a,this.slidePerFrame=n.slidePerFrame*(r?1:-1),this.originBox=n.originBox.position(a,r),this.drawBox=n.drawBox.position(a,r),this.pushboxes=o?[]:n.pushboxes.map((function(e){return e.position(a,r)})),this.strikeHurtboxes=n.strikeHurtboxes.map((function(e){return e.position(a,r)}));var d=s&&!(n.data.onParry||n.data.armor||n.data.armorVsAirborne||n.data.armorVsGrounded);this.throwHurtboxes=d?[]:n.throwHurtboxes.map((function(e){return e.position(a,r)}));var p=n.originBox;if(n.remote){var f=n.remote.originBox.clone(),b=n.remote.drawBox.clone();n.remote.keepOnScreen?(f=f.cloneOnScreen(a,r),b.center.x=f.center.x):n.remote.keepOnStage&&(f=f.cloneOnStage(a,r),b.center.x=f.center.x),p=f;var g=f.position(a,r),m=g.center;this.remote={originBox:g,drawBox:b.position(a,r),storePosition:n.remote.storePosition?m:void 0,eraseStoredPosition:n.remote.eraseStoredPosition}}this.attack=n.attack&&new Gn(n.attack,p,a,r,(function(e){return h(n.seqData.attackIndex,e)})),this.facingRight=r,this.attackConsumed=i,this.sequenceState=c,this.sequencePercent=n.seqData.sequenceIndex/n.seqData.sequenceDuration,this.stunPhase=u}return Object(h.a)(e,[{key:"getTumblingFloor",value:function(){var e=kn.CharacterTumblingSize.y,t=this.bp.data.strikeHurtboxes[0];return t&&(e=t.size.y*kn.CharacterSize.y),this.originBox.center.y+e/2}},{key:"getCollision",value:function(e){if(e.bp.data.stunPhase===this.stunPhase&&(!e.bp.data.hitsAirborneOnly||this.bp.data.isAirborne)&&(!e.bp.data.hitsGroundedOnly||!this.bp.data.isAirborne)&&(!e.bp.data.isAirborne||!this.bp.data.invulnVsAirborne)&&(!e.bp.data.isProjectile||!this.bp.data.invulnVsProjectile)){var t,n=e.bp.data.isThrowStart?this.throwHurtboxes:this.strikeHurtboxes,a=Object(Rr.a)(e.hitboxes);try{for(a.s();!(t=a.n()).done;){var r,i=t.value,o=Object(Rr.a)(n);try{for(o.s();!(r=o.n()).done;){var s=r.value;if(s.touches(i))return{hitbox:i,hurtbox:s}}}catch(c){o.e(c)}finally{o.f()}}}catch(c){a.e(c)}finally{a.f()}}}},{key:"drawBoxes",value:function(e){var t=this,n=this.bp.data,a=n.isInStun,r=n.onParry,i=n.armor,o=n.armorVsAirborne,s=n.armorVsGrounded;this.pushboxes.forEach((function(t){return e.drawBox(t,kn.Color.PushBox,{skipFill:!0})}));var c=this.bp.frameType===Ri.Recovery;if(this.strikeHurtboxes.forEach((function(n,u){var l=a&&kn.Color.HurtBoxStun||r&&kn.Color.HurtBoxParry||i&&kn.Color.HurtBoxArmor||o&&kn.Color.HurtBoxAirArmor||s&&kn.Color.HurtBoxAirArmor||c&&kn.Color.HurtBoxRecovery||kn.Color.HurtBoxNormal;e.drawBox(n,l,{text:0===u?[].concat(Object(k.a)(t.sequenceState.juggles?["juggles: ".concat(t.sequenceState.juggles)]:[]),Object(k.a)(!t.sequenceState.juggles&&t.bp.data.isAirborne?["airborne"]:[]),Object(k.a)(t.stunPhase?["phase: ".concat(t.stunPhase)]:[])):[]})})),this.throwHurtboxes.forEach((function(t){return e.drawBox(t,kn.Color.ThrowableBox,{skipFill:!0})})),this.attack){var u=kn.Color.HitBoxConsumed,l=kn.Color.HitBoxUnused,h=this.attackConsumed===Ce.Unused?l:u,d=this.attack.bp.data,p=d.stunPhase,f=d.setStunPhase;this.attack.hitboxes.forEach((function(t){return e.drawBox(t,h,{text:[].concat(Object(k.a)(p?["phase: ".concat(p)]:[]),Object(k.a)(f?["set: ".concat(f)]:[]))})}))}this.remote&&e.drawBox(this.remote.originBox,kn.Color.RemoteOrigin,{skipFill:!0})}},{key:"drawImage",value:function(e,t,n,a){var r=this.facingRight,i=null!==a&&void 0!==a?a:this.drawBox,o=n?r?t.mirrored.get():t.image.get():r?t.image.get():t.mirrored.get(),s=i.size.y,c=s*o.width/o.height;e.drawFrame(o,i.center.x-c/2,i.center.y-s/2,c,s,this.bp.data.opacity)}},{key:"drawSprite",value:function(e,t){var n=this.bp,a=this.remote;t&&n.sprite&&this.drawSpriteBox(e,n.sprite),n.sprite&&this.drawImage(e,n.sprite,n.data.mirrorImage),n.remote&&n.remote.sprite&&a&&this.drawImage(e,n.remote.sprite,n.remote.mirrorImage,a.drawBox)}},{key:"drawSpriteBox",value:function(e,t){var n=t.image.get();e.drawBox(new ta({center:this.drawBox.center,size:{x:this.drawBox.size.y*n.width/n.height,y:this.drawBox.size.y}},this.facingRight),kn.Color.DrawBox),this.remote&&e.drawBox(new ta({center:this.remote.drawBox.center,size:{x:this.remote.drawBox.size.y*n.width/n.height,y:this.remote.drawBox.size.y}},this.facingRight),kn.Color.DrawBox)}},{key:"drawBehind",value:function(e){var t=this.bp;t.behindSprite&&this.drawImage(e,t.behindSprite,!1)}},{key:"drawEffects",value:function(e){var t=this;this.bp.data.effects.forEach((function(n){return e.drawEffect(n,t.drawBox,t.sequencePercent)}))}}]),e}(),Di=function(){function e(t){Object(l.a)(this,e),this.installs=t,this.state=this.getDefault(),this.installDataById=void 0,this.installDataById=function(e,t){var n=new Map;return e.forEach((function(e){n.set(t(e),e)})),n}(t,(function(e){return e.installid}))}return Object(h.a)(e,[{key:"getDefault",value:function(){return{installid:Z.None,ticks:0}}},{key:"step",value:function(e){var t=this.get();if(void 0!==t){if(this.state.ticks++,null!==t.duration&&this.state.ticks>t.duration)return this.set(Z.None);if(this.state.ticks%15===0){if(null!==t.healthGainPer15){var n=e.health;e.health=Math.max(e.health+t.healthGainPer15,1),e.combo.damage>0&&(e.combo.damage+=n-e.health)}null!==t.meterGainPer15&&(e.meter=e.meter+t.meterGainPer15)}}}},{key:"get",value:function(){return this.state.installid===Z.None?void 0:this.installDataById.get(this.state.installid)}},{key:"set",value:function(e){this.state={installid:e,ticks:0}}},{key:"getState",value:function(){return this.state}},{key:"loadState",value:function(e){e&&(this.state=e)}}]),e}(),Hi=function(e){var t;return(t={},Object(v.a)(t,D.Easy,30),Object(v.a)(t,D.Hard,5),t)[e]},Ei=function(e){var t;return(t={},Object(v.a)(t,D.Easy,.3),Object(v.a)(t,D.Hard,1),t)[e]},_i=function(){function e(t,n,a,r,i){var o=this;Object(l.a)(this,e),this.data=n,this.difficulty=void 0,this.walkForwardPerFrame=void 0,this.walkBackwardPerFrame=void 0,this.defaultRange={min:0,max:0},this.forward={name:"forward",input:"6",startup:0,isInvulnStartup:!1,isInvulnAirStartup:!1,attackRangeStart:Object(g.a)({},this.defaultRange),attackRangeEnd:Object(g.a)({},this.defaultRange)},this.retreat={name:"retreat",input:"4",startup:0,isInvulnStartup:!1,isInvulnAirStartup:!1,attackRangeStart:Object(g.a)({},this.defaultRange),attackRangeEnd:Object(g.a)({},this.defaultRange)},this.stand={name:"stand",input:"5",startup:0,isInvulnStartup:!1,isInvulnAirStartup:!1,attackRangeStart:Object(g.a)({},this.defaultRange),attackRangeEnd:Object(g.a)({},this.defaultRange)},this.burst=void 0,this.rapid=void 0,this.options=void 0,this.inputsByAttack=void 0,this.current=void 0,this.difficulty=t,this.walkForwardPerFrame=a,this.walkBackwardPerFrame=r,this.inputsByAttack=Object.keys(n.input).reduce((function(e,t){return e[n.input[t]]=t,e}),{}),this.options=Object.keys(this.inputsByAttack).map((function(e){var t=o.inputsByAttack[e],n=i[t];return{name:e,input:t,startup:n.startupFrames,isInvulnStartup:n.intentInvulnStartup,isInvulnAirStartup:n.intentInvulnAirStartup,attackRangeStart:n.intentStartAttackRange||Object(g.a)({},o.defaultRange),attackRangeEnd:n.intentEndAttackRange||Object(g.a)({},o.defaultRange)}})),this.burst=0===this.data.commands.burst.length?void 0:{name:"burst",input:this.data.commands.burst[0],startup:0,isInvulnStartup:!1,isInvulnAirStartup:!1,attackRangeStart:Object(g.a)({},this.defaultRange),attackRangeEnd:Object(g.a)({},this.defaultRange)},this.rapid=0===this.data.commands.rapid.length?void 0:{name:"rapid",input:this.data.commands.rapid[0],startup:0,isInvulnStartup:!1,isInvulnAirStartup:!1,attackRangeStart:Object(g.a)({},this.defaultRange),attackRangeEnd:Object(g.a)({},this.defaultRange)},this.current=this.getStandingIntet(1)}return Object(h.a)(e,[{key:"getStandingIntet",value:function(e){return Object(g.a)(Object(g.a)({},this.stand),{},{distanceToTravel:0,timeout:e})}},{key:"getForwardIntent",value:function(e){return Object(g.a)(Object(g.a)({},this.forward),{},{distanceToTravel:0,timeout:e})}},{key:"getRetreatIntent",value:function(e){return Object(g.a)(Object(g.a)({},this.retreat),{},{distanceToTravel:0,timeout:e})}},{key:"getDefaultIntent",value:function(){return this.getStandingIntet(1)}},{key:"getBurstIntent",value:function(e){return Object(g.a)(Object(g.a)({},e),{},{distanceToTravel:0,timeout:1})}},{key:"getRapidIntent",value:function(e){return Object(g.a)(Object(g.a)({},e),{},{distanceToTravel:0,timeout:1})}},{key:"_getCurrent",value:function(){return this.current}},{key:"rollDiceDistribution",value:function(){var e=Math.random();return e<.5?0:e<.85?1:e<.95?2:e<.98?3:4}},{key:"rollDice",value:function(e){if(e.length){var t=Et(e,(function(e){return e.timeToHit}));return t[Math.min(t.length-1,this.rollDiceDistribution())]}}},{key:"determine",value:function(e,t,n){var a=this;if(this.burst&&t.intentMeterForBurst()&&t.isInHitOrTumbling())return this.getBurstIntent(this.burst);var r=this.difficulty,i=t.currentSequence,o=Object(g.a)(Object(g.a)({},e),{},{timeout:e.timeout-1});if(o.next)return o.timeout>0?o:o.next;var s=i.getFrame(),c=Math.abs(t.getState().fighter.position.x-n.getState().fighter.position.x)-kn.CharacterSize.x/2;if(n.currentSequence.isInStun&&!n.currentSequence.canBlock){var u=s.data.aiNextOnHit;if(u)return{name:u,input:this.inputsByAttack[u],distanceToTravel:0,timeout:i.remainingFrames()+1}}if(s.frameType===Ri.Startup)return this.getDefaultIntent();if(s.frameType===Ri.Active&&n.currentSequence.isInStun){if(n.currentSequence.canBlock){if(this.rapid&&t.intentMeterForRapid()&&s.data.cancel.aiRapidOnBlock)return this.getRapidIntent(this.rapid);var l=Yt(Object(g.a)({},s.data.cancel.onBlock)).filter((function(e){return"auto"!==e.key})).filter((function(e){return e.val===s.data.cancel.aiOnBlock}))[0];if(l)if(Math.random()<Ei(r))return{name:l.val,input:l.key,distanceToTravel:0,timeout:0}}else{if(this.rapid&&t.intentMeterForRapid()&&s.data.cancel.aiRapidOnHit)return this.getRapidIntent(this.rapid);var h=Yt(Object(g.a)(Object(g.a)(Object(g.a)({},s.data.cancel.onHitAirborne),s.data.cancel.onHitGrounded),s.data.cancel.onHitTumbling)).filter((function(e){return"auto"!==e.key})),d=h.filter((function(e){return e.val===s.data.cancel.aiOnHit}))[0]||h[0];if(d)if(Math.random()<Ei(r))return{name:d.val,input:d.key,distanceToTravel:0,timeout:0}}return this.getStandingIntet(10)}var p=n.currentSequence.intentTimeUntilAttack();if(void 0!==p){var f=function(e){var t;return(t={},Object(v.a)(t,D.Easy,25),Object(v.a)(t,D.Hard,11),t)[e]}(r),b=function(e){var t;return(t={},Object(v.a)(t,D.Easy,20),Object(v.a)(t,D.Hard,8),t)[e]}(r);if(p>f){var m=(n.currentSequence.getFrame().data.isAirborne?this.options.filter((function(e){return e.isInvulnAirStartup})):this.options.filter((function(e){return e.isInvulnStartup}))).filter((function(e){return e.attackRangeEnd.max>c}));if(m.length){var k=m.map((function(e){return{bp:e,distance:0,timeToStart:e.startup,timeToHit:e.startup}})),j=this.rollDice(k),y=Object(g.a)(Object(g.a)({},j.bp),{},{distanceToTravel:0,timeout:Hi(r)}),x=Math.max(0,p-(j.timeToHit+1));return 0===x?y:Object(g.a)(Object(g.a)({},this.getForwardIntent(x)),{},{next:y})}}if(p>b)return this.getStandingIntet(p+1)}if([this.retreat.name,this.stand.name].includes(o.name)&&o.timeout>0)return o;if(!i.isIdle)return this.getDefaultIntent();if(i.isInStun&&i.remainingFrames()>1)return this.getDefaultIntent();if(o.timeout>0)return o;if(Math.random()<function(e){var t;return(t={},Object(v.a)(t,D.Easy,.2),Object(v.a)(t,D.Hard,0),t)[e]}(r))return this.getForwardIntent(15);if(Math.random()<function(e){var t;return(t={},Object(v.a)(t,D.Easy,0),Object(v.a)(t,D.Hard,.2),t)[e]}(r))return this.getRetreatIntent(15);if(Math.random()<function(e){var t;return(t={},Object(v.a)(t,D.Easy,.2),Object(v.a)(t,D.Hard,.1),t)[e]}(r))return this.getStandingIntet(15);var O=Bt(this.options.map((function(e){if(!(c-e.attackRangeStart.min<0)){var t=Math.max(0,c-e.attackRangeStart.max),n=Math.floor(t/a.walkForwardPerFrame);return{bp:e,distance:t,timeToStart:n,timeToHit:n+e.startup}}}))),w=this.rollDice(O);return w?Object(g.a)(Object(g.a)({},w.bp),{},{distanceToTravel:w.distance,timeout:Hi(r)}):this.getDefaultIntent()}},{key:"act",value:function(e,t){var n=e.input,a=Object(g.a)({},e);return a.distanceToTravel>0&&(a.distanceToTravel=Math.max(0,a.distanceToTravel-this.walkForwardPerFrame),n="6"),a.distanceToTravel<0&&(a.distanceToTravel=Math.max(0,a.distanceToTravel+this.walkBackwardPerFrame),n="4"),{intent:a,action:oa.parseInput(t,n)}}},{key:"step",value:function(e,t){var n=this.current,a=this.determine(n,e,t),r=this.act(a,e.currentSequence.getState().facingRight),i=r.intent,o=r.action;return this.current=i,o}}]),e}(),Fi=function(){function e(t,n){var a=this;if(Object(l.a)(this,e),this.data=n,this.id=void 0,this.meterCost=void 0,this.canBlock=void 0,this.isIdle=void 0,this.isInStun=void 0,this.isDowned=void 0,this.hasAttacks=void 0,this.keepFacingRight=void 0,this.projectileLimit=void 0,this.isTumbling=!1,this.frameByTick=void 0,this.startupFrames=void 0,this.activeFrames=void 0,this.activeGapFrames=void 0,this.recoveryFrames=void 0,this.totalFrames=void 0,this.intentInvulnStartup=void 0,this.intentInvulnAirStartup=void 0,this.intentStartup=void 0,this.intentStartAttackRange=void 0,this.intentEndAttackRange=void 0,this.state={id:"",consumed:[],ticks:0,facingRight:!0,duration:0,pushback:0,pushOutOfCorner:!1,cannotBurst:!1,cannotReject:!1,captured:!1,_stunPhase:null,throwTechStatus:P.Disabled,nextHitSetsAngle:!1,armorUsed:0,skipStartupAnimation:!1,dx:0,dy:0,dyStart:0,ddy:0,done:!1,juggles:0},0!==t.center.x||0!==t.center.y)throw new Error("sequence origins should always be at 0,0");this.id=n.seqid,this.meterCost=n.meterCost,this.canBlock=n.canBlock,this.isIdle=n.isIdle,this.isInStun=n.isInStun,this.isDowned=n.isDowned,this.hasAttacks=n.hasAttacks,this.keepFacingRight=n.keepFacingRight,this.projectileLimit=n.projectileLimit,this.totalFrames=n.frames.reduce((function(e,t){return e+t.duration}),0);var r,i,o,s=0,c=Ri.Startup,u=n.frames[0];this.isIdle&&(c=Ri.Idle),(this.isInStun||n.isDowned)&&(c=Ri.Stun),this.frameByTick=Vt(n.frames.map((function(e,l,h){e.attack?(c=Ri.Active,r=l,i=e.attack):e.onParry?c=Ri.Active:e.copyPrevAttack||(e.projectileId?c=Ri.Active:(r=void 0,i=void 0)),e.cancel.window>0?o=e.cancel:o&&(o=Object(g.a)(Object(g.a)({},o),{},{window:o.window-u.duration})).window<=0&&(o=void 0),e.forceRecovery&&(c=Ri.Recovery);var d=e.attack||e.copyPrevAttack||e.projectileId||e.onParry;if(c===Ri.Active&&!d){var p=h.slice(l).some((function(e){return e.attack}));c=p?Ri.Startup:Ri.Recovery}var f=Ft(e.duration).map((function(u){var h=new Ii(t,Object(g.a)(Object(g.a)({},e),{},{attack:i,cancel:o?Object(g.a)(Object(g.a)({},o),{},{window:o.window-u}):e.cancel,projectileId:0===u?e.projectileId:void 0,particle:0===u?e.particle:void 0,sound:0===u?e.sound:void 0,teleportToOther:0===u&&e.teleportToOther,teleportToStoredOrigin:0===u&&e.teleportToStoredOrigin,healthGain:e.healthGain/e.duration,meterGain:e.meterGain/e.duration}),c,{data:n,uniqueIndex:l,attackIndex:r,frameIndex:u,sequenceIndex:s,sequenceDuration:a.totalFrames,sequenceHasAttacks:a.hasAttacks});return s++,h}));return u=e,f})));var h=this.frameByTick.findIndex((function(e){return e.frameType===Ri.Active}));this.startupFrames=h>=0?h:this.frameByTick.filter((function(e){return e.frameType===Ri.Startup})).length,this.activeFrames=this.frameByTick.filter((function(e){return e.frameType===Ri.Active})).length,this.activeGapFrames=0===this.activeFrames?0:this.frameByTick.filter((function(e,t){return e.frameType===Ri.Startup&&t>h})).length,this.recoveryFrames=this.frameByTick.filter((function(e){return e.frameType===Ri.Recovery})).length,this.state.id=n.seqid,this.state.consumed=n.frames.map((function(){return Ce.Unused}));var d=this.frameByTick[0];this.intentInvulnStartup=d&&!!(0===d.strikeHurtboxes.length||d.data.armor||d.data.armorVsGrounded||d.data.onParry),this.intentInvulnAirStartup=this.intentInvulnStartup||d&&d.data.armorVsAirborne;var p=this.startupFrames;if(this.frameByTick.some((function(e){return e.data.teleportToOther})))this.intentStartAttackRange={min:0,max:kn.ScreenWidth},this.intentEndAttackRange=this.intentStartAttackRange;else if(this.activeFrames>0){var f=this.frameByTick.findIndex((function(e){return e.frameType===Ri.Active&&!e.data.aiIgnoreAttack}));if(f>=0){p=f;var b=this.frameByTick[f],m=b.originBox;b.remote&&(m=b.remote.drawBox);var v=0;this.frameByTick.slice(0,f).forEach((function(e){v+=e.slidePerFrame}));var k=m.center.x+v;if(b.attack){var j=b.attack.data.hitboxes[0];this.intentStartAttackRange={min:k+m.size.x*(j.center.x-j.size.x/2),max:k+m.size.x*(j.center.x+j.size.x/2)};for(var y=f;y<this.frameByTick.length-1;){var x=this.frameByTick[y+1];if(null===x||void 0===x||!x.attack)break;y++,k+=x.slidePerFrame}var O=this.frameByTick[y].attack.data.hitboxes[0];this.intentEndAttackRange={min:k+m.size.x*(O.center.x-O.size.x/2),max:k+m.size.x*(O.center.x+O.size.x/2)}}else b.data.onParry&&(this.intentStartAttackRange={min:k+0*m.size.x,max:k+2*m.size.x},this.intentEndAttackRange=this.intentStartAttackRange)}}this.intentStartup=p}return Object(h.a)(e,[{key:"step",value:function(){this.state.ticks+=1}},{key:"setFacingRight",value:function(e){this.state.facingRight=e}},{key:"setDone",value:function(e){}},{key:"isNewFrame",value:function(){var e=this.state.ticks,t=this.getFrameAt(e),n=this.getFrameAt(e-1);return!n||t.seqData.uniqueIndex!==n.seqData.uniqueIndex}},{key:"getSound",value:function(){var e=this.state.ticks,t=this.getFrameAt(e);return t.sound&&this.isNewFrame()?t.sound:void 0}},{key:"getLatestAttackFrame",value:function(){for(var e=this.state.ticks;e>=0;e--){var t=this.getFrameAt(e);if(t&&t.attack){var n=t.seqData.sequenceIndex-t.seqData.frameIndex;return this.getFrameAt(n)}}}},{key:"getFrame",value:function(){return this.getFrameAt(this.state.ticks)}},{key:"getFrameAt",value:function(e){var t=this.frameByTick;return t[e%t.length]}},{key:"setAttackConsumed",value:function(e,t){void 0!==e&&(this.state.consumed[e]=t)}},{key:"getAttackConsumed",value:function(e){var t=e.seqData.attackIndex;return void 0!==t?this.state.consumed[t]:Ce.Unused}},{key:"getCancel",value:function(e,t,n){var a=this.getFrame(),r=a.getCancelOnWhiff(t)||n&&a.getWhiffRapid(e,t);if(!(a.data.cancel.window<=0)){var i=this.getLatestAttackFrame(),o=i?this.getAttackConsumed(i):Ce.Unused,s=n&&a.getRapid(e,t,o),c=o===Ce.HitAirborne&&a.getCancelOnHitAirborne(t),u=o===Ce.HitGrounded&&a.getCancelOnHitGrounded(t),l=o===Ce.HitTumbling&&a.getCancelOnHitTumbling(t),h=o===Ce.Armored&&(a.getCancelOnArmor(t)||a.getCancelOnBlock(t)),d=o===Ce.Block&&a.getCancelOnBlock(t);return s||l||c||u||h||d||r||void 0}}},{key:"getFirstActiveFrame",value:function(){return this.getFrameAt(this.startupFrames)}},{key:"getProjectileId",value:function(){if(this.isNewFrame())return this.getFrame().data.projectileId}},{key:"reset",value:function(e,t){return this.state=Object(g.a)(Object(g.a)({},this.state),{},{ticks:0,input:t,facingRight:e,consumed:this.state.consumed.map((function(){return Ce.Unused})),cannotBurst:!1,cannotReject:!1,captured:!1,_stunPhase:null,armorUsed:0}),this}},{key:"timeUntilAttack",value:function(){if(this.activeFrames>0&&this.state.ticks<this.startupFrames)return this.startupFrames-this.state.ticks}},{key:"intentTimeUntilAttack",value:function(){if(this.activeFrames>0&&this.state.ticks<this.intentStartup)return this.intentStartup-this.state.ticks}},{key:"remainingFrames",value:function(){return this.frameByTick.length-this.state.ticks}},{key:"isDone",value:function(){return this.remainingFrames()<=0}},{key:"canKara",value:function(e){var t=this.state,n=t.ticks,a=t.input,r=t.armorUsed;return!this.isIdle&&!this.isInStun&&0===r&&n<=kn.KaraWindow&&a&&ia.isKaraInput(a,e)}},{key:"getPhase",value:function(){var e;return null!==(e=this.getFrame().data.phase)&&void 0!==e?e:this.state._stunPhase}},{key:"getPushback",value:function(){return 0}},{key:"pushesInCorner",value:function(){return this.state.pushOutOfCorner}},{key:"isCaptured",value:function(){return this.state.captured&&this.state.ticks<kn.CapturedTimeout}},{key:"tryThrowTech",value:function(){if(this.state.throwTechStatus===P.Pending)return this.state.throwTechStatus=P.Ready}},{key:"checkThrowTech",value:function(){return this.state.throwTechStatus===P.Ready&&this.state.ticks===kn.ThrowTechWindow}},{key:"cannotBurst",value:function(){return this.state.cannotBurst}},{key:"cannotReject",value:function(){return this.state.cannotReject}},{key:"addArmorHit",value:function(){this.state.armorUsed++}},{key:"getState",value:function(){return this.state}},{key:"loadState",value:function(e){e&&(this.state=e)}}]),e}(),Li=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(e,a){var r;return Object(l.a)(this,n),(r=t.call(this,e,a)).state=Object(g.a)(Object(g.a)({},r.state),{},{duration:1,pushback:0,pushOutOfCorner:!1}),r}return Object(h.a)(n,[{key:"getFrameAt",value:function(e){var t=this.frameByTick,n=this.state,a=Math.min(e,t.length-1);if(this.data.palindromeAnimation){var r=e<n.duration/2?e:Math.max(0,n.duration-e);a=Math.min(r,t.length-1)}return t[a]}},{key:"remainingFrames",value:function(){return this.state.duration-this.state.ticks}},{key:"setDuration",value:function(e){return this.reset(e.facingRight),this.state.duration=e.duration,this.state.pushback=e.pushback,this.state.pushOutOfCorner=e.pushOutOfCorner,this.state.cannotBurst=e.cannotBurst,this.state.cannotReject=!!e.cannotReject,this.state.captured=e.captured,this.state._stunPhase=e.stunPhase,this.state.throwTechStatus=e.throwTechStatus,this}},{key:"getPushback",value:function(){var e=this.state,t=e.ticks,n=e.duration,a=e.pushback,r=kn.ScreenTotalWidth/100*Math.sign(a),i=a,o=Ft(n).map((function(e){if(0===e)return 0;if(e===n-1)return i;if(Math.abs(i)>Math.abs(r))return i-=r,r;var t=i;return i=0,t}));return o[t]||0}}]),n}(Fi),Gi=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(e,a){var r;return Object(l.a)(this,n),(r=t.call(this,e,a)).isTumbling=!0,r.gravity=kn.ScreenWidth/2e3,r.state=Object(g.a)(Object(g.a)({},r.state),{},{skipStartupAnimation:!1,dx:0,dy:0,dyStart:0,ddy:0,done:!0,juggles:0}),r}return Object(h.a)(n,[{key:"getFrameAt",value:function(e){var t=this.frameByTick,n=(this.state.skipStartupAnimation?10:0)+e;return t[Math.min(n,t.length-1)]}},{key:"step",value:function(){var e=this.state,t=e.dyStart,a=e.ddy,r=e.ticks;Object(Zr.a)(Object(Xr.a)(n.prototype),"step",this).call(this),this.isCaptured()||(this.state.dy=t+a*r)}},{key:"isDone",value:function(){return this.state.done}},{key:"isExhausted",value:function(){return this.state.juggles<=0}},{key:"setDone",value:function(e){this.state.done=e}},{key:"reset",value:function(e,t){return Object(Zr.a)(Object(Xr.a)(n.prototype),"reset",this).call(this,e,t),this.state=Object(g.a)(Object(g.a)({},this.state),{},{skipStartupAnimation:!1,done:!1,ddy:this.gravity,juggles:1,dyStart:0,dx:0,dy:0,pushOutOfCorner:!1}),this}},{key:"setTrajectory",value:function(e){return this.reset(e.facingRight),this.state=Object(g.a)(Object(g.a)({},this.state),{},{ticks:this.state.ticks+(e.wasAirborne?0:1),skipStartupAnimation:e.data.skipStartupAnimation,juggles:e.data.juggles,dyStart:e.data.dy,dx:e.data.dx*(e.facingRight?-1:1),dy:e.data.dy,cannotBurst:e.cannotBurst,captured:e.captured,_stunPhase:e.stunPhase,throwTechStatus:P.Disabled,nextHitSetsAngle:e.data.nextHitSetsAngle}),this}},{key:"juggle",value:function(e){if(e.newData&&e.newData.canRelaunch)this.setTrajectory({facingRight:e.facingRight,wasAirborne:!0,data:e.newData,cannotBurst:e.cannotBurst,captured:e.captured,stunPhase:e.stunPhase});else{var t=Object(g.a)({},this.state);this.reset(e.facingRight),this.state._stunPhase=e.stunPhase;var n=this.state.facingRight?-1:1;if(this.state.nextHitSetsAngle){var a,r;this.state.nextHitSetsAngle=!1;var i=new Fn(kn.AntiAirStartupTumble);this.state.dx=(null!==(a=null===(r=e.newData)||void 0===r?void 0:r.dx)&&void 0!==a?a:i.dx)*n}else this.state.dx=Math.abs(t.dx)*n;this.state.dy=t.dy,this.state.dyStart=.5*t.dyStart,this.state.juggles=t.juggles-1}return this}}]),n}(Fi),zi=function(){function e(t,n,a){Object(l.a)(this,e),this.data=void 0,this.sequence=void 0,this.data={position:Object(g.a)({},t),sequence:n},this.sequence=new Fi(kn.CharacterOriginBox,n),this.sequence.setFacingRight(a)}return Object(h.a)(e,[{key:"step",value:function(){this.sequence.step()}},{key:"isAlive",value:function(){return!this.sequence.isDone()}},{key:"getFrame",value:function(){var e=this.sequence,t=e.getFrame();return new Bi({blueprint:t,fighterPosition:this.data.position,facingRight:e.getState().facingRight,attackConsumed:Ce.Unused,isCaptured:!1,isThrowInvulnWindow:!1,sequenceState:e.getState(),stunPhase:e.getPhase(),attackCallback:function(){}})}},{key:"getState",value:function(){return{data:this.data,sequence:this.sequence.getState()}}},{key:"loadState",value:function(e){this.sequence.loadState(e.sequence)}}],[{key:"fromState",value:function(t){var n=new e(t.data.position,t.data.sequence,t.sequence.facingRight);return n.loadState(t),n}}]),e}(),Wi=function(){function e(t){Object(l.a)(this,e),this.state=void 0,this.living=void 0,this.onBlock=void 0,this.onHit=void 0;var n,a=t.origin,r=t.data,i=t.startPosition,o=t.position,s=t.facingRight,c=t.status;this.living=new Fi(a,r.sequence),this.living.setFacingRight(s),r.onBlock&&(this.onBlock=new Fi(a,r.onBlock),this.onBlock.setFacingRight(s)),r.onHit&&(this.onHit=new Fi(a,r.onHit),this.onHit.setFacingRight(s)),o?n=o:((n=new na(a).position(i,s).center).x+=r.offset.x*a.size.x*(s?1:-1),n.y+=r.offset.y*a.size.y),this.state={origin:a,data:r,startPosition:i,position:n,facingRight:s,status:c}}return Object(h.a)(e,[{key:"checkTeleport",value:function(e,t){var n;(t=null!==(n=t)&&void 0!==n?n:this.getFrame()).bp.data.teleportToStoredOrigin&&e.storedPosition&&(this.state.position=Object(g.a)({},e.storedPosition))}},{key:"isDone",value:function(e){var t=this.state,n=e&&t.data.dieOnFighterHit,a=t.status===Ae.Expired;return n||a}},{key:"isInteractable",value:function(){return this.state.status===Ae.Alive}},{key:"updateStatus",value:function(){if(this.state.status!==Ae.Expired)if(this.isOnScreen())if(this.state.status!==Ae.Voided||this.onBlock)if(this.state.status!==Ae.Blocked||this.onBlock)if(this.state.status!==Ae.Hit||this.onHit){if(this.state.status===Ae.Alive&&this.state.data.dieOnConsume){var t=this.getFrame().attackConsumed,n=e.consumedToStatus[t];if(n)return this.state.status=n,void this.updateStatus()}this.state.data.loop||!this.getSequence().isDone()||(this.state.status=Ae.Expired)}else this.state.status=Ae.Expired;else this.state.status=Ae.Expired;else this.state.status=Ae.Expired;else this.state.status=Ae.Expired}},{key:"step",value:function(e){this.getSequence().step();var t=this.getFrame();return this.state.position.x+=t.slidePerFrame,this.state.position.y+=t.bp.hoverPerFrame,this.checkTeleport(e,t),this.updateStatus(),t.bp.data.particle?new zi(t.originBox.center,t.bp.data.particle,t.facingRight):void 0}},{key:"getSequence",value:function(){return this.state.status===Ae.Voided&&this.onBlock||this.state.status===Ae.Blocked&&this.onBlock?this.onBlock:this.state.status===Ae.Hit&&this.onHit?this.onHit:this.living}},{key:"createActiveFrame",value:function(e){var t=this,n=e.getFrame(),a=e.getState().facingRight,r=e.getAttackConsumed(n);return new Bi({blueprint:n,fighterPosition:this.state.position,facingRight:a,attackConsumed:r,isCaptured:!1,isThrowInvulnWindow:!1,sequenceState:e.getState(),stunPhase:e.getPhase(),attackCallback:function(n,a){e.setAttackConsumed(n,a),t.updateStatus()}})}},{key:"getFrame",value:function(){return this.createActiveFrame(this.getSequence())}},{key:"getLivingFrameForTutorial",value:function(){return this.createActiveFrame(this.living)}},{key:"getSound",value:function(){return this.getSequence().getSound()}},{key:"checkVoid",value:function(e){if(!this.isInteractable())return[];var t=e.attack;if(!t)return[];var n=this.getFrame().getCollision(t);if(!n)return[];this.state.status=Ae.Voided,this.updateStatus();var a=this.state.data.impactOnVoid;return a===B.None?[]:[{facingRight:e.facingRight,isHit:!1,impactType:a,hitbox:n.hitbox,hurtbox:n.hurtbox,chip:0,hitstop:0,scale:1,isParry:!1,isProjectile:!0}]}},{key:"checkClash",value:function(e){if(!this.isInteractable()||!e.isInteractable())return[];var t=this.getFrame(),n=e.getFrame(),a=t.attack,r=n.attack;if(!a||!r)return[];var i=a.hitboxes.filter((function(e){return r.hitboxes.some((function(t){return t.touches(e)}))}))[0];return i?(a.setConsumed(Ce.ProjectileClash),this.updateStatus(),r.setConsumed(Ce.ProjectileClash),e.updateStatus(),[{facingRight:t.facingRight,isHit:!0,impactType:a.bp.data.impactType,hitbox:i,hurtbox:i,chip:0,hitstop:a.bp.data.hitstop,scale:a.bp.data.impactScale,isParry:!1,isProjectile:!0},{facingRight:n.facingRight,isHit:!0,impactType:r.bp.data.impactType,hitbox:i,hurtbox:i,chip:0,hitstop:r.bp.data.hitstop,scale:r.bp.data.impactScale,isParry:!1,isProjectile:!0}]):[]}},{key:"isOnScreen",value:function(){var e=this.state,t=e.origin,n=e.position,a=t.size.x,r=$n.screenLeft-a,i=$n.screenRight+a;return r<n.x&&n.x<i}},{key:"getState",value:function(){return{projectile:this.state,sequence:this.getSequence().getState()}}},{key:"loadState",value:function(e){this.state=e.projectile,this.getSequence().loadState(e.sequence)}}],[{key:"fromState",value:function(t){var n=new e(Object(g.a)({},t.projectile));return n.loadState(t),n}}]),e}();Wi.consumedToStatus=(Ci={},Object(v.a)(Ci,Ce.Armored,Ae.Blocked),Object(v.a)(Ci,Ce.Block,Ae.Blocked),Object(v.a)(Ci,Ce.Parried,Ae.Blocked),Object(v.a)(Ci,Ce.ProjectileClash,Ae.Hit),Object(v.a)(Ci,Ce.HitAirborne,Ae.Hit),Object(v.a)(Ci,Ce.HitGrounded,Ae.Hit),Object(v.a)(Ci,Ce.HitTumbling,Ae.Hit),Ci);var Ni=function(){function e(t,n){var a=this;Object(l.a)(this,e),this.data=void 0,this.state=void 0,this.currentSequence=void 0,this.projectiles=[],this.afterimages=[],this.startingY=void 0,this.origin=void 0,this.rejection=void 0,this.rapid=void 0,this.burst=void 0,this.downed=void 0,this.standing=void 0,this.blockstun=void 0,this.hitstun=void 0,this.throwstun=void 0,this.tumbling=void 0,this.exhausted=void 0,this.falling=void 0,this.landing=void 0,this.walkForward=void 0,this.walkBackward=void 0,this.throwStart=void 0,this.throwTech=void 0,this.poseWin=void 0,this.poseLose=void 0,this.sequenceByInput=void 0,this.sequenceById=void 0,this.projectileById=void 0,this.install=void 0,this.data=t;var r=t.stats;this.origin={center:{x:0,y:0},size:Object(g.a)({},kn.CharacterSize)},this.startingY=n.y-this.origin.size.y/2,this.state={name:r.name,health:r.maxHealth,blueLife:0,maxHealth:r.maxHealth,meter:0,position:{x:n.x,y:this.startingY},storedPosition:void 0,combo:{trueCount:0,count:0,scaling:0,damage:0,maxDamage:0,isAntiAir:!1,counterhit:!1,punish:!1,rapidUsed:!1},framesIdle:kn.AutoBlockCooldown,thrownInvulnFramesRemaining:0,meterHighlight1:0,meterHighlight2:0},this.install=new Di(t.installs),this.rejection=new Fi(this.origin,t.actions.rejection),this.rapid=new Fi(this.origin,t.actions.rapid),this.burst=new Fi(this.origin,t.actions.burst),this.downed=new Fi(this.origin,t.actions.downed),this.standing=new Fi(this.origin,t.actions.standing),this.walkForward=new Fi(this.origin,t.actions.walkForward),this.walkBackward=new Fi(this.origin,t.actions.walkBackward),this.blockstun=new Li(this.origin,t.actions.blockstun),this.hitstun=new Li(this.origin,t.actions.hitstun),this.throwstun=new Li(this.origin,t.actions.throwstun),this.tumbling=new Gi(this.origin,t.actions.tumbling),this.exhausted=new Gi(this.origin,t.actions.exhausted),this.falling=new Gi(this.origin,t.actions.falling),this.landing=new Fi(this.origin,t.actions.landing),this.throwStart=new Fi(this.origin,t.actions.throwStart),this.throwTech=new Fi(this.origin,t.actions.throwTech),this.poseWin=new Fi(this.origin,t.actions.poseWin),this.poseLose=new Fi(this.origin,t.actions.poseLose);var i=[].concat(Object(k.a)(t.attacks),[t.actions.throwHit]).map((function(e){return new Fi(a.origin,e)}));this.projectileById=Mt(t.projectiles,(function(e){return e.projid})),this.sequenceById=Mt([this.rejection,this.rapid,this.burst,this.downed,this.standing,this.walkForward,this.walkBackward,this.blockstun,this.hitstun,this.throwstun,this.tumbling,this.exhausted,this.falling,this.landing,this.throwStart,this.throwTech,this.poseWin,this.poseLose].concat(Object(k.a)(i)),(function(e){return e.id})),this.sequenceByInput=Object.keys(t.input).reduce((function(e,n){var r=a.sequenceById[t.input[n]];if(!r)throw new Error("input pointing to invalid sequence: "+n);return e[n]=r,e}),{}),this.currentSequence=this.standing,this.currentSequence.setFacingRight(n.x<$n.screenCenter)}return Object(h.a)(e,[{key:"move",value:function(e,t,n){if(n=n||0,0!==t||0!==n){var a=this.state,r=a.position.x+t,i=a.position.y+n;if(!e.bp.data.allowOffStage){var o=$n.screenLeft+kn.FighterMargin,s=$n.screenRight-kn.FighterMargin;r=Math.max(r,o),r=Math.min(r,s)}a.position={x:r,y:i}}}},{key:"snapTowards",value:function(e,t){var n=this.state,a=e.ignoreX?0:e.percent*(t.x-n.position.x),r=e.ignoreY?0:e.percent*(t.y-n.position.y);n.position={x:n.position.x+a,y:n.position.y+r}}},{key:"cleanupProjectiles",value:function(){var e=this;this.projectiles=this.projectiles.filter((function(t){return!t.isDone(e.isInHitOrTumbling())}))}},{key:"push",value:function(e,t){var n=this.state;t=t||0,n.position={x:n.position.x+e,y:n.position.y+t}}},{key:"ensureNotOutOfBounds",value:function(e){if(e.bp.data.allowOffStage)return 0;var t=this.state,n=$n.screenLeft+kn.FighterMargin,a=$n.screenRight-kn.FighterMargin,r=t.position.x,i=0;return r>a?(i=a-r,r=a):r<n&&(i=n-r,r=n),t.position=Object(g.a)(Object(g.a)({},t.position),{},{x:r}),i}},{key:"step",value:function(e){var t,n,a=this,r=e.normalController,i=e.reversalController,o=e.otherFrame,s=e.otherCombo,c=this.getFrame(),u=[],l={particles:u,isReversalAttack:!1,usedReversalController:!1};if(this.isDeadOnGround())return this.currentSequence.remainingFrames()>ya.DownedGetupDuration+1&&this.currentSequence.step(),this.afterStep(),l;var h=this.currentSequence.getState().facingRight,d=this.state.position.x===o.fighterPosition.x?h:this.state.position.x<o.fighterPosition.x;this.currentSequence.step();var p,f=this.getFrame();if(!f.bp.data.freezeOther){var b=this.projectiles.map((function(e){return e.step(a.state)}));u.push.apply(u,Object(k.a)(Bt(b)))}(this.projectiles.forEach((function(e){var t=e.getFrame();t.bp.data.storePosition?a.state.storedPosition=Object(g.a)({},e.getState().projectile.position):t.bp.data.eraseStoredPosition&&(a.state.storedPosition=void 0)})),null!==(t=f.remote)&&void 0!==t&&t.storePosition)?this.state.storedPosition=null===(p=f.remote)||void 0===p?void 0:p.storePosition:null!==(n=f.remote)&&void 0!==n&&n.eraseStoredPosition&&(this.state.storedPosition=void 0);if(f.bp.data.storePosition?this.state.storedPosition=Object(g.a)({},this.state.position):f.bp.data.eraseStoredPosition&&(this.state.storedPosition=void 0),this.install.step(this.state),this.currentSequence.isDone()&&this.currentSequence.data.next){var m=this.getNextSequence(this.currentSequence.data.next);if(!m)throw new Error("sequence not found: "+this.currentSequence.data.next);this.checkMeter(m)&&(this.spendMeter(m),this.currentSequence=m.reset(m.keepFacingRight?h:d))}if(this.currentSequence.isDone()&&this.currentSequence.id===this.throwTech.id&&(this.currentSequence=this.blockstun.setDuration({facingRight:d,duration:kn.ThrowTechstun-this.currentSequence.totalFrames,pushback:0,pushOutOfCorner:!1,cannotBurst:!0,cannotReject:!0,captured:!1,stunPhase:kn.Phase.ThrowTechStunPhase,throwTechStatus:P.Disabled})),this.currentSequence.data.onLand){var v=this.getFrame();if(v.getTumblingFloor()+v.bp.hoverPerFrame>=kn.StageFloor){var j=this.getNextSequence(this.currentSequence.data.onLand);if(!j)throw new Error("sequence not found: "+this.currentSequence.data.onLand);this.state.position=Object(g.a)(Object(g.a)({},this.state.position),{},{y:this.startingY}),this.currentSequence=j.reset(j.keepFacingRight?h:d)}}if(this.currentSequence===this.tumbling&&this.tumbling.isExhausted()&&(this.exhausted.loadState(this.tumbling.getState()),this.currentSequence=this.exhausted),this.currentSequence.isTumbling){this.push(this.currentSequence.getState().dx,this.currentSequence.getState().dy);var y=this.getFrame().getTumblingFloor();this.currentSequence.setDone(y>=kn.StageFloor)}if(this.currentSequence.isDone()&&(this.isDead()||this.currentSequence.isTumbling?(this.state.position=Object(g.a)(Object(g.a)({},this.state.position),{},{y:this.startingY}),this.resetCombo(),this.isDead()||0===this.currentSequence.getState().juggles?(this.currentSequence=this.downed.reset(d),u.push(new zi(this.state.position,ni.Particle.LandSpark,d))):this.currentSequence===this.falling?this.currentSequence=this.landing.reset(d):(this.currentSequence=this.standing,u.push(new zi(this.state.position,ni.Particle.LandSmoke,d)))):this.currentSequence=this.standing),c.bp.frameType!==Ri.Stun||this.currentSequence.isInStun?this.state.thrownInvulnFramesRemaining=Math.max(0,this.state.thrownInvulnFramesRemaining-1):this.state.thrownInvulnFramesRemaining=kn.IdleThrowInvulnBuffer,this.currentSequence.isIdle){if(this.state.framesIdle++,void 0!==this.state.nextSeq){var x=this.getNextSequence(this.state.nextSeq);x&&(this.currentSequence=x.reset(x.keepFacingRight?h:d)),this.state.nextSeq=void 0}}else this.state.framesIdle=0;if(this.isInHitOrTumblingOrExhausted()||this.resetCombo(),this.currentSequence.isDowned){var O=this.getFrame();return this.move(O,O.slidePerFrame,O.bp.hoverPerFrame),this.afterStep(),l}var w=this.getFrame(),S=c.bp.seqData.data.isInStun||c.bp.seqData.data.isDowned,C=w.bp.seqData.data.isIdle,A=S&&C,T=!(!A||!i),M=A&&i?i:r,R=M.getInput(d);if(M.isThrowTeching()&&this.currentSequence.tryThrowTech(),this.currentSequence.checkThrowTech()&&(this.currentSequence=this.throwTech.reset(d)),this.currentSequence.isInStun){var I=this.data.commands.burst.includes(R)&&this.isInHitOrTumbling()&&!this.currentSequence.isCaptured()&&!this.currentSequence.cannotBurst()&&!this.isDead()&&this.checkMeter(this.burst),B=this.data.commands.reject.includes(R)&&this.currentSequence===this.blockstun&&!this.currentSequence.cannotReject()&&!this.isDead()&&this.checkMeter(this.rejection);return I?(this.spendMeter(this.burst),this.currentSequence=this.burst.reset(d)):B?(this.spendMeter(this.rejection),this.currentSequence=this.rejection.reset(d)):this.push(this.currentSequence.getPushback()),this.afterStep(),l}if(M.isAttacking()){var D=this.currentSequence.isIdle,H=this.currentSequence.canKara(R);if(D||H){var E,_=null===(E=this.sequenceByInput[R])||void 0===E?void 0:E.id,F=_&&this.getNextSequence(_);F&&F.id!==this.currentSequence.id&&(F.projectileLimit<1||F.projectileLimit>this.projectiles.length)&&this.checkMeter(F)&&(this.spendMeter(F),this.currentSequence=F.reset(d,R))}}var L=this.currentSequence.getCancel(this.data.commands,R,this.checkMeter(this.rapid));if(L){var G=this.getNextSequence(L);if(!G)throw new Error("cancelName pointed to attack that DNE: "+L);this.checkMeter(G)&&(this.spendMeter(G),G===this.rapid&&(s.rapidUsed=!0),this.currentSequence=G.reset(G.keepFacingRight?h:d))}if(this.currentSequence.isIdle){var z=this.standing;if(M.isMovingForward(d)){z=this.walkForward;var W=this.getFrame();M.isMovingLeft()&&this.move(W,0-this.walkSpeedForward),M.isMovingRight()&&this.move(W,0+this.walkSpeedForward)}if(M.isMovingBackward(d)){z=this.walkBackward;var N=this.getFrame();M.isMovingLeft()&&this.move(N,0-this.walkSpeedBackward),M.isMovingRight()&&this.move(N,0+this.walkSpeedBackward)}z!==this.currentSequence&&(this.currentSequence=z.reset(d)),this.currentSequence.setFacingRight(d)}var U=this.getFrame();U.bp.data.updateFacingRight&&this.currentSequence.setFacingRight(d),U.bp.data.teleportToOther&&(this.state.position=Object(g.a)(Object(g.a)({},this.state.position),{},{x:o.fighterPosition.x})),U.bp.data.teleportToStoredOrigin&&this.state.storedPosition&&(this.state.position=Object(g.a)({},this.state.storedPosition)),this.move(U,U.slidePerFrame,U.bp.hoverPerFrame),this.state.blueLife-=U.bp.recoverBluePerFrame,this.getCurrentSequences().forEach((function(e){var t=e.getProjectileId(),n=t?a.projectileById[t]:void 0;if(n){var r=new Wi({origin:a.origin,data:n,startPosition:a.state.position,facingRight:e.getState().facingRight,status:Ae.Alive});r.checkTeleport(a.state),a.projectiles.push(r)}}));var q=this.state.health;return this.state.health+=U.bp.data.healthGain,this.state.combo.rapidUsed?this.state.meter+=Math.ceil(U.bp.data.meterGain/2):this.state.meter+=U.bp.data.meterGain,this.fixStats(!1),0===this.state.health&&q>0&&(this.currentSequence=this.tumbling.setTrajectory({facingRight:U.facingRight,wasAirborne:U.bp.data.isAirborne,data:new Fn(kn.AntiAirRecoveryTumble),cannotBurst:!1,captured:!1,stunPhase:null})),U.bp.data.particle&&u.push(new zi(U.originBox.center,U.bp.data.particle,U.facingRight)),U.bp.data.setInstall&&this.install.set(U.bp.data.setInstall),this.afterStep(),{particles:u,isReversalAttack:A&&!this.currentSequence.isIdle,usedReversalController:T}}},{key:"afterStep",value:function(){var e,t,n,a=this,r=this.getFrame();this.afterimages.forEach((function(e){return e.step()})),(e=this.afterimages).push.apply(e,Object(k.a)([].concat(Object(k.a)(r.bp.data.afterimages),Object(k.a)(null!==(t=null===(n=this.install.get())||void 0===n?void 0:n.afterimages)&&void 0!==t?t:[])).map((function(e){return vi.fromActiveFrame(e,r)})))),this.afterimages=this.afterimages.filter((function(e){return e.isAlive(a.isInHitOrTumblingOrExhausted()||a.currentSequence.isDowned)}))}},{key:"isInHitOrTumbling",value:function(){return this.currentSequence===this.hitstun||this.currentSequence===this.throwstun||this.currentSequence===this.tumbling}},{key:"isInHitOrTumblingOrExhausted",value:function(){return this.currentSequence===this.hitstun||this.currentSequence===this.throwstun||this.currentSequence===this.tumbling||this.currentSequence===this.exhausted}},{key:"checkMeter",value:function(e){var t;return this.state.meter>=e.meterCost&&(void 0===e.data.requireInstall||e.data.requireInstall===(null===(t=this.install.get())||void 0===t?void 0:t.installid))}},{key:"spendMeter",value:function(e){this.state.meter-=e.meterCost}},{key:"getCurrentSequences",value:function(){return[this.currentSequence].concat(Object(k.a)(this.projectiles.map((function(e){return e.getSequence()}))))}},{key:"fixStats",value:function(e){var t=e?1:0;this.state.health=Math.floor(Math.max(t,Math.min(this.state.health,this.data.stats.maxHealth))),this.state.meter=this.data.stats.disableMeter?0:Math.floor(Math.max(0,Math.min(this.state.meter,kn.MaxMeter))),this.state.blueLife=Math.min(this.state.health,Math.max(0,this.state.blueLife))}},{key:"getActiveFrame",value:function(e,t,n){var a=this.currentSequence,r=a.getState().facingRight;return new Bi({blueprint:e,fighterPosition:this.state.position,facingRight:r,attackConsumed:t,isCaptured:n,isThrowInvulnWindow:this.state.thrownInvulnFramesRemaining>0,sequenceState:a.getState(),stunPhase:a.getPhase(),attackCallback:function(e,t){return a.setAttackConsumed(e,t)}})}},{key:"getFrame",value:function(){var e=this.currentSequence,t=e.getFrame(),n=e.getAttackConsumed(t),a=e.isCaptured();return this.getActiveFrame(t,n,a)}},{key:"checkGettingAttacked",value:function(e,t,n,a){var r=t.attack;if(!r||t.attackConsumed!==Ce.Unused)return!1;var i=this.getFrame(),o=i.getCollision(r);if(!o)return!1;var s,c=o.hitbox,u=o.hurtbox,l=i.bp.data.onParry;l&&!r.bp.data.ignoreParry&&(r.bp.data.isProjectile?l.onProjectile&&(s=this.getNextSequence(l.onProjectile)):s=this.getNextSequence(l.next));var h=r.bp.data.impactAutoCorrect?c.calcLocalFacing(u,t.facingRight):t.facingRight,d=this.currentSequence,p=d.canBlock,f=d.isTumbling,b=d.isInStun,m=r.bp.pushback*(h?1:-1),v=this.state,k=n===be.Disabled&&this.currentSequence!==this.blockstun,j=!r.bp.data.unblockable&&p&&!k&&(n!==be.Auto||v.framesIdle<kn.AutoBlockCooldown),y=!r.bp.data.ignoreArmor&&!r.bp.data.unblockable&&(i.bp.data.armor||i.bp.data.armorVsAirborne&&r.bp.data.isAirborne||i.bp.data.armorVsGrounded&&!r.bp.data.isAirborne||i.bp.data.armorVsProjectile&&r.bp.data.isProjectile||l&&r.bp.data.isProjectile),x=r.bp.data.isThrowStart||!(s||j||y),O=r.bp.seqData.data.seqid===this.throwTech.id,w=r.bp.data.sameSide?h:!h,S=!r.bp.data.noCornerPushback,C=r.bp.data.meterGainAttackOnBlock;if(v.combo.rapidUsed?C=Math.ceil(r.bp.data.meterGainAttackOnHit/2):x&&(C=r.bp.data.meterGainAttackOnHit),e.state.meter+=C,e.state.blueLife-=kn.BlueLifeRegenPerAttack,l&&s)r.setConsumed(Ce.Parried),this.currentSequence=s.reset(!t.facingRight);else if(x){var A=f&&Ce.HitTumbling||i.bp.data.isAirborne&&Ce.HitAirborne||Ce.HitGrounded;r.setConsumed(A),r.bp.data.snapTowards&&r.snapTowards&&this.snapTowards(r.bp.data.snapTowards,r.snapTowards);var T,M,R=r.bp.tumble;if(i.bp.data.isAirborne)R=null!==(T=r.bp.tumbleOnAirborne)&&void 0!==T?T:R;if(f)R=null!==(M=r.bp.tumbleOnTumbling)&&void 0!==M?M:R;var I={cannotBurst:r.bp.data.cannotBurst,captured:r.bp.data.capture,stunPhase:r.bp.data.setStunPhase,throwTechStatus:P.Disabled};if(f&&b?this.currentSequence=this.tumbling.juggle(Object(g.a)({facingRight:w,newData:R},I)):R?this.currentSequence=this.tumbling.setTrajectory(Object(g.a)({facingRight:w,wasAirborne:i.bp.data.isAirborne,data:R},I)):i.bp.data.isAirborne&&i.bp.data.forceRecovery?this.currentSequence=this.tumbling.setTrajectory(Object(g.a)({facingRight:w,wasAirborne:i.bp.data.isAirborne,data:new Fn(kn.AntiAirRecoveryTumble)},I)):i.bp.data.isAirborne&&!i.bp.data.forceRecovery?this.currentSequence=this.tumbling.setTrajectory(Object(g.a)({facingRight:w,wasAirborne:i.bp.data.isAirborne,data:new Fn(kn.AntiAirStartupTumble)},I)):r.bp.data.isThrowStart?this.currentSequence=this.throwstun.setDuration(Object(g.a)(Object(g.a)({facingRight:w,duration:r.bp.data.hitstun,pushback:m,pushOutOfCorner:S},I),{},{throwTechStatus:(null===a||void 0===a?void 0:a.forceAutoTech)&&P.Ready||i.bp.autoTech&&P.Ready||this.currentSequence.isIdle&&P.Pending||P.Disabled})):this.currentSequence=O?this.blockstun.setDuration(Object(g.a)(Object(g.a)({facingRight:w,duration:kn.ThrowTechstun,pushback:m,pushOutOfCorner:S},I),{},{cannotReject:!0})):this.hitstun.setDuration(Object(g.a)({facingRight:w,duration:r.bp.data.hitstun,pushback:m,pushOutOfCorner:S},I)),r.bp.data.blueDamage>0?v.blueLife+=r.bp.data.blueDamage:0!==r.bp.data.damage&&(v.health-=v.blueLife,v.blueLife=0),0===v.combo.trueCount){var D=i.bp.frameType===Ri.Startup&&!i.bp.data.cannotCounterHit;v.combo.counterhit=!r.bp.data.isThrowStart&&((null===a||void 0===a?void 0:a.forceCounterHit)===ve.Force||D),v.combo.isAntiAir=i.bp.frameType!==Ri.Stun&&i.bp.data.isAirborne,v.combo.punish=i.bp.frameType===Ri.Recovery,v.combo.maxDamage=v.health}if(v.combo.trueCount+=1,0!==r.bp.data.damage){v.combo.count+=1,v.combo.scaling+=1;var H=v.combo.counterhit?.3:.2,E=Math.max(0,v.combo.scaling-2),_=Math.max(H,1-.1*E);r.bp.data.ignoreScaling&&(_=1),v.combo.counterhit&&1===v.combo.scaling&&(_=1.2);var F=r.bp.data.damage*_,L=r.bp.data.meterGainDefendOnHit*_;kn.Debug.BuffDamage&&(L=F*=10),F=Math.ceil(F),L=Math.ceil(L),v.health-=F,v.meter+=L,v.combo.damage+=F,1===v.combo.count?v.combo.scaling+=r.bp.data.addScalingFirstHit:v.combo.scaling+=r.bp.data.addScalingAfterFirst}}else{if(y)r.setConsumed(Ce.Armored),v.health=Math.max(kn.MinHealth,Math.floor(v.health-r.bp.data.damage/2)),this.currentSequence.addArmorHit();else{r.setConsumed(Ce.Block);var G=r.bp.data.chip;kn.Debug.BuffDamage&&(G*=10),v.health=Math.max(1,Math.floor(v.health-G));var z=r.bp.data.blueOnBlock;kn.Debug.BuffDamage&&(z*=10),v.blueLife+=z,this.currentSequence=this.blockstun.setDuration({facingRight:w,duration:r.bp.data.blockstun,pushback:m,pushOutOfCorner:S,cannotBurst:!1,captured:!1,stunPhase:null,throwTechStatus:P.Disabled})}v.meter+=r.bp.data.meterGainDefendOnBlock}return r.bp.data.impactType===B.None||{facingRight:h,isHit:x,impactType:r.bp.data.impactType,hitbox:c,hurtbox:u,chip:y?0:r.bp.data.chip,scale:r.bp.data.impactScale,hitstop:r.bp.data.hitstop,isParry:!!s,isProjectile:r.bp.data.isProjectile}}},{key:"checkPush",value:function(e){var t=this.getFrame(),n=e.getFrame(),a=t.pushboxes,r=n.pushboxes,i=a.filter((function(e){return r.some((function(t){return e.touches(t)}))}))[0];if(i){var o=r.filter((function(e){return i.touches(e)}))[0],s=i.getHorizontalOverlap(o),c=i.size.x/2/4;0===t.slidePerFrame&&0===n.slidePerFrame||(c=s);var u=Math.min(s,c),l=i.center.x<o.center.x||!(i.center.x>o.center.x)&&(t.bp.data.crossupOnOverlap?!t.facingRight:n.bp.data.crossupOnOverlap?n.facingRight:t.facingRight===n.facingRight||t.facingRight),h=t.bp.data.cannotBePushed?0:t.bp.data.slowPushback?.1:.5,d=n.bp.data.cannotBePushed?0:n.bp.data.slowPushback?.1:.5,p=Math.ceil((l?-1:1)*h*u),f=Math.ceil((l?1:-1)*d*u);this.push(p),e.push(f)}var b=this.ensureNotOutOfBounds(t);0!==b&&(i||this.currentSequence.pushesInCorner())&&e.push(b);var g=e.ensureNotOutOfBounds(n);0!==g&&(i||e.currentSequence.pushesInCorner())&&this.push(g)}},{key:"calcCenter",value:function(e){return(this.state.position.x+e.state.position.x)/2}},{key:"resetCombo",value:function(){var e=this.state.combo;e.trueCount=0,e.count=0,e.scaling=0,e.damage=0,e.maxDamage=0,e.isAntiAir=!1,e.counterhit=!1,e.punish=!1,e.rapidUsed=!1}},{key:"setNextSeq",value:function(e){this.state.nextSeq=e}},{key:"isTumblingNearFloor",value:function(){return!!this.currentSequence.isTumbling&&this.getFrame().getTumblingFloor()+this.currentSequence.getState().dy>=kn.StageFloor}},{key:"isDead",value:function(){return this.state.health<=0}},{key:"isDeadOnGround",value:function(){return this.isDead()&&!this.currentSequence.isTumbling&&0===this.state.combo.trueCount}},{key:"walkSpeedForward",get:function(){var e,t;return(null!==(e=null===(t=this.install.get())||void 0===t?void 0:t.speedForward)&&void 0!==e?e:this.data.stats.speedForward)*this.origin.size.x}},{key:"walkSpeedBackward",get:function(){var e,t;return(null!==(e=null===(t=this.install.get())||void 0===t?void 0:t.speedBackward)&&void 0!==e?e:this.data.stats.speedBackward)*this.origin.size.x}},{key:"getNextSequence",value:function(e){var t,n=null===(t=this.install.get())||void 0===t?void 0:t.sequenceOverride[e];return n&&n!==e?this.getNextSequence(n):this.sequenceById[e]}},{key:"timeUntilAttack",value:function(){return this.currentSequence.timeUntilAttack()}},{key:"genIntentManager",value:function(e){return new _i(e,this.data,this.walkSpeedForward,this.walkSpeedBackward,this.sequenceByInput)}},{key:"intentMeterForRapid",value:function(){return this.checkMeter(this.rapid)}},{key:"intentMeterForBurst",value:function(){return this.checkMeter(this.burst)}},{key:"roundIntro",value:function(){var e,t=null!==(e=this.data.introSequence)&&void 0!==e?e:{seqid:F.Falling,offset:{x:0,y:-4}},n=this.getNextSequence(t.seqid);if(!n)throw new Error("input pointing to invalid sequence: "+t.seqid);var a=this.currentSequence.getState().facingRight;this.state.position={x:this.state.position.x+this.origin.size.x*t.offset.x*(a?1:-1),y:this.state.position.y+this.origin.size.y*t.offset.y},this.currentSequence=n.reset(a)}},{key:"getState",value:function(){return{fighter:this.state,sequence:this.currentSequence.getState(),projectiles:this.projectiles.map((function(e){return e.getState()})),afterimages:this.afterimages.map((function(e){return e.getState()})),install:this.install.getState()}}},{key:"loadState",value:function(e){e&&(this.state=e.fighter,this.currentSequence=this.sequenceById[e.sequence.id],this.currentSequence.loadState(e.sequence),this.projectiles=e.projectiles.map((function(e){return Wi.fromState(e)})),this.afterimages=e.afterimages.map((function(e){return vi.fromState(e)})),this.install.loadState(e.install))}},{key:"getTestTools",value:function(){return{state:this.state,currentSequence:this.currentSequence}}}]),e}(),Ui=function(){function e(){Object(l.a)(this,e),this.anonymous="Anonymous",this.adj=["angry","awkward","bitter","bittersweet","chewy","cold","creamy","crunchy","cute","dangerous","dank","delicious","exquisite","fragrant","frigid","funky","greasy","groovy","hard","hot","juicy","mean","meaty","moldy","mushy","nice","raw","salty","savory","scary","sexy","slimy","smelly","soft","sour","spicy","steamy","stinky","sturdy","supreme","sweet","tangy","tasty","tempting","ultimate","weak","yucky","yummy"],this.food=["bean","beef","broccoli","buns","burrito","cabbage","carb","carrot","cheese","chicken","corn","egg","eggplant","garlic","ham","hamburger","honey","lasagna","lemon","lime","lobster","meat","melon","milk","mushroom","noodle","nugget","oatmeal","onion","pancake","pepper","pizza","popcorn","pork","porkchop","potato","pumpkin","raisin","ramen","ravioli","rice","risotto","salad","salami","salmon","sauce","sausage","shrimp","soup","spaghetti","spice","squash","toast","waffle","zucchini"],this.hashLength=4}return Object(h.a)(e,[{key:"getRandom",value:function(e){return e[Math.floor(Math.random()*e.length)]}},{key:"hashId",value:function(e){for(var t=0,n=0;n<e.length;n++){t=(t<<5)-t+e.charCodeAt(n),t|=0}var a=t.toString();return a.slice(a.length-this.hashLength).padStart(this.hashLength,"0")}},{key:"capitalize",value:function(e){return e.slice(0,1).toUpperCase()+e.slice(1).toLowerCase()}},{key:"parseWord",value:function(e,t,n){var a=e.split(" ")[t];if(a){var r=a.toLowerCase();if(n.includes(r))return r}}},{key:"parseAdjective",value:function(e){return this.parseWord(e,0,[].concat(Object(k.a)(this.adj),[this.anonymous]))}},{key:"parseFood",value:function(e){return this.parseWord(e,1,this.food)}},{key:"verifyHash",value:function(e,t){var n=t.split(" ")[2];return"#"===n[0]&&n.slice(1,1+this.hashLength)===this.hashId(e)}},{key:"verifyName",value:function(e,t){return 3===t.split(" ").length&&!!this.parseAdjective(t)&&!!this.parseFood(t)&&this.verifyHash(e,t)}},{key:"generateRandomName",value:function(e){var t=this.capitalize(this.getRandom(this.adj)),n=this.capitalize(this.getRandom(this.food)),a=this.hashId(e);return"".concat(t," ").concat(n," #").concat(a)}},{key:"generateAnonymousName",value:function(e){var t=this.anonymous,n=this.capitalize(this.getRandom(this.food)),a=this.hashId(e);return"".concat(t," ").concat(n," #").concat(a)}},{key:"generateName",value:function(e,t,n){var a=this.capitalize(t),r=this.capitalize(n),i=this.hashId(e);return"".concat(a," ").concat(r," #").concat(i)}},{key:"getOptions",value:function(){return{adj:this.adj.concat(),food:this.food.concat()}}}]),e}(),qi=new Ui,Vi=function(){function e(t){Object(l.a)(this,e),this.data=void 0,this.hitFreeze=void 0,this.position=void 0,this.sequence=void 0,this.data=t;var n=t.hitbox,a=t.hurtbox,r=t.facingRight,i=t.scale,o=t.isProjectile,s=t.isParry,c=t.isHit,u=t.impactType;this.hitFreeze=o||s?0:t.hitstop;var h=Object(g.a)(Object(g.a)({},kn.CharacterOriginBox),{},{size:{x:0,y:kn.ImpactDrawHeight*i}});this.position={x:a.center.x+a.size.x/2*(r?-1:1),y:t.isHit||t.isParry?n.center.y:a.center.y};var d=ni.Impacts.BlockNormal;s?d=ni.Impacts.Parry:c?d=u===B.Large?ni.Impacts.HitLarge:ni.Impacts.HitSmall:t.chip>0&&(d=ni.Impacts.BlockChip),this.sequence=new Fi(h,d).reset(r)}return Object(h.a)(e,[{key:"playSound",value:function(e){var t=this.data,n=t.isHit,a=t.impactType;(n?a===B.Large?Pi.Stun.StunHitLarge:Pi.Stun.StunHitSmall:Pi.Stun.Block).play(e)}},{key:"step",value:function(e){0===this.sequence.getState().ticks&&this.playSound(e),this.sequence.step()}},{key:"isAlive",value:function(){return!this.sequence.isDone()}},{key:"getFrame",value:function(){var e=this.sequence,t=e.getFrame();return new Bi({blueprint:t,fighterPosition:this.position,facingRight:e.getState().facingRight,attackConsumed:Ce.Unused,isCaptured:!1,isThrowInvulnWindow:!1,sequenceState:e.getState(),stunPhase:e.getPhase(),attackCallback:function(){}})}},{key:"getState",value:function(){return{data:this.data,sequence:this.sequence.getState()}}},{key:"loadState",value:function(e){this.sequence.loadState(e.sequence)}}],[{key:"fromState",value:function(t){var n=new e(t.data);return n.loadState(t),n}}]),e}(),Yi=function(){function e(){Object(l.a)(this,e),this.state={ticksRemaining:0}}return Object(h.a)(e,[{key:"step",value:function(t){t&&(this.state.ticksRemaining=e.TTL),this.state.ticksRemaining=Math.max(0,this.state.ticksRemaining-1)}},{key:"getState",value:function(){return this.state}},{key:"loadState",value:function(e){this.state=null!==e&&void 0!==e?e:this.state}}]),e}();Yi.TTL=60;var Ji=function(){function e(t){Object(l.a)(this,e),this.background=void 0,this.music=void 0,this.background=gi.loadBackgroundImage(t.backgroundSrc),this.music=Si.load(t.musicSrc)}return Object(h.a)(e,[{key:"drawBackground",value:function(e,t){var n=this.background;e.drawBackground(n.asset.get(),t)}}]),e}(),Ki=function(){function e(t){Object(l.a)(this,e),this.canvas=void 0,this.stage=void 0,this.fighter1=void 0,this.fighter2=void 0,this.gameConfig=void 0,this.gameMeta=void 0,this.isTrainingMode=void 0,this.isOnline=void 0,this.roundTime=void 0,this.touchManager=void 0,this.tutorial=void 0,this.hudInfo=void 0,this.impacts=[],this.particles=[],this.gameplayTicks=void 0,this.timeoverTick=void 0,this.state={ticks:0,playedTicks:0,hitstopRemaining:0,hitstopTotal:0,phase:Me.LoadIn,knockoutTick:void 0,p1advantage:void 0},this.comboLeft=new aa,this.comboRight=new aa,this.reversal1=new Yi,this.reversal2=new Yi,this.loadInUntil=void 0,this.readyUntil=void 0,this.fightStart=void 0,this.fightUntil=void 0,this.lockControlsUntil=void 0,this.koStartup=10,this.koActive=90,this.koTotal=this.koStartup+this.koActive+2*kn.FPS,this.timeoverActive=90,this.timeoverTotal=this.timeoverActive+2*kn.FPS,$n.updateCenter(t.fighter1.calcCenter(t.fighter2)),this.canvas=t.canvas,this.stage=t.stage,this.fighter1=t.fighter1,this.fighter2=t.fighter2,this.gameConfig=t.gameConfig,this.gameMeta=t.gameMeta,this.roundTime=t.gameConfig.roundTime,this.touchManager=t.touchManager,this.tutorial=t.tutorial,this.isTrainingMode=!!t.gameMeta.isTrainingMode,this.isOnline=!!(t.gameMeta.isLobbyPlaying||t.gameMeta.isRanked||t.gameMeta.isCasual||t.gameMeta.isPrivate),this.hudInfo=t.hudInfo,this.isTrainingMode&&(this.state.training={playbackInputs:[],playbackIndex:0,playbackStatus:Te.Inactive}),t.gameMeta.isTouchConfig&&(this.state.touchConfig={showBoxes:!1}),t.gameMeta.playIntros?(this.loadInUntil=.5*kn.FPS,[this.fighter1,this.fighter2].forEach((function(e){return e.roundIntro()}))):this.loadInUntil=0,t.gameMeta.skipReady?(this.readyUntil=0,this.fightStart=0,this.fightUntil=0,this.lockControlsUntil=0):(this.readyUntil=this.loadInUntil+1.5*kn.FPS,this.fightStart=this.readyUntil+.1*kn.FPS,this.fightUntil=this.fightStart+.5*kn.FPS,this.lockControlsUntil=this.fightUntil),this.gameplayTicks=this.roundTime===oe?oe:this.roundTime*kn.FPS,this.timeoverTick=this.gameplayTicks+this.lockControlsUntil}return Object(h.a)(e,[{key:"getHitstop",value:function(){return{remaining:this.state.hitstopRemaining,total:this.state.hitstopTotal}}},{key:"step",value:function(e,t){var n,a,r,i,o,s,c,u=this,l=this.fighter1,h=this.fighter2,d=this.tutorial;if(this.state.training){if(this.state.training.playbackStatus===Te.ReadyForAttack&&e.isAttacking()&&this.confirmTrainingRecording(),this.state.training.playbackStatus===Te.ReadyForMovement&&(e.isEmpty()||this.confirmTrainingRecording()),[Te.ReadyForAttack,Te.Recording].includes(this.state.training.playbackStatus)){var p=e.getState();e=new oa,t=new oa(p),this.state.training.playbackInputs.push(p)}if(this.state.training.playbackStatus===Te.Loop&&(this.state.training.playbackIndex=this.state.training.playbackIndex%(this.state.training.playbackInputs.length||1),t=new oa(this.state.training.playbackInputs[this.state.training.playbackIndex]),this.state.training.playbackIndex++),this.state.training.playbackStatus===Te.Reversal){var f=this.state.training.playbackInputs[0];c=f&&new oa(f),this.state.training.playbackInputs[this.state.training.playbackIndex]&&(t=new oa(this.state.training.playbackInputs[this.state.training.playbackIndex]),this.state.training.playbackIndex++)}}(this.state.ticks++,[Me.LoadIn,Me.Ready,Me.Fight,Me.Gameplay].includes(this.state.phase)&&this.state.playedTicks++,this.state.phase===Me.LoadIn)&&(this.state.playedTicks>=this.loadInUntil&&(this.gameMeta.playIntros&&this.state.arcade&&this.state.arcade.chapterStep!==A.Fight?this.state.playedTicks=0:(this.state.phase=Me.Ready,this.readyUntil>0&&Pi.Announcer.Ready.play(this.state.ticks))));if(this.state.phase===Me.Ready&&this.state.playedTicks>=this.readyUntil&&(this.state.phase=Me.Fight,this.readyUntil>0&&Pi.Announcer.Fight.play(this.state.ticks)),this.state.phase===Me.Fight&&this.state.playedTicks>=this.lockControlsUntil&&(this.state.phase=Me.Gameplay),this.state.phase===Me.Gameplay&&this.roundTime!==oe&&this.state.playedTicks>=this.timeoverTick){this.state.phase=Me.TimeoverSplash,Pi.Announcer.RoundOverBell.play();var b=this.getRoundState();Le(1e3).then((function(){b.winner===j.Draw?Pi.Announcer.Draw.play(u.state.ticks):Pi.Announcer.Time.play(u.state.ticks)}))}if(this.state.phase===Me.KnockoutStartup&&this.state.ticks>=(this.state.knockoutTick||0)+this.koStartup){this.state.phase=Me.KnockoutSplash,Pi.Announcer.RoundOverBell.play();var m=this.getRoundState();Le(1e3).then((function(){m.winner===j.Draw?Pi.Announcer.Draw.play(u.state.ticks):m.finish===Pe.Perfect?Pi.Announcer.Perfect.play(u.state.ticks):Pi.Announcer.KO.play(u.state.ticks)}))}this.state.phase===Me.KnockoutSplash&&(this.state.ticks>=(this.state.knockoutTick||0)+this.koStartup+this.koActive&&(this.state.phase=Me.KnockoutWrapup,this.fighter1.setNextSeq(F.PoseWin),this.fighter2.setNextSeq(F.PoseWin)));this.state.phase===Me.KnockoutWrapup&&(this.state.ticks>=(this.state.knockoutTick||0)+this.koTotal&&(this.state.phase=Me.Finished));if(this.state.phase===Me.TimeoverSplash&&this.state.ticks>=this.timeoverTick+this.timeoverActive){this.state.phase=Me.TimeoverWrapup;var v=this.getRoundState();v.winner===j.Draw&&(this.fighter1.setNextSeq(F.PoseLose),this.fighter2.setNextSeq(F.PoseLose)),v.winner===j.Player1&&(this.fighter1.setNextSeq(F.PoseWin),this.fighter2.setNextSeq(F.PoseLose)),v.winner===j.Player2&&(this.fighter1.setNextSeq(F.PoseLose),this.fighter2.setNextSeq(F.PoseWin))}this.state.phase===Me.TimeoverWrapup&&(this.state.ticks>=this.timeoverTick+this.timeoverTotal&&(this.state.phase=Me.Finished));if(![Me.KnockoutSplash,Me.TimeoverSplash,Me.Finished].includes(this.state.phase)){this.impacts.forEach((function(e){return e.step(u.state.ticks)})),this.impacts=this.impacts.filter((function(e){return e.isAlive()})),this.particles.forEach((function(e){return e.step()})),this.particles=this.particles.filter((function(e){return e.isAlive()}));var y=l.getFrame(),x=h.getFrame(),O=l.getState(),w=h.getState(),S=O.fighter.health,C=w.fighter.health,T=O.fighter.meter,M=w.fighter.meter;if(O.fighter.meterHighlight1=Math.max(0,O.fighter.meterHighlight1-1),O.fighter.meterHighlight2=Math.max(0,O.fighter.meterHighlight2-1),w.fighter.meterHighlight1=Math.max(0,w.fighter.meterHighlight1-1),w.fighter.meterHighlight2=Math.max(0,w.fighter.meterHighlight2-1),kn.isTest&&(this.state.hitstopRemaining=0),this.state.hitstopRemaining>0)this.state.hitstopRemaining=Math.max(0,this.state.hitstopRemaining-1);else{0===this.state.hitstopRemaining&&(this.state.hitstopTotal=0);var P=!!this.tutorial||this.isTrainingMode||!!this.gameMeta.isDebugTool||kn.Debug.RefillHealth,R=!!this.tutorial||this.isTrainingMode&&li.TrainingMeter.get()===ye.Refill||kn.Debug.RefillMeter,I=this.isTrainingMode&&li.TrainingMeter.get()===ye.Infinite,B=this.isTrainingMode&&li.TrainingMeter.get()===ye.Empty;P&&y.bp.seqData.data.isIdle&&x.bp.seqData.data.isIdle&&(O.fighter.health+=l.data.stats.maxHealth/kn.FPS,w.fighter.health+=h.data.stats.maxHealth/kn.FPS),y.bp.data.isInStun||(O.fighter.blueLife-=kn.BlueLifeRegenPerFrame),x.bp.data.isInStun||(w.fighter.blueLife-=kn.BlueLifeRegenPerFrame),R&&y.bp.seqData.data.isIdle&&x.bp.seqData.data.isIdle&&(O.fighter.meter+=5*kn.MeterOneBar/kn.FPS,w.fighter.meter+=5*kn.MeterOneBar/kn.FPS),I&&(O.fighter.meter=kn.MaxMeter,w.fighter.meter=kn.MaxMeter),(P||R)&&(l.fixStats(P),h.fixStats(P)),null!==(n=this.state.debug)&&void 0!==n&&n.killPlayer1&&(O.fighter.health=0,delete this.state.debug.killPlayer1),null!==(a=this.state.debug)&&void 0!==a&&a.killPlayer2&&(w.fighter.health=0,delete this.state.debug.killPlayer2);var D=e,H=t,E=[Me.LoadIn,Me.Ready,Me.Fight].includes(this.state.phase),_=d&&d.lockInputs();if((E||_)&&(D=new oa,H=new oa),this.state.training)if((li.TrainingDummyBurst.get()===je.Always||li.TrainingDummyBurst.get()===je.Random&&this.state.ticks%100===0)&&h.isInHitOrTumbling()&&!h.isTumblingNearFloor()){var L=h.data.commands.burst[0];L&&(H=new oa(oa.parseInput(w.sequence.facingRight,L)))}var G=y.bp.data.freezeOther,z=!G&&x.bp.data.freezeOther,W={particles:[],isReversalAttack:!1,usedReversalController:!1},N=z?W:l.step({normalController:D,otherFrame:x,otherCombo:w.fighter.combo}),U=N.particles,q=N.isReversalAttack,V=G?W:h.step({normalController:H,reversalController:c,otherFrame:y,otherCombo:O.fighter.combo}),Y=V.particles,J=V.isReversalAttack,K=V.usedReversalController;(r=this.particles).push.apply(r,[].concat(Object(k.a)(U),Object(k.a)(Y))),K&&(null===(i=this.state.training)||void 0===i?void 0:i.playbackStatus)===Te.Reversal&&(this.state.training.playbackIndex=1);var Q=Bt([l.currentSequence.getSound()].concat(Object(k.a)(l.projectiles.map((function(e){return e.getSound()}))))),Z=Bt([h.currentSequence.getSound()].concat(Object(k.a)(h.projectiles.map((function(e){return e.getSound()})))));Q.length&&!z&&Q.forEach((function(e){return e.play(u.state.ticks)})),Z.length&&!G&&Z.forEach((function(e){return e.play(u.state.ticks)})),l.checkPush(h);var X=l.getFrame(),$=h.getFrame();if(this.state.training){(X.attack||X.bp.data.projectileId)&&(this.state.p1advantage=void 0);var ee=x.bp.data.isInStun&&!x.bp.data.isAirborne,ne=$.bp.data.isInStun&&!$.bp.data.isAirborne;y.bp.seqData.data.seqid!==X.bp.seqData.data.seqid?(ee&&!ne&&(this.state.p1advantage=0),ne&&(this.state.p1advantage=h.currentSequence.remainingFrames())):x.bp.seqData.data.seqid!==$.bp.seqData.data.seqid&&ee&&!ne&&void 0===this.state.p1advantage&&(this.state.p1advantage=0-l.currentSequence.remainingFrames())}var ae=[];l.projectiles.forEach((function(e){ae.push.apply(ae,Object(k.a)(e.checkVoid($)))})),h.projectiles.forEach((function(e){ae.push.apply(ae,Object(k.a)(e.checkVoid(X)))})),l.projectiles.forEach((function(e){h.projectiles.forEach((function(t){ae.push.apply(ae,Object(k.a)(e.checkClash(t)))}))})),ae.forEach((function(e){return u.impacts.push(new Vi(e))})),l.cleanupProjectiles(),h.cleanupProjectiles();var re=this.state.ticks%10<5?be.Enabled:be.Disabled,ie=li.TrainingBlockingP1.get()===be.Random?re:li.TrainingBlockingP1.get(),se=li.TrainingBlockingP2.get()===be.Random?re:li.TrainingBlockingP2.get(),ce=this.state.ticks%8<4?ve.Force:ve.Normal,ue=li.TrainingCounterHit.get()===ve.Random?ce:li.TrainingCounterHit.get(),le=kn.Debug.DisableBlocking&&be.Disabled||this.isTrainingMode&&ie||ge,he=kn.Debug.DisableBlocking&&be.Disabled||!(null===d||void 0===d||!d.disableBlocking())&&be.Auto||this.isTrainingMode&&se||ge,de=this.isTrainingMode&&ue||ve.Normal,pe=(null===(o=X.attack)||void 0===o?void 0:o.bp.data.isThrowStart)&&h.getFrame().getCollision(X.attack),fe=(null===(s=$.attack)||void 0===s?void 0:s.bp.data.isThrowStart)&&l.getFrame().getCollision($.attack),me=!1,ke=!1,xe={forceCounterHit:de};if(!pe&&fe)me=l.checkGettingAttacked(h,$,le,xe);else if(pe&&!fe)ke=h.checkGettingAttacked(l,X,he,xe);else if(pe&&fe){var Oe=Object(g.a)(Object(g.a)({},xe),{},{forceAutoTech:!0});this.state.ticks%2===0?me=l.checkGettingAttacked(h,$,le,Oe):ke=h.checkGettingAttacked(l,X,he,Oe)}else me=l.checkGettingAttacked(h,$,le,xe),ke=h.checkGettingAttacked(l,X,he,xe);h.projectiles.forEach((function(e){me=me||l.checkGettingAttacked(h,e.getFrame(),le,xe)})),l.projectiles.forEach((function(e){ke=ke||h.checkGettingAttacked(l,e.getFrame(),he,xe)})),l.checkPush(h),$n.updateCenter(l.calcCenter(h),!0),d||(l.cleanupProjectiles(),h.cleanupProjectiles()),Bt([me,ke].map((function(e){return e&&!0!==e?e:null}))).forEach((function(e){return u.addImpact(e)})),this.comboLeft.step(O.fighter.combo),this.comboRight.step(w.fighter.combo),this.reversal1.step(q),this.reversal2.step(J),this.state.phase!==Me.KnockoutWrapup&&this.state.phase!==Me.TimeoverWrapup||(O.fighter.health=S,w.fighter.health=C,O.fighter.combo.maxDamage=0,w.fighter.combo.maxDamage=0),l.fixStats(P),h.fixStats(P),B&&(O.fighter.meter=0,w.fighter.meter=0),T<O.fighter.meter&&(O.fighter.meter===kn.MaxMeter?(O.fighter.meterHighlight2=kn.MeterGainCooldownMax,Pi.Meter.Gain.play()):O.fighter.meter>=kn.MeterOneBar&&T<kn.MeterOneBar&&(O.fighter.meterHighlight1=kn.MeterGainCooldownMax,Pi.Meter.Gain.play())),M<w.fighter.meter&&(w.fighter.meter===kn.MaxMeter?(w.fighter.meterHighlight2=kn.MeterGainCooldownMax,Pi.Meter.Gain.play()):w.fighter.meter>=kn.MeterOneBar&&M<kn.MeterOneBar&&(w.fighter.meterHighlight1=kn.MeterGainCooldownMax,Pi.Meter.Gain.play()));var we=!this.tutorial&&!this.isTrainingMode&&(this.fighter1.isDead()||this.fighter2.isDead());this.state.phase===Me.Gameplay&&we&&(this.state.knockoutTick=this.state.ticks,this.state.phase=Me.KnockoutStartup),d&&(e.isAttacking1()&&d.onInput(te.attack1),e.isAttacking2()&&d.onInput(te.attack2),d.update(l,w.fighter),d.disableMeter()&&(O.fighter.meter=0),w.fighter.meter=0)}}}},{key:"getTimerSeconds",value:function(){var e=Math.max(0,this.state.playedTicks-this.lockControlsUntil),t=Math.max(0,this.gameplayTicks-e),n=Math.ceil(t/kn.FPS);return this.roundTime===oe?null:n}},{key:"addImpact",value:function(e){var t=new Vi(e);this.state.hitstopRemaining=Math.max(this.state.hitstopRemaining,t.hitFreeze),this.state.hitstopTotal=this.state.hitstopRemaining,this.impacts.push(t)}},{key:"isOver",value:function(){return this.state.phase===Me.Finished}},{key:"getRoundState",value:function(){if(this.state.phase===Me.Gameplay)throw new Error("cannot getRoundState until the round is over");var e=this.roundTime!==oe&&this.state.playedTicks>=this.timeoverTick,t=this.fighter1.getState().fighter,n=this.fighter2.getState().fighter,a=j.Draw;if(t.health===kn.MinHealth&&n.health===kn.MinHealth)a=j.Draw;else{var r=t.health/t.maxHealth,i=n.health/n.maxHealth;r>i&&(a=j.Player1),i>r&&(a=j.Player2)}var o=!e&&a!==j.Draw&&(t.health===t.maxHealth||n.health===n.maxHealth);return{winner:a,finish:a===j.Draw&&Pe.Draw||o&&Pe.Perfect||e&&Pe.Timeout||Pe.Knockout}}},{key:"draw",value:function(e){var t=this.gameConfig,n=this.gameMeta,a=this.hudInfo,r=this.canvas,i=this.stage,o=this.fighter1,s=this.fighter2,c=this.impacts,u=this.particles,l=this.tutorial;r.fixSize(),li.ScreenShake.get()&&r.shake(this.state.ticks,this.state.hitstopRemaining/kn.MaxGameFreeze);var h,d,p=o.getFrame(),f=s.getFrame();(kn.Debug.HideBackground?r.drawVoid():i.drawBackground(r,[].concat(Object(k.a)(p.bp.data.effects),Object(k.a)(f.bp.data.effects))),p.drawEffects(r),f.drawEffects(r),this.isTrainingMode&&li.TrainingHideHUD.get()||n.isReplay&&li.TrainingHideHUD.get())||(r.drawHealthAndMeter(this.state.ticks,o.getState().fighter,s.getState().fighter),r.drawCharacterHeadshots(o.data,s.data),r.drawNames({account:null===(h=t.account1)||void 0===h?void 0:h.getTag(),character:o.data.stats.name},{account:null===(d=t.account2)||void 0===d?void 0:d.getTag(),character:s.data.stats.name}),r.drawTimer(this.getTimerSeconds()),n.isTrainingMode||l||r.drawRounds(a.match),n.isTrainingMode&&r.drawFrameAdvantage(this.state.p1advantage,void 0),a.scoreboard.isEmpty||r.drawScoreboard(a.scoreboard),e.loopContext&&r.drawFPS(e.loopContext,this.isOnline?{local:fi.getLocalDelay(),remote:fi.getRemoteDelay(),rollback:fi.getRollback()}:void 0),r.drawComboCounters(this.comboLeft,this.comboRight),r.drawReversals(this.reversal1,this.reversal2));u.forEach((function(e){return e.getFrame().drawBehind(r)}));var b=!kn.Debug.HideBoxes&&!!(kn.Debug.ShowBoxes||this.isTrainingMode&&!n.isTouchConfig&&xe.Hide!==li.TrainingShowHitboxes.get()||this.gameMeta.isReplay&&xe.Hide!==li.TrainingShowHitboxes.get()||n.isEventMode&&xe.Hide!==li.EventShowHitboxes.get()),g=b&&!(!this.isTrainingMode||xe.Sprite!==li.TrainingShowHitboxes.get());o.afterimages.forEach((function(e){return e.drawAfterimage(r)})),s.afterimages.forEach((function(e){return e.drawAfterimage(r)})),p.bp.data.freezeOther||f.bp.data.isInStun||f.bp.data.isDowned||!!p.bp.attack||!!o.timeUntilAttack()?(f.drawSprite(r,g),p.drawSprite(r,g)):(p.drawSprite(r,g),f.drawSprite(r,g)),o.projectiles.forEach((function(e){return e.getFrame().drawSprite(r,g)})),s.projectiles.forEach((function(e){return e.getFrame().drawSprite(r,g)})),u.forEach((function(e){return e.getFrame().drawSprite(r,g)})),b&&(p.drawBoxes(r),f.drawBoxes(r),o.projectiles.forEach((function(e){return e.getFrame().drawBoxes(r)})),s.projectiles.forEach((function(e){return e.getFrame().drawBoxes(r)}))),c.forEach((function(e){return e.getFrame().drawSprite(r,g)}));var m=this.state,v=m.phase,j=m.playedTicks;if(v===Me.Ready){var y=(j-this.loadInUntil)/(this.readyUntil-this.loadInUntil),x=Math.min(1,2*y);r.drawHudOverlay(ni.HudOverlay.ReadySrc,{scale:x,yOffset:-1+x})}if(v===Me.Fight){var O=(j-this.fightStart)/(this.fightUntil-this.fightStart),w=1+.2*Math.min(1,5*O);r.drawHudOverlay(ni.HudOverlay.FightSrc,{scale:w})}if(v===Me.KnockoutSplash){var S=(this.state.knockoutTick||0)+this.koStartup,C=(this.state.ticks-S)/this.koActive,A=.8+.2*Math.min(1,10*C);r.drawHudOverlay(ni.HudOverlay.KnockoutSrc,{scale:A})}if(v===Me.TimeoverSplash){var T=(j-this.timeoverTick)/this.timeoverActive,M=.8+.2*Math.min(1,10*T);r.drawHudOverlay(ni.HudOverlay.TimeOverSrc,{scale:M})}var P=li.TrainingShowInputDisplay.get()||kn.Debug.ShowInputs;if(e.inputHistory&&P){var R=[e.inputHistory.input1,e.inputHistory.input2].map((function(e){var t=[],n="";return e.forEach((function(e){var a=ne.filter((function(t){return e[t]===Re.Press})),r=a.join(",");r.length>0&&n!==r&&t.push(a),n=r})),t}));r.drawInputs(R[0],R[1])}var I=vn.isMobile&&(li.ShowMobileControls.get()||n.isTouchConfig),B=this.isOver()||n.isReplay||n.isLobbySpectator;if(this.touchManager&&e.touchControllerState&&I&&!B){var D,H,E=!(null===(D=this.state.touchConfig)||void 0===D||!D.showBoxes),_=null===(H=this.state.touchConfig)||void 0===H?void 0:H.highlight;this.touchManager.draw({canvas:r,drawOutline:E,drawHighlight:_,touchControllerState:e.touchControllerState})}if(kn.Debug.ShowStats){var F=fi.getAll(),L=Math.max.apply(Math,Object(k.a)(F.map((function(e){return e.name.length})))),G=F.map((function(e){return e.printWithLabel(L)}));r.debugStats(G)}if(e.intent&&r.debugIntent(e.intent._getCurrent()),this.state.training){if(this.state.training.playbackStatus===Te.ReadyForAttack&&r.drawTrainingMessage("ATTACK TO START RECORDING"),this.state.training.playbackStatus===Te.ReadyForMovement&&r.drawTrainingMessage("MOVE TO START RECORDING"),this.state.training.playbackStatus===Te.Recording){var z=(this.state.training.playbackInputs.length/kn.FPS).toFixed(1);r.drawTrainingMessage("RECORDING: ".concat(z,"s"))}if(this.state.training.playbackStatus===Te.Loop){var W=(this.state.training.playbackIndex/kn.FPS).toFixed(1);r.drawTrainingMessage("LOOPING: ".concat(W,"s"))}this.state.training.playbackStatus===Te.Reversal&&r.drawTrainingMessage("REVERSAL")}l&&l.draw(r)}},{key:"getTrainingRecordingIsRecording",value:function(){var e,t=null===(e=this.state.training)||void 0===e?void 0:e.playbackStatus;return t&&[Te.ReadyForAttack,Te.ReadyForMovement,Te.Recording].includes(t)}},{key:"getTrainingRecordingIsLooping",value:function(){var e;return(null===(e=this.state.training)||void 0===e?void 0:e.playbackStatus)===Te.Loop}},{key:"startTrainingRecordingAttack",value:function(){this.state.training&&(this.state.training.playbackStatus=Te.ReadyForAttack)}},{key:"startTrainingRecordingMovement",value:function(){this.state.training&&(this.state.training.playbackStatus=Te.ReadyForMovement)}},{key:"confirmTrainingRecording",value:function(){this.state.training&&(this.state.training.playbackInputs=[],this.state.training.playbackIndex=0,this.state.training.playbackStatus=Te.Recording)}},{key:"stopTrainingRecording",value:function(){this.state.training&&(this.state.training.playbackIndex=0,this.state.training.playbackStatus=Te.Inactive)}},{key:"reversalTrainingRecording",value:function(){this.stopTrainingRecording(),this.state.training&&(this.state.training.playbackIndex=-1,this.state.training.playbackStatus=Te.Reversal)}},{key:"loopTrainingRecording",value:function(){this.stopTrainingRecording(),this.state.training&&(this.state.training.playbackIndex=0,this.state.training.playbackStatus=Te.Loop)}},{key:"getTrainingRecordingInputs",value:function(){var e,t;return null!==(e=null===(t=this.state.training)||void 0===t?void 0:t.playbackInputs)&&void 0!==e?e:[]}},{key:"setTrainingRecordingInputs",value:function(e){this.stopTrainingRecording(),this.state.training&&(this.state.training.playbackInputs=e)}},{key:"setTouchConfigShowBoxes",value:function(e){this.state.touchConfig&&(this.state.touchConfig.showBoxes=e)}},{key:"setTouchConfigShowHighlight",value:function(e){this.state.touchConfig&&(this.state.touchConfig.highlight=e)}},{key:"setArcade",value:function(e){this.state.arcade=e}},{key:"setDebug",value:function(e){var t;this.state.debug=Object(g.a)(Object(g.a)({},null!==(t=this.state.debug)&&void 0!==t?t:{}),e)}},{key:"getState",value:function(){return{screenCenter:$n.screenCenter,game:this.state,fighter1:this.fighter1.getState(),fighter2:this.fighter2.getState(),impacts:this.impacts.map((function(e){return e.getState()})),particles:this.particles.map((function(e){return e.getState()})),comboLeft:this.comboLeft.getState(),comboRight:this.comboRight.getState(),reversal1:this.reversal1.getState(),reversal2:this.reversal2.getState()}}},{key:"loadState",value:function(e){e&&($n.updateCenter(e.screenCenter),this.state=e.game,this.fighter1.loadState(e.fighter1),this.fighter2.loadState(e.fighter2),this.impacts=e.impacts.map((function(e){return Vi.fromState(e)})),this.particles=e.particles.map((function(e){return zi.fromState(e)})),this.comboLeft.loadState(e.comboLeft),this.comboRight.loadState(e.comboRight),this.reversal1.loadState(e.reversal1),this.reversal2.loadState(e.reversal2))}},{key:"getTestTools",value:function(){return{state:this.state}}}],[{key:"loadGame",value:function(t){var n=new Ji(t.gameConfig.stage),a=kn.Spawns.left,r=kn.Spawns.right;t.location===fe.Left&&(a=kn.Spawns.leftCornerLeft,r=kn.Spawns.leftCornerRight),t.location===fe.Right&&(a=kn.Spawns.rightCornerLeft,r=kn.Spawns.rightCornerRight),t.location===fe.Close&&(a=kn.Spawns.closeLeft,r=kn.Spawns.closeRight);var i=new Ni(t.gameConfig.fighter1,a),o=new Ni(t.gameConfig.fighter2,r);return new e({canvas:t.canvas,stage:n,fighter1:i,fighter2:o,touchManager:t.touchManager,tutorial:t.tutorial,gameConfig:t.gameConfig,gameMeta:t.gameMeta,hudInfo:t.hudInfo})}}]),e}(),Qi=n(73),Zi=n.n(Qi);function Xi(e,t){if(null==e)return String(e);switch(typeof e){case"string":return'"'+e+'"';case"function":return e.name||e.toString();case"object":var n=Array(t||1).join("\t"),a=Array.isArray(e);return"{["[+a]+Object.keys(e).map((function(r){var i=!a&&r.match(/^\d/)?'"'.concat(r,'"'):r;return"\n\t"+n+(a?"":i+": ")+Xi(e[r],(t||1)+1)})).join(",")+"\n"+n+"}]"[+a];default:return e.toString()}}var $i,eo,to,no=function(){function e(){Object(l.a)(this,e)}return Object(h.a)(e,[{key:"configToCode",value:function(e){return Xi(e)}},{key:"DANGEROUS_evalCode",value:function(e){return Function('"use strict";return ('+e+")")()}},{key:"upgradeConfig",value:function(e){var t=Object(g.a)(Object(g.a)({},e),{},{setup:Object(g.a)(Object(g.a)({},e.setup),{},{code:"to_hash",stats:Object(g.a)(Object(g.a)({},e.setup.stats),{},{isBoss:!1})})}),n=Br(t),a=Qt(100,fa()(n));return Object(g.a)(Object(g.a)({},n),{},{setup:Object(g.a)(Object(g.a)({},n.setup),{},{code:jn.ModCodePrefix+a})})}},{key:"deriveFilename",value:function(e){var t=new Date;return[(null===e||void 0===e?void 0:e.name)||"tlawip",null!==e&&void 0!==e&&e.modVersion?"_".concat(e.modVersion,"_"):"_",t.getFullYear().toString(),(t.getMonth()+1).toString().padStart(2,"0"),t.getDate().toString().padStart(2,"0"),"_",t.getHours().toString().padStart(2,"0"),t.getMinutes().toString().padStart(2,"0"),t.getSeconds().toString().padStart(2,"0")].join("")}},{key:"constructZip",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(t){var n,a,r,i,o,s,u;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.code,r=t.config,i=null!==(n=t.filename)&&void 0!==n?n:this.deriveFilename(r),o=new Zi.a,(s=o.folder(i)).file(i+".js",a),s.file(i+".json",JSON.stringify(r)),e.next=8,o.generateAsync({type:"base64"});case 8:return u=e.sent,e.abrupt("return",{filename:i,zip64:u});case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"packMod",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(t){var n,a,r;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=this.upgradeConfig(t.rawConfig),a=Tr(n),t.validate&&(Dr(n),Hr(a.original)),e.next=6,this.constructZip({code:t.code,config:n,filename:t.filename});case 6:return r=e.sent,e.abrupt("return",{fighter:a,zip:r});case 10:throw e.prev=10,e.t0=e.catch(0),wn(e.t0),e.t0;case 14:case"end":return e.stop()}}),e,this,[[0,10]])})));return function(t){return e.apply(this,arguments)}}()},{key:"parseZip",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(t,n){var a,r,i,o,s,u,l,h,d;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=void 0,r=void 0,i=0,o=Object.values(n.files);case 3:if(!(i<o.length)){e.next=12;break}if(2===(s=o[i]).name.split("/").length){e.next=7;break}return e.abrupt("continue",9);case 7:s.name.endsWith(".js")&&(a=s),s.name.endsWith(".json")&&(r=s);case 9:i++,e.next=3;break;case 12:if(a&&r){e.next=14;break}throw new Error("zip was formatted incorrectly");case 14:return e.next=16,a.async("string");case 16:return u=e.sent,e.next=19,r.async("string");case 19:return l=e.sent,h=JSON.parse(l),e.next=23,this.packMod({code:u,rawConfig:h,filename:t});case 23:return d=e.sent,e.abrupt("return",{wrapper:d,code:u});case 25:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"unpackZipBase64",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(t,n){var a;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Zi.a.loadAsync(n,{base64:!0});case 3:a=e.sent,e.next=11;break;case 6:throw e.prev=6,e.t0=e.catch(0),wn("error decoding zip as b64 string"),wn(e.t0),e.t0;case 11:return e.abrupt("return",this.parseZip(t,a));case 12:case"end":return e.stop()}}),e,this,[[0,6]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"unpackZipBlob",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(t,n){var a;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Zi.a.loadAsync(n);case 3:a=e.sent,e.next=11;break;case 6:throw e.prev=6,e.t0=e.catch(0),wn("error decoding zip as file blob"),wn(e.t0),e.t0;case 11:return e.abrupt("return",this.parseZip(t,a));case 12:case"end":return e.stop()}}),e,this,[[0,6]])})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),ao=new no,ro=function(){var e=[],t=function(e){return{track:function(t,n){e.push({type:t,data:n}),wn("M:",t,n)}}}(e),n=function(e,n){t.track(e,n)};return n.init=function(n){t=n,e.forEach((function(e){return t.track(e.type,e.data)})),e=[]},n}(),io=function(){function e(t,n,a){var r=this;Object(l.a)(this,e),this.statusCallback=a,this.completeCount=0,this.maxProcessing=10,this.promises=[],this.pendingLazy=[],this.start=st.now(),this.allPromise=lt(),this.loaded=this.allPromise.promise,t.forEach((function(e){return r.pendingLazy.push((function(){return e}))})),n.forEach((function(e){return r.pendingLazy.push(e)})),this.processPending()}return Object(h.a)(e,[{key:"isDone",get:function(){return this.completeCount===this.totalCount}},{key:"processingCount",get:function(){return this.promises.length-this.completeCount}},{key:"totalCount",get:function(){return this.promises.length+this.pendingLazy.length}},{key:"processPending",value:function(){if(this.pendingLazy.length>0&&this.processingCount<this.maxProcessing){var e=this.pendingLazy.shift();e&&this.addPromise(e),this.processPending()}}},{key:"addPromise",value:function(e){var t=this,n=e();this.promises.push(n),n.then((function(){t.completeCount+=1,t.statusCallback({percent:t.completeCount/t.totalCount,complete:t.completeCount,processing:t.promises.length-t.completeCount,pending:t.pendingLazy.length,total:t.totalCount}),t.allPromise.hasErrored()||(t.isDone?t.resolve():t.processPending())})),n.catch((function(e){t.allPromise.reject(e)}))}},{key:"resolve",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(){var t,n,a,r,i;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Promise.all(this.promises),e.next=3,t;case 3:n=e.sent,a=n.filter((function(e){return!!e})),r={files:n.length,retries:Wt(a.map((function(e){return e.retries})))},kn.isTest||(i=st.now(),wn("loading took:",i-this.start)),this.allPromise.resolve(r);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}],[{key:"load",value:function(t){var n,a,r;return new e(null!==(n=t.promises)&&void 0!==n?n:[],null!==(a=t.lazies)&&void 0!==a?a:[],null!==(r=t.statusCallback)&&void 0!==r?r:function(){})}}]),e}(),oo=function(){function e(){Object(l.a)(this,e),this.compressor=new ra}return Object(h.a)(e,[{key:"compressDraftReplay",value:function(e){var t=this;return{id:null,hash:e.hash,created:e.created,version:e.version,gameConfig:ni.serializeGameConfig(e.gameConfig),match:e.match,roundInputs:e.roundInputs.map((function(e){return{input1:t.compressor.compressMany(e.input1),input2:t.compressor.compressMany(e.input2)}}))}}},{key:"decompressReplay",value:function(e){var t=this;return{compressed:e,id:e.id,hash:e.hash,created:e.created,version:e.version,gameConfig:ni.deserializeGameConfig(e.gameConfig),match:e.match,roundInputs:e.roundInputs.map((function(e){return{input1:t.compressor.decompressMany(e.input1),input2:t.compressor.decompressMany(e.input2)}}))}}},{key:"createId",value:function(e){return Qt(10,(new Date).toISOString()+e.hash).toUpperCase()}},{key:"hash",value:function(e){var t=this;return Qt(20,[e.gameConfig.stage.name,e.gameConfig.fighter1.stats.id,e.gameConfig.fighter2.stats.id,e.roundInputs.map((function(e){return t.compressor.compressMany(e.input1)})).join(","),e.roundInputs.map((function(e){return t.compressor.compressMany(e.input2)})).join(",")].join(","))}}]),e}(),so=new(function(){function e(t){Object(l.a)(this,e),this.storage=void 0,this.helper=void 0,this.storage=t,this.helper=new oo}return Object(h.a)(e,[{key:"createId",value:function(e){var t;return null!==(t=e.id)&&void 0!==t?t:this.helper.createId(e)}},{key:"addDraft",value:function(e){var t=Object(g.a)(Object(g.a)({},e),{},{hash:this.helper.hash(e),created:(new Date).toISOString(),version:kn.PatchVersion}),n=this.helper.compressDraftReplay(t);return this.storage.addReplay(n),n}},{key:"addRemote",value:function(e){return this.storage.addReplay(e)}},{key:"getCompressed",value:function(){return this.storage.getReplays()}},{key:"get",value:function(){var e=this;return this.getCompressed().map((function(t){return e.helper.decompressReplay(t)}))}},{key:"getById",value:function(e){return this.getCompressed().filter((function(t){return t.id===e}))[0]}}]),e}())(ci.usingLocalStorage()),co=new(function(){function e(){Object(l.a)(this,e)}return Object(h.a)(e,[{key:"empty",value:function(){return{p1wins:0,p1streak:0,p2wins:0,p2streak:0,isEmpty:!0}}},{key:"concat",value:function(e,t){var n=Object(g.a)({},e);if(!t)return n;var a=da.getWinner(t);return a?(n.isEmpty=!1,[j.Player1,j.Draw].includes(a)&&(n.p1wins++,n.p1streak++,n.p2streak=0),[j.Player2,j.Draw].includes(a)&&(n.p2wins++,n.p2streak++,n.p1streak=0),[j.Draw].includes(a)&&(n.p1streak=0,n.p2streak=0),n):n}},{key:"getLatestOutcome",value:function(e){return e.p1streak>0?j.Player1:e.p2streak>0?j.Player2:j.Draw}}]),e}()),uo=function(){function e(t,n,a,r){Object(l.a)(this,e),this.key=t,this.imageSrc=n,this.defaultConfig=a,this.locked=void 0,this.config=void 0,this.config=Kt(r),this.locked=Kt(this.config)}return Object(h.a)(e,[{key:"getBound",value:function(e){var t,n,a=this.config,r=a.vertRef,i=a.horiRef,o=a.diameterRatio,s=a.vertOffset,c=a.horiOffset,u=e.windowHeight*o;return{centerX:t="left"===i?u*c:e.windowWidth-u*c,centerY:n="top"===r?u*s:e.windowHeight-u*s,left:t-u/2,right:t+u/2,top:n-u/2,bottom:n+u/2,diameter:u}}},{key:"resetToDefault",value:function(){this.config=Kt(this.defaultConfig),this.locked=Kt(this.config)}},{key:"resetToLocked",value:function(){this.config=Kt(this.locked)}},{key:"finishMoving",value:function(){this.locked=Kt(this.config)}},{key:"createConfigFromTouch",value:function(e,t,n,a){var r=Kt(e),i=t.windowHeight*r.diameterRatio;r.horiRef="left";var o=n;o>=t.windowWidth/2&&(r.horiRef="right",o=t.windowWidth-n),r.horiOffset=o/i,r.vertRef="top";var s=a;return s>=t.windowHeight/2&&(r.vertRef="bottom",s=t.windowHeight-a),r.vertOffset=s/i,r}},{key:"moveTo",value:function(e,t){this.config=this.createConfigFromTouch(this.config,e,t.windowX,t.windowY)}},{key:"changeDiameter",value:function(e,t){var n=this.getBound(e),a=2*this.defaultConfig.diameterRatio,r=this.defaultConfig.diameterRatio/2,i=this.config.diameterRatio+t;i=Math.min(a,i),i=Math.max(r,i),this.config.diameterRatio=i,this.config=this.createConfigFromTouch(this.config,e,n.centerX,n.centerY)}},{key:"contains",value:function(e,t){var n=this.getBound(e);return n.left<=t.windowX&&n.right>t.windowX&&n.top<=t.windowY&&n.bottom>t.windowY}},{key:"draw",value:function(e){var t=e.canvas,n=e.context,a=e.drawOutline,r=e.drawHighlight,i=e.touchControllerState[this.key],o=this.getBound(n),s=n.canvasWidth/n.windowWidth;a&&t.drawTouchOutline(i,s*o.centerX,s*o.centerY,s*o.diameter,r===this.key),t.drawTouchIcon(this.imageSrc,i,s*o.centerX,s*o.centerY,s*o.diameter/2)}}]),e}(),lo=function(){function e(t){Object(l.a)(this,e),this.targets=t,this.onTouchOverride=void 0}return Object(h.a)(e,[{key:"getCompleteConfig",value:function(){return{left:this.targets.left.config,right:this.targets.right.config,attack1:this.targets.attack1.config,attack2:this.targets.attack2.config,attack3:this.targets.attack3.config,attack4:this.targets.attack4.config}}},{key:"sortedByPriority",value:function(){return[this.targets.left,this.targets.right,this.targets.attack1,this.targets.attack2,this.targets.attack3,this.targets.attack4]}},{key:"draw",value:function(e){var t=e.canvas,n=e.drawOutline,a=e.drawHighlight,r=e.touchControllerState,i=t.getTouchContext();this.targets.left.draw({canvas:t,context:i,drawOutline:n,drawHighlight:a,touchControllerState:r}),this.targets.right.draw({canvas:t,context:i,drawOutline:n,drawHighlight:a,touchControllerState:r}),this.targets.attack1.draw({canvas:t,context:i,drawOutline:n,drawHighlight:a,touchControllerState:r}),this.targets.attack2.draw({canvas:t,context:i,drawOutline:n,drawHighlight:a,touchControllerState:r}),this.targets.attack3.draw({canvas:t,context:i,drawOutline:n,drawHighlight:a,touchControllerState:r}),this.targets.attack4.draw({canvas:t,context:i,drawOutline:n,drawHighlight:a,touchControllerState:r})}}],[{key:"fromLookups",value:function(t){var n=t.imageSrc,a=t.defaultSettings,r=t.currentSettings;function i(e){return new uo(e,n[e],a[e],r[e])}return new e({left:i(te.left),right:i(te.right),attack1:i(te.attack1),attack2:i(te.attack2),attack3:i(te.attack3),attack4:i(te.attack4)})}}]),e}(),ho=function(){function e(t){Object(l.a)(this,e),this.options=void 0,this.tick=0,this.options=t||{}}return Object(h.a)(e,[{key:"disableBlocking",value:function(){return!this.options.enableBlocking}},{key:"disableMeter",value:function(){return!this.options.enableMeter}},{key:"lockInputs",value:function(){return this.tick<=kn.AttackBuffer||!!this.options.lockInputs}},{key:"startWithPosition",value:function(){return this.options.rePosition}},{key:"getDummyInput",value:function(e){var t=this.options.dummyInterval||2*kn.FPS;if(this.options.dummyInput&&this.tick%t===0)return oa.parseInput(e,this.options.dummyInput)}},{key:"step",value:function(){0===this.tick&&this.options.sound&&this.options.sound.play(),this.tick++}},{key:"restartChapter",value:function(){return!1}},{key:"onInput",value:function(e){}}]),e}(),po=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(e,a,r){var i;return Object(l.a)(this,n),(i=t.call(this,Object(g.a)({lockInputs:!0},r||{}))).message=void 0,i.defaultCountdown=void 0,i.countdown=void 0,i.message=e,i.defaultCountdown=kn.FPS*a,i.countdown=i.defaultCountdown,i}return Object(h.a)(n,[{key:"update",value:function(){this.countdown--}},{key:"isDone",value:function(){return this.countdown<=0}},{key:"draw",value:function(e){e.drawTutorialMessage(this.message,!!this.options.noDark)}},{key:"reset",value:function(){this.countdown=this.defaultCountdown}}]),n}(ho),fo=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(e,a){var r;return Object(l.a)(this,n),(r=t.call(this,Object(g.a)({lockInputs:!0},a||{}))).message=void 0,r.defaultCooldown=kn.FPS/2,r.cooldown=r.defaultCooldown,r.readyToRestart=!1,r.done=!1,r.message=e,r}return Object(h.a)(n,[{key:"isReady",value:function(){return this.cooldown<=0}},{key:"restartChapter",value:function(){return this.readyToRestart}},{key:"onInput",value:function(e){this.done=e===te.attack1&&this.isReady(),this.readyToRestart=e===te.attack2&&!!this.options.canRestart&&this.isReady()}},{key:"update",value:function(){this.cooldown--}},{key:"isDone",value:function(){return this.done}},{key:"draw",value:function(e){e.drawTutorialPrompt(this.message,this.isReady(),!!this.options.canRestart)}},{key:"reset",value:function(){this.cooldown=this.defaultCooldown,this.readyToRestart=!1,this.done=!1}}]),n}(ho),bo=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"draw",value:function(e){e.drawTutorialMultiPrompt(this.message,this.isReady(),!!this.options.canRestart)}}]),n}(fo),go=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,Object(g.a)({},e.options||{}))).title=void 0,a.combo=void 0,a.comboDisplay=void 0,a.commands=void 0,a.latestComboIndex=0,a.cooldown=!1,a.exceptionMoves=[Y.DashStart,Y.DashAgain,z.Teleport].map((function(e){return e.toString()})),a.title=e.title,a.combo=e.combo,a.comboDisplay=a.combo.map((function(e){return ni.getCoreFighterMove(e).displayName})),a.commands=e.commands,a}return Object(h.a)(n,[{key:"update",value:function(e,t){var n=this;[e.getFrame()].concat(Object(k.a)(e.projectiles.map((function(e){return e.getLivingFrameForTutorial()})))).forEach((function(e){n.cooldown&&e.attackConsumed===Ce.Unused&&(n.cooldown=!1);var a=n.combo[n.latestComboIndex-1],r=n.combo[n.latestComboIndex],i=e.bp.seqData.data.seqid;if(n.exceptionMoves.includes(a)&&!e.bp.seqData.data.isIdle);else if(n.latestComboIndex>0&&t.framesIdle>0)return void(n.latestComboIndex=0);var o=r===i,s=!e.bp.seqData.sequenceHasAttacks||[Ce.HitAirborne,Ce.HitGrounded,Ce.HitTumbling].includes(e.attackConsumed);!n.cooldown&&o&&s&&(n.latestComboIndex++,n.cooldown=!0)}))}},{key:"isDone",value:function(){return this.latestComboIndex>=this.combo.length}},{key:"draw",value:function(e){e.drawTutorialCombo(this.title,this.comboDisplay,this.commands,this.latestComboIndex)}},{key:"reset",value:function(){this.latestComboIndex=0,this.cooldown=!1}}]),n}(ho),mo=function(){function e(t){Object(l.a)(this,e),this.name=void 0,this.steps=void 0,this.stepIndex=0,this.name=t.name,this.steps=t.steps}return Object(h.a)(e,[{key:"getCurrentStep",value:function(){return this.steps[this.stepIndex]||new po("Done! Exiting...",60)}},{key:"update",value:function(e,t,n){var a=this.getCurrentStep();if(a.step(),a.update(e,t),a.restartChapter()){this.reset();var r=this.getCurrentStep().startWithPosition();r&&n(r)}else if(a.isDone()){this.stepIndex++;var i=this.getCurrentStep().startWithPosition();i&&n(i)}}},{key:"isDone",value:function(){return this.stepIndex>=this.steps.length}},{key:"reset",value:function(){this.stepIndex=0,this.steps.forEach((function(e){return e.reset()}))}}],[{key:"comboChapter",value:function(t){var n=t.options||{},a=n.rePosition;return new e({name:t.title,steps:[new po(t.title,1,{rePosition:a}),new go(Object(g.a)(Object(g.a)({},t),{},{options:Object(g.a)(Object(g.a)({},n),{},{rePosition:void 0})})),new fo("Combo Complete!",{canRestart:!0,sound:Pi.Announcer.ChallengeComplete})]})}}]),e}(),vo=function(){function e(t,n,a){Object(l.a)(this,e),this.title=void 0,this.gameConfig=void 0,this.chapters=void 0,this.chapterIndex=0,this.positionCallback=function(){throw new Error("position callback should be set by runner")},this.title=t,this.gameConfig=n,this.chapters=a}return Object(h.a)(e,[{key:"getCurrentChapter",value:function(){return this.chapters[this.chapterIndex]||this.chapters[0]}},{key:"getCurrentStep",value:function(){return this.getCurrentChapter().getCurrentStep()}},{key:"disableBlocking",value:function(){return this.getCurrentStep().disableBlocking()}},{key:"disableMeter",value:function(){return this.getCurrentStep().disableMeter()}},{key:"lockInputs",value:function(){return this.getCurrentStep().lockInputs()}},{key:"getDummyInput",value:function(e){return this.getCurrentStep().getDummyInput(e)}},{key:"onInput",value:function(e){this.getCurrentStep().onInput(e)}},{key:"update",value:function(e,t){var n=this.getCurrentChapter();n.update(e,t,this.positionCallback),n.isDone()&&(ro("level_end",{success:!0,level_name:"tutorial:".concat(n.name)}),this.chapterIndex++,this.setPosition())}},{key:"isDone",value:function(){return this.chapterIndex>=this.chapters.length}},{key:"draw",value:function(e){this.getCurrentStep().draw(e)}},{key:"reset",value:function(e){this.chapters.forEach((function(e){return e.reset()})),this.chapterIndex=e}},{key:"startTutorial",value:function(){this.setPosition()}},{key:"setPosition",value:function(){var e=this.getCurrentStep().startWithPosition();e&&this.positionCallback(e)}},{key:"setPositionCallback",value:function(e){this.positionCallback=e}}],[{key:"loadTutorial",value:function(t){var n={matchId:nn(),firstTo:1,roundTime:oe,stage:ni.Stages.Notebook,fighter1:t.fighter1.original,fighter2:(t.fighter2||ni.Characters.Beef).original};return new e(t.title,n,t.chapters)}}]),e}(),ko=function(){return new po("Nice!",1.5,{noDark:!0,sound:Pi.Announcer.Nice})},jo="\nTo do your special jump attack,\njump forward by pressing Forward + Special,\nbut then hold Back before reaching the peak of your jump.\n",yo=function(e){return new bo("You have finished the Strategy tutorial for ".concat(e,"!"))},xo=vo.loadTutorial({title:"Advanced",fighter1:ni.Characters.Beef,fighter2:ni.Characters.Noodle,chapters:[new mo({name:"Combos",steps:[new fo("Combos",{rePosition:fe.Center}),new bo("\n          Every character can followup Heavy by pressing Heavy again.\n          This Heavy > Heavy sequence is guaranteed to hit both times\n          if the first Heavy hits, making it a combo.\n          Try pressing the second Heavy right when the first one hits.\n        "),new go({title:"Heavy > Heavy",combo:[W.HeavyPunch,W.Uppercut],commands:[[te.attack2],[le.Cancel,te.attack2]]}),ko(),new bo("\n          One strength of Jumping attacks is that they stun\n          your opponent long enough to guarantee a followup.\n          Do a Jump attack, then add on Heavy > Heavy\n          for a big combo!\n        "),new go({title:"Jumping combo",combo:[W.Jump,W.HeavyPunch,W.Uppercut],commands:[[te.right,te.attack3],[te.attack2],[le.Cancel,te.attack2]]}),ko(),new bo('\n          "Jump, Heavy > Heavy" is a simple starter\n          combo that every character can do.\n          Check out the Character Guides and Combo Trials\n          for more damaging, more advanced combos.\n        ',{canRestart:!0})]}),new mo({name:"Punishing",steps:[new fo("Punishing",{rePosition:fe.Center}),new bo('\n          Some of the stronger attacks in Tough Love Arena are "unsafe" on block.\n          An attack is usually unsafe when it takes a long time to recover.\n        '),new bo('\n          If you block an unsafe attack,\n          you can "punish" the attacker with a quick counter attack!\n          Wait for the opponent to attack you, block it,\n          then "punish" with a Heavy > Heavy combo while their defenses are down.\n        '),new go({title:"Punish combo",combo:[W.HeavyPunch,W.Uppercut],commands:[[te.attack2],[le.Cancel,te.attack2]],options:{enableBlocking:!0,dummyInput:"4c"}}),ko(),new bo("\n          Part of learning matchups will be discovering\n          which attacks are punishable by what.\n          Check out the Frame Data in Extras for the raw numbers.\n        ",{canRestart:!0})]}),new mo({name:"Rejection",steps:[new fo("Rejection",{rePosition:fe.Center}),new bo("\n          Your opponent is attacking you, and you want some space.\n          How can you escape overwhelming pressure?\n        "),new bo("\n          See the smaller bar just below the health bars?\n          This is your LOVE meter.\n          LOVE builds automatically by attacking and blocking.\n          You can spend LOVE to perform a few powerful techniques.\n        ",{enableMeter:!0}),new bo("\n          The first is REJECTION. Anytime you are blocking an attack,\n          press Throw and forward at the same time to perform a REJECTION and send your opponent away!\n        "),new go({title:"Block the attack, then REJECTION",combo:[F.Rejection],commands:[Object(k.a)(pe)],options:{enableBlocking:!0,enableMeter:!0,dummyInput:"4c"}}),ko(),new bo("\n          Remember: you can only REJECT while you're blocking.\n          Once you're hit and stuck in a combo, you won't be able to REJECT.\n        ",{canRestart:!0})]}),new mo({name:"Burst",steps:[new fo("Burst",{rePosition:fe.Center}),new bo("\n          You may notice as you play that, when you are getting hit,\n          you cannot move your character.\n          If your opponent is doing a long combo,\n          your only chance to avoid it is blocking the first hit.\n          After that, it's all guaranteed. What's a gamer to do?\n        "),new bo("\n          Anytime your opponent is hitting you,\n          press Throw while holding away to BURST out of their combo!\n          Keep in mind though that BURST requires two full bars.\n        "),new bo("\n          To practice, walk into their attack, then BURST out!\n          You cannot BURST while blocking.\n        "),new go({title:"Walk into the attack, then BURST",combo:[F.Burst],commands:[Object(k.a)(de)],options:{enableBlocking:!0,enableMeter:!0,dummyInput:"4c"}}),ko(),new bo("\n        Remember: you can only BURST while you're being hit.\n        Mashing while you're still blocking won't do anything.\n        ",{canRestart:!0})]}),new mo({name:"Rapid",steps:[new fo("Rapid",{rePosition:fe.Center}),new bo("\n          You can spend half of your LOVE to RAPID.\n          Performing a RAPID freezes time for a half a second,\n          and immediately ends your current attack.\n        ",{rePosition:fe.Center}),new bo("\n          The moment you make contact with the opponent,\n          whether it hits or they block,\n          you can press Throw while holding towards to RAPID.\n          Try performing a RAPID on Beef's Heavy punch.\n        "),new go({title:"RAPID",combo:[W.HeavyPunch,F.Rapid],commands:[[te.attack2],Object(k.a)(he)],options:{enableMeter:!0}}),ko(),new bo("\n          Doing a RAPID freezes time and lets you recover right away.\n          Now that you've recovered super fast, try punching them a second time\n          while they're still in stun.\n        ",{rePosition:fe.Center}),new go({title:"RAPID combo",combo:[W.HeavyPunch,F.Rapid,W.HeavyPunch],commands:[[te.attack2],Object(k.a)(he),[te.attack2]],options:{enableMeter:!0}}),ko(),new bo("\n          RAPID can be used to lengthen combos OR to make an unsafe move more safe.\n          That said, not every move can be RAPID'd.\n          Experiment in Training Mode or check out the later combo trials for examples.\n        ",{canRestart:!0})]}),new mo({name:"Counter Hits",steps:[new fo("Counter Hits",{rePosition:fe.Close}),new bo("\n          If you hit your opponent while they're winding up to attack\n          (aka during STARTUP frames),\n          then your hit becomes a COUNTER HIT.\n        ",{rePosition:fe.Close}),new bo("\n          Landing a Counter Hit rewards you with bonus damage!\n          To demonstrate, let's do a simple combo: Heavy Punch > Palm.\n        "),new bo("\n          Press Heavy to do Beef's Heavy Punch,\n          then press Light while it hits to cancel into Palm for a quick, two-hit combo.\n        "),new go({title:"Normal Combo: 150 damage",combo:[W.HeavyPunch,W.Palm],commands:[[te.attack2],[le.Cancel,te.attack1]],options:{}}),ko(),new bo("\n          Now, the opponent is going to mash their Heavy attack.\n          Block, and then immediately attack back with the same two-hit combo.\n          This should catch them during the startup of their next Heavy,\n          register as a Counter Hit, and deal bonus damage!\n        ",{rePosition:fe.Close}),new go({title:"Counter Hit Combo: 166 damage",combo:[W.HeavyPunch,W.Palm],commands:[[te.attack2],[le.Cancel,te.attack1]],options:{enableBlocking:!0,dummyInput:"5b",dummyInterval:32}}),ko(),new bo("\n          Counter Hits do 20% more damage than normal.\n          If you keep the combo going, it will also do more damage in the long run.\n          For a full breakdown, check the Frame Data menu.\n        ",{canRestart:!0}),new bo("You've completed the Advanced tutorial!",{sound:Pi.Announcer.GreatJob})]})]}),Oo=ni.Characters.Beef,wo=vo.loadTutorial({title:"".concat(ni.Characters.Noodle.name," Combos"),fighter1:ni.Characters.Noodle,fighter2:ni.Characters.Onion,chapters:[mo.comboChapter({title:"#1: Slap Trample",combo:[L.Slap,L.Slap,G.Trample],commands:[[te.attack1],[le.Cancel],[le.Cancel,te.attack2]],options:{rePosition:fe.Left}}),mo.comboChapter({title:"#2: Jump In",combo:[L.Jump,L.Whip1,L.Whip2,L.Whip3,G.PrepSoup],commands:[[te.right,te.attack3],[te.attack2],[le.Cancel,te.attack2],[le.Cancel,te.attack2],[le.Cancel,te.attack3]],options:{rePosition:fe.Center}}),mo.comboChapter({title:"#3: Soup Juggle",combo:[Q.Soup,L.Whip1,L.Whip2,L.Whip3,G.PrepSoup],commands:[[te.attack3],[te.attack2],[le.Cancel,te.attack2],[le.Cancel,te.attack2],[le.Cancel,te.attack3]],options:{rePosition:fe.Center}}),mo.comboChapter({title:"#4: Frenzy Juggle",combo:[L.Jump,G.Frenzy,L.Slap,L.Slap,L.Whip3,G.PrepSoup],commands:[[te.right,te.attack3],[te.left,te.attack3],[te.attack1],[le.Cancel],[le.Cancel,te.right,te.attack2],[le.Cancel,te.attack3]],options:{rePosition:fe.Right}}),mo.comboChapter({title:"#5: Mid-Screen Rapid",combo:[G.Frenzy,F.Rapid,L.Jump,L.Slap,G.Trample,L.Whip1],commands:[[te.left,te.attack3],Object(k.a)(he),[te.right,te.attack3],[te.attack1],[le.Cancel,te.attack2],[te.attack2]],options:{enableMeter:!0,rePosition:fe.Left}}),mo.comboChapter({title:"#6: Corner Rapid",combo:[Q.Soup,G.Frenzy,F.Rapid,G.PrepSoup,G.ServeSoup,L.Slap,L.Slap,G.Trample,Q.Soup,L.Slap,G.Trample,L.Slap,L.Slap,L.Whip3,G.PrepSoup],commands:[[te.attack3],[te.left,te.attack3],Object(k.a)(he),[te.attack3],[le.Cancel,te.attack3],[te.attack1],[le.Cancel],[le.Cancel,te.attack2],[],[te.attack1],[le.Cancel,te.attack2],[te.attack1],[le.Cancel],[le.Cancel,te.right,te.attack2],[le.Cancel,te.attack3]],options:{enableMeter:!0,rePosition:fe.Right}})]}),So=vo.loadTutorial({title:"".concat(ni.Characters.Rice.name," Combos"),fighter1:ni.Characters.Rice,fighter2:ni.Characters.Garlic,chapters:[mo.comboChapter({title:"#1: Slap Swipe",combo:[L.Slap,L.Slap,z.Swipe],commands:[[te.attack1],[le.Cancel],[le.Cancel,te.attack2]],options:{rePosition:fe.Left}}),mo.comboChapter({title:"#2: Jump In",combo:[L.Jump,L.Whip1,L.Whip2,z.SwatStart],commands:[[te.right,te.attack3],[te.attack2],[le.Cancel,te.attack2],[le.Cancel,te.attack3]],options:{rePosition:fe.Center}}),mo.comboChapter({title:"#3: Swipe Link",combo:[L.Slap,z.Swipe,L.Slap,L.Slap,L.Whip3],commands:[[te.attack1],[le.Cancel,te.attack2],[te.attack1],[le.Cancel],[le.Cancel,te.right,te.attack2]],options:{rePosition:fe.Left}}),mo.comboChapter({title:"#4: Combo off AntiAir",combo:[L.Slap,z.Swipe,L.Whip1,z.SwatStart],commands:[[te.attack1],[te.left,te.attack2],[te.attack2],[le.Cancel,te.attack3]],options:{rePosition:fe.Center,dummyInput:"6c"}}),mo.comboChapter({title:"#5: Swat Loops",combo:[L.Whip1,L.Whip2,z.SwatStart,F.Rapid,L.Whip1,L.Whip2,z.SwatStart,F.Rapid,L.Whip1,L.Whip2,L.Whip3],commands:[[te.attack2],[le.Cancel,te.attack2],[le.Cancel,te.attack3],Object(k.a)(he),[te.attack2],[le.Cancel,te.attack2],[le.Cancel,te.attack3],Object(k.a)(he),[te.attack2],[le.Cancel,te.attack2],[le.Cancel,te.attack2]],options:{enableMeter:!0,rePosition:fe.Left}}),mo.comboChapter({title:"#6: Corner Juggle",combo:[L.Jump,z.Swipe,L.Slap,z.Swipe,L.Slap,L.Slap,z.Swipe,F.Rapid,L.Whip1,L.Whip2,z.SwatStart,L.Slap,L.Slap,L.Whip3],commands:[[te.right,te.attack3],[te.left,te.attack2],[te.attack1],[le.Cancel,te.attack2],[te.attack1],[le.Cancel],[le.Cancel,te.attack2],Object(k.a)(he),[te.attack2],[le.Cancel,te.attack2],[le.Cancel,te.attack3],[te.attack1],[le.Cancel],[le.Cancel,te.right,te.attack2]],options:{enableMeter:!0,rePosition:fe.Right}})]}),Co=vo.loadTutorial({title:"".concat(ni.Characters.Beef.name," Combos"),fighter1:ni.Characters.Beef,fighter2:ni.Characters.Noodle,chapters:[mo.comboChapter({title:"#1: Safe Combo",combo:[W.Gutpunch,W.HeavyPunch,W.Palm],commands:[[te.attack1],[le.Cancel,te.attack2],[le.Cancel,te.attack1]],options:{rePosition:fe.Center}}),mo.comboChapter({title:"#2: Launch Combo",combo:[W.Jump,W.Gutpunch,W.HeavyPunch,W.Uppercut,W.Jump,W.Spike],commands:[[te.right,te.attack3],[te.attack1],[le.Cancel,te.attack2],[le.Cancel,te.attack2],[te.right,te.attack3],[le.Cancel]],options:{rePosition:fe.Center}}),mo.comboChapter({title:"#3: Lemon Starter",combo:[Q.Lemon,W.HeavyPunch,W.Uppercut,W.HeavyPunch,W.HeavyPunch,W.Jump,W.Spike],commands:[[te.attack3],[te.attack2],[le.Cancel,te.attack2],[te.attack2],[te.attack2],[te.right,te.attack3],[le.Cancel]],options:{rePosition:fe.Right}}),mo.comboChapter({title:"#4: Parry Starter",combo:[N.FlexHit,W.HeavyPunch,W.Jump,W.Spike],commands:[[te.left,te.attack3],[te.attack2],[te.right,te.attack3],[le.Cancel]],options:{dummyInput:"6c",rePosition:fe.Center}}),mo.comboChapter({title:"#5: Lemon Rapid",combo:[Q.Lemon,W.Jump,W.Gutpunch,W.HeavyPunch,W.Uppercut,W.HeavyPunch,W.HeavyPunch,W.Jump,W.Spike],commands:[[te.attack3].concat(Object(k.a)(he)),[te.right,te.attack3],[te.attack1],[le.Cancel,te.attack2],[le.Cancel,te.attack2],[te.attack2],[te.attack2],[te.right,te.attack3],[le.Cancel]],options:{enableMeter:!0,rePosition:fe.Center}}),mo.comboChapter({title:"#6: Lemon Loops",combo:[Q.Lemon,W.Gutpunch,W.HeavyPunch,W.Uppercut,F.Rapid,Q.Lemon,W.Gutpunch,W.HeavyPunch,W.Uppercut,F.Rapid,Q.Lemon,W.Gutpunch,W.HeavyPunch,W.Uppercut,W.Jump,W.Spike],commands:[[te.attack3],[te.attack1],[le.Cancel,te.attack2],[le.Cancel,te.attack2],Object(k.a)(he),[te.attack3],[te.attack1],[le.Cancel,te.attack2],[le.Cancel,te.attack2],Object(k.a)(he),[te.attack3],[te.attack1],[le.Cancel,te.attack2],[le.Cancel,te.attack2],[te.right,te.attack3],[le.Cancel]],options:{enableMeter:!0,rePosition:fe.Left}})]}),Ao=vo.loadTutorial({title:"".concat(ni.Characters.Pork.name," Combos"),fighter1:ni.Characters.Pork,fighter2:ni.Characters.Rice,chapters:[mo.comboChapter({title:"#1: Chop Ender",combo:[W.Gutpunch,W.HeavyPunch,W.Palm,U.Chop],commands:[[te.attack1],[le.Cancel,te.attack2],[le.Cancel,te.attack1],[le.Cancel,te.attack3]],options:{rePosition:fe.Center}}),mo.comboChapter({title:"#2: Launch Combo",combo:[W.Jump,W.Gutpunch,W.HeavyPunch,W.Uppercut,W.Jump,W.Spike],commands:[[te.right,te.attack3],[te.attack1],[le.Cancel,te.attack2],[le.Cancel,te.attack2],[te.right,te.attack3],[le.Cancel]],options:{rePosition:fe.Center}}),mo.comboChapter({title:"#3: Chop Starter",combo:[U.Chop,W.Gutpunch,W.HeavyPunch,W.Uppercut,W.HeavyPunch,W.HeavyPunch,W.Jump,W.Spike],commands:[[te.left,te.attack3],[te.attack1],[le.Cancel,te.attack2],[le.Cancel,te.attack2],[te.attack2],[te.attack2],[te.right,te.attack3],[le.Cancel]],options:{rePosition:fe.Right}}),mo.comboChapter({title:"#4: Caber Starter",combo:[U.CaberTossStart,W.Gutpunch,U.Chop],commands:[[te.attack3],[te.attack1],[te.left,te.attack3]],options:{enableBlocking:!0,rePosition:fe.Left}}),mo.comboChapter({title:"#5: Chop Rapid",combo:[U.Chop,F.Rapid,W.HeavyPunch,W.Palm,U.Chop],commands:[[te.left,te.attack3],Object(k.a)(he),[te.attack2],[le.Cancel,te.attack1],[le.Cancel,te.attack3]],options:{enableMeter:!0,rePosition:fe.Left}}),mo.comboChapter({title:"#6: Chop Loops",combo:[U.Chop,W.Gutpunch,W.HeavyPunch,W.Uppercut,F.Rapid,U.Chop,W.Gutpunch,W.HeavyPunch,W.Uppercut,F.Rapid,U.Chop,W.Gutpunch,W.HeavyPunch,W.Palm,U.Chop],commands:[[te.left,te.attack3],[te.attack1],[le.Cancel,te.attack2],[le.Cancel,te.attack2],Object(k.a)(he),[te.left,te.attack3],[te.attack1],[le.Cancel,te.attack2],[le.Cancel,te.attack2],Object(k.a)(he),[te.left,te.attack3],[te.attack1],[le.Cancel,te.attack2],[le.Cancel,te.attack1],[le.Cancel,te.attack3]],options:{enableMeter:!0,rePosition:fe.Left}})]}),To=vo.loadTutorial({title:"".concat(ni.Characters.Onion.name," Combos"),fighter1:ni.Characters.Onion,fighter2:ni.Characters.Beef,chapters:[mo.comboChapter({title:"#1: Basic Combo",combo:[q.Jump,q.Flick,q.Sweep,V.Hopkick],commands:[[te.right,te.attack3],[te.attack1],[le.Cancel,te.attack2],[le.Cancel,te.attack3]],options:{rePosition:fe.Center}}),mo.comboChapter({title:"#2: Corner Juggle",combo:[q.Flick,q.Sweep,q.Roundhouse,q.Roundhouse,V.Hopkick,q.Sweep,q.Roundhouse],commands:[[te.attack1],[le.Cancel,te.attack2],[le.Cancel,te.attack2],[te.left,te.attack2],[te.attack3],[te.attack2],[le.Cancel,te.attack2]],options:{rePosition:fe.Right}}),mo.comboChapter({title:"#3: Link Combo",combo:[q.Jump,q.Sweep,q.Trip,q.Flick,q.Sweep,V.Hopkick],commands:[[te.right,te.attack3],[te.attack2],[le.Cancel,te.attack1],[te.attack1],[le.Cancel,te.attack2],[le.Cancel,te.attack3]],options:{rePosition:fe.Left}}),mo.comboChapter({title:"#4: Rapid Combo",combo:[q.Jump,q.Flick,q.Sweep,V.Hopkick,F.Rapid,q.Flick,q.Sweep,q.Roundhouse,q.Jump,V.Hopkick,q.Sweep,V.Hopkick],commands:[[te.right,te.attack3],[te.attack1],[le.Cancel,te.attack2],[le.Cancel,te.attack3],Object(k.a)(he),[te.attack1],[le.Cancel,te.attack2],[le.Cancel,te.attack2],[te.right,te.attack3],[te.attack3],[te.attack2],[le.Cancel,te.attack3]],options:{enableMeter:!0,rePosition:fe.Right}}),mo.comboChapter({title:"#5: Parry Starter",combo:[V.DeflectHit,q.Sweep,q.Roundhouse,q.Sweep,V.Hopkick,q.Sweep,q.Roundhouse],commands:[[te.left,te.attack3],[te.attack2],[le.Cancel,te.attack2],[te.attack2],[le.Cancel,te.attack3],[te.attack2],[le.Cancel,te.attack2]],options:{dummyInput:"6c",rePosition:fe.Left}}),mo.comboChapter({title:"#6: Trip Loops",combo:[V.Hopkick,F.Rapid,q.Flick,q.Sweep,q.Trip,q.Flick,q.Sweep,V.Hopkick,F.Rapid,q.Flick,q.Sweep,q.Trip,q.Flick,q.Sweep,V.Hopkick],commands:[[te.attack3],Object(k.a)(he),[te.attack1],[le.Cancel,te.attack2],[le.Cancel,te.attack1],[te.attack1],[le.Cancel,te.attack2],[le.Cancel,te.attack3],Object(k.a)(he),[te.attack1],[le.Cancel,te.attack2],[le.Cancel,te.attack1],[te.attack1],[le.Cancel,te.attack2],[le.Cancel,te.attack3]],options:{enableMeter:!0,rePosition:fe.Left}})]}),Mo=vo.loadTutorial({title:"".concat(ni.Characters.Garlic.name," Combos"),fighter1:ni.Characters.Garlic,fighter2:ni.Characters.Pork,chapters:[mo.comboChapter({title:"#1: Basic Combo",combo:[q.Jump,q.Flick,q.Sweep,q.Roundhouse],commands:[[te.right,te.attack3],[te.attack1],[le.Cancel,te.attack2],[le.Cancel,te.attack2]],options:{rePosition:fe.Center}}),mo.comboChapter({title:"#2: Corner Juggle",combo:[q.Flick,q.Sweep,q.Roundhouse,q.Jump,q.Roundhouse,q.Sweep,q.Roundhouse],commands:[[te.attack1],[le.Cancel,te.attack2],[le.Cancel,te.attack2],[te.right,te.attack3],[te.left,te.attack2],[te.attack2],[le.Cancel,te.attack2]],options:{rePosition:fe.Right}}),mo.comboChapter({title:"#3: Link Combo",combo:[q.Jump,q.Sweep,q.Trip,q.Flick,q.Sweep,q.Roundhouse],commands:[[te.right,te.attack3],[te.attack2],[le.Cancel,te.attack1],[te.attack1],[le.Cancel,te.attack2],[le.Cancel,te.attack2]],options:{rePosition:fe.Left}}),mo.comboChapter({title:"#4: Rapid Combo",combo:[Y.DashStart,Y.DashLight,q.Flick,q.Sweep,q.Trip,F.Rapid,q.Flick,q.Sweep,q.Trip,q.Flick,q.Sweep,q.Roundhouse],commands:[[te.attack3],[le.Cancel,te.attack1],[te.attack1],[le.Cancel,te.attack2],[le.Cancel,te.attack1],Object(k.a)(he),[te.attack1],[le.Cancel,te.attack2],[le.Cancel,te.attack1],[te.attack1],[le.Cancel,te.attack2],[le.Cancel,te.attack2]],options:{enableMeter:!0,rePosition:fe.Right}}),mo.comboChapter({title:"#5: Dash Juggle",combo:[q.Sweep,q.Trip,q.Flick,q.Sweep,q.Roundhouse,Y.DashStart,q.Sweep,Y.DashAgain,q.Flick,q.Sweep,q.Roundhouse],commands:[[te.attack2],[le.Cancel,te.attack1],[te.attack1],[le.Cancel,te.attack2],[le.Cancel,te.attack2],[te.attack3],[te.attack2],[le.Cancel,te.attack3],[te.attack1],[le.Cancel,te.attack2],[le.Cancel,te.attack2]],options:{rePosition:fe.Left}}),mo.comboChapter({title:"#6: Sneak Combo",combo:[q.Sweep,q.Trip,q.Flick,q.Sweep,q.Roundhouse,Y.DashStart,Y.Sneak,q.Jump,q.Sweep,q.Roundhouse],commands:[[te.attack2],[le.Cancel,te.attack1],[te.attack1],[le.Cancel,te.attack2],[le.Cancel,te.attack2],[te.attack3],[le.Cancel,te.attack3],[te.right,te.attack3],[te.attack2],[le.Cancel,te.attack2]],options:{rePosition:fe.Left}})]}),Po=function(e,t){return new mo({name:"Slap",steps:[new fo("Slap",{rePosition:fe.Center}),new bo("\n        Slap is a fast, two-hitting attack. Use it to attack when they're close to you.\n      "),new go({title:"Slap",combo:[L.Slap],commands:[[te.attack1]]}),ko(),new bo("\n        Slap hits high and lasts a long time, making it a pretty good anti-air. Wait for your opponent to jump at you, then slap them out of the sky.\n      ",{rePosition:fe.Center}),new go({title:"Slap anti-air",combo:[L.Slap],commands:[[te.attack1]],options:{dummyInput:"6c"}}),ko(),new bo("\n        ".concat(e," has other anti-air options (which you'll see later),\n        but the free juggle state you get off Slap can often lead to bigger damage!\n      "))].concat(Object(k.a)(t),[new bo("\n        Don't forget that Slap is your fastest attack.\n        If the opponent is close, Slap them away to make space!\n      ",{canRestart:!0})])})},Ro=function(e,t){return new mo({name:"Whip",steps:[new fo("Whip",{rePosition:fe.Center}),new bo("\n        ".concat(e,"'s signature move is their Heavy attack, the Whip.\n        Try to hit the opponent with your Heavy attack.\n      ")),new go({title:"Heavy attack",combo:[L.Whip1],commands:[[te.attack2]]}),ko(),new bo("\n        Whip is a versatile move with 3 steps.\n        Trying pressing the Heavy attack\n        a second time to activate ".concat(ni.getCoreFighterMove(L.Whip2).displayName,"\n      "),{rePosition:fe.Center}),new go({title:"2-hit combo",combo:[L.Whip1,L.Whip2],commands:[[te.attack2],[le.Cancel,te.attack2]]}),ko(),new bo("\n        You did more damage!\n        But now you're closer to the opponent.\n        ".concat(e," doesn't usually want to be this close.\n      ")),new bo("\n        If you press Heavy a third time, you'll activate ".concat(ni.getCoreFighterMove(L.Whip3).displayName,".\n        This sends the opponent flying and does the most damage.\n      "),{rePosition:fe.Center}),new go({title:"3-hit combo",combo:[L.Whip1,L.Whip2,L.Whip3],commands:[[te.attack2],[le.Cancel,te.attack2],[le.Cancel,te.attack2]]}),ko(),new bo("\n        You did a lot of damage and launched\n        the opponent far away. Great job!\n        But be careful. If ".concat(ni.getCoreFighterMove(L.Whip3).displayName," is blocked,\n        your guard is down and the opponent gets a free punish.\n      "))].concat(Object(k.a)(t),[new bo("\n        Whip is the core of ".concat(e,"'s gameplan.\n        Get to know it's range.\n        Practice reacting to whether your opponent got hit\n        so you know it's safe to commit to the followup attacks!\n      "),{canRestart:!0})])})},Io=vo.loadTutorial({title:"".concat(ni.Characters.Noodle.name," Guide"),fighter1:ni.Characters.Noodle,fighter2:ni.Characters.Onion,chapters:($i=ni.Characters.Noodle.name,[Po($i,[new bo("\n      Back to the ground.\n      Try pressing Light for Slap,\n      and then press Heavy during either hit to go straight into Trample.\n    ",{rePosition:fe.Center}),new go({title:"Slap > Trample",combo:[L.Slap,G.Trample],commands:[[te.attack1],[le.Cancel,te.attack2]]}),ko(),new bo("\n      This gives you some extra damage and corner carry,\n      at the risk of putting you right next to your opponent.\n    ")]),Ro($i,[new bo("\n      ".concat($i," has one last unique property for Whip.\n      On the third hit, you can press Special to go straight into Prep.\n    "),{rePosition:fe.Center}),new go({title:"Whip > Prep",combo:[L.Whip1,L.Whip2,L.Whip3,G.PrepSoup],commands:[[te.attack2],[le.Cancel,te.attack2],[le.Cancel,te.attack2],[le.Cancel,te.attack3]]}),ko(),new bo("\n      This gives you more than enough time to set up a Soup or two!\n    ")]),new mo({name:"Trample",steps:[new fo("Trample",{rePosition:fe.Center}),new bo("\n        Trample is quick attack that covers a lot of ground!\n      "),new go({title:"Trample",combo:[G.Trample],commands:[[te.left,te.attack2]]}),ko(),new bo("\n        You can combo into Trample off Slap!\n        Just press Heavy during either the first or second hit of Slap.\n      ",{rePosition:fe.Close}),new go({title:"Slap > Trample",combo:[L.Slap,G.Trample],commands:[[te.attack1],[le.Cancel,te.attack2]]}),ko(),new bo("\n        Trample is also great for picking up juggle combos,\n        as the opponent will never fall out of Trample early.\n      "),new bo("\n        Wait for the opponent to Jump,\n        antiair them with Slap,\n        and then Trample to catch them before they fall!\n      ",{rePosition:fe.Center}),new go({title:"Juggle into Trample",combo:[L.Slap,G.Trample],commands:[[te.attack1],[te.left,te.attack2]],options:{dummyInput:"6c"}}),ko(),new bo("\n        Trample is a reliable combo tool and is safe when blocked.\n        Throw it out and maybe you'll catch your opponent by surprise!\n      ",{canRestart:!0})]}),new mo({name:"Prep, Serve, Soup",steps:[new fo("Prep, Serve, Soup",{rePosition:fe.Center}),new bo("\n        Soup is a very unique special attack.\n        By pressing Special, Noodle will start Preparing a dish.\n        You can then press any button again to Serve the dish,\n        at which point a bowl of Soup appears!\n      "),new bo("\n        Try to hit the opponent with a bowl of Soup.\n        Note: if you have two Soups on screen,\n        you must wait for one of them to disappear before you can Prep and Serve another one.\n      "),new go({title:"Soup",combo:[Q.Soup],commands:[[te.attack3]]}),ko(),new bo("\n        The Soup has a bit of a kick to it - so much that your opponent pops up!\n        You can use this to start a combo.\n      "),new bo("\n        Serve a Soup under the opponent,\n        then hit them with your standard 3-hit Whip combo!\n      "),new go({title:"Soup > Combo",combo:[Q.Soup,L.Whip1,L.Whip2,L.Whip3],commands:[[te.attack3],[te.attack2],[le.Cancel,te.attack2],[le.Cancel,te.attack2]]}),ko(),new bo("\n        Soup is a very versatile and powerful tool.\n        However, you are defenseless while your arm is in the ground.\n        How can you safely start cooking?\n      "),new bo("\n        Hit the opponent with your standard Whip combo,\n        but when the third hit connects,\n        press Special to immediately start serving.\n      "),new go({title:"Combo > Soup",combo:[L.Whip1,L.Whip2,L.Whip3,G.PrepSoup],commands:[[te.attack2],[le.Cancel,te.attack2],[le.Cancel,te.attack2],[le.Cancel,te.attack3]]}),ko(),new bo("\n        Keep in mind that your opponent can attack your bowls of Soup to make them disappear.\n        Be on the lookout for someone trying to punch your Soup,\n        and maybe you can Whip them while they're distracted ;)\n      ",{canRestart:!0})]}),new mo({name:"Frenzy",steps:[new fo("Frenzy",{rePosition:fe.Center}),new bo("\n        Frenzy is an armored attack that sends your opponent flying. Use it when you're under pressure!\n      "),new go({title:"Frenzy",combo:[G.Frenzy],commands:[[te.left,te.attack3]],options:{dummyInput:"5c",dummyInterval:1}}),ko(),new bo("\n        Frenzy's armor means that, if timed right, it should beat any attack by the opponent.\n        But be careful! Frenzy is very punishable if blocked. Guess wrong, and you could lose a lot of life.\n      ",{canRestart:!0})]}),new mo({name:"Buzz Saw",steps:[new fo("Buzz Saw",{rePosition:fe.Center}),new bo("\n        Buzz Saw is Noodle's special jump attack.\n        If your opponent blocks, the Buzz Saw will do a ton of chip damage!\n      "),new bo(jo),new go({title:"Buzz Saw",combo:[G.BuzzSaw],commands:[[te.right,te.attack3,te.left]]}),ko(),new bo("\n        Buzz Saw is better than your normal jump when blocked,\n        but it has less range and cannot combo into anything on hit.\n        Only use it when you know your opponent will block!\n      ",{canRestart:!0}),yo($i)]})])}),Bo=vo.loadTutorial({title:"".concat(ni.Characters.Rice.name," Guide"),fighter1:ni.Characters.Rice,fighter2:ni.Characters.Garlic,chapters:function(e){return[Po(e,[new bo("\n      Back to the ground.\n      Try pressing Light for Slap,\n      and then press Heavy during either hit to go straight into Swipe.\n    ",{rePosition:fe.Center}),new go({title:"Slap > Swipe",combo:[L.Slap,z.Swipe],commands:[[te.attack1],[le.Cancel,te.attack2]]}),ko(),new bo("\n      Canceling Slap into Swipe can help help\n      convert a random Slap into an impressive amount of damage.\n      See the Combo Trials for examples!\n    ")]),Ro(e,[]),new mo({name:"Swipe",steps:[new fo("Swipe",{rePosition:fe.Center}),new bo("\n        Swipe is like a slightly slower Whip that does chip damage on block.\n        Use it to pressure opponents who won't stop blocking.\n      "),new go({title:"Swipe",combo:[z.Swipe],commands:[[te.left,te.attack2]]}),ko(),new bo("\n        You can also combo into Swipe by pressing Light during Whip. This is less rewarding than comboing into Whip Pounce, but it's less risky when blocked.\n      ",{rePosition:fe.Center}),new go({title:"Whip > Swipe",combo:[L.Whip1,z.Swipe],commands:[[te.attack2],[le.Cancel,te.attack1]]}),ko(),new bo("\n        Mix in a healthy balance of Whip and Swipe and your opponent will be defeated in no time!\n      ",{canRestart:!0})]}),new mo({name:"Swat",steps:[new fo("Swat",{rePosition:fe.Center}),new bo("\n        Swat is a fast and powerful move,\n        but it can only hit an airborne opponent.\n        Hit the opponent when they jump!\n      "),new go({title:"Swat anti-air",combo:[z.SwatStart],commands:[[te.attack3]],options:{dummyInput:"6c"}}),ko(),new bo("\n        The second hit of Whip sends the enemy airborne.\n        Use this to combo into Swat!\n      ",{rePosition:fe.Center}),new go({title:"Swat combo",combo:[L.Whip1,L.Whip2,z.SwatStart],commands:[[te.attack2],[le.Cancel,te.attack2],[le.Cancel,te.attack3]]}),ko(),new bo("\n        Swat is a strong anti-air and combo ender that can lead to big damage.\n        If you see your opponent leave the ground, Swat them out of the sky!\n      ",{canRestart:!0})]}),new mo({name:"Teleport",steps:[new fo("Teleport",{rePosition:fe.Left}),new bo("\n        Teleport makes Rice disappear, then reappear a fixed distance away.\n        The startup is one of the few invulnerable moves in the game, meaning that before ".concat(e," reappears, they cannot be hit.\n        This can help Rice get out a sticky situation!\n      ")),new bo("\n        If Rice reappears on top of the opponent, Rice will hit them!\n        The positioning can be difficult though.\n        Teleport once to get out of the corner,\n        then walk around and Teleport at different distances to try and hit the opponent!\n      "),new go({title:"Teleport",combo:[z.Teleport],commands:[[te.left,te.attack3]]}),ko(),new bo("\n        Be careful though! Teleport always travels the same distance and you can be hit as you're reappearing.\n        Try to use it only when you're confident the opponent has committed to an attack.\n        A patient opponent will wait for your teleport and hit you where you reappear.\n      ",{canRestart:!0})]}),new mo({name:"Jump Drill",steps:[new fo("Jump Drill",{rePosition:fe.Center}),new bo("\n        Jump Drill is Rice's special jump attack.\n        It lets Rice advance quickly and apply up close pressure.\n      "),new bo(jo),new go({title:"Jump Drill",combo:[z.JumpDrill],commands:[[te.right,te.attack3,te.left]]}),ko(),new bo("\n        Jump Drill is much less rewarding than your normal jump attack,\n        so don't get in the habit of doing it all the time.\n        That said, a well timed Drill can surprise the opponent and catch them off guard!\n      ",{canRestart:!0}),yo(e)]})]}(ni.Characters.Rice.name)}),Do=function(e){return new mo({name:"Gutpunch",steps:[new fo("Gutpunch",{rePosition:fe.Center}),new bo("\n        Gutpunch is your fastest attack. Use it to attack close-up opponents.\n      "),new go({title:"Gutpunch",combo:[W.Gutpunch],commands:[[te.attack1]]}),ko(),new bo("\n        Gutpunch cancels into Punch, which starts most of ".concat(e,"'s combos. To cancel, press the second attack when the first attack hits.\n      "),{rePosition:fe.Center}),new go({title:"Gutpunch combo",combo:[W.Gutpunch,W.HeavyPunch],commands:[[te.attack1],[le.Cancel,te.attack2]]}),ko(),new bo("\n        Gutpunch isn't fancy, but its fast and enables a bunch of advanced combos. Learn it's (limited) range carefully.\n      ",{canRestart:!0})]})},Ho=function(e){return new mo({name:"Punch",steps:[new fo("Punch",{rePosition:fe.Center}),new bo("\n        Punch is ".concat(e,"'s most important move. It's fast and goes far, and can lead into big damage.\n      ")),new bo("\n        By pressing Heavy Attack twice, Punch can cancel into Uppercut.\n      "),new go({title:"Punch > Uppercut",combo:[W.HeavyPunch,W.Uppercut],commands:[[te.attack2],[le.Cancel,te.attack2]]}),ko(),new bo("\n        No matter where you are on screen, you can always follow up Uppercut by Jumping. When ".concat(e," jumps into an airborne opponent, they spike them to the ground!\n      "),{rePosition:fe.Left}),new go({title:"Combo into Jump",combo:[W.HeavyPunch,W.Uppercut,W.Jump,W.Spike],commands:[[te.attack2],[le.Cancel,te.attack2],[te.right,te.attack3],[le.Cancel]]}),ko(),new bo("\n        If you Uppercut in the corner, you can tack on more attacks before Jumping. Try to launch your opponent, Punch them once, then Jump.\n      ",{rePosition:fe.Right}),new go({title:"Corner Combo",combo:[W.HeavyPunch,W.Uppercut,W.HeavyPunch,W.Jump,W.Spike],commands:[[te.attack2],[le.Cancel,te.attack2],[te.attack2],[te.right,te.attack3],[le.Cancel]]}),ko(),new bo("\n        The Uppercut move is strong, but risky. If your opponent blocks the Punch and Uppercut, you'll be left vulnerable to counterattack while ".concat(e," finds their footing.\n      "),{rePosition:fe.Center}),new bo("\n        If you want to do more damage off Punch without committing to a risky Uppercut, try cancelling into Palm.\n      "),new go({title:"Punch > Palm",combo:[W.HeavyPunch,W.Palm],commands:[[te.attack2],[le.Cancel,te.attack1]]}),ko(),new bo("\n        A blocked Palm is safe when done from max range. Palm is a low risk, low reward option compared to Uppercut's high risk, high reward.\n      ",{canRestart:!0})]})},Eo=vo.loadTutorial({title:"".concat(ni.Characters.Beef.name," Guide"),fighter1:ni.Characters.Beef,fighter2:ni.Characters.Noodle,chapters:function(e){return[Do(e),Ho(e),new mo({name:"Lemon",steps:[new fo("Lemon",{rePosition:fe.Center}),new bo("\n        Lemon is a traditional projectile attack. Throw it to harass the opponent from afar.\n      "),new go({title:"Lemon",combo:[N.LemonThrow],commands:[[te.attack3]]}),ko(),new bo("\n        If you hit your opponent with a Lemon up close,\n        you can follow it up with a Gutpunch into a combo.\n      ",{rePosition:fe.Close}),new go({title:"Close Lemon Combo",combo:[N.LemonThrow,W.Gutpunch,W.HeavyPunch,W.Palm],commands:[[te.attack3],[te.attack1],[le.Cancel,te.attack2],[le.Cancel,te.attack1]]}),ko(),new bo("\n        Most characters will try to avoid the Lemon by jumping.\n        If you throw it from far enough away, you throw Lemon, then anti-air their jump!\n      ",{canRestart:!0})]}),new mo({name:"Indecisive Lemon",steps:[new fo("Indecisive Lemon",{rePosition:fe.Center}),new bo("\n        Indecisive Lemon is an advanced technique you can use to fake out your opponents.\n        Press Special to start throwing a Lemon, then immediately hold back to change your mind!\n      "),new go({title:"Indecisive Lemon",combo:[N.LemonThrow,N.LemonFake],commands:[[te.attack3],[le.Cancel,te.left]]}),ko(),new bo("\n        If your opponent keeps jumping over your Lemons, throw a Indecisive Lemon to bait the jump and then anti-air it!\n      ",{canRestart:!0})]}),new mo({name:"Flex",steps:[new fo("Flex",{rePosition:fe.Center}),new bo("\n        Flex is a parry attack. Press back + Special to start flexing your muscles. If your opponent hits you right when you start flexing, you will hit them with a devastating counter attack.\n      "),new go({title:"Flex > BEEFCAKE",combo:[N.FlexHit],commands:[[te.left,te.attack3]],options:{enableBlocking:!0,dummyInput:"6c"}}),ko(),new bo("\n        Note: Beef gains a little LOVE meter anytime they Flex, whether it parries an attack or not! If the opponent is far away, don't be afraid to Flex on them.\n      ",{canRestart:!0})]}),new mo({name:"Air Lemon",steps:[new fo("Air Lemon",{rePosition:fe.Center}),new bo("\n        Air Lemon is Beef's special jump attack.\n        Beef jumps into the air and throws a Lemon in a downward arc.\n      "),new bo(jo),new go({title:"Air Lemon",combo:[Q.AirLemon],commands:[[te.right,te.attack3,te.left]]}),ko(),new bo("\n        Air Lemon is a powerful way to start a combo and\n        can help Beef advance from fullscreen.\n        However, it comes out much slower than the normal jump attack,\n        giving your opponent more time to anti-air.\n        Lemon with caution!\n      ",{canRestart:!0}),yo(e)]})]}(ni.Characters.Beef.name)}),_o=vo.loadTutorial({title:"".concat(ni.Characters.Pork.name," Guide"),fighter1:ni.Characters.Pork,fighter2:ni.Characters.Rice,chapters:function(e){return[Do(e),Ho(e),new mo({name:"Caber Toss",steps:[new fo("Caber Toss",{rePosition:fe.Center}),new bo("\n        Caber Toss is an alternate grab attack.\n        Instead of throwing the opponent behind you, it pops them up for a followup attack.\n      "),new go({title:"Caber Toss",combo:[U.CaberTossStart],commands:[[te.attack3]],options:{enableBlocking:!0}}),ko(),new bo("\n        After you've tossed them into the air, try hitting them with your Jump attack!\n      "),new go({title:"Caber Toss",combo:[U.CaberTossStart,W.Jump,W.Spike],commands:[[te.attack3],[te.right,te.attack3],[le.Cancel]],options:{enableBlocking:!0}}),ko(),new bo("\n        So why Caber Toss over the default throw?\n        Although Caber Toss is much slower than your normal throw,\n        it launches the opponent forward and can lead to much more damage.\n      "),new bo("\n        Just like throw, don't get predictable! If you go for it every time you get close, you'll get hit.\n        The mere threat of the throw can make opponents act sloppy. Get close, and stay patient!\n      ",{canRestart:!0})]}),new mo({name:"Chop",steps:[new fo("Chop",{rePosition:fe.Center}),new bo("\n        Chop is a armored attack.\n        If you get hit during the startup, you will take reduced damage and keep attacking.\n        Use Chop to armor through a Jumping attack.\n      "),new go({title:"Chop",combo:[U.Chop],commands:[[te.left,te.attack3]],options:{enableBlocking:!0,dummyInput:"6c"}}),ko(),new bo("\n        Chop does not have armor on frame 1, making it a bad option when getting off the ground.\n        If you try to mash Chop, you will get hit!\n      "),new bo("\n        Chop's large range and long armor + attack duration make it very reliable as an anti-air.\n        Chop is punishable, but only if blocked at very close range. Stick to using it mostly at max range.\n      ",{canRestart:!0})]}),new mo({name:"Empty Jump",steps:[new fo("Empty Jump",{rePosition:fe.Center}),new bo("\n        Empty Jump is Pork's special jump attack.\n        Pork jumps into the air... and then does nothing!\n      "),new bo(jo),new go({title:"Empty Jump",combo:[U.EmptyJump],commands:[[te.right,te.attack3,te.left]]}),ko(),new bo("\n        Empty Jump can catch your opponent off guard.\n        If they sit there trying to block or parry your jump attack,\n        you can surprise them by quickly landing\n        and going for a throw!\n      ",{canRestart:!0}),yo(e)]})]}(ni.Characters.Pork.name)}),Fo=function(e){return new mo({name:"Flick",steps:[new fo("Flick",{rePosition:fe.Center}),new bo("\n        Flick is your fastest attack. Use it to attack close up opponents.\n      "),new go({title:"Flick",combo:[q.Flick],commands:[[te.attack1]]}),ko(),new bo("\n        Flick is different from Trip, which you get by pressing Light while holding back.\n      ",{rePosition:fe.Center}),new go({title:"Trip",combo:[q.Trip],commands:[[te.left,te.attack1]]}),ko(),new bo("\n        Trip is slow and very short range, but leaves the opponent stunned for a long time on hit OR block.\n      "),new bo("\n        Flick cancels into Sweep, which starts most of ".concat(e,"'s combos. To cancel, press the second attack when the first attack hits.\n      "),{rePosition:fe.Center}),new go({title:"Flick combo",combo:[q.Flick,q.Sweep],commands:[[te.attack1],[le.Cancel,te.attack2]]}),ko(),new bo("\n        Flick is also your most reliable anti-air. Wait for your opponent to jump at you, then flick them out of the sky.\n      ",{rePosition:fe.Center}),new go({title:"Flick anti-air",combo:[q.Flick],commands:[[te.attack1]],options:{enableBlocking:!0,dummyInput:"6c"}}),ko(),new bo("\n        Flick may seem unimpressive at first glance, but its high hitbox + speed make it a very reliable anti-air.\n        Flick is also the only move that's fast enough to combo after Trip, making it essential for ".concat(e,"'s more advanced combos.\n      "),{canRestart:!0})]})},Lo=function(e){return new mo({name:"Sweep",steps:[new fo("Sweep",{rePosition:fe.Center}),new bo("\n        Sweep is the most situational Heavy in the game.\n        Compared to other characters, the range can make poking with it difficult.\n        Once you land it though, Sweep leads into a lot of possibilities.\n      "),new bo("\n        Let's start off with a simple combo. Do Sweep > Roundhouse by pressing Heavy for Sweep, then Heavy again when the Sweep hits.\n      "),new go({title:"Sweep > Roundhouse",combo:[q.Sweep,q.Roundhouse],commands:[[te.attack2],[le.Cancel,te.attack2]]}),ko(),new bo("\n        Roundhouse leads to big damage in the corner.\n        After launching them, try to hit them with another Sweep > Roundhouse before they hit the ground.\n      ",{rePosition:fe.Right}),new go({title:"Sweep > Roundhouse loop",combo:[q.Sweep,q.Roundhouse,q.Sweep,q.Roundhouse],commands:[[te.attack2],[le.Cancel,te.attack2],[te.attack2],[le.Cancel,te.attack2]]}),ko(),new bo("\n        You can perform Roundhouse by itself by holding back when pressing Heavy.\n        Launch your opponent with the combo, then do a single Roundhouse attack before they get low enough for your second combo.\n      ",{rePosition:fe.Right}),new go({title:"Roundhouse loop",combo:[q.Sweep,q.Roundhouse,q.Roundhouse,q.Sweep,q.Roundhouse],commands:[[te.attack2],[le.Cancel,te.attack2],[te.left,te.attack2],[te.attack2],[le.Cancel,te.attack2]]}),ko(),new bo("\n        Once you launch the opponent, you can only hit them a few more times before they land or fall out of the combo.\n        But we can extend the combo by doing more attacks before the first Roundhouse launches them!\n      ",{rePosition:fe.Center}),new bo("\n        Try cancelling Flick > Sweep > Roundhouse. Like before, you need to press the followup attack when the previous one connects.\n      "),new go({title:"Flick > Sweep > Roundhouse",combo:[q.Flick,q.Sweep,q.Roundhouse],commands:[[te.attack1],[le.Cancel,te.attack2],[le.Cancel,te.attack2]]}),ko(),new bo('\n        Sweep can also cancel into Trip, but only on hit. Cancel Sweep > Trip, and then try to "link" a Flick after the Trip by pressing Flick after Trip finishes.\n      ',{rePosition:fe.Center}),new go({title:"Sweep > Trip",combo:[q.Sweep,q.Trip,q.Flick],commands:[[te.attack2],[le.Cancel,te.attack1],[te.attack1]]}),ko(),new bo('\n        When you press the next button during the current attack, we call it a "cancel".\n        When you press the next button after the current attack, we call it a "link".\n      '),new bo("\n        Now let's put it all together! Do the Sweep > Trip cancel combo, and then link into Flick > Sweep > Roundhouse to launch them skyward!\n      ",{rePosition:fe.Center}),new go({title:"Linking two combos",combo:[q.Sweep,q.Trip,q.Flick,q.Sweep,q.Roundhouse],commands:[[te.attack2],[le.Cancel,te.attack1],[te.attack1],[le.Cancel,te.attack2],[le.Cancel,te.attack2]]}),ko(),new bo("\n        Now that they're airborne, you can do the old corner loops!\n        See the ".concat(e," combo trials for more practice.\n      "),{canRestart:!0})]})},Go=vo.loadTutorial({title:"".concat(ni.Characters.Onion.name," Guide"),fighter1:ni.Characters.Onion,fighter2:ni.Characters.Pork,chapters:function(e){return[Fo(e),Lo(e),new mo({name:"Hopkick",steps:[new fo("Hopkick",{rePosition:fe.Center}),new bo("\n        Hopkick is ".concat(e,"'s longest range attack and also their most damaging.\n      ")),new go({title:"Hopkick",combo:[V.Hopkick],commands:[[te.attack3]]}),ko(),new bo("\n        You can cancel into Hopkick from Sweep. It doesn't combo into anything without spending meter, but it's safe when blocked.\n      ",{rePosition:fe.Center}),new go({title:"Sweep > Hopkick",combo:[q.Sweep,V.Hopkick],commands:[[te.attack2],[le.Cancel,te.attack3]]}),ko(),new bo("\n        Compared to Sweep > Roundhouse, using Hopkick is safer but leads to less damage.\n      ",{canRestart:!0})]}),new mo({name:"Feint",steps:[new fo("Feint",{rePosition:fe.Center}),new bo("\n        Feint is a unique parry attack.\n        It doesn't automatically counter with big damage.\n        Rather, it allows Onion to recovery quickly and counterattack.\n      "),new bo("\n        Pork is going to attack with Chop over and over again.\n        Use Feint right before you get hit (the timing is tight),\n        then immediately counter attack with Sweep > Roundhouse.\n      "),new go({title:"Feint > Cackle",combo:[V.DeflectHit,q.Sweep,q.Roundhouse],commands:[[te.left,te.attack3],[te.attack2],[le.Cancel,te.attack2]],options:{enableBlocking:!0,dummyInput:"4c"}}),ko(),new bo("\n        Experiment in Training Mode to discover what attacks you can punish after Feinting.\n      ",{canRestart:!0})]}),new mo({name:"Long Jump",steps:[new fo("Long Jump",{rePosition:fe.Center}),new bo("\n        Long Jump is Onion's special jump attack.\n        ".concat(jo,"\n      ")),new go({title:"Long Jump",combo:[V.LongJump],commands:[[te.right,te.attack3,te.left]]}),ko(),new bo("\n        As the name implies, Long Jump travels farther than\n        Onion's normal jump attack. This can help Onion approach\n        when being zoned out.\n        However, be warned! Long Jump spends more time in the air\n        than the normal jump attack,\n        giving your opponent more time to anti-air.\n      ",{canRestart:!0}),yo(e)]})]}(ni.Characters.Onion.name)}),zo=vo.loadTutorial({title:"".concat(ni.Characters.Garlic.name," Guide"),fighter1:ni.Characters.Garlic,fighter2:ni.Characters.Beef,chapters:function(e){return[Fo(e),Lo(e),new mo({name:"Dash",steps:[new fo("Dash",{rePosition:fe.Center}),new bo('\n        Dash is a multipurpose "stance" move that enables '.concat(e," to close the gap quickly and surprise the opponent.\n      ")),new bo("\n        Pressing Special alone will do a little dash forward.\n      "),new go({title:"Dash",combo:[Y.DashStart],commands:[[te.attack3]]}),ko(),new bo("\n        Press Light during the dash and you do Trip. Remember, Trip is slow and short range, but keeps your opponent stunned for a long time.\n      ",{rePosition:fe.Center}),new go({title:"Dash > Trip",combo:[Y.DashStart,Y.DashLight],commands:[[te.attack3],[le.Cancel,te.attack1]]}),ko(),new bo("\n        Press Heavy during the dash and you slide into your Roundhouse attack. You can use this to surprise opponents and hit them quickly from half the screen away.\n      ",{rePosition:fe.Center}),new go({title:"Dash > Roundhouse",combo:[Y.DashStart,Y.DashHeavy],commands:[[te.attack3],[le.Cancel,te.attack2]]}),ko(),new bo("\n        Press Special AGAIN during the dash, and ".concat(e," will do a unique move called Sneak.\n      "),{rePosition:fe.Center}),new go({title:"Dash > Sneak",combo:[Y.DashStart,Y.Sneak],commands:[[te.attack3],[le.Cancel,te.attack3]]}),ko(),new bo("\n        Sneak will always teleport behind your opponent. Try it from far away!\n      ",{rePosition:fe.Center}),new go({title:"Dash > Sneak",combo:[Y.DashStart,Y.Sneak],commands:[[te.attack3],[le.Cancel,te.attack3]]}),ko(),new bo("\n        You can also cancel into Dash from Sweep. You can use this to start pressure when Sweeping from max range.\n      ",{rePosition:fe.Center}),new go({title:"Sweep > Dash",combo:[q.Sweep,Y.DashAgain],commands:[[te.attack2],[le.Cancel,te.attack3]]}),ko(),new bo("\n        Dash gives ".concat(e," the most advanced movement in the game.\n        Be careful though! If you're predictable, you can get hit while dashing around.\n      "),{canRestart:!0})]}),new mo({name:"Backflip",steps:[new fo("Backflip",{rePosition:fe.Center}),new bo("\n        Backflip is ".concat(e,"'s way of getting out of pressure. It is fully invincible when it starts, but ").concat(e," can be hit as they land.\n      ")),new go({title:"Backflip",combo:[Y.Backflip],commands:[[te.left,te.attack3]]}),ko(),new bo("\n        You can cancel into Backflip from Sweep for some fancy movement.\n      ",{rePosition:fe.Center}),new go({title:"Sweep > Backflip",combo:[q.Sweep,Y.Backflip],commands:[[te.attack2],[le.Cancel,te.left,te.attack3]]}),ko(),new bo("\n        Backflip is a reliable way to escape pressure, but doesn't work very well if you get cornered.\n        Be careful not to walk yourself into the corner and get stuck there!\n      ",{canRestart:!0})]}),new mo({name:"Jump Roundhouse",steps:[new fo("Jump Roundhouse",{rePosition:fe.Center}),new bo("\n        Jump Roundhouse is Garlic's special jump attack.\n        Garlic jumps into the air, only to teleport to the ground\n        and do a surprise roundhouse!\n      "),new bo(jo),new go({title:"Jump Roundhouse",combo:[Y.JumpRoundhouse],commands:[[te.right,te.attack3,te.left]]}),ko(),new bo("\n        Garlic cannot be hit while teleporting,\n        meaning that Jump Roundhouse can dodge and then punish\n        slower anti-air attacks.\n        The roundhouse attack you do after teleporting\n        is the same as your normal roundhouse,\n        so it has all the same strengths AND weaknesses.\n      ",{canRestart:!0}),yo(e)]})]}(ni.Characters.Garlic.name)}),Wo=Object(v.a)({},Oo.code,(function(){var e=li.Controls.get()[re.left];return vo.loadTutorial({title:"Basics",fighter1:ni.Characters.Beef,fighter2:ni.Characters.Noodle,chapters:[new mo({name:"Attacks",steps:[new bo("\n          Let's start with simple attacks.\n          Walk up to your opponent and hit them with a Light attack.\n          ".concat(vn.isMobile?"":"To do a Light attack, press ".concat(kn.prettyControls(e.attack1)),"\n        "),{rePosition:fe.Center}),new go({title:"Light attack",combo:[W.Gutpunch],commands:[[te.attack1]]}),ko(),new bo("\n          Light attacks are very fast, but short range.\n        "),new bo("\n          What if your opponent is further away?\n          Try using a Heavy attack.\n          ".concat(vn.isMobile?"":"To do a Heavy attack, press ".concat(kn.prettyControls(e.attack2)),"\n        "),{rePosition:fe.Center}),new go({title:"Heavy attack",combo:[W.HeavyPunch],commands:[[te.attack2]]}),ko(),new bo("\n          Heavy attack is the most common attack you'll use.\n          Every character's Heavy attack can start a combo.\n          Combos lead to big damage and better positioning.\n        "),new bo("\n          What if your opponent is REALLY far away?\n          Try closing the gap with a jumping attack!\n          To jump, Special attack while holding Forward.\n          ".concat(vn.isMobile?"":"To do a Special attack, press ".concat(kn.prettyControls(e.attack3)),"\n        "),{rePosition:fe.Center}),new go({title:"Jumping attack",combo:[W.Jump],commands:[[te.right,te.attack3]]}),ko(),new bo("\n          Jumping attacks cover a lot of ground and\n          can lead to big damage. But be careful!\n          If your opponent can react to your jump,\n          they can hit you out of the sky.\n        ",{canRestart:!0})]}),new mo({name:"Blocking",steps:[new fo("Blocking",{rePosition:fe.Center}),new bo("\n            How does blocking work?\n            As long as you are walking backwards OR standing still,\n            you will automatically block all attacks.\n            However, the moment you start attacking or walking forward, you can get hit.\n          "),new bo("\n            Practice blocking this Jumping Attack by...doing nothing!\n          "),new go({title:"Block",combo:[F.Blockstun],commands:[[]],options:{enableBlocking:!0,dummyInput:"6c"}}),ko(),new bo("\n            Remember, blocking is as easy as doing nothing!\n            When in doubt, take a moment and chill.\n          ",{canRestart:!0})]}),new mo({name:"Chip",steps:[new bo('\n            There are some downsides to blocking.\n            For example, you can still take SOME damage even when blocking, which we call "chip" damage.\n          '),new bo("\n            Chip damage is the small amount of damage you take when blocking certain special attacks.\n            Every character in Tough Love Arena has 1-2 attacks that deal chip, as a way to apply pressure on a blocking opponent.\n          "),new bo('\n            Noodle is going to do a special attack, which does a small amount of "Chip" damage on block.\n            Block the attack by doing nothing, and watch as you still lose a small amount of life.\n          ',{rePosition:fe.Left}),new go({title:"Block a Chip attack",combo:[F.Blockstun],commands:[[]],options:{enableBlocking:!0,dummyInput:"4b"}}),ko(),new bo("\n            Don't worry, Chip damage cannot kill you.\n            But if you block for too long, it might only take 1 more clean hit to finish you off!\n            You can check the Frame Data in the Extras menu to see which attacks deal chip\n          ",{canRestart:!0})]}),new mo({name:"Throws",steps:[new fo("Throws",{rePosition:fe.Center}),new bo("\n            Let's say your opponent is blocking everything.\n            You've done some chip damage, but it's slow going.\n            How do you force them to stop blocking?\n            Get up close and throw them!\n          "),new bo("\n            Throws are unblockable attacks that are balanced by having VERY short range.\n            To initiate a throw, walk up to your opponent and press ".concat(kn.prettyControls(e.attack4),".\n          ")),new go({title:"Throw",combo:[F.ThrowHit],commands:[[te.attack4]],options:{enableBlocking:!0}}),ko(),new bo("\n            Note: Throws always send the opponent behind you,\n            regardless of which direction you're holding when\n            you press the Throw button.\n          "),new bo("\n            You can escape a throw if you see it coming!\n            Try pressing Throw right when you get thrown,\n            and you will execute a Throw Tech.\n          "),new go({title:"Throw Tech",combo:[F.ThrowTech],commands:[[te.attack4]],options:{dummyInput:"5d",dummyInterval:20}}),ko(),new bo("\n            Remember, Throws only work if your opponent is blocking.\n            If your opponent starts attacking, your throw will miss, and you'll get hit.\n            If your opponent is trying to throw you, press buttons!\n          ",{canRestart:!0}),new bo("\n            Light. Heavy. Jump. Block. Chip. Throw.\n            Every character has these core techniques, but there's still more to uncover!\n            Check the Advanced section to learn about more universal mechanics.\n            Check the Character Guides to learn about a specific character.\n          "),new bo("You've completed the Basics tutorial!",{sound:Pi.Announcer.GreatJob})]})]})})),No=Object(v.a)({},Oo.code,(function(){return xo})),Uo=(eo={},Object(v.a)(eo,ni.Characters.Noodle.code,(function(){return Io})),Object(v.a)(eo,ni.Characters.Rice.code,(function(){return Bo})),Object(v.a)(eo,ni.Characters.Beef.code,(function(){return Eo})),Object(v.a)(eo,ni.Characters.Pork.code,(function(){return _o})),Object(v.a)(eo,ni.Characters.Onion.code,(function(){return Go})),Object(v.a)(eo,ni.Characters.Garlic.code,(function(){return zo})),eo),qo=(to={},Object(v.a)(to,ni.Characters.Noodle.code,(function(){return wo})),Object(v.a)(to,ni.Characters.Rice.code,(function(){return So})),Object(v.a)(to,ni.Characters.Beef.code,(function(){return Co})),Object(v.a)(to,ni.Characters.Pork.code,(function(){return Ao})),Object(v.a)(to,ni.Characters.Onion.code,(function(){return To})),Object(v.a)(to,ni.Characters.Garlic.code,(function(){return Mo})),to),Vo="granted",Yo="denied",Jo=function(){function e(){Object(l.a)(this,e)}return Object(h.a)(e,[{key:"status",get:function(){return Notification.permission}},{key:"request",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(){return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Notification.requestPermission();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"push",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(t){return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.status===Vo){e.next=6;break}return e.next=3,Notification.requestPermission();case 3:if(e.sent!==Yo){e.next=6;break}return e.abrupt("return");case 6:return e.abrupt("return",new Notification("Tough Love Arena",{body:t,icon:ni.MenuArt.Favicon}));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Ko=function(){function e(){Object(l.a)(this,e),this.status=Yo}return Object(h.a)(e,[{key:"request",value:function(){return Promise.resolve()}},{key:"push",value:function(){return Promise.resolve(void 0)}}]),e}(),Qo=!vn.isNativeApp&&!vn.isMobile?new Jo:new Ko,Zo=function(){function e(t){Object(l.a)(this,e),this.ws=t,this.cbMessage=function(e){},this.cbClose=function(e){},this.cbError=function(e){}}return Object(h.a)(e,[{key:"send",value:function(e){this.ws.send(JSON.stringify(e))}},{key:"close",value:function(){this.ws.close()}},{key:"onMessage",value:function(e){this.ws.removeEventListener("message",this.cbMessage),this.cbMessage=function(t){var n=JSON.parse(t.data);e(n)},this.ws.addEventListener("message",this.cbMessage)}},{key:"onClose",value:function(e){this.ws.removeEventListener("close",this.cbClose),this.cbClose=function(t){e()},this.ws.addEventListener("close",this.cbClose)}},{key:"onError",value:function(e){this.ws.removeEventListener("error",this.cbError),this.cbError=function(t){e()},this.ws.addEventListener("error",this.cbError)}}]),e}(),Xo=function(){function e(){Object(l.a)(this,e),this.url=void 0}return Object(h.a)(e,[{key:"get",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(t){var n,a;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(this.url+t);case 2:if(!(n=e.sent).ok){e.next=11;break}return e.next=6,n.json();case 6:return a=e.sent,wn(n.status,t,a),e.abrupt("return",a);case 11:throw new Error("".concat(n.status," ").concat(t));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"post",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(t,n){var a,r;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return wn("???",t,n),e.next=3,fetch(this.url+t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});case 3:if(!(a=e.sent).ok){e.next=12;break}return e.next=7,a.json();case 7:return r=e.sent,wn(a.status,t,r),e.abrupt("return",r);case 12:throw new Error("".concat(a.status," ").concat(t));case 13:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"authGet",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(t,n){var a,r,i;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(this.url+n,{method:"GET",headers:{"x-jwt-auth":t.auth.jwt}});case 2:if(!(a=e.sent).ok){e.next=11;break}return e.next=6,a.json();case 6:return r=e.sent,wn(a.status,n,r),e.abrupt("return",r);case 11:return e.next=13,a.text();case 13:throw i=e.sent,new Error(i);case 15:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"authPost",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(t,n,a){var r,i,o;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return wn("???",n,a),e.next=3,fetch(this.url+n,{method:"POST",headers:{"Content-Type":"application/json","x-jwt-auth":t.auth.jwt},body:JSON.stringify(a)});case 3:if(!(r=e.sent).ok){e.next=12;break}return e.next=7,r.json();case 7:return i=e.sent,wn(r.status,n,i),e.abrupt("return",i);case 12:return e.next=14,r.text();case 14:throw o=e.sent,new Error(o);case 16:case"end":return e.stop()}}),e,this)})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"websocket",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(t){var n,a,r,i,o,s;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.url.split("://"),a=Object(m.a)(n,2),r=a[0],i=a[1],o=new WebSocket(("https"===r?"wss://":"ws://")+i+t),s=function(){},e.next=6,new Promise((function(e,t){s=t,o.addEventListener("open",e),o.addEventListener("error",t),o.addEventListener("close",t)}));case 6:return o.removeEventListener("error",s),o.removeEventListener("close",s),e.abrupt("return",new Zo(o));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),$o=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).localCacheUrl="http://localhost:2600/",e.prodCacheUrl="https://cache.toughlovearena.com/",e.url=kn.Debug.LocalCache&&e.localCacheUrl||e.prodCacheUrl,e}return Object(h.a)(n,[{key:"news",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(){return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.get("api/news");case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",Promise.resolve(void 0));case 9:case"end":return e.stop()}}),e,this,[[0,6]])})));return function(){return e.apply(this,arguments)}}()},{key:"flags",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(){return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.get("api/flags");case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",Promise.resolve(void 0));case 9:case"end":return e.stop()}}),e,this,[[0,6]])})));return function(){return e.apply(this,arguments)}}()},{key:"leaderboard",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(t){var n;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="api/leaderboard"+(t.code?"/".concat(t.code):""),e.abrupt("return",this.get(n));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(Xo),es=new $o,ts=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).localApiUrl="http://localhost:8080/",e.prodApiUrl="https://us-central1-fighter-api.cloudfunctions.net/webApi/api/v1/",e.url=kn.Debug.LocalApi&&e.localApiUrl||e.prodApiUrl,e}return Object(h.a)(n,[{key:"login",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(t){var n;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.post("auth/login",t);case 2:return n=e.sent,wn(n),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"verify",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(t){var n;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.post("auth/verify",t);case 2:if(!(n=e.sent)){e.next=6;break}return ro("login",{method:"otp"}),e.abrupt("return",new Pn(n.jwts));case 6:throw new Error("verify response unable to be parsed");case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"refresh",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(t){var n;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.authPost(t,"auth/refresh",{});case 2:if(!(n=e.sent)){e.next=6;break}return ro("login",{method:"refresh"}),e.abrupt("return",{apiToken:new Pn(n.jwts),rankedResult:n.ranked});case 6:throw new Error("refresh response unable to be parsed");case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"anonymousLogin",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(){var t;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.post("auth/anonymous",{});case 2:return t=e.sent,wn(t),e.abrupt("return",new Rn(t.jwts));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"accountUpdate",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(t,n){var a;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.authPost(t,"account",n);case 2:if(!(a=e.sent)){e.next=5;break}return e.abrupt("return",new Pn(a.jwts));case 5:throw new Error("verify response unable to be parsed");case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"accountFavorite",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(t,n){var a;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.authPost(t,"account/favorite",n);case 2:if(!(a=e.sent)){e.next=5;break}return e.abrupt("return",new Pn(a.jwts));case 5:throw new Error("verify response unable to be parsed");case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"accountCustomTag",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(t,n){var a;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.authPost(t,"account/tag",n);case 2:if(!(a=e.sent)){e.next=5;break}return e.abrupt("return",new Pn(a.jwts));case 5:throw new Error("verify response unable to be parsed");case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"accountUnlock",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(t,n){var a;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.authPost(t,"account/unlock",n);case 2:if(!(a=e.sent)){e.next=5;break}return e.abrupt("return",new Pn(a.jwts));case 5:throw new Error("verify response unable to be parsed");case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"globalStatsGet",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(){return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.get("global/stats"));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"accountStatsGet",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(t){return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.authGet(t,"account/stats"));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"accountStatsRecord",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(t,n){return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.authPost(t,"account/stats",n));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"anonStatsRecord",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(t){return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.post("anon/stats",t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"rankedStart",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(t,n){return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.authPost(t,"ranked/start",n));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"rankedRecord",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(t,n){return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.authPost(t,"ranked/record",n));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"rankedVerify",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(t){var n;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.authPost(t,"ranked/verify",{});case 2:if(!(n=e.sent)){e.next=5;break}return e.abrupt("return",{apiToken:new Pn(n.jwts),result:n.ranked});case 5:throw new Error("rankedComplete response unable to be parsed");case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"rankedDisconnected",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(t){var n;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.authPost(t,"ranked/disconnected",{});case 2:if(!(n=e.sent)){e.next=5;break}return e.abrupt("return",{apiToken:new Pn(n.jwts),result:n.ranked});case 5:throw new Error("rankedComplete response unable to be parsed");case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"replayGet",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(t){var n,a;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="replay/".concat(kn.MinVersionCombat,"/").concat(t),e.next=3,this.get(n);case 3:if(!(a=e.sent)){e.next=6;break}return e.abrupt("return",a.data);case 6:throw new Error("replay not found: "+t);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"replayUpload",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(t){var n;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.id){e.next=2;break}throw new Error("cannot upload replay without id");case 2:return n={version:kn.MinVersionCombat,id:t.id,data:t},e.abrupt("return",this.post("replay",n));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"log",value:function(e){if(vn.isReactDevelopment)return wn("[APILOG] ",e);this.post("log",e).then((function(){return wn("[APILOG] ",e)})).catch((function(){return wn("[APILOG FAILED] ",e)}))}}]),n}(Xo),ns=new ts,as=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).localPresenceUrl="http://localhost:2700/",e.betaPresenceUrl="https://presence.toughlovearena.com/beta/",e.prodPresenceUrl="https://presence.toughlovearena.com/",e.url=kn.Debug.LocalPresence&&e.localPresenceUrl||kn.Debug.BetaPresence&&e.betaPresenceUrl||kn.Debug.ProdPresence&&e.prodPresenceUrl||kn.isDebug&&e.betaPresenceUrl||e.prodPresenceUrl,e}return Object(h.a)(n,[{key:"presence",value:function(e){return wn("presence pinged!",e.id,e.ptype),this.post("".concat(e.id,"/").concat(e.ptype),{})}}]),n}(Xo),rs=new as,is=new(function(){function e(){Object(l.a)(this,e),this.canvasElm={getBoundingClientRect:function(){return{width:1200,height:800}},getContext:function(){return{drawImage:function(){},fillRect:function(){},strokeRect:function(){},beginPath:function(){},moveTo:function(){},lineTo:function(){},closePath:function(){},arc:function(){},fill:function(){},stroke:function(){},fillText:function(){},strokeText:function(){},save:function(){},restore:function(){}}}},this.ctx=this.canvasElm.getContext("2d",{alpha:!1}),this.pixelRatio=1,this.touchCallback=void 0,this.calc={windowWidth:0,windowHeight:0,simBackgroundLeft:0,simBackgroundCeiling:0,perfRatio:0,pixelWidth:0,pixelHeight:0,canvasWidth:0,canvasHeight:0,playHeight:0,floor:0,scale:1,playTotalWidth:0,shakeX:0,shakeY:0,healthVertMargin:0,healthHoriMargin:0,healthHeight:0,healthWidth:0,healthTriangle:0,meterVertMargin:0,meterHoriMargin:0,meterHeight:0,meterWidth:0,meterTriangle:0,meterGap:0,timerCenterX:0,timerCenterY:0,timerTextHeight:0,timerLineWidth:0,headshotVertMargin:0,headshotHoriMargin:0,headshotRadius:0,scoreboardTextHeight:0,scoreboardHoriMargin:0,scoreboardVertMargin:0,namesTextHeight:0,namesVertMargin:0,namesHoriMargin:0,trainingMessageTextHeight:0,trainingMessageVertMargin:0,trainingMessageHoriMargin:0,inputHistoryCount:0,inputHistorySize:0,inputHistoryHoriMargin:0,inputHistoryVertMargin:0,fpsTextHeight:0,fpsHoriMargin:0,fpsVertMargin:0},this.tickInterval=4,this.shakeMultipliers=[{x:0,y:1},{x:1,y:0}]}return Object(h.a)(e,[{key:"setCanvas",value:function(e){var t=this;this.canvasElm=e,this.ctx=this.canvasElm.getContext("2d"),document.body.addEventListener("touchstart",(function(e){return t.handleTouch(e,T.Start)}),!1),document.body.addEventListener("touchend",(function(e){return t.handleTouch(e,T.End)}),!1),document.body.addEventListener("touchmove",(function(e){e.preventDefault(),e.stopPropagation(),t.handleTouch(e,T.Move)}),!1),document.body.addEventListener("contextmenu",(function(e){return e.preventDefault()})),this.fixSize()}},{key:"setTouchCallback",value:function(e){this.touchCallback=e}},{key:"handleTouch",value:function(e,t){var n=this.calc,a=this.touchCallback;if(a){var r=function(e){return{windowX:e.clientX,windowY:e.clientY,percentX:e.clientX/n.windowWidth,percentY:e.clientY/n.windowHeight}};a({pressed:t===T.Start?Array.from(e.changedTouches).map((function(e){return r(e)})):[],held:Array.from(e.touches).map((function(e){return r(e)}))})}}},{key:"scaleX",value:function(e){var t=this.calc;return Math.round(t.scale*(e-$n.screenLeft))}},{key:"scaleY",value:function(e){var t=this.calc;return Math.round(t.scale*e+t.floor)}},{key:"shake",value:function(e,t){if(0===t)this.calc.shakeX=0,this.calc.shakeY=0;else{var n=Math.floor(e/this.tickInterval)%this.shakeMultipliers.length,a=this.shakeMultipliers[n],r=t*kn.ScreenWidth*.0015;this.calc.shakeX=r*a.x*($n.screenIsLeft?-1:1),this.calc.shakeY=r*a.y}}},{key:"fixSize",value:function(){var e,t=this.canvasElm;this.pixelRatio=window.devicePixelRatio;var n=t.getBoundingClientRect(),a=n.width,r=n.height,i=a*this.pixelRatio,o=r*this.pixelRatio,s=(e={},Object(v.a)(e,ce.High,9999),Object(v.a)(e,ce.Medium,1080),Object(v.a)(e,ce.Low,720),e)[li.Resolution.get()],c=Math.max(1,o/s),u=Math.ceil(i/c),l=Math.ceil(o/c);if(t.width!==u||t.height!==l){t.width=u,t.height=l;var h=0-kn.ScreenWidth/kn.DrawAspectRatio*kn.DrawFloor,d=u/kn.DrawAspectRatio,p=l-d,f=p+d*kn.DrawFloor;if(d<l){var b=(l-d)/2;p=b,f=b+d*kn.DrawFloor}var g=u/kn.ScreenWidth,m=g*kn.ScreenTotalWidth,k=Math.round(u*(68/2680)),j=Math.round(u*(270/2680)),y=Math.round(u*(44/2680)),x=Math.round(u*(884/2680)),O=Math.round(u*(128/2680)),w=Math.round(u*(364/2680)),S=Math.round(u*(15/2680)),C=Math.round(u*(193/2680)),A=Math.round(u*(25/2680)),T=Math.round(u/2),M=Math.round(u*(82/2680)),P=Math.round(u*(94/2680)),R=Math.round(P/6),I=Math.round(u*(64/2680)),B=Math.round(u*(45/2680)),D=Math.round(u*(84/2680)),H=Math.round(.012*u),E=Math.round(.12*u),_=Math.round(.013*u),F=Math.round(.02*u),L=Math.round(.07*u),G=Math.round(.1*u),z=Math.round(.02*u),W=Math.round(.11*u),N=Math.round(.5*u),U=Math.round(15),q=Math.round(l/20),V=Math.round(l/20),Y=Math.round(4*l/20),J=Math.floor(.7*H),K=Math.floor(u-J/2),Q=Math.floor(J/2);this.calc={windowWidth:a,windowHeight:r,perfRatio:c,pixelWidth:i,pixelHeight:o,canvasWidth:u,canvasHeight:l,simBackgroundLeft:0,simBackgroundCeiling:h,playHeight:d,floor:f,shakeX:0,shakeY:0,scale:g,playTotalWidth:m,healthVertMargin:k,healthHoriMargin:j,healthHeight:y,healthWidth:x,healthTriangle:y,meterVertMargin:O,meterHoriMargin:w,meterHeight:S,meterWidth:C,meterTriangle:S,meterGap:A,timerCenterX:T,timerCenterY:M,timerTextHeight:P,timerLineWidth:R,headshotVertMargin:I,headshotHoriMargin:B,headshotRadius:D,scoreboardTextHeight:H,scoreboardHoriMargin:E,scoreboardVertMargin:_,namesTextHeight:F,namesVertMargin:L,namesHoriMargin:G,trainingMessageTextHeight:z,trainingMessageVertMargin:W,trainingMessageHoriMargin:N,inputHistoryCount:U,inputHistorySize:q,inputHistoryHoriMargin:V,inputHistoryVertMargin:Y,fpsTextHeight:J,fpsHoriMargin:K,fpsVertMargin:Q},wn("canvas calc",this.calc)}}},{key:"getTouchContext",value:function(){return{windowWidth:this.calc.windowWidth,windowHeight:this.calc.windowHeight,canvasWidth:this.calc.canvasWidth,canvasHeight:this.calc.canvasHeight}}},{key:"drawVoid",value:function(){var e=this.calc,t=this.ctx;t.fillStyle="#fafafa",t.fillRect(0,0,e.canvasWidth,e.canvasHeight)}},{key:"drawBlack",value:function(){var e=this.calc,t=this.ctx;t.fillStyle="black",t.fillRect(0,0,e.canvasWidth,e.canvasHeight)}},{key:"drawLoading",value:function(){var e=this.calc,t=this.ctx;t.fillStyle="black",t.fillRect(0,0,e.canvasWidth,e.canvasHeight);var n=gi.loadStaticImage(ni.Branding.Logo).asset.get(),a=.6*e.canvasWidth,r=a*(n.height/n.width);t.drawImage(n,e.canvasWidth/2-a/2,e.canvasHeight/2-r/2,a,r)}},{key:"drawBox",value:function(e,t,n){var a,r=this.ctx,i=this.calc,o=this.scaleX(e.getSides().left),s=this.scaleY(e.getSides().top),c=i.scale*e.size.x,u=i.scale*e.size.y;if(!(null!==n&&void 0!==n&&n.skipFill)&&(r.fillStyle=sn(t,.5),r.fillRect(o,s,c,u)),r.lineWidth=3,r.strokeStyle=sn(t,1),r.strokeRect(o,s,c,u),null!==n&&void 0!==n&&null!==(a=n.text)&&void 0!==a&&a.length){var l=i.fpsTextHeight;r.font="".concat(l,"px monospace"),r.textAlign="center",r.textBaseline="middle",r.fillStyle=sn(function(e){return Object(g.a)(Object(g.a)({},e),{},{r:255-e.r,g:255-e.g,b:255-e.b})}(t)),n.text.forEach((function(e,t){r.fillText(e,o+c/2,s+u/2+t*l)}))}}},{key:"drawEffect",value:function(e,t,n){e===M.SteakScreen&&this.effectSteakScreen(n)}},{key:"drawFrame",value:function(e,t,n,a,r,i){var o=this.ctx,s=this.calc;i&&i<1&&(o.globalAlpha=i),o.drawImage(e,this.scaleX(t+s.shakeX),this.scaleY(n+s.shakeY),Math.round(s.scale*a),Math.round(s.scale*r)),i&&i<1&&(o.globalAlpha=1)}},{key:"drawLetterBox",value:function(){var e=this.calc,t=this.ctx;t.fillStyle="black",t.fillRect(0,0,e.canvasWidth,e.canvasHeight)}},{key:"effectColorScreen",value:function(e){var t=this.ctx,n=this.calc;t.fillStyle=e,t.fillRect(this.scaleX(n.simBackgroundLeft),this.scaleY(n.simBackgroundCeiling),n.playTotalWidth,n.playHeight)}},{key:"effectWhiteScreen",value:function(){this.effectColorScreen(sn(kn.Color.White,.7))}},{key:"effectDarkScreen",value:function(){this.effectColorScreen(sn(kn.Color.Black,.7))}},{key:"effectSteakScreen",value:function(e){var t=this.calc,n=this.ctx,a=2*(1+-4*Math.pow(e-.5,2)),r=on(a=Math.min(1,a),kn.Color.Black,kn.Color.Steak);this.effectColorScreen(sn(r,1));var i=gi.loadStaticImage(ni.HudFx.SteakFire).asset.get(),o=t.canvasWidth,s=o*(i.height/i.width),c=4*Math.pow(e-.5,2),u=t.canvasHeight*c,l=t.canvasWidth/2-o/2,h=t.canvasHeight-s+u;n.drawImage(i,l,h,o,s);var d=gi.loadStaticImage(ni.HudFx.SteakMeat).asset.get(),p=.6*t.canvasWidth,f=p*(d.height/d.width),b=-8*Math.pow(e-.5,3),g=t.canvasHeight*b,m=t.canvasWidth/2-p/2,v=t.canvasHeight/2-f/2+g;n.drawImage(d,m,v,p,f)}},{key:"drawBackgroundEffects",value:function(e){e.includes(M.BurstBackgroundIn)&&this.effectColorScreen(sn(kn.Color.BurstPink,.5)),e.includes(M.BurstBackgroundOut)&&this.effectColorScreen(sn(kn.Color.BurstPink,.5)),e.includes(M.BurstBackgroundPink)&&this.effectColorScreen(sn(kn.Color.BurstPink,1)),e.includes(M.RapidBackgroundBlack)&&this.effectColorScreen("black"),e.includes(M.RejectionBackgroundIn)&&this.effectColorScreen(sn(kn.Color.Reject,.1)),e.includes(M.RejectionBackgroundActive)&&this.effectColorScreen(sn(kn.Color.Reject,.3)),e.includes(M.RapidBackgroundPurple)&&this.effectColorScreen(sn(kn.Color.RapidPurple,1)),e.includes(M.OnionDeflect)&&this.effectWhiteScreen(),e.includes(M.OnionLightning1)&&this.effectColorScreen(sn(kn.Color.Black,.7)),e.includes(M.OnionLightning2)&&this.effectColorScreen(sn(kn.Color.Black,.5)),e.includes(M.OnionLightning3)&&this.effectColorScreen(sn(kn.Color.Black,.3)),e.includes(M.WhiteScreen)&&this.effectWhiteScreen(),e.includes(M.DarkScreen)&&this.effectDarkScreen(),e.includes(M.LightDarkScreen)&&this.effectColorScreen(sn(kn.Color.Black,.5))}},{key:"drawBackground",value:function(e,t){this.drawLetterBox();var n=this.ctx,a=this.calc;n.drawImage(e,this.scaleX(a.simBackgroundLeft+a.shakeX),this.scaleY(a.simBackgroundCeiling+a.shakeY),a.playTotalWidth,a.playHeight),this.drawBackgroundEffects(t)}},{key:"drawHealthAndMeter",value:function(e,t,n){var a=this.ctx,r=this.calc,i=gi.loadHudOverlay(ni.HudOverlay.SkeletonSrc).asset.get(),o=i.width,s=i.height,c=r.canvasWidth*(s/o);a.drawImage(i,0,0,r.canvasWidth,c),a.fillStyle=sn(kn.Color.LifeYellow);var u=t.health/t.maxHealth,l=n.health/n.maxHealth,h=Math.ceil(r.healthWidth*u),d=Math.ceil(r.healthWidth*l),p=r.healthHoriMargin+(r.healthWidth-h),f=p+h,b=r.canvasWidth-(r.healthHoriMargin+r.healthWidth),g=b+d,m=r.healthVertMargin,v=m+r.healthHeight;a.beginPath(),a.moveTo(p,m),a.lineTo(f,m),a.lineTo(f+r.healthTriangle,v),a.lineTo(p+r.healthTriangle,v),a.closePath(),a.fill(),a.beginPath(),a.moveTo(b,m),a.lineTo(g,m),a.lineTo(g-r.healthTriangle,v),a.lineTo(b-r.healthTriangle,v),a.closePath(),a.fill(),a.fillStyle=sn(kn.Color.LifeBlue,1);var k=Math.min(t.health,t.blueLife)/t.maxHealth,j=Math.min(n.health,n.blueLife)/n.maxHealth,y=p,x=p+Math.ceil(r.healthWidth*k),O=g-Math.ceil(r.healthWidth*j),w=g;a.beginPath(),a.moveTo(y,m),a.lineTo(x,m),a.lineTo(x+r.healthTriangle,v),a.lineTo(y+r.healthTriangle,v),a.closePath(),a.fill(),a.beginPath(),a.moveTo(O,m),a.lineTo(w,m),a.lineTo(w-r.healthTriangle,v),a.lineTo(O-r.healthTriangle,v),a.closePath(),a.fill(),a.fillStyle=sn(kn.Color.LifeRed,1);var S=Math.min(t.combo.maxDamage,t.combo.damage)/t.maxHealth,C=Math.min(n.combo.maxDamage,n.combo.damage)/n.maxHealth,A=p-Math.ceil(r.healthWidth*S),T=p,M=g,P=g+Math.ceil(r.healthWidth*C);a.beginPath(),a.moveTo(A,m),a.lineTo(T,m),a.lineTo(T+r.healthTriangle,v),a.lineTo(A+r.healthTriangle,v),a.closePath(),a.fill(),a.beginPath(),a.moveTo(M,m),a.lineTo(P,m),a.lineTo(P-r.healthTriangle,v),a.lineTo(M-r.healthTriangle,v),a.closePath(),a.fill();var R=Math.min(1,t.meter/kn.MeterOneBar),I=Math.max(0,(t.meter-kn.MeterOneBar)/kn.MeterOneBar),B=Math.min(1,n.meter/kn.MeterOneBar),D=Math.max(0,(n.meter-kn.MeterOneBar)/kn.MeterOneBar),H=Math.ceil(r.meterWidth*R),E=Math.ceil(r.meterWidth*I),_=Math.ceil(r.meterWidth*B),F=Math.ceil(r.meterWidth*D),L=r.meterHoriMargin,G=L+H,z=G+r.meterGap,W=z+E,N=L+r.meterWidth/2+r.meterTriangle/2,U=z+r.meterWidth/2+r.meterTriangle/2,q=r.canvasWidth-(r.meterHoriMargin+r.meterWidth+r.meterGap+r.meterWidth),V=q+_,Y=V+r.meterGap,J=Y+F,K=q+r.meterWidth/2-r.meterTriangle/2,Q=Y+r.meterWidth/2-r.meterTriangle/2,Z=r.meterVertMargin,X=Z+r.meterHeight,$=Z+r.meterHeight/2,ee=sn(kn.Color.MeterPartial),te=sn(on(Math.pow(t.meterHighlight1/kn.MeterGainCooldownMax,2),kn.Color.MeterFull,kn.Color.MeterGained),1),ne=sn(on(Math.pow(t.meterHighlight2/kn.MeterGainCooldownMax,2),kn.Color.MeterFull,kn.Color.MeterGained),1),ae=sn(on(Math.pow(n.meterHighlight1/kn.MeterGainCooldownMax,2),kn.Color.MeterFull,kn.Color.MeterGained),1),re=sn(on(Math.pow(n.meterHighlight2/kn.MeterGainCooldownMax,2),kn.Color.MeterFull,kn.Color.MeterGained),1);a.fillStyle=1===R?te:ee,a.beginPath(),a.moveTo(L,Z),a.lineTo(G,Z),a.lineTo(G+r.meterTriangle,X),a.lineTo(L+r.meterTriangle,X),a.closePath(),a.fill(),a.fillStyle=1===I?ne:ee,a.beginPath(),a.moveTo(z,Z),a.lineTo(W,Z),a.lineTo(W+r.meterTriangle,X),a.lineTo(z+r.meterTriangle,X),a.closePath(),a.fill(),a.fillStyle=1===B?ae:ee,a.beginPath(),a.moveTo(q,Z),a.lineTo(V,Z),a.lineTo(V-r.meterTriangle,X),a.lineTo(q-r.meterTriangle,X),a.closePath(),a.fill(),a.fillStyle=1===D?re:ee,a.beginPath(),a.moveTo(Y,Z),a.lineTo(J,Z),a.lineTo(J-r.meterTriangle,X),a.lineTo(Y-r.meterTriangle,X),a.closePath(),a.fill();var ie=1.6*r.meterWidth,oe=.45*ie,se=.05*oe;if(t.meterHighlight1>0){var ce=Math.floor((kn.MeterGainCooldownMax-t.meterHighlight1)/3),ue=ni.HudAnimations.MeterGainSmall[ce];if(ue){var le=gi.loadHudOverlay(ue).asset.get();a.drawImage(le,N-ie/2,$+se-oe/2,ie,oe)}}if(t.meterHighlight2>0){var he=Math.floor((kn.MeterGainCooldownMax-t.meterHighlight2)/3),de=ni.HudAnimations.MeterGainBig[he];if(de){var pe=gi.loadHudOverlay(de).asset.get();a.drawImage(pe,U-ie/2,$+se-oe/2,ie,oe)}}if(n.meterHighlight1>0){var fe=Math.floor((kn.MeterGainCooldownMax-n.meterHighlight1)/3),be=ni.HudAnimations.MeterGainSmall[fe];if(be){var ge=gi.loadHudOverlay(be).asset.get();a.drawImage(ge,K-ie/2,$+se-oe/2,ie,oe)}}if(n.meterHighlight2>0){var me=Math.floor((kn.MeterGainCooldownMax-n.meterHighlight2)/3),ve=ni.HudAnimations.MeterGainBig[me];if(ve){var ke=gi.loadHudOverlay(ve).asset.get();a.drawImage(ke,Q-ie/2,$+se-oe/2,ie,oe)}}}},{key:"drawCharacterHeadshots",value:function(e,t){var n=this.calc,a=this.ctx,r=n.headshotVertMargin,i=n.headshotHoriMargin,o=n.headshotRadius,s=gi.loadStaticImage(e.hudUrl).asset.get(),c=gi.loadStaticImage(t.hudUrl).asset.get();a.drawImage(s,i,r,2*o,2*o),a.drawImage(c,n.canvasWidth-(i+2*o),r,2*o,2*o)}},{key:"drawTimer",value:function(e){var t=this.calc,n=this.ctx,a=t.timerCenterX,r=t.timerCenterY,i=t.timerTextHeight,o=["\u221e"],s=!1;null===e?i*=1.5:(o=e.toString().padStart(e>=100?3:2,"0").split(""),s=e<10);if(n.fillStyle=s?"black":"white",n.strokeStyle=s?"red":"black",n.lineWidth=t.timerLineWidth,n.font="".concat(i,"px ").concat(kn.FontFamily),n.textAlign="center",n.textBaseline="middle",3===o.length){var c=2*i/3.5;n.strokeText(o[0],a-c,r),n.fillText(o[0],a-c,r),n.strokeText(o[1],a,r),n.fillText(o[1],a,r),n.strokeText(o[2],a+c,r),n.fillText(o[2],a+c,r)}else if(2===o.length){var u=i/3.5;n.strokeText(o[0],a-u,r),n.fillText(o[0],a-u,r),n.strokeText(o[1],a+u,r),n.fillText(o[1],a+u,r)}else n.strokeText(o[0],a,r),n.fillText(o[0],a,r)}},{key:"drawRoundHeart",value:function(e,t){var n=this.calc,a=this.ctx,r=gi.loadStaticImage(e?ni.HudFx.RoundHeartFull:ni.HudFx.RoundHeartEmpty).asset.get(),i=.02*n.canvasWidth,o=i*(r.width/r.height),s=.5*n.canvasWidth+1.5*i*t,c=.06*n.canvasWidth;if(a.drawImage(r,s-o/2,c-i/2,o,i),e){var u=(e===Pe.Draw?"D":e===Pe.Perfect&&"P")||e===Pe.Knockout&&"KO"||e===Pe.Timeout&&"T"||e===Pe.Chip&&"C"||"?";a.fillText(u,s,c+.02*i)}}},{key:"drawRounds",value:function(e){var t=this,n=this.calc,a=this.ctx,r=.01*n.canvasWidth;a.font="".concat(r,"px ").concat(kn.FontFamily),a.textAlign="center",a.textBaseline="middle",a.fillStyle="white";var i=e.rounds.filter((function(e){return[j.Draw,j.Player1].includes(e.winner)})).map((function(e){return e.finish})),o=e.rounds.filter((function(e){return[j.Draw,j.Player2].includes(e.winner)})).map((function(e){return e.finish}));i.push.apply(i,Object(k.a)(Ft(e.firstTo-i.length).map((function(e){})))),o.push.apply(o,Object(k.a)(Ft(e.firstTo-o.length).map((function(e){})))),i.forEach((function(e,n){return t.drawRoundHeart(e,-2-n)})),o.forEach((function(e,n){return t.drawRoundHeart(e,2+n)}))}},{key:"drawFrameAdvantage",value:function(e,t){if(void 0!==e||void 0!==t){var n=this.ctx,a=this.calc;if(n.font="".concat(a.scoreboardTextHeight,"px ").concat(kn.FontFamily),n.textAlign="center",n.textBaseline="middle",n.lineWidth=a.scoreboardTextHeight/6,n.strokeStyle="white",n.fillStyle="black",void 0!==e){var r=e>=0?"+ ".concat(e):"- ".concat(Math.abs(e));n.strokeText(r,a.scoreboardHoriMargin,a.scoreboardVertMargin),n.fillText(r,a.scoreboardHoriMargin,a.scoreboardVertMargin)}if(void 0!==t){var i=t>=0?"+ ".concat(t):"- ".concat(Math.abs(t));n.strokeText(i,a.canvasWidth-a.scoreboardHoriMargin,a.scoreboardVertMargin),n.fillText(i,a.canvasWidth-a.scoreboardHoriMargin,a.scoreboardVertMargin)}}}},{key:"drawScoreboard",value:function(e){if(!e.isEmpty){var t=this.ctx,n=this.calc;if(t.font="".concat(n.scoreboardTextHeight,"px ").concat(kn.FontFamily),t.textAlign="center",t.textBaseline="middle",t.lineWidth=n.scoreboardTextHeight/6,t.strokeStyle="white",t.fillStyle="black",e.p1wins>0){var a=kn.prettyWins(e.p1wins);t.strokeText(a,n.scoreboardHoriMargin,n.scoreboardVertMargin),t.fillText(a,n.scoreboardHoriMargin,n.scoreboardVertMargin)}if(e.p2wins>0){var r=kn.prettyWins(e.p2wins);t.strokeText(r,n.canvasWidth-n.scoreboardHoriMargin,n.scoreboardVertMargin),t.fillText(r,n.canvasWidth-n.scoreboardHoriMargin,n.scoreboardVertMargin)}}}},{key:"drawFPS",value:function(e,t){var n,a=this.ctx,r=this.calc;a.font="".concat(r.fpsTextHeight,"px monospace"),a.textAlign="right",a.textBaseline="top",a.lineWidth=r.fpsTextHeight/6,a.strokeStyle="white",a.fillStyle="black";var i=Math.ceil(1.2*r.fpsTextHeight),o=Math.round(1e3/e.loopMeasurement.mean.loop).toString().padStart(2,"0"),s=(n={},Object(v.a)(n,yt.Dynamic,"DFPS"),Object(v.a)(n,yt.Fixed30,"30FPS"),Object(v.a)(n,yt.Fixed60,"60FPS"),n)[e.frameRate],c="".concat(s," ").concat(o);if(a.strokeText(c,r.fpsHoriMargin,r.fpsVertMargin),a.fillText(c,r.fpsHoriMargin,r.fpsVertMargin),t){var u=(t.local+t.remote)/2,l=Math.round(u/kn.msPerFrame);a.strokeText("DEL ".concat(l),r.fpsHoriMargin,r.fpsVertMargin+1*i),a.strokeText("RLB ".concat(t.rollback),r.fpsHoriMargin,r.fpsVertMargin+2*i),a.fillText("DEL ".concat(l),r.fpsHoriMargin,r.fpsVertMargin+1*i),a.fillText("RLB ".concat(t.rollback),r.fpsHoriMargin,r.fpsVertMargin+2*i)}}},{key:"drawNames",value:function(e,t){var n=this.ctx,a=this.calc;n.font="".concat(a.namesTextHeight,"px ").concat(kn.FontFamily),n.textBaseline="middle",n.lineJoin="miter",n.miterLimit=2,n.lineWidth=a.namesTextHeight/6,n.strokeStyle="black",n.fillStyle=sn(kn.Color.Heart,1);var r=e.account||e.character,i=t.account||t.character;n.textAlign="left",n.strokeText(r,a.namesHoriMargin,a.namesVertMargin),n.fillText(r,a.namesHoriMargin,a.namesVertMargin),n.textAlign="right",n.strokeText(i,a.canvasWidth-a.namesHoriMargin,a.namesVertMargin),n.fillText(i,a.canvasWidth-a.namesHoriMargin,a.namesVertMargin),(e.account||t.account)&&(n.font="".concat(.8*a.namesTextHeight,"px ").concat(kn.FontFamily),e.account&&(n.textAlign="left",n.strokeText(e.character,a.namesHoriMargin,a.namesVertMargin+a.namesTextHeight),n.fillText(e.character,a.namesHoriMargin,a.namesVertMargin+a.namesTextHeight)),t.account&&(n.textAlign="right",n.strokeText(t.character,a.canvasWidth-a.namesHoriMargin,a.namesVertMargin+a.namesTextHeight),n.fillText(t.character,a.canvasWidth-a.namesHoriMargin,a.namesVertMargin+a.namesTextHeight)))}},{key:"drawTrainingMessage",value:function(e){var t=this.ctx,n=this.calc,a=n.trainingMessageTextHeight*(e.length+2),r=1.8*n.trainingMessageTextHeight;t.font="".concat(n.timerTextHeight,"px monospace"),t.textAlign="center",t.textBaseline="middle",t.fillStyle=sn({r:255,g:100,b:100},.8),t.fillRect(n.trainingMessageHoriMargin-a/2,n.trainingMessageVertMargin-r/2,a,r),t.fillStyle=sn(kn.Color.Black),t.fillText(e,n.trainingMessageHoriMargin,n.trainingMessageVertMargin)}},{key:"drawComboCounters",value:function(e,t){var n=this.ctx,a=this.calc,r=.06*a.canvasWidth,i=.6*r,o=5*i,s=o-1.4*i,c=o-.5*i,u=o+.25*i;function l(e,t,n){var a=t.state.combo;if(a){var r,o,l,h=a.count.toString()+" hits!",d="".concat(a.damage.toString()," damage"),p=(r=0,o=kn.FPS/6,l=t.state.ticksSinceHit,(Math.max(r,Math.min(o,l))-r)/(o-r)),f=a.rapidUsed&&kn.Color.Heart||a.counterhit&&kn.Color.Heart||kn.Color.LifeRed,b=on(p,kn.Color.White,f),g=a.rapidUsed&&kn.Color.RapidUsed||a.counterhit&&kn.Color.Black||kn.Color.Black;e.textAlign="center",e.textBaseline="middle",e.lineJoin="miter",e.miterLimit=2,e.strokeStyle=t.state.stale?"white":sn(g,1),e.fillStyle=t.state.stale?"grey":sn(b,1),a.counterhit?(e.lineWidth=.1*i,e.font="".concat(.7*i,"px ").concat(kn.FontFamily),e.strokeText("Counter",n,s),e.fillText("Counter",n,s),a.count<=1&&(e.strokeText("hit!",n,s+.7*i),e.fillText("hit!",n,s+.7*i))):a.punish?(e.lineWidth=.1*i,e.font="".concat(.7*i,"px ").concat(kn.FontFamily),e.strokeText("Punish",n,s),e.fillText("Punish",n,s)):a.isAntiAir&&(e.lineWidth=.1*i,e.font="".concat(.7*i,"px ").concat(kn.FontFamily),e.strokeText("Anti-Air",n,s),e.fillText("Anti-Air",n,s)),a.count>1&&(e.lineWidth=i/6,e.font="".concat(i,"px ").concat(kn.FontFamily),e.strokeText(h,n,c),e.fillText(h,n,c),e.lineWidth=.05*i,e.font="".concat(.5*i,"px ").concat(kn.FontFamily),e.strokeStyle="white",e.strokeText(d,n,u),e.fillStyle="black",e.fillText(d,n,u))}}var h=.7*(2*r);l(n,e,h),l(n,t,a.canvasWidth-h)}},{key:"drawReversals",value:function(e,t){var n=this.ctx,a=this.calc,r=.06*a.canvasWidth,i=.6*r,o=6*i;function s(e,t,n){if(!(t.getState().ticksRemaining<=0)){var a=kn.Color.White,r=kn.Color.Black;e.textAlign="center",e.textBaseline="middle",e.lineJoin="miter",e.miterLimit=2,e.strokeStyle=sn(r,1),e.fillStyle=sn(a,1),e.lineWidth=.1*i,e.font="".concat(.7*i,"px ").concat(kn.FontFamily),e.strokeText("Reversal",n,o),e.fillText("Reversal",n,o)}}var c=.7*(2*r);s(n,e,c),s(n,t,a.canvasWidth-c)}},{key:"drawInputs",value:function(e,t){var n=this,a=this.calc;e.reverse().slice(0,a.inputHistoryCount).forEach((function(e,t){return e.forEach((function(e,r){return n.drawNotation(e,a.inputHistoryHoriMargin+a.inputHistorySize*r,a.inputHistoryVertMargin+a.inputHistorySize*t,a.inputHistorySize)}))})),t.reverse().slice(0,a.inputHistoryCount).forEach((function(e,t){return e.reverse().forEach((function(e,r){return n.drawNotation(e,a.canvasWidth-2*a.inputHistoryHoriMargin-a.inputHistorySize*r,a.inputHistoryVertMargin+a.inputHistorySize*t,a.inputHistorySize)}))}))}},{key:"drawHudOverlay",value:function(e,t){var n,a,r=this.calc,i=this.ctx,o={scale:null!==(n=null===t||void 0===t?void 0:t.scale)&&void 0!==n?n:1,yOffset:null!==(a=null===t||void 0===t?void 0:t.yOffset)&&void 0!==a?a:0},s=o.scale,c=o.yOffset,u=gi.loadHudOverlay(e).asset.get(),l=r.canvasWidth*s,h=l*(u.height/u.width),d=r.canvasWidth/2-l/2,p=r.canvasHeight/2-h/2+h*c;i.drawImage(u,d,p,l,h)}},{key:"debugStats",value:function(e){var t=this.calc,n=this.ctx,a=.006*t.canvasWidth,r=a*(e.length+2),i=t.canvasHeight-r,o=1.3*r;n.font="".concat(a,"px monospace"),n.textAlign="start",n.textBaseline="alphabetic",n.fillStyle="rgba(255,255,255,0.8)",n.fillRect(t.canvasWidth-o,i,o,r),n.fillStyle="black",e.forEach((function(e,r){return n.fillText(e,t.canvasWidth-o+a,i+(r+2)*a)}))}},{key:"debugIntent",value:function(e){var t,n,a=this.calc,r=this.ctx,i=["INTENT","name:    ".concat(e.name),"input:   ".concat(e.input),"travel:  ".concat(e.distanceToTravel),"timeout: ".concat(e.timeout),"next:    ".concat(null!==(t=null===(n=e.next)||void 0===n?void 0:n.name)&&void 0!==t?t:"n/a")],o=.01*a.canvasWidth,s=o*(i.length+2),c=3*s;r.font="".concat(o,"px monospace"),r.textAlign="start",r.textBaseline="alphabetic",r.fillStyle="rgba(255,255,255,0.8)",r.fillRect(a.canvasWidth-c,0,c,s),r.fillStyle="black",i.forEach((function(e,t){return r.fillText(e,a.canvasWidth-c+o,0+(t+2)*o)}))}},{key:"drawTutorialMessage",value:function(e,t){var n=this.calc,a=this.ctx;t?a.fillStyle="black":(this.effectDarkScreen(),a.fillStyle="white"),a.textAlign="center",a.textBaseline="alphabetic",a.font="".concat(n.canvasHeight/8,"px ").concat(kn.FontFamily),a.fillText(e,n.canvasWidth/2,n.canvasHeight/2)}},{key:"drawTutorialPrompt",value:function(e,t,n){this.drawTutorialMessage(e,!1),this.drawTutorialProceed(t,n)}},{key:"drawTutorialMultiPrompt",value:function(e,t,n){var a=this.calc,r=this.ctx,i=a.canvasHeight/18,o=this.splitLines(e,.8*a.canvasWidth/(i/2)),s=5*a.canvasHeight/8-1.5*i*(o.length-1);this.effectDarkScreen(),r.fillStyle="white",r.textAlign="center",r.textBaseline="alphabetic",r.font="".concat(i,"px ").concat(kn.FontFamily),o.forEach((function(e,t){r.fillText(e,a.canvasWidth/2,s+1.5*i*t)})),this.drawTutorialProceed(t,n)}},{key:"drawTutorialProceed",value:function(e,t){if(e){var n=this.calc,a=this.ctx;a.font="".concat(n.canvasHeight/25,"px ").concat(kn.FontFamily),a.fillText("Press Light to proceed",n.canvasWidth/2,13*n.canvasHeight/16),t&&a.fillText("Press Heavy to replay",n.canvasWidth/2,14*n.canvasHeight/16)}}},{key:"drawTutorialCombo",value:function(e,t,n,a){var r=this,i=this.calc,o=this.ctx,s=i.canvasHeight/22,c=.5*s,u=.05*i.canvasHeight+c,l=.15*i.canvasHeight+c;o.fillStyle=sn(kn.Color.Black,.5),o.fillRect(u-c,l-c,.5*i.canvasWidth,2*c+s*(t.length+1.5)),o.textAlign="start",o.textBaseline="top",o.font="".concat(1.2*s,"px ").concat(kn.FontFamily),o.fillStyle="white",o.fillText(e,u,l),o.font="".concat(.8*s,"px ").concat(kn.FontFamily),t.forEach((function(e,t){var i=l+s*(t+1.5),c=.1*s,h=.8*s+2*c;(n[t]||[]).forEach((function(e,t){r.drawNotation(e,u+s*t-c,i-c,h)})),o.fillStyle=a>t?"salmon":"white",o.fillText(e,u+3.5*s,i)}))}},{key:"calcLineLength",value:function(e){return e.length-1+e.reduce((function(e,t){return e+t.length}),0)}},{key:"splitLines",value:function(e,t){var n,a=this,r=e.trim().split(/[ \n]+/).filter(Boolean),i=[];n=[],r.forEach((function(e){var r=n.concat(e);a.calcLineLength(r)>t?(i.push(n),n=[e]):n=r})),i.push(n);var o=i.length,s=this.calcLineLength(r)/o,c=[];return n=[],r.forEach((function(e){a.calcLineLength(n)>s?(c.push(n),n=[e]):n.push(e)})),c.push(n),c.map((function(e){return e.join(" ")}))}},{key:"drawNotation",value:function(e,t,n,a){var r=this.ctx,i=ni.Notation[e],o=gi.loadStaticImage(i).asset.get();r.drawImage(o,t,n,a,a)}},{key:"drawTouchOutline",value:function(e,t,n,a,r){var i=this.ctx;i.strokeStyle="#000000",i.strokeRect(t-a/2,n-a/2,a,a),e===Re.Press||e===Re.Hold?(i.fillStyle="#00000060",i.fillRect(t-a/2,n-a/2,a,a)):r&&(i.fillStyle="#00800060",i.fillRect(t-a/2,n-a/2,a,a))}},{key:"drawTouchIcon",value:function(e,t,n,a,r){var i=this.ctx,o=gi.loadStaticImage(e).asset.get();i.drawImage(o,n-r/2,a-r/2,r,r),t!==Re.Press&&t!==Re.Hold||(i.fillStyle="#ffffff60",i.beginPath(),i.arc(n,a,.4*r,0,2*Math.PI,!1),i.fill())}}]),e}()),os=function(){function e(){Object(l.a)(this,e),this.TTLms=6e4,this.cache=new Set,this.interval=void 0,this.loaded=lt()}return Object(h.a)(e,[{key:"init",value:function(){var e=this;void 0===this.interval?this.refresh():clearInterval(this.interval),this.interval=setInterval((function(){return e.refresh()}),this.TTLms)}},{key:"get",value:function(e){return this.cache.has(e)}},{key:"refresh",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(){var t,n,a;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,es.flags();case 2:if(n=e.sent,a=null!==(t=null===n||void 0===n?void 0:n.flags.map((function(e){return e})))&&void 0!==t?t:[],this.cache=new Set(a),!this.loaded.hasResolved()){e.next=7;break}return e.abrupt("return");case 7:this.loaded.resolve();case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),ss=new os,cs=function(){function e(){Object(l.a)(this,e)}return Object(h.a)(e,null,[{key:"ping",value:function(){return Promise.all(["https://ice.toughlovearena.com"].map((function(e){return fetch(e,{mode:"no-cors"})})))}},{key:"config",value:function(){return{iceServers:[{urls:"stun:ice.toughlovearena.com:5349"},{urls:"turn:ice.toughlovearena.com:5349",username:"tla",credential:"welcome"}]}}}]),e}(),us=function(){var e,t,n;return"undefined"!==typeof document.hidden?(e="hidden",t="visibilitychange",n="visibilityState"):"undefined"!==typeof document.mozHidden?(e="mozHidden",t="mozvisibilitychange",n="mozVisibilityState"):"undefined"!==typeof document.msHidden?(e="msHidden",t="msvisibilitychange",n="msVisibilityState"):"undefined"!==typeof document.webkitHidden&&(e="webkitHidden",t="webkitvisibilitychange",n="webkitVisibilityState"),{isHidden:function(){return document[e]||!1},state:n,hidden:e,visibilitychange:t}}(),ls=new(function(){function e(){var t=this;Object(l.a)(this,e),this.keyboards={},this.callbacks=[],window.addEventListener("keydown",(function(e){return t.pressKeyboard(e)})),window.addEventListener("keyup",(function(e){return t.releaseKeyboard(e)})),document.addEventListener(us.visibilitychange,(function(){us.isHidden()&&t.releaseAll()}))}return Object(h.a)(e,[{key:"addKeyboard",value:function(e){this.keyboards[e.id]=e}},{key:"removeKeyboard",value:function(e){delete this.keyboards[e.id]}},{key:"pressKeyboard",value:function(e){kn.IgnoredKeyCodes.has(e.code)||(this.triggerCallbacks("keydown",e.code),Object.values(this.keyboards).forEach((function(t){return t.press(e.code)})))}},{key:"releaseKeyboard",value:function(e){kn.IgnoredKeyCodes.has(e.code)||(this.triggerCallbacks("keyup",e.code),Object.values(this.keyboards).forEach((function(t){return t.release(e.code)})))}},{key:"releaseAll",value:function(){Object.values(this.keyboards).forEach((function(e){return e.reset()}))}},{key:"triggerCallbacks",value:function(e,t){this.callbacks.filter((function(t){return t.event===e})).forEach((function(e){return e.callback(t)}))}},{key:"addCallback",value:function(e,t,n){this.callbacks.push({owner:e,event:t,callback:n})}},{key:"removeCallbacks",value:function(e){this.callbacks=this.callbacks.filter((function(t){return t.owner!==e}))}}]),e}()),hs=function(){function e(){var t=this;Object(l.a)(this,e),this.mapSequenceToSprites=function(e){return t.mapSequenceToSpriteSrc(e).map((function(e){return mi.loadSprite(e)}))},this.mapFighterToSprites=function(e){return t.mapFighterToSpriteSrc(e).map((function(e){return mi.loadSprite(e)}))},this.mapFighterToSounds=function(e){return t.mapFighterToSoundSFX(e).map((function(e){return Pi.sfx(e)}))},this.mapSequenceToSpriteSrc=function(e){return Vt(e.frames.map((function(e){return[].concat(Object(k.a)(e.imageSrc?[e.imageSrc]:[]),Object(k.a)(e.behindSrc?[e.behindSrc]:[]),Object(k.a)(e.particle?t.mapSequenceToSpriteSrc(e.particle):[]))})))},this.mapSequenceToSoundSFX=function(e){return Bt(e.frames.map((function(e){return e.sound})))},this.mapFighterToSpriteSrc=function(e){return Vt(ia.getAllSequences(e).map(t.mapSequenceToSpriteSrc))},this.mapFighterToSoundSFX=function(e){var n=ia.getAllSequences(e);return[].concat(Object(k.a)(Vt(n.map(t.mapSequenceToSoundSFX))),[e.stats.winSound])}}return Object(h.a)(e,[{key:"loadMenu",value:function(e){var t=ni.FighterDataAllColorsWithBosses,n=[].concat(Object(k.a)(Object.values(ni.Branding)),Object(k.a)(Object.values(ni.MenuArt)),Object(k.a)(Object.values(ni.Notation)),Object(k.a)(Object.values(ni.Emotes)),Object(k.a)(t.map((function(e){return e.hudUrl}))),Object(k.a)(t.map((function(e){return e.previewUrl})))).map((function(e){return function(){return gi.loadStaticImage(e).loaded}})),a=Object(k.a)(ni.DefaultStages.map((function(e){return e.backgroundSrc}))).map((function(e){return function(){return gi.loadBackgroundImage(e).loaded}})),r=Object(k.a)(Vt(Object.values(Pi.Menu).map((function(e){return e.clips})))).map((function(e){return function(){return e.load().loaded}})),i=[ni.Music.Title,ni.Music.CharSelect].map((function(e){return function(){return Si.load(e).loaded}})),o=[].concat(Object(k.a)(i),Object(k.a)(r),Object(k.a)(a),Object(k.a)(n));return io.load({lazies:o,statusCallback:e}).loaded}},{key:"loadGame",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(t,n){var a,r,i,o,s,u,l,h,d,p,f,b;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadMenu();case 2:return!0===li.UnloadSpritesFromMemory.get()&&mi.trimCache(),a=t.stage,r=t.fighter1,i=t.fighter2,o=[].concat(Object(k.a)(Object.values(ni.HudOverlay)),Object(k.a)(Vt(Object.values(ni.HudAnimations)))).map((function(e){return function(){return gi.loadHudOverlay(e).loaded}})),s=[].concat(Object(k.a)(Object.values(ni.HudFx)),Object(k.a)([r,i].map((function(e){return e.hudUrl})))).map((function(e){return function(){return gi.loadStaticImage(e).loaded}})),u=[a.backgroundSrc].map((function(e){return function(){return gi.loadBackgroundImage(e).loaded}})),l=[].concat(Object(k.a)(Vt(Object.values(ni.Impacts).map(this.mapSequenceToSpriteSrc))),Object(k.a)(Vt(Object.values(ni.Impacts).map(this.mapSequenceToSpriteSrc))),Object(k.a)(Vt(Object.values(ni.Particle).map(this.mapSequenceToSpriteSrc))),Object(k.a)(Vt([r,i].map(this.mapFighterToSpriteSrc)))).map((function(e){return function(){return mi.loadSprite(e).loaded}})),h=[].concat(Object(k.a)(Object.values(Pi.Stun)),Object(k.a)(Object.values(Pi.UI)),Object(k.a)(Object.values(Pi.Announcer)),Object(k.a)(Vt([r,i].map(this.mapFighterToSounds)))),d=Object(k.a)(Vt(h.map((function(e){return e.clips})))).map((function(e){return function(){return e.load().loaded}})),p=[a.musicSrc].map((function(e){return function(){return Si.load(e).loaded}})),f=[].concat(Object(k.a)(p),Object(k.a)(d),Object(k.a)(o),Object(k.a)(s),Object(k.a)(u),Object(k.a)(l)),b=io.load({lazies:f,statusCallback:n}),e.abrupt("return",b.loaded);case 14:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),ds=new hs,ps=function(){function e(t){var n=this;Object(l.a)(this,e),this.setup=void 0,this.callbackMatch=void 0,this.callbackServerSpectator=void 0,this.callbackSpectator=void 0,this.callbackTutorial=void 0,this.coord=void 0,this.matchIsOver=!1,this.match=void 0,this.roundInputs=[],this.canvas=is,this.touchSettings=li.TouchControls.get(),this.touchManager=lo.fromLookups({imageSrc:ni.Notation,defaultSettings:kn.DefaultTouchConfig,currentSettings:this.touchSettings}),this.onTouch=function(e){var t=n.coord;if(void 0!==t){var a=t.game,r=t.keyboard,i=t.local1,o=n.canvas.getTouchContext();if(n.touchManager.onTouchOverride)return n.touchManager.onTouchOverride(e,o);var s=ia.getUnusedController();e.pressed.forEach((function(e){})),e.held.forEach((function(e){n.touchManager.targets.left.contains(o,e)&&(s.left=Re.Press),n.touchManager.targets.right.contains(o,e)&&(s.right=Re.Press),n.touchManager.targets.attack4.contains(o,e)&&(s.attack4=Re.Press),n.touchManager.targets.attack3.contains(o,e)&&(s.attack3=Re.Press),n.touchManager.targets.attack2.contains(o,e)&&(s.attack2=Re.Press),n.touchManager.targets.attack1.contains(o,e)&&(s.attack1=Re.Press)}));var c=a.isTrainingMode||i?r.controls1:r.controls2;r.pressControls(c,s)}},this.canvas.setTouchCallback((function(e){return n.onTouch(e)})),this.setup=t,this.setup.loop.register({step:function(e){return n.step(e)},draw:function(e){return n.draw(e)}}),this.match=da.firstTo(t.gameConfig.firstTo)}return Object(h.a)(e,[{key:"terminate",value:function(){this.canvas.setTouchCallback(),this.setup.loop.terminate()}},{key:"setMatchCallback",value:function(e){this.callbackMatch=e}},{key:"setServerSpectatorCallback",value:function(e){this.callbackServerSpectator=e}},{key:"setSpectatorCallback",value:function(e){this.callbackSpectator=e}},{key:"setTutorialCallback",value:function(e){var t=this;this.setup.tutorial&&(this.setup.tutorial.setPositionCallback((function(e){return t.reset(e)})),this.callbackTutorial=e)}},{key:"startRound",value:function(e){this.coord&&ls.removeKeyboard(this.coord.keyboard);var t,n=this.setup,a=this.roundInputs.length,r=Ki.loadGame({canvas:this.canvas,gameConfig:n.gameConfig,gameMeta:Object(g.a)(Object(g.a)({},n.gameMeta),{},{playIntros:!n.gameMeta.skipReady&&0===a}),hudInfo:{match:this.match,scoreboard:n.scoreboard},tutorial:n.tutorial,location:e,touchManager:this.touchManager});n.replay&&(t=n.replay.roundInputs[a]),this.coord=new bi({game:r,gameMeta:n.gameMeta,network:n.network,replay:t,isSpectator:n.isSpectator,roundIndex:a}),ls.addKeyboard(this.coord.keyboard),this.matchIsOver=!1,this.setup.loop.setInputDelay(this.coord.inputDelay),this.setup.loop.start(),r.stage.music.playWhenLoaded()}},{key:"reset",value:function(e){var t=this.setup;if(!t.gameMeta.isTrainingMode&&!t.tutorial)throw new Error("you can only reset the runner in TrainingMode or Tutorial");this.startRound(e)}},{key:"finishRound",value:function(){var e=this.callbackMatch,t=this.setup,n=this.coord,a=this.match,r=this.roundInputs;if(n&&!this.matchIsOver){var i,o=n.game.getRoundState();if(a.rounds.push(o),r.push(n.exportReplayInputs()),n.connection){var s=n.getMissingTicks();ro("missingInputs_".concat(s.total)),s.total>0&&ns.log({context:"MissingInputs",error:"".concat(s.recovered,"/").concat(s.total," missing ticks recovered")})}var c=da.getWinner(a);if(c)if(n.game.stage.music.stop(),Pi.Announcer.MatchOverBell.play(),this.matchIsOver=!0,t.replay)i=t.replay.compressed;else if(t.gameMeta.isAttractMode);else if(i=so.addDraft({gameConfig:t.gameConfig,match:a,roundInputs:r}),n.connection){var u=n.connection.isHost?n.game.fighter1:n.game.fighter2,l=u.data.stats.code;ro("played_".concat(l)),ro("color_played_".concat(l,"_").concat(u.data.stats.colorIndex));var h=n.connection.isHost?c===j.Player1:c===j.Player2;c===j.Draw?ro("draw_".concat(l,"_v").concat(kn.MinVersionCombat)):h?(ro("victory_".concat(l,"_v").concat(kn.MinVersionCombat)),ro("total_matches_v".concat(kn.PatchVersion)),t.gameMeta.isCasual&&ro("casual_matches_v".concat(kn.PatchVersion)),t.gameMeta.isLobbyPlaying&&ro("lobby_matches_v".concat(kn.PatchVersion)),t.gameMeta.isPrivate&&ro("private_matches_v".concat(kn.PatchVersion)),t.gameMeta.isRanked&&ro("ranked_matches_v".concat(kn.PatchVersion))):ro("loss_".concat(l,"_v").concat(kn.MinVersionCombat))}e&&e(a,i),this.matchIsOver||this.startRound()}}},{key:"step",value:function(e){var t=this.coord,n=this.callbackServerSpectator,a=this.callbackSpectator,r=this.callbackTutorial,i=this.setup;if(t&&!this.matchIsOver){t.step(),fi.recordHistory(t.gh.size());var o=t.game.isOver();if(n){var s=i.loop.fps,c=t.getTicks();if(o||c>0&&c%s===0){var u=Math.max(0,c-s);n(t.getSpectatorInputs(u,c))}}if(a){var l=i.loop.fps,h=2*l,d=t.getTicks();if(o||d>0&&d%l===0){var p=Math.max(0,d-h);a(t.getSpectatorInputs(p,d))}}r&&i.tutorial&&i.tutorial.isDone()&&r(),o&&this.finishRound()}}},{key:"draw",value:function(e){var t=this.coord;t&&(e&&(fi.recordFrameLogic(e.loopMeasurement.latest.step),fi.recordFrameDraw(e.loopMeasurement.latest.draw),fi.recordFrame(e.loopMeasurement.latest.step+e.loopMeasurement.latest.draw),fi.recordFullLoop(e.loopMeasurement.latest.loop),fi.recordSkipped(e.loopMeasurement.skipped)),t.draw(e))}}]),e}(),fs=function(){function e(t){Object(l.a)(this,e),this.connection=t}return Object(h.a)(e,[{key:"waitForOpponentAccount",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(t){var n,a;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=this.connection).sendGenericEvent(He.OpponentAccount,t),e.next=4,n.waitForEvent(He.OpponentAccount);case 4:return a=e.sent,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"waitForGameConfig",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(t){var n,a,r,i;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=Object(g.a)({},t),!(a=this.connection).isHost){e.next=11;break}return a.sendGenericEvent(He.HostConfig,n),e.next=6,a.waitForEvent(He.GuestConfig);case 6:r=e.sent,n.fighter2Id=r.fighter2Id,n.account2=r.account2,e.next=21;break;case 11:return a.sendGenericEvent(He.GuestConfig,n),e.next=14,a.waitForEvent(He.HostConfig);case 14:i=e.sent,n.matchId=i.matchId,n.firstTo=i.firstTo,n.roundTime=i.roundTime,n.stageId=i.stageId,n.fighter1Id=i.fighter1Id,n.account1=i.account1;case 21:return e.abrupt("return",n);case 22:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),bs=function(){function e(t){Object(l.a)(this,e),this.storage=void 0,this.storage=t}return Object(h.a)(e,[{key:"loadFromStorage",value:function(){var e=this.storage.getToken();try{if(e){if(e.type===x.Real)return new Pn(e);if(e.type===x.Anon)return new Rn(e)}}catch(t){}}},{key:"loadRealToken",value:function(){var e=this.loadFromStorage();return null!==e&&void 0!==e&&e.isReal?e:void 0}},{key:"update",value:function(e){this.storage.setToken(e.jwt)}},{key:"delete",value:function(){this.storage.deleteToken()}},{key:"refresh",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(){var t,n;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.loadFromStorage()){e.next=3;break}return e.abrupt("return");case 3:if(!t.isAnon){e.next=5;break}return e.abrupt("return");case 5:return e.prev=5,e.next=8,ns.refresh(t);case 8:return n=e.sent,this.update(n.apiToken),e.abrupt("return",n.rankedResult);case 13:return e.prev=13,e.t0=e.catch(5),this.delete(),e.abrupt("return");case 17:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"syncRanked",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(t,n){var a,r;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((a=this.loadFromStorage())&&!a.isAnon){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,e.next=6,ns.rankedRecord(a,{outcome:n});case 6:return e.next=8,t.waitForEventEcho(He.RankedRecorded);case 8:return e.next=10,ns.rankedVerify(a);case 10:return r=e.sent,this.update(r.apiToken),e.abrupt("return",r.result);case 15:return e.prev=15,e.t0=e.catch(3),vn.isProduction&&this.delete(),e.abrupt("return");case 19:case"end":return e.stop()}}),e,this,[[3,15]])})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),gs=new bs(ci.usingLocalStorage()),ms=function(){function e(t){Object(l.a)(this,e),this.hooks=t,this.notification=void 0}return Object(h.a)(e,[{key:"afterConnection",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(t){var n,a,r,i,o,s,u,l,h,d=this;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.connection,this.hooks.onMatch.broadcast(t),r=(null===(n=gs.loadFromStorage())||void 0===n?void 0:n.account.jwt)||null,i=new fs(a),e.next=6,i.waitForOpponentAccount(r);case 6:return o=e.sent,s=Mn.tryParse(o),u=s?"Match found: ".concat(s.getTag()):"Match found!",this.hooks.onMessage.broadcast(u),Qo.push(u).then((function(e){return d.notification=e})),Pi.Menu.MatchmakingFound.play(),e.next=14,a.calculatePing();case 14:l=a.recommendInputDelay(kn.FPS,0),h={frameDelay:l,otherAccount:s},this.hooks.onOpponentInfo.broadcast(h),this.hooks.onMessage.broadcast(void 0);case 18:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"waitForConfirm",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(t){var n;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null===(n=this.notification)||void 0===n||n.close(),e.next=3,t.connection.waitForEventEcho(He.MatchmakerConfirm);case 3:this.hooks.onConfirm.broadcast(t);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),vs=Object(h.a)((function e(){Object(l.a)(this,e),this.onMessage=new Ct,this.onMatch=new Ct,this.onConfirm=new Ct,this.onOpponentInfo=new Ct,this.onDisconnect=new Ct,this.onMatchmakerClose=new Ct,this.onHideOverlay=new Ct})),ks=new(function(){function e(){Object(l.a)(this,e),this.localHandshakeUrl="http://localhost:2500/",this.prodHandshakeUrl="https://handshake.toughlovearena.com/",this.url=kn.Debug.LocalHandshake&&this.localHandshakeUrl||this.prodHandshakeUrl}return Object(h.a)(e,[{key:"connectAsHost",value:function(e){return new jt(Object(g.a)(Object(g.a)({},e),{},{version:kn.OnlineVersion,url:this.url,rtcConfig:cs.config()})).connectAsHost(e.signalId)}},{key:"connectAsGuest",value:function(e){return new jt(Object(g.a)(Object(g.a)({},e),{},{version:kn.OnlineVersion,url:this.url,rtcConfig:cs.config()})).connectAsGuest(e.signalId)}}]),e}()),js=function(){function e(t){Object(l.a)(this,e),this.hooks=t,this.handshake=void 0,this.notification=void 0}return Object(h.a)(e,[{key:"checkForHandshakeTimeout",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(){return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getHandshakeDeps",value:function(e){var t=this;return{signalId:e,testingOptions:{lag:kn.TestingRollbackLag},onServerDisconnect:function(){return t.hooks.onDisconnect.broadcast(R.HandshakeDisconnect)},onPeerDisconnect:function(){return t.hooks.onDisconnect.broadcast(R.BrokerDisconnect)}}}},{key:"connect",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(t){var n,a;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.isHost?this.connectAsHost(t.hostId):this.connectAsGuest(t.hostId),e.next=3,n;case 3:return a=e.sent,this.close(),e.abrupt("return",a);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"connectAsHost",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(t){var n;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.checkForHandshakeTimeout(),!kn.Debug.FailHandshake){e.next=3;break}return e.abrupt("return",null);case 3:return e.next=5,ks.connectAsHost(this.getHandshakeDeps(t));case 5:return this.handshake=e.sent,e.next=8,this.handshake.connection;case 8:return n=e.sent,this.handshake=void 0,wn("connection setup complete, updating view & matchmaker"),e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"connectAsGuest",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(t){var n;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=t.trim(),this.checkForHandshakeTimeout(),!kn.Debug.FailHandshake){e.next=4;break}return e.abrupt("return",null);case 4:return e.prev=4,e.next=7,ks.connectAsGuest(this.getHandshakeDeps(t));case 7:return this.handshake=e.sent,e.next=10,this.handshake.connection;case 10:return n=e.sent,this.handshake=void 0,wn("connection setup complete, updating view & matchmaker"),e.abrupt("return",n);case 16:return e.prev=16,e.t0=e.catch(4),e.abrupt("return",null);case 19:case"end":return e.stop()}}),e,this,[[4,16]])})));return function(t){return e.apply(this,arguments)}}()},{key:"close",value:function(){var e;null===(e=this.notification)||void 0===e||e.close(),this.handshake&&(this.handshake.disconnect(),this.handshake=void 0)}}]),e}();var ys=function(){function e(t){Object(l.a)(this,e),this.hooks=t,this.url=function(){var e="https://matchmaker.toughlovearena.com/beta/",t="https://matchmaker.toughlovearena.com/";return(kn.Debug.LocalMatchmaker?"http://localhost:2999/":kn.Debug.BetaMatchmaker&&e)||kn.Debug.ProdMatchmaker&&t||kn.isDebug&&e||t}(),this.sse=void 0}return Object(h.a)(e,[{key:"connect",value:function(e){var t,n=this;this.close();var a=null!==(t=e.split("/")[1])&&void 0!==t?t:"???";this.hooks.onMessage.broadcast("Searching for ".concat(a," match")),this.sse=new EventSource(this.url+e);var r=this.sse;return new Promise((function(e){r.addEventListener("update",(function(e){wn("EventSource update:",e);var t=JSON.parse(e.data),r=t.radiusMaxed?"\u221e":t.radiusKM;n.hooks.onMessage.broadcast("Searching for ".concat(a," match (").concat(r," km)"))})),r.addEventListener("message",(function(t){wn("EventSource message:",t),e(JSON.parse(t.data))})),r.addEventListener("error",(function(t){wn("EventSource error:",t),e(null)}))})).finally((function(){return r.close()}))}},{key:"casualSubscribe",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(){var t,n,a,r;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=null===(t=gs.loadFromStorage())||void 0===t?void 0:t.account){e.next=7;break}return e.next=4,ns.anonymousLogin();case 4:r=e.sent,gs.update(r),n=null===(a=gs.loadFromStorage())||void 0===a?void 0:a.account;case 7:if(!n){e.next=11;break}return e.abrupt("return",this.casualSubscribeAccount({aid:n.aid(),blocklist:ci.usingLocalStorage().getCasualBlocks()}));case 11:return e.abrupt("return",this.casualSubscribeAnon());case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"casualSubscribeAnon",value:function(){return this.connect("v3/casual/anon/".concat(kn.OnlineVersion))}},{key:"casualSubscribeAccount",value:function(e){var t=e.blocklist.map((function(e){return e.aid})).join(",");return this.connect("v3/casual/account/".concat(kn.OnlineVersion,"/").concat(e.aid,"/").concat(t))}},{key:"rankedSubscribe",value:function(e){var t=e.apiToken.account.getCharacterMMROrDefault(e.fighter.stats.code).rating;return this.connect("v4/ranked/".concat(kn.OnlineVersion,"/").concat(e.apiToken.account.aid(),"/").concat(t,"/").concat(e.rankedSearchRange.range))}},{key:"close",value:function(){this.sse&&(this.sse.close(),this.sse=void 0)}}]),e}(),xs=function(e){return e[e.Idle=1]="Idle",e[e.Searching=2]="Searching",e[e.Found=3]="Found",e}(xs||{});function Os(e){return{phase:xs.Idle,ranked:e}}var ws=Object(Ke.a)("status"),Ss=function(){function e(){Object(l.a)(this,e),this.hooks=new vs,this.server=new ys(this.hooks),this.peer=new js(this.hooks),this.confirm=new ms(this.hooks),Object.defineProperty(this,ws,{writable:!0,value:null})}return Object(h.a)(e,[{key:"status",get:function(){return Object(Je.a)(this,ws)[ws]},set:function(e){Object(Je.a)(this,ws)[ws]=e}},{key:"startCasual",value:function(){var e=this;this.searchForMatch((function(){return e.server.casualSubscribe()}))}},{key:"startRanked",value:function(e){var t=this;this.searchForMatch((function(){return t.server.rankedSubscribe(e)}),e)}},{key:"retry",value:function(e){e?this.startRanked(e):this.startCasual()}},{key:"searchForMatch",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(t,n){var a,r,i,o;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.status){e.next=2;break}return e.abrupt("return",this.status);case 2:return this.status=Os(n),(a=this.status).phase=xs.Searching,Qo.request(),wn("matchmaking connecting with server"),e.next=9,t();case 9:if(null!==(r=e.sent)){e.next=12;break}return e.abrupt("return",wn("matchmaking failed"));case 12:return wn("matchmaking connecting to peer",r),a.phase=xs.Found,e.next=16,this.peer.connect(r);case 16:if(null!==(i=e.sent)){e.next=19;break}return e.abrupt("return",wn("matchmaking peer connection failed"));case 19:wn("matchmaking peer connection",i),o={connection:i,ranked:n},this.confirm.afterConnection(o),this.close();case 23:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"renderDistance",value:function(e){return void 0===e||25600===e?"Distance Unknown":"Distance: ".concat(e," KM")}},{key:"close",value:function(){this.server.close(),this.peer.close(),this.status=null,this.hooks.onMessage.broadcast(void 0),this.hooks.onMatchmakerClose.broadcast()}}]),e}(),Cs=new Ss,As=function(){function e(){Object(l.a)(this,e),this.zIndex={Absolute:1,Focused:2,MenuOverlay:3,EmoteOverlay:5,FadeOverlay:10,Pause:20,LandscapeOverlay:99,ModdingPopup:4},this.getChangelogAfterPatch=function(e,t){var n=dn.parse(t);return e.versions.filter((function(e){return dn.parse(e.v).isGreaterThan(n)}))},this.getPreGamePauseSettings=function(e){var t={showPlayer2:e.gameMeta.isTrainingMode||e.gameMeta.isLocalVersus};return Object(g.a)({onExitMenu:e.onExit?{callback:e.onExit}:void 0},t)}}return Object(h.a)(e,[{key:"isNewPatch",value:function(){return li.LastSeenVersion.load(),li.LastSeenVersion.get()!==li.LastSeenVersion.defaultValue}},{key:"displayModWrapper",value:function(e){if(!e.fighter.original.stats.isMod)throw new Error("expected modded character");var t=jn.ModCodePrefix.length;return e.fighter.code.substring(t,t+8)}},{key:"displayModId",value:function(e){if(!jn.isModId(e))throw new Error("expected modded character");var t=jn.ModCodePrefix.length;return e.substring(t,t+8)}},{key:"showExternalLinks",value:function(){return!kn.Electron.isSteam()}},{key:"areBossesPlayable",value:function(e){return!(kn.isAprilFools||!li.CanCheat.get()&&e.isEventMode||e.isTutorial||e.isRanked||e.isCasual||e.isHumanVsBoss||e.isLobbyPlaying&&!e.lobbyAllowsBosses)}},{key:"areModsLoadable",value:function(e){return!(kn.isAprilFools||e.isAccountFavorite||e.isEventMode||e.isTutorial||e.isRanked||e.isCasual||e.isPrivate||e.isHumanVsBoss||e.isLobbyPlaying)}},{key:"areModsPlayable",value:function(e){return!(kn.isAprilFools||e.isAccountFavorite||e.isEventMode||e.isTutorial||e.isRanked||e.isCasual||e.isPrivate||e.isHumanVsBoss||e.isLobbyPlaying&&!e.lobbyAllowsPlayingMods)}},{key:"getAccountFavorite",value:function(e){return ni.loadFavoriteFighter(null===e||void 0===e?void 0:e.getFavoriteId())}},{key:"getBaseSharingUrl",value:function(){return vn.isNativeApp?"https://toughlovearena.com/":window.location.href.replace(/\?.*/,"")}},{key:"getPrivateMatchUrlForId",value:function(e){return[this.getBaseSharingUrl(),"?",kn.QueryParams.PrivateMatch,"=",e].join("")}},{key:"getServerLobbyUrlForId",value:function(e){return[this.getBaseSharingUrl(),"?",kn.QueryParams.ServerLobby,"=",e].join("")}},{key:"getReplayUrlForId",value:function(e){return[this.getBaseSharingUrl(),"?",kn.QueryParams.Replay,"=",e].join("")}},{key:"clipboard",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(t,n){var a,r,i;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.clipboard.writeText(t);case 2:if(!n){e.next=9;break}return e.next=5,(null!==(a=n.onStart)&&void 0!==a?a:Promise.resolve)();case 5:return e.next=7,Le(null!==(r=n.durationMs)&&void 0!==r?r:3e3);case 7:return e.next=9,(null!==(i=n.onEnd)&&void 0!==i?i:Promise.resolve)();case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"downloadText",value:function(e,t){var n=document.createElement("a");n.href=URL.createObjectURL(new Blob([t],{type:"text/plain"})),n.target="_blank",n.download=e,n.click(),URL.revokeObjectURL(n.href)}},{key:"downloadModZip",value:function(e){var t=document.createElement("a");t.href="data:application/zip;base64,".concat(e.zip64),t.target="_blank",t.download=e.filename+".zip",t.click()}},{key:"downloadModSource",value:function(e){var t=document.createElement("a");t.href=URL.createObjectURL(new Blob([e],{type:"text/javascript"})),t.target="_blank",t.download=ao.deriveFilename(),t.click(),URL.revokeObjectURL(t.href)}},{key:"scrollIntoView",value:function(e){e&&e.current&&e.current.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})}},{key:"browserRedirect",value:function(e){window.location.href=e}},{key:"browserReload",value:function(){window.location.reload()}},{key:"newTabLink",value:function(e){return{href:e,target:"_blank",rel:"noopener noreferrer"}}},{key:"getEventModeDipSwitch",value:function(){return li.isEventMode.get()?Object(g.a)(Object(g.a)({},Oe()),li.EventModeDipSwitch.get()):null}},{key:"prettyNetworkError",value:function(e){var t;return(t={},Object(v.a)(t,R.FetchIcePing,"ERROR: P2P connection server is down"),Object(v.a)(t,R.FetchLobbyBrowse,"ERROR: Failed to load lobbies"),Object(v.a)(t,R.EventSourceDisconnect,"ERROR: Lost connection to matchmaking server"),Object(v.a)(t,R.SignalNotFound,"ERROR: Could not find host"),Object(v.a)(t,R.Declined,"ERROR: You closed the P2P connection"),Object(v.a)(t,R.CasualBlocked,"ERROR: You have blocked the other player"),Object(v.a)(t,R.HandshakeDisconnect,"ERROR: Lost connection to the handshake server"),Object(v.a)(t,R.HandshakeTimeout,"ERROR: P2P connection timed out"),Object(v.a)(t,R.BrokerDisconnect,"ERROR: P2P connection was lost"),Object(v.a)(t,R.LobbyDisconnect,"ERROR: Lost connection to the lobby server"),Object(v.a)(t,R.InvalidGameConfig,"ERROR: Someone tried to pick an invalid character"),Object(v.a)(t,R.LocalQuit,"You left the match"),t)[e]}},{key:"debugFighter1",value:function(){return kn.Debug.P1Noodle&&ni.Characters.Noodle.original||kn.Debug.P1Rice&&ni.Characters.Rice.original||kn.Debug.P1Beef&&ni.Characters.Beef.original||kn.Debug.P1Pork&&ni.Characters.Pork.original||kn.Debug.P1Onion&&ni.Characters.Onion.original||kn.Debug.P1Garlic&&ni.Characters.Garlic.original||kn.Debug.P1BossPork&&ni.Characters.PlayableBossPork.original||kn.Debug.P1BossGarlic&&ni.Characters.PlayableBossGarlic.original||!1}},{key:"debugFighter2",value:function(){return kn.Debug.P2Noodle&&ni.Characters.Noodle.original||kn.Debug.P2Rice&&ni.Characters.Rice.original||kn.Debug.P2Beef&&ni.Characters.Beef.original||kn.Debug.P2Pork&&ni.Characters.Pork.original||kn.Debug.P2Onion&&ni.Characters.Onion.original||kn.Debug.P2Garlic&&ni.Characters.Garlic.original||kn.Debug.P2BossPork&&ni.Characters.PlayableBossPork.original||kn.Debug.P2BossGarlic&&ni.Characters.PlayableBossGarlic.original||!1}}]),e}(),Ts=new As;function Ms(e){var t=Object(r.useRef)(e);Object(r.useEffect)((function(){return t.current()}),[t])}function Ps(e){Ms((function(){return e}))}function Rs(e,t){Ms((function(){var n=e();if(t)return function(){n.then(t)}}))}function Is(){var e=Object(r.useRef)(new Ve);return Ps((function(){return e.current.clear()})),e.current}var Bs,Ds,Hs,Es,_s,Fs,Ls,Gs,zs,Ws,Ns,Us,qs,Vs,Ys,Js,Ks,Qs,Zs,Xs,$s,ec,tc,nc,ac=n(0),rc=b.a.div(Bs||(Bs=Object(f.a)(["\n  position: absolute;\n  z-index: ",";\n  top: 2vh;\n  left: 2vh;\n  width: auto;\n  height: auto;\n\n  font-size: 2vh;\n\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: flex-start;\n\n  ","\n"])),Ts.zIndex.MenuOverlay,(function(e){return e.white?"\n    color: white;\n  ":"\n    color: black;\n  "})),ic=b.a.div(Ds||(Ds=Object(f.a)(["\n  font-size: 1.5em;\n"]))),oc=b.a.img(Hs||(Hs=Object(f.a)(["\n  height: 2em;\n  width: auto;\n"]))),sc=function(e){var t=gs.loadRealToken();if(!t)return null;var n=t.account.getBestRankByPeak(),a=n&&{char:ni.fighterFromCode(n.code),tier:oi.getAssets(n.peak)};return Object(ac.jsxs)(rc,{white:!!e.white,children:[Object(ac.jsx)(ic,{children:t.account.getTag()}),a&&Object(ac.jsxs)("div",{children:[Object(ac.jsx)(oc,{src:a.char.hudUrl,title:a.char.stats.name}),Object(ac.jsx)(oc,{src:a.tier.iconUrl,title:a.tier.name})]}),t.account.isPaid()&&Object(ac.jsx)("div",{children:"PAID"}),t.account.isVip()&&Object(ac.jsx)("div",{children:"VIP"})]})},cc=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).keyboard=hi.fromGameType({isOnlineHost:!!e.props.isOnlineHost,isOnlineGuest:!!e.props.isOnlineGuest,isVersusCPU:!!e.props.isVersusCPU,isTraining:!!e.props.isTraining,isTutorial:!!e.props.isTutorial}),e.gamepadPressed=[],e.gamepadHeld=[],e.loop=new Ot({fps:60,frameRate:yt.Fixed60,canPause:!0,timeKeeper:st.instance()}),e.loopTimeout=new Ve,e.activeMenuKey=(n.menuInputIndex++).toString(),e}return Object(h.a)(n,[{key:"isListening",value:function(){var e=n.activeMenuStack.peek();return!e||e===this.activeMenuKey}},{key:"takeInputFocus",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(){return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.activeMenuStack.push(this.activeMenuKey);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"releaseInputFocus",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(){return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Le(100);case 2:n.activeMenuStack.remove(this.activeMenuKey);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(e){!e.takeFocus&&this.props.takeFocus&&this.takeInputFocus(),e.takeFocus&&!this.props.takeFocus&&this.releaseInputFocus()}},{key:"componentDidMount",value:function(){var e=this;this.props.takeFocus&&this.takeInputFocus(),ls.addKeyboard(this.keyboard),this.loop.register({step:function(){return e.onLoop()}}),this.loopTimeout.schedule((function(){e.update(),e.loop.start()}),100)}},{key:"componentWillUnmount",value:function(){this.releaseInputFocus(),this.loopTimeout.clear(),ls.removeKeyboard(this.keyboard),this.loop.stop()}},{key:"update",value:function(){var e=this.keyboard;e.step();var t=this.gamepadPressed,n=e.getPressedOrHeld();this.gamepadPressed=n;var a=Rt(t,(function(e){return e}),(function(e){return!0})),r=Rt(n,(function(e){return e}),(function(e){return!0})),i=t.filter((function(e){return!r[e]})),o=n.filter((function(e){return!a[e]}));return this.gamepadHeld=[].concat(Object(k.a)(this.gamepadHeld.filter((function(e){return a[e.code]&&r[e.code]}))),Object(k.a)(o.map((function(e){return{code:e,ticks:0}})))),this.gamepadHeld.forEach((function(e){return e.ticks++})),{pressed:o,released:i}}},{key:"onLoop",value:function(){if(this.isListening()){var e=this.keyboard,t=this.update(),n=t.pressed,a=t.released,r=this.props,i=r.onPress,o=r.onControllerInput,s=r.onEventMenuInput,c=r.onPlayer1Press,u=r.onPlayer2Press,l=r.onHold,h=r.onPlayer1Hold,d=r.onRelease;n.forEach((function(t){i&&i(t);var n=e.getDefaultKeyboardControlProp(t),a=e.getControl1Prop(t),r=e.getControl2Prop(t),l=e.getEventMenuProp(t);if(s&&l&&s(l,t),c&&a&&c(a,t),u&&r&&u(r,t),o){var h=Bt([a,r]);0===h.length&&!l&&n&&(h=[n]),Lt(h).forEach((function(e){return o(e,t)}))}})),a.forEach((function(e){d&&d(e)}));var p=this.gamepadHeld.filter((function(e){return e.ticks>30}));if(l&&l(p),h)h(Bt(p.map((function(t){return e.getControl1Prop(t.code)}))))}}},{key:"render",value:function(){return Object(ac.jsxs)("div",{style:{display:"none"},children:["MenuListener #",this.activeMenuKey]})}}]),n}(i.a.Component);function uc(e,t){return lc.apply(this,arguments)}function lc(){return(lc=Object(u.a)(Object(c.a)().mark((function e(t,n){return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){return t.setState(n,e)})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}cc.menuInputIndex=0,cc.activeMenuStack=new cn;var hc,dc,pc,fc,bc,gc="\n  &, & * {\n    /* need webkit for iphone browser */\n    -moz-user-select: text !important;\n    -webkit-user-select: text !important;\n    user-select: text !important;\n  }\n",mc=b.a.span(Es||(Es=Object(f.a)([""]))),vc=(Object(b.a)(mc)(_s||(_s=Object(f.a)(["\n  font-weight: bold;\n"]))),Object(b.a)(mc)(Fs||(Fs=Object(f.a)(["\n  text-decoration: underline;\n"]))),b.a.div(Ls||(Ls=Object(f.a)(["\n  width: 100%;\n  height: 100%;\n\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  flex-wrap: nowrap;\n  text-align: center;\n\n  font-size: 1.5rem;\n  color: var(--foreground);\n  background-color: var(--background);\n"])))),kc=Object(b.a)(vc)(Gs||(Gs=Object(f.a)(["\n  position: absolute;\n  height: auto;\n\n  select,\n  option,\n  input,\n  button {\n    ","\n  }\n  ul {\n    text-align: left;\n    margin-top: 0px;\n    margin-bottom: 0px;\n  }\n"])),"\n  font-size: 1rem;\n  font-family: var(--font-family);\n  border: none;\n  border-radius: 0.5em;\n  padding: 0.5em 1em;\n  margin: 0.5em;\n\n  &:hover {\n    cursor: pointer;\n  }\n"),jc=Object(b.a)(vc)(zs||(zs=Object(f.a)(["\n  background: none;\n\n  select,\n  option,\n  input,\n  button {\n    font-family: var(--font-family);\n  }\n"]))),yc=b.a.div(Ws||(Ws=Object(f.a)(["\n  width: 100%;\n  height: 100vh;\n\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  flex-wrap: nowrap;\n\n  background-color: black;\n  background-position: center center;\n  background-size: cover;\n  background-repeat: no-repeat;\n  ","\n"])),(function(e){return e.src?"\n    background-image: url('".concat(e.src,"');\n  "):""})),xc=Object(b.a)(yc)(Ns||(Ns=Object(f.a)(["\n  height: auto;\n  min-height: 100vh;\n"]))),Oc=b.a.button(Us||(Us=Object(f.a)(["\n  cursor: pointer;\n  background-color: var(--backtext);\n  color: var(--foretext);\n  &:hover {\n    background-color: var(--foretext);\n    color: var(--backtext);\n  }\n  &:disabled {\n    background-color: var(--backtext);\n    color: var(--foretext);\n    cursor: not-allowed;\n    text-decoration: line-through;\n  }\n  ","\n"])),(function(e){return e.selected?"\n    background-color: var(--foretext);\n    color: var(--backtext);\n  ":""})),wc=function(e){return Object(ac.jsx)(Oc,{disabled:e.disabled,onClick:e.onClick,children:" Back "})},Sc=Object(b.b)(qs||(qs=Object(f.a)(["\n  from {\n    transform: scale(1);\n  }\n  to {\n    transform: scale(1.3);\n  }\n"]))),Cc=b.a.img(Vs||(Vs=Object(f.a)(["\n  animation: ",";\n  animation-direction: alternate;\n  animation-delay: 0s;\n  animation-duration: 0.5s;\n  animation-iteration-count: infinite;\n  animation-timing-function: ease-in-out;\n"])),Sc),Ac=(b.a.div(Ys||(Ys=Object(f.a)(["\n  font-size: 0.8em;\n  font-style: italic;\n"]))),b.a.div(Js||(Js=Object(f.a)(["\n  height: 25vh;\n  width: 25vh;\n\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: flex-end;\n  flex-wrap: nowrap;\n"]))),b.a.img(Ks||(Ks=Object(f.a)(["\n  height: 100%;\n  width: auto;\n"])))),Tc=(Object(b.a)(Ac)(Qs||(Qs=Object(f.a)(["\n  transform: scaleX(-1);\n"]))),b.a.img(Zs||(Zs=Object(f.a)(["\n  height: auto;\n  width: 40vh;\n"]))),b.a.div(Xs||(Xs=Object(f.a)(["\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: flex-end;\n  flex-wrap: nowrap;\n\n  & > * {\n    margin: 0px 2rem;\n  }\n"])))),Mc=b.a.div($s||($s=Object(f.a)(["\n  z-index: ",";\n  position: fixed;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n\n  width: 135vh;\n  height: 90vh;\n  border-radius: 2em;\n  font-size: 1rem;\n\n  color: white;\n  background-color: rgba(0, 0, 0, 0.8);\n  border: 0.5em solid white;\n  box-sizing: border-box;\n\n  text-align: center;\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-start;\n  align-items: center;\n  flex-wrap: nowrap;\n"])),Ts.zIndex.Absolute),Pc=Object(b.a)(Mc)(ec||(ec=Object(f.a)(["\n  z-index: ",";\n  border-radius: 2em 0 2em 2em;\n"])),Ts.zIndex.Absolute),Rc=b.a.div(tc||(tc=Object(f.a)(["\n  position: relative;\n  width: 100%;\n  height: 100%;\n\n  text-align: center;\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-start;\n  align-items: center;\n  flex-wrap: nowrap;\n"]))),Ic=b.a.div(nc||(nc=Object(f.a)(["\n  position: absolute;\n  top: -0.5em;\n  right: -0.5em;\n  width: 3em;\n  height: 3em;\n  border: 0.5em solid white;\n  cursor: pointer;\n\n  text-align: center;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  flex-wrap: nowrap;\n"])));function Bc(e){return Object(ac.jsx)(Pc,{children:Object(ac.jsxs)(Rc,{children:[e.children,Object(ac.jsx)(Ic,{onClick:e.onExit,children:"X"})]})})}var Dc=Object(b.a)(Tc)(hc||(hc=Object(f.a)(["\n  & > * {\n    min-width: 0;\n    margin: 0;\n\n    border-style: solid;\n    border-color: grey;\n    ","\n\n    height: 5vh;\n    display: flex;\n    flex-direction: row;\n    justify-content: center;\n    align-items: center;\n    flexwrap: nowrap;\n  }\n  & > *:first-child {\n    width: 8em;\n    border-width: 0.2em 0 0.2em 0.2em;\n    border-radius: 1em 0 0 1em;\n\n    color: black;\n    background-color: grey;\n    ","\n\n    justify-content: flex-end;\n  }\n  & > *:last-child {\n    width: 15em;\n    border-width: 0.2em 0.2em 0.2em 0;\n    border-radius: 0 1em 1em 0;\n\n    color: white;\n    background-color: black;\n  }\n"])),(function(e){return e.highlight&&"\n      border-color: var(--heart);\n    "}),(function(e){return e.highlight&&"\n      background-color: white;\n    "})),Hc=b.a.h2(dc||(dc=Object(f.a)(["\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n"]))),Ec=b.a.img(pc||(pc=Object(f.a)(["\n  height: 2em;\n  width: auto;\n  margin: 0 1em;\n"]))),_c=b.a.img(fc||(fc=Object(f.a)(["\n  height: 1em;\n  width: auto;\n  margin: 0;\n"]))),Fc=b.a.button(bc||(bc=Object(f.a)(["\n  cursor: pointer;\n  color: white;\n  background-color: black;\n\n  margin: 1em 0.5em;\n  padding: 1em;\n  border-radius: 1em;\n  border: 0.2em solid white;\n\n  &:hover {\n    color: black;\n    background-color: white;\n  }\n"]))),Lc=function(e){return e[e.P1=0]="P1",e[e.P2=1]="P2",e}(Lc||{}),Gc=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).viewCooldown=new Ye,e.possibleButtons=Object(k.a)(ne),e.state=Object(g.a)({},e.defaultState),e.HELD=null,e}return Object(h.a)(n,[{key:"possibleOwners",get:function(){return this.state.view?Object(k.a)(ie):[re.left]}},{key:"defaultFocus",get:function(){return{owner:this.possibleOwners[0],input:this.possibleButtons[0]}}},{key:"defaultState",get:function(){return{view:this.props.showPlayer2?Lc.P2:Lc.P1,started:!1,controls:Kt(li.Controls.get()),focused:null,latestCode:void 0,reservedWarning:void 0}}},{key:"reloadState",value:function(e,t){this.setState({controls:e,focused:t,latestCode:void 0})}},{key:"onPress",value:function(e){var t=this,n=this.state,a=n.started,r=n.controls,i=n.focused,o=a&&!i;if("Escape"===e)return this.close();var s=new ua(r);if(o)return s.either.attack2(e)?this.ready():s.either.attack1(e)?(li.Controls.set(r),li.ShowDesktopControls.set(!1),this.close()):void 0;if(!i)return s.either.menu(e)||s.either.attack2(e)?this.close():this.ready();if(kn.ReservedKeyCodes.has(e))return this.setState({reservedWarning:e}),void setTimeout((function(){t.state.reservedWarning===e&&t.setState({reservedWarning:void 0})}),2e3);var c=i.owner,u=i.input,l=Kt(r);this.HELD&&this.HELD!==e?l[c][u].push(e):(this.HELD=e,l[c][u]=[e]),this.reloadState(l,i)}},{key:"onRelease",value:function(e){var t=this.state,n=t.controls,a=t.focused;e===this.HELD&&(this.HELD=null,this.reloadState(n,this.getNextFocus(a)))}},{key:"handleHold",value:function(e){var t=e.filter((function(e){return e.ticks>120}));if(t.length>1&&(this.HELD=null),2===t.length){if(this.viewCooldown.isPending)return;this.viewCooldown.start(1e3),this.setState(Object(g.a)(Object(g.a)({},this.defaultState),{},{view:Ut(this.state.view,[Lc.P1,Lc.P2])}))}else t.length>=3&&this.close()}},{key:"ready",value:function(){return this.setState({started:!0,focused:Kt(this.defaultFocus)})}},{key:"close",value:function(){this.props.onExit&&this.props.onExit()}},{key:"getNextFocus",value:function(e){var t=this.possibleOwners,n=this.possibleButtons;if(!e)return Kt(this.defaultFocus);var a=Kt(e),r=n[n.indexOf(e.input)+1];if(void 0!==r)a.input=r;else{a.input=n[0];var i=t[t.indexOf(e.owner)+1];a.owner=i||t[0]}return Jt(this.defaultFocus,a)?null:a}},{key:"eventModeSave",value:function(){var e=li.Controls.get();li.EventModeBackupControls.set(e),this.close()}},{key:"eventModeLoad",value:function(){var e=li.EventModeBackupControls.get();e&&(li.Controls.set(e),this.close())}},{key:"render",value:function(){var e=this,t=this.state,a=t.started,r=t.focused,i=t.controls,o=t.reservedWarning,s=a&&!r;return Object(ac.jsxs)(Bc,{onExit:function(){return e.close()},children:[Object(ac.jsx)("h1",{children:n.Title}),Object(ac.jsx)(Tc,{children:this.possibleOwners.map((function(e,t,n){return Object(ac.jsxs)("div",{children:[Object(ac.jsx)("h2",{children:n.length>1?"player ".concat(t+1):"current controls"}),ne.map((function(t){return Object(ac.jsxs)(Dc,{highlight:!!r&&r.owner===e&&r.input===t,children:[Object(ac.jsxs)("div",{children:[kn.prettyControlsProp(t),Object(ac.jsx)(Ec,{src:ni.Notation[t]})]}),Object(ac.jsx)("div",{children:kn.prettyControls(i[e][t])})]},e+"key"+t)}))]},e)}))}),Object(ac.jsx)(Hc,{children:o?Object(ac.jsxs)("div",{children:[Object(ac.jsx)("span",{style:{color:"salmon"},children:o})," is a reserved key for menus and cannot be re-mapped"]}):Object(ac.jsxs)("div",{children:[s&&Object(ac.jsxs)("div",{children:[Object(ac.jsxs)("div",{children:["press ",Object(ac.jsx)(_c,{src:ni.Notation[te.attack1]})," to confirm and exit"]}),Object(ac.jsxs)("div",{children:["press ",Object(ac.jsx)(_c,{src:ni.Notation[te.attack2]})," to start over"]})]}),!s&&r&&Object(ac.jsxs)("div",{children:[Object(ac.jsx)("div",{children:"press any key/button to set the highlighted control"}),Object(ac.jsx)("div",{children:"hold any key/button and press another to set a two-button control"})]}),!s&&!r&&Object(ac.jsxs)("div",{children:[Object(ac.jsx)("div",{children:"press anything to start"}),Object(ac.jsxs)("div",{children:["press ",Object(ac.jsx)(_c,{src:ni.Notation[te.attack2]})," to exit"]})]}),kn.noMouseKeyboard?Object(ac.jsx)("div",{children:"disconnect your controller to close this menu"}):Object(ac.jsxs)("div",{children:[Object(ac.jsxs)("div",{children:["hold any two keys/buttons to switch to ",this.state.view===Lc.P1?"Two Player":"Single Player"]}),Object(ac.jsx)("div",{children:"hold any three keys/buttons to exit without saving"})]}),li.isEventMode.get()&&Object(ac.jsxs)("div",{children:["Event Mode only:"," ",Object(ac.jsx)(Fc,{onClick:function(){return e.eventModeSave()},children:"save current config"}),li.EventModeBackupControls.get()&&Object(ac.jsx)(Fc,{onClick:function(){return e.eventModeLoad()},children:"load previous saved"})]})]})}),Object(ac.jsx)(cc,{takeFocus:!0,onPress:function(t){return e.onPress(t)},onRelease:function(t){return e.onRelease(t)},onHold:function(t){return e.handleHold(t)}})]})}}]),n}(i.a.Component);Gc.Title="Custom Controls";var zc,Wc,Nc,Uc,qc,Vc,Yc,Jc,Kc,Qc,Zc,Xc=function(e){return e.Hello="HELLO",e.GoodGame="GG",e.Rematch="RE",e.LastOne="LO",e.Nice="NICE",e.ThankYou="TY",e.Oops="OOPS",e.Yeh="YEH",e.Nah="NAH",e.Lag="LAG",e}({}),$c=new(function(){function e(){var t=this;Object(l.a)(this,e),this.conn=void 0,this.overlay=void 0,this.pendingSend=[],this.sent=[],this.received=[],this.emoteCounter=0,this.cooldown=5e3,this.TTL=3e3,this.debugTalkToSelf=kn.Debug.DebugEmote,this.sendEmote=function(e){ro("emote_".concat(e));var n={key:De.Emote,value:e};t.conn?(t.conn.sendUserMessage(n),t.sent.unshift({emote:e,id:t.emoteCounter++})):t.debugTalkToSelf?(t.receiveEmote(n),t.sent.unshift({emote:e,id:t.emoteCounter++})):t.pendingSend.push(e),t.process()},this.receiveEmote=function(e){e.key===De.Emote&&(t.received.unshift({emote:e.value,id:t.emoteCounter++}),t.process())}}return Object(h.a)(e,[{key:"process",value:function(){var e=this,t=this.overlay;if(t){t.showOverlay(li.ShowEmotes.get()&&this.hasConn());var n=this.sent[0];t.sent(null===n||void 0===n?void 0:n.emote),n&&!n.timeout&&(n.timeout=setTimeout((function(){return e.finishSending(n.id)}),this.cooldown));var a=this.received[0];t.received(null===a||void 0===a?void 0:a.emote),a&&!a.timeout&&(a.timeout=setTimeout((function(){return e.finishReceiving(a.id)}),this.TTL))}}},{key:"finishSending",value:function(e){this.sent=this.sent.filter((function(t){return t.id!==e})),this.process()}},{key:"finishReceiving",value:function(e){this.received=this.received.filter((function(t){return t.id!==e})),this.process()}},{key:"hasConn",value:function(){return this.debugTalkToSelf||!!this.conn}},{key:"setConn",value:function(e){var t=this;this.received=[],this.conn=e,e.subscribe(Be.Emote,this.receiveEmote),this.pendingSend.forEach((function(e){return t.sendEmote(e)})),this.pendingSend=[],this.process()}},{key:"freeConn",value:function(){var e;null===(e=this.conn)||void 0===e||e.unsubscribe(Be.Emote),this.conn=void 0,this.received=[],this.pendingSend=[],this.process()}},{key:"setOverlayCallback",value:function(e){this.overlay=e,this.process()}},{key:"freeOverlayCallback",value:function(){this.overlay=void 0}}]),e}()),eu=b.a.div(zc||(zc=Object(f.a)(["\n  position: absolute;\n  z-index: ",";\n  top: 1vh;\n  left: 1vh;\n  width: auto;\n  height: auto;\n\n  font-size: 2vh;\n\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: flex-start;\n  flex-wrap: nowrap;\n"])),Ts.zIndex.EmoteOverlay),tu=b.a.div(Wc||(Wc=Object(f.a)(["\n  position: relative;\n  padding: 0.5vh;\n  height: 8vh;\n  box-sizing: border-box;\n\n  cursor: pointer;\n\n  display: flex;\n  flex-direction: row;\n  justify-content: flex-start;\n  align-items: center;\n  flex-wrap: nowrap;\n\n  img {\n    width: auto;\n    height: 100%;\n  }\n"]))),nu=b.a.div(Nc||(Nc=Object(f.a)(["\n  position: absolute;\n  font-size: 1.8em;\n  font-family: monospace;\n\n  top: 0.2em;\n  left: 0.1em;\n\n  color: black;\n  text-shadow: 0.05em 0.05em 0px white;\n"]))),au=b.a.div(Uc||(Uc=Object(f.a)(["\n  position: absolute;\n  z-index: ",";\n  bottom: 4vh;\n  left: 50%;\n  transform: translateX(-50%);\n\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n  flex-wrap: nowrap;\n"])),Ts.zIndex.EmoteOverlay),ru=b.a.div(qc||(qc=Object(f.a)(["\n  width: auto;\n  height: 18vh;\n\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n  flex-wrap: nowrap;\n\n  img {\n    width: auto;\n    height: 100%;\n  }\n"]))),iu=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){var e,a,r;Object(l.a)(this,n);for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return(r=t.call.apply(t,[this].concat(o))).state={showOverlay:!1,expand:!1,sent:void 0,received:void 0},r.options=[Xc.Hello,Xc.GoodGame,Xc.Rematch,Xc.LastOne,Xc.Nice,Xc.ThankYou,Xc.Yeh,Xc.Nah,Xc.Lag],r.emoteToPrompt=(e={},Object(v.a)(e,Xc.Hello,ni.Emotes.HelloSmall),Object(v.a)(e,Xc.GoodGame,ni.Emotes.GoodGameSmall),Object(v.a)(e,Xc.Rematch,ni.Emotes.RematchSmall),Object(v.a)(e,Xc.LastOne,ni.Emotes.LastOneSmall),Object(v.a)(e,Xc.Nice,ni.Emotes.NiceSmall),Object(v.a)(e,Xc.ThankYou,ni.Emotes.ThankYouSmall),Object(v.a)(e,Xc.Oops,ni.Emotes.OopsSmall),Object(v.a)(e,Xc.Yeh,ni.Emotes.YehSmall),Object(v.a)(e,Xc.Nah,ni.Emotes.NahSmall),Object(v.a)(e,Xc.Lag,ni.Emotes.LagSmall),e),r.emoteToMessage=(a={},Object(v.a)(a,Xc.Hello,ni.Emotes.HelloLarge),Object(v.a)(a,Xc.GoodGame,ni.Emotes.GoodGameLarge),Object(v.a)(a,Xc.Rematch,ni.Emotes.RematchLarge),Object(v.a)(a,Xc.LastOne,ni.Emotes.LastOneLarge),Object(v.a)(a,Xc.Nice,ni.Emotes.NiceLarge),Object(v.a)(a,Xc.ThankYou,ni.Emotes.ThankYouLarge),Object(v.a)(a,Xc.Oops,ni.Emotes.OopsLarge),Object(v.a)(a,Xc.Yeh,ni.Emotes.YehLarge),Object(v.a)(a,Xc.Nah,ni.Emotes.NahLarge),Object(v.a)(a,Xc.Lag,ni.Emotes.LagLarge),a),r.expandTimeout=new Ve,r}return Object(h.a)(n,[{key:"componentDidMount",value:function(){var e=this;$c.setOverlayCallback({showOverlay:function(t){return e.setEnabled(t)},sent:function(t){return e.sent(t)},received:function(t){return e.received(t)}})}},{key:"componentWillUnmount",value:function(){$c.freeOverlayCallback()}},{key:"sent",value:function(e){e!==this.state.sent&&this.setState({sent:e})}},{key:"received",value:function(e){e!==this.state.received&&this.setState({received:e})}},{key:"setEnabled",value:function(e){this.setState({showOverlay:e})}},{key:"expand",value:function(){var e=this;this.setState({expand:!0}),this.expandTimeout.schedule((function(){e.state.expand&&e.setState({expand:!1})}),5e3)}},{key:"hide",value:function(){this.expandTimeout.clear(),this.setState({expand:!1})}},{key:"send",value:function(e){this.hide(),$c.sendEmote(e)}},{key:"onInput",value:function(e){if(this.state.showOverlay&&(!this.state.sent&&!new ua(li.Controls.get()).either.includes(e)))if(this.state.expand){"Digit1"===e&&this.hide();var t={Digit2:this.options[0],Digit3:this.options[1],Digit4:this.options[2],Digit5:this.options[3],Digit6:this.options[4],Digit7:this.options[5],Digit8:this.options[6],Digit9:this.options[7],Digit0:this.options[8]}[e];t&&this.send(t)}else"Digit1"===e&&this.expand()}},{key:"render",value:function(){var e=this;if(!this.state.showOverlay)return"";var t=this.state,n=t.expand,a=t.sent,r=t.received,i=r?this.emoteToMessage[r]:void 0;return Object(ac.jsxs)("div",{children:[a?Object(ac.jsx)(eu,{children:Object(ac.jsx)(tu,{children:Object(ac.jsx)("img",{src:this.emoteToPrompt[a],alt:a})})}):n?Object(ac.jsxs)(eu,{children:[Object(ac.jsx)(tu,{onClick:function(){return e.hide()},children:Object(ac.jsx)("img",{src:ni.Emotes.HeartClose,alt:"close emotes"})}),this.options.map((function(t,n){return Object(ac.jsxs)(tu,{onClick:function(){return e.send(t)},children:[!vn.isMobile&&Object(ac.jsx)(nu,{children:(n+2)%10}),Object(ac.jsx)("img",{src:e.emoteToPrompt[t],alt:t})]},t)}))]}):Object(ac.jsx)(eu,{children:Object(ac.jsx)(tu,{onClick:function(){return e.expand()},children:Object(ac.jsx)("img",{src:ni.Emotes.HeartOpen,alt:"open emotes"})})}),i&&Object(ac.jsx)(au,{children:Object(ac.jsx)(ru,{children:Object(ac.jsx)("img",{src:i,alt:r})})}),Object(ac.jsx)(cc,{onPress:function(t){return e.onInput(t)}})]})}}]),n}(i.a.Component),ou=b.a.div(Vc||(Vc=Object(f.a)(["\n  font-size: ",";\n  position: absolute;\n  z-index: ",";\n  top: 1em;\n  right: 1em;\n  width: auto;\n  height: auto;\n\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n"])),(function(e){var t;return null!==(t=e.fontSize)&&void 0!==t?t:"2vh"}),Ts.zIndex.MenuOverlay),su=b.a.img(Yc||(Yc=Object(f.a)(["\n  cursor: pointer;\n  width: auto;\n\n  ","\n"])),vn.isMobile?"\n    height: 5em;\n  ":"\n    height: 2.5em;\n  "),cu=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={isSoundOn:li.SoundToggleOn.get()},e.onToggle=function(){e.setState({isSoundOn:li.SoundToggleOn.get()})},e.onClick=function(e){e.stopPropagation(),n.toggleSound()},e}return Object(h.a)(n,[{key:"componentDidMount",value:function(){n.addListener(this.onToggle)}},{key:"componentWillUnmount",value:function(){n.removeListener(this.onToggle)}},{key:"render",value:function(){var e,t=this;if(null!==(e=Ts.getEventModeDipSwitch())&&void 0!==e&&e.hideVolumeControls)return null;var n=this.state.isSoundOn?this.props.white?ni.MenuArt.SoundWhiteOn:ni.MenuArt.SoundBlackOn:this.props.white?ni.MenuArt.SoundWhiteOff:ni.MenuArt.SoundBlackOff;return Object(ac.jsx)(ou,{fontSize:this.props.fontSize,children:Object(ac.jsx)(su,{onClick:function(e){return t.onClick(e)},src:n})})}}],[{key:"addListener",value:function(e){this.callbacks.push(e)}},{key:"removeListener",value:function(e){this.callbacks.filter((function(t){return t!==e}))}},{key:"toggleSound",value:function(){li.SoundToggleOn.set(!li.SoundToggleOn.get()),this.callbacks.forEach((function(e){return e()}))}}]),n}(i.a.Component);cu.callbacks=[];var uu,lu,hu,du,pu,fu,bu,gu,mu,vu,ku,ju,yu,xu,Ou,wu,Su=b.a.div(Jc||(Jc=Object(f.a)(["\n  margin-top: 2vh;\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n  flex-wrap: nowrap;\n"]))),Cu=b.a.div(Kc||(Kc=Object(f.a)(["\n"]))),Au=b.a.div(Qc||(Qc=Object(f.a)(["\n  width: 1.5em;\n  cursor: pointer;\n"]))),Tu=b.a.div(Zc||(Zc=Object(f.a)(["\n  width: 3em;\n"]))),Mu=function(e){var t=e.cpuDiff,n=e.onChange;return Object(ac.jsxs)(Su,{children:[Object(ac.jsx)(Cu,{children:"Cpu Difficulty:"}),n&&Object(ac.jsx)(Au,{onClick:function(){return n(Nt(t,H))},children:"<"}),Object(ac.jsx)(Tu,{children:t}),n&&Object(ac.jsx)(Au,{onClick:function(){return n(Ut(t,H))},children:">"})]})},Pu=b.a.div(uu||(uu=Object(f.a)(["\n  margin-bottom: 0;\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n  flex-wrap: nowrap;\n"]))),Ru=b.a.div(lu||(lu=Object(f.a)(["\n"]))),Iu=b.a.div(hu||(hu=Object(f.a)(["\n  width: 1.5em;\n  cursor: pointer;\n"]))),Bu=b.a.div(du||(du=Object(f.a)(["\n  width: 1em;\n"]))),Du=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).options=kn.FirstToOptions,e}return Object(h.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.firstTo,a=t.onChange,r=t.disable;return Object(ac.jsxs)(Pu,{children:[Object(ac.jsx)(Ru,{children:"Best of:"}),!r&&Object(ac.jsx)(Iu,{onClick:function(){return a(Nt(n,e.options))},children:"<"}),Object(ac.jsx)(Bu,{children:kn.prettyFirstTo(n)}),!r&&Object(ac.jsx)(Iu,{onClick:function(){return a(Ut(n,e.options))},children:">"})]})}}]),n}(i.a.Component),Hu=b.a.div(pu||(pu=Object(f.a)(["\n  margin: 2vh 0;\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n  flex-wrap: nowrap;\n"]))),Eu=b.a.div(fu||(fu=Object(f.a)(["\n"]))),_u=b.a.div(bu||(bu=Object(f.a)(["\n  width: 1.5em;\n  cursor: pointer;\n"]))),Fu=b.a.div(gu||(gu=Object(f.a)(["\n  width: 2em;\n"]))),Lu=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).options=Ft(11),e}return Object(h.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.recommendedInputDelay,a=t.inputDelay,r=t.onChange;return Object(ac.jsxs)(Hu,{children:[Object(ac.jsxs)(Eu,{style:{fontSize:"0.8em"},children:["Input Delay in Frames:",Object(ac.jsxs)("div",{style:{fontSize:"0.8em"},children:["(recommended: ",n,")"]})]}),Object(ac.jsx)(_u,{onClick:function(){return r(Nt(a,e.options))},children:"<"}),Object(ac.jsx)(Fu,{children:a}),Object(ac.jsx)(_u,{onClick:function(){return r(Ut(a,e.options))},children:">"})]})}}]),n}(i.a.Component),Gu=b.a.div(mu||(mu=Object(f.a)(["\n  margin: 2vh 0;\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n  flex-wrap: nowrap;\n"]))),zu=b.a.div(vu||(vu=Object(f.a)(["\n"]))),Wu=b.a.div(ku||(ku=Object(f.a)(["\n  width: 1.5em;\n  cursor: pointer;\n"]))),Nu=b.a.div(ju||(ju=Object(f.a)(["\n  width: 2em;\n"]))),Uu=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).options=[3,4,5,6,7,8,9,10],e}return Object(h.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.rankedMaxInputDelay,a=t.onChange;return Object(ac.jsxs)(Gu,{children:[Object(ac.jsx)(zu,{style:{fontSize:"0.8em"},children:"Max Input Delay in Frames:"}),Object(ac.jsx)(Wu,{onClick:function(){return a(Nt(n,e.options))},children:"<"}),Object(ac.jsx)(Nu,{children:n}),Object(ac.jsx)(Wu,{onClick:function(){return a(Ut(n,e.options))},children:">"})]})}}]),n}(i.a.Component),qu=b.a.div(yu||(yu=Object(f.a)(["\n  margin-bottom: 2vh;\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n  flex-wrap: nowrap;\n"]))),Vu=b.a.div(xu||(xu=Object(f.a)(["\n"]))),Yu=b.a.div(Ou||(Ou=Object(f.a)(["\n  width: 1.5em;\n  cursor: pointer;\n"]))),Ju=b.a.div(wu||(wu=Object(f.a)(["\n  width: 2em;\n"]))),Ku=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).options=se.concat(),e}return Object(h.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.roundTime,a=t.onChange,r=t.disable;return Object(ac.jsxs)(qu,{children:[Object(ac.jsx)(Vu,{children:"Round Time:"}),!r&&Object(ac.jsx)(Yu,{onClick:function(){return a(Nt(n,e.options))},children:"<"}),Object(ac.jsx)(Ju,{children:kn.prettyRoundTime(n)}),!r&&Object(ac.jsx)(Yu,{onClick:function(){return a(Ut(n,e.options))},children:">"})]})}}]),n}(i.a.Component),Qu="random",Zu="mods",Xu="controls";function $u(e){return e!==Qu&&(e!==Zu&&e!==Xu)}function el(e,t){return e===t||$u(e)&&$u(t)&&e.stats.id===t.stats.id}function tl(e,t){return e===t||$u(e)&&$u(t)&&e.stats.code===t.stats.code}var nl,al,rl,il,ol,sl,cl,ul,ll,hl,dl,pl,fl,bl,gl="random stage",ml=[gl].concat(Object(k.a)(ni.DefaultStages)),vl=b.a.div(nl||(nl=Object(f.a)(["\n  margin-bottom: 2vh;\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n  flex-wrap: nowrap;\n"]))),kl=b.a.div(al||(al=Object(f.a)(["\n  width: 1.5em;\n  cursor: pointer;\n"]))),jl=b.a.div(rl||(rl=Object(f.a)(["\n  width: 49vh;\n  height: 20vh;\n  border: 1vh solid white;\n  box-sizing: border-box;\n\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  flex-wrap: nowrap;\n\n  background-size: cover;\n  background-position: center;\n  ","\n"])),(function(e){return e.src?"\n    background-image: url('".concat(e.src,"');\n  "):"\n    background-color: black;\n  "})),yl=b.a.div(il||(il=Object(f.a)(["\n  font-size: 5vh;\n  padding: 1vh 1.5vh;\n  background-color: #00000080;\n  color: white;\n"]))),xl=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).options=ml,e}return Object(h.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.stage,a=t.onChange,r=t.disable,i=n===gl?"Random":n.name,o=n===gl?ni.MenuArt.RandomStage:gi.loadBackgroundImage(n.backgroundSrc).imageUrl;return Object(ac.jsxs)(vl,{children:[!r&&Object(ac.jsx)(kl,{onClick:function(){return a(Nt(n,e.options))},children:"<"}),Object(ac.jsx)(jl,{src:o,children:Object(ac.jsx)(yl,{children:i})}),!r&&Object(ac.jsx)(kl,{onClick:function(){return a(Ut(n,e.options))},children:">"})]})}}]),n}(i.a.Component),Ol=b.a.div(ol||(ol=Object(f.a)(["\n  width: 100%;\n  display: flex;\n  flex-direction: row;\n  justify-content: stretch;\n  align-items: stretch;\n  flex-wrap: nowrap;\n  font-size: 0.8em;\n"]))),wl=b.a.div(sl||(sl=Object(f.a)(["\n  width: 55%;\n"]))),Sl=b.a.div(cl||(cl=Object(f.a)(["\n  width: 10%;\n  opacity: 0;\n\n  ","\n"])),(function(e){return e.focused?"\n    opacity: 1;\n  ":""})),Cl=b.a.div(ul||(ul=Object(f.a)(["\n  width: 25%;\n"]))),Al=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={},e}return Object(h.a)(n,[{key:"getSelectedIndex",value:function(e){return this.props.select.options.findIndex((function(t){return t.value===e}))}},{key:"prevOption",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(){var t,n,a,r,i,o;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.props.select,n=t.current,a=t.options,r=t.sound,i=this.getSelectedIndex(n),o=(i+a.length-1)%a.length,(null!==r&&void 0!==r?r:Pi.Menu.Change).play(),this.props.select.onChange(a[o]);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"nextOption",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(){var t,n,a,r,i,o;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.props.select,n=t.current,a=t.options,r=t.sound,i=this.getSelectedIndex(n),o=(i+a.length+1)%a.length,(null!==r&&void 0!==r?r:Pi.Menu.Change).play(),this.props.select.onChange(a[o]);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleInput",value:function(e,t){return"ArrowDown"===t?this.prevOption():"ArrowUp"===t?this.nextOption():"left"===e?this.prevOption():"right"===e?this.nextOption():"attack1"===e||"attack2"===e?this.props.unfocus():void 0}},{key:"render",value:function(){var e=this,t=this.props,n=t.label,a=t.focused,r=this.props.select,i=r.current,o=r.options[this.getSelectedIndex(i)];return Object(ac.jsxs)(Ol,{children:[Object(ac.jsx)(wl,{children:n}),Object(ac.jsx)(Sl,{focused:!!a,onClick:function(){return e.prevOption()},children:"<"}),Object(ac.jsx)(Cl,{children:o.label}),Object(ac.jsx)(Sl,{focused:!!a,onClick:function(){return e.nextOption()},children:">"}),a&&Object(ac.jsx)(cc,{onControllerInput:function(t,n){return e.handleInput(t,n)}})]})}}]),n}(i.a.Component),Tl=b.a.input(ll||(ll=Object(f.a)(["\n  font-size: 0.8em;\n  font-family: monospace;\n  padding: 0 1em;\n  width: 60%;\n  height: 80%;\n"]))),Ml=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={},e.inputRef=i.a.createRef(),e}return Object(h.a)(n,[{key:"componentDidUpdate",value:function(e){!e.focused&&this.props.focused&&this.inputRef.current&&this.inputRef.current.focus()}},{key:"onChange",value:function(e){var t=this.props.input,n=t.allowCapital,a=t.digitOnly,r=e;n||(r=r.toLowerCase()),a&&(r=r.replace(/[^0-9.]/g,"")),this.props.input.onChange(r)}},{key:"onSubmit",value:function(){var e=this.props.input.onSubmit;this.props.unfocus(),e&&e()}},{key:"render",value:function(){var e=this,t=this.props.input,n=t.placeholder,a=t.value;return Object(ac.jsx)(Tl,{ref:this.inputRef,placeholder:n,value:a,onChange:function(t){return e.onChange(t.target.value)},onKeyDown:function(t){return"Enter"===t.key&&e.onSubmit()}})}}]),n}(i.a.Component),Pl=n(25),Rl=n.n(Pl),Il=b.a.div(hl||(hl=Object(f.a)(["\n  position: fixed;\n  z-index: ",";\n  bottom: 1vh;\n  left: 1vh;\n\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n  gap: 0.5vh;\n\n  & > * {\n    padding: 1vh;\n    width: auto;\n    height: auto;\n\n    font-size: 2vh;\n\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n\n    cursor: pointer;\n    color: white;\n    background-color: #00000060;\n  }\n"])),Ts.zIndex.MenuOverlay),Bl=function(e){var t="v".concat(kn.PatchVersion);return li.isEventMode.get()&&(t="EM "+t),kn.isAprilFools&&(t+=" April Fools"),vn.isDomainCanary&&(t+=" Canary"),kn.Electron.isSteam()?t+=" Steam":vn.isElectron?t+=" Desktop":vn.isIosApp&&(t+=" IOS"),vn.isReactDevelopment&&(t+=" Dev"),e.modding&&(t+=" [mod]"),vn.isMobile?Object(ac.jsx)(Il,{id:"version",children:Object(ac.jsx)("div",{children:t})}):Object(ac.jsx)("a",Object(g.a)(Object(g.a)({},Ts.newTabLink(kn.External.Status)),{},{children:Object(ac.jsx)(Il,{id:"version",children:Object(ac.jsx)("div",{children:t})})}))},Dl=new(function(){function e(){var t=this;Object(l.a)(this,e),this.mouseTimeout=new Ve,this.cursorVisible=!0,this.TTL=5e3,this.hideCursor=function(){document.body.classList.add("hideCursor"),t.cursorVisible=!1},this.onMove=function(){t.cursorVisible||(document.body.classList.remove("hideCursor"),t.cursorVisible=!0),t.mouseTimeout.schedule(t.hideCursor,t.TTL)}}return Object(h.a)(e,[{key:"isVisible",value:function(){return this.cursorVisible}},{key:"addListener",value:function(){document.body.addEventListener("mousemove",this.onMove)}},{key:"removeListener",value:function(){document.body.removeEventListener("mousemove",this.onMove)}}]),e}()),Hl="8vh",El="6vh",_l=b.a.div(dl||(dl=Object(f.a)(["\n  position: absolute;\n  z-index: ",";\n  width: auto;\n  height: auto;\n\n  display: flex;\n\n  ","\n"])),Ts.zIndex.MenuOverlay,vn.isMobile?"\n    top: 50%;\n    left: 4vh;\n    transform: translate(0%, -50%);\n\n    flex-direction: column;\n    justify-content: flex-end;\n    align-items: flex-end;\n  ":"\n    bottom: 2vh;\n    left: 50%;\n    transform: translate(-50%, 0%);\n\n    flex-direction: row;\n    justify-content: center;\n    align-items: center;\n  "),Fl=b.a.div(pl||(pl=Object(f.a)(["\n  ","\n\n  & > a {\n    text-decoration: none;\n  }\n"])),vn.isMobile?"\n    margin: 1vh 0;\n  ":"\n    margin: 0 1vh;\n  "),Ll=b.a.div(fl||(fl=Object(f.a)(["\n  ","\n  border-radius: 200%;\n  ","\n  ","\n"])),(function(e){return"\n    background-color: black;\n    background-image: url(".concat(e.src,");\n    background-size: auto 60%;\n    background-position: center;\n    background-repeat: no-repeat;\n  ")}),(function(e){return e.highlight?"\n    filter: invert(100%);\n  ":""}),vn.isMobile?"\n    width: ".concat(Hl,";\n    height: ").concat(Hl,";\n  "):"\n    width: ".concat(El,";\n    height: ").concat(El,";\n  ")),Gl=b.a.div(bl||(bl=Object(f.a)(["\n  border-radius: 200%;\n\n  color: white;\n  background-color: black;\n  ","\n\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n\n  ","\n"])),(function(e){return e.highlight?"\n    filter: invert(100%);\n  ":""}),vn.isMobile?"\n    font-size: ".concat("3vh",";\n    width: ").concat(Hl,";\n    height: ").concat(Hl,";\n  "):"\n    font-size: ".concat("2vh",";\n    width: ").concat(El,";\n    height: ").concat(El,";\n  "));function zl(e){var t=e.href,n=e.copy,a=e.imgSrc,i=Object(r.useState)(!1),o=Object(m.a)(i,2),s=o[0],c=o[1];return Object(ac.jsx)(Fl,{children:Object(ac.jsx)("a",Object(g.a)(Object(g.a)({},Ts.newTabLink(t)),{},{children:a?Object(ac.jsx)(Ll,{src:a,highlight:s,onMouseOver:function(){return Dl.isVisible()&&c(!0)},onMouseLeave:function(){return c(!1)}}):Object(ac.jsx)(Gl,{highlight:s,onMouseOver:function(){return Dl.isVisible()&&c(!0)},onMouseLeave:function(){return c(!1)},children:n})}))})}var Wl,Nl,Ul,ql,Vl,Yl,Jl=function(){return Ts.showExternalLinks()?Object(ac.jsxs)(_l,{children:[Object(ac.jsx)(zl,{href:kn.External.Twitter,imgSrc:ni.Social.Twitter}),Object(ac.jsx)(zl,{href:kn.External.Twitch,imgSrc:ni.Social.Twitch}),Object(ac.jsx)(zl,{href:kn.External.Discord,imgSrc:ni.Social.Discord}),Object(ac.jsx)(zl,{href:kn.External.Redbubble,imgSrc:ni.Social.Redbubble}),Object(ac.jsx)(zl,{href:kn.External.Patreon,imgSrc:ni.Social.Patreon}),Object(ac.jsx)(zl,{href:kn.External.Bandcamp,imgSrc:ni.Social.Bandcamp}),Object(ac.jsx)(zl,{href:kn.Links.FaqUrl,copy:"FAQ"})]}):null},Kl=b.a.div(Wl||(Wl=Object(f.a)(["\n  ","\n\n  position: absolute;\n  z-index: ",";\n  top: 0;\n  right: 39vh;\n  width: auto;\n  height: auto;\n\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: flex-start;\n"])),gc,Ts.zIndex.MenuOverlay),Ql=b.a.div(Nl||(Nl=Object(f.a)(["\n  position: relative;\n  width: auto;\n  height: auto;\n  margin-left: 2vh;\n  text-align: center;\n\n  font-size: 1.5vh;\n  box-sizing: border-box;\n  padding: 1vh;\n  border: 0.2vh solid black;\n  border-radius: 0 0 0.5em 0.5em;\n  border-top-width: 0;\n  background-color: var(--backtext);\n  color: var(--foretext);\n"]))),Zl=b.a.div(Ul||(Ul=Object(f.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n"]))),Xl=b.a.div(ql||(ql=Object(f.a)(["\n  color: black;\n  font-style: italic;\n"]))),$l=b.a.span(Vl||(Vl=Object(f.a)(["\n  position: absolute;\n  top: 0;\n  right: 0;\n  height: 2.5vh;\n  width: 2.5vh;\n  margin: 0;\n  padding: 0;\n\n  font-size: 0.8em;\n  cursor: pointer;\n  color: red;\n\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n"]))),eh="\nThe browser you are using has performance issues.\n<br/>\nPlease use Chrome, Edge, or Safari instead.\n".trim(),th=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={news:n.news,closed:n.closed,warnings:n.warnings},e.onHide=function(){n.closed=!0,e.setState({closed:n.closed})},e.onHideWarning=function(t){n.warnings=n.warnings.filter((function(e){return e!==t})),e.setState({warnings:n.warnings.concat()})},e}return Object(h.a)(n,[{key:"componentDidMount",value:function(){var e=this;n.setState=function(t){return e.setState(t)}}},{key:"componentWillUnmount",value:function(){n.setState=function(){}}},{key:"render",value:function(){var e=this,t=this.state,n=t.news,a=t.closed,r=t.warnings;if(vn.isMobile)return null;if(Ts.getEventModeDipSwitch())return null;var i=a&&[]||kn.Debug.ShowNews&&['Example news with <a href="#">link</a> goes here']||void 0!==n&&[n]||[];return 0===i.length&&0===r.length?"":Object(ac.jsxs)(Kl,{children:[r.map((function(t,n){return Object(ac.jsxs)(Ql,{children:[Object(ac.jsxs)(Zl,{children:[Object(ac.jsx)(Xl,{children:"Warning!"}),Object(ac.jsx)("div",{dangerouslySetInnerHTML:{__html:t}})]}),Object(ac.jsx)($l,{onClick:function(){return e.onHideWarning(t)},children:"\u274c"})]},n)})),i.map((function(t,n){return Object(ac.jsxs)(Ql,{children:[Object(ac.jsxs)(Zl,{children:[Object(ac.jsx)(Xl,{children:"News!"}),Object(ac.jsx)("div",{dangerouslySetInnerHTML:{__html:t}})]}),Object(ac.jsx)($l,{onClick:e.onHide,children:"\u274c"})]},n)}))]})}}],[{key:"startFetchLoop",value:function(){var e=this;if(!this.looping){this.looping=!0;var t=function(){var n=Object(u.a)(Object(c.a)().mark((function n(){var a,r;return Object(c.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,es.news();case 2:return(a=n.sent)&&(r=a.message.length>0?a.message:void 0,e.news!==r&&(e.news=r,e.closed=!1,e.setState({news:e.news,closed:e.closed,warnings:e.warnings}))),n.next=6,Le(6e4);case 6:t();case 7:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();t()}}}]),n}(i.a.Component);th.news=void 0,th.closed=!kn.Debug.ShowNews,th.warnings=null!==(Yl=On())&&void 0!==Yl&&Yl.isNotRecommended?[eh]:[],th.setState=function(){},th.looping=!1;var nh,ah,rh=function(e){return e.NotSet="_unknown",e.Welcome="welcome",e.Tutorial="how_to_play",e.VersusLocal="vs_local",e.VersusCpu="vs_cpu",e.VersusBoss="vs_boss",e.Training="training",e.FrameData="frame_data",e.DebugRef="debug_ref",e.About="about",e.Modding="modding",e.Menu="menu",e.Ranked="online_ranked",e.Casual="online_casual",e.Private="online_private",e.Lobby="online_lobby",e.AccountMenu="online_account",e.Stats="online_stats",e.Leaderboard="online_leaderboard",e.HallOfFame="hall_of_fame",e.Replay="replay",e}({}),ih=function(){function e(){Object(l.a)(this,e),this.id=ci.usingLocalStorage().ensureDeviceId(),this.TTL=18e4,this.state={updated:0,current:rh.NotSet,tally:void 0}}return Object(h.a)(e,[{key:"debug",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(){var t;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetch();case 2:t=Object.values(oh.get()).reduce((function(e,t){return e+t}),0),wn(t);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetch",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(){var t;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.state.updated=st.now(),e.prev=1,e.next=4,rs.presence({id:this.id,ptype:this.state.current});case 4:t=e.sent,wn("presence fetch:",t),this.state.tally=t,e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),wn("presence fetch failed");case 12:case"end":return e.stop()}}),e,this,[[1,9]])})));return function(){return e.apply(this,arguments)}}()},{key:"set",value:function(e){var t=this,n=this.state.current;this.state.current=e,n!==e&&(wn("presence change:",n,e),n===rh.NotSet&&setInterval((function(){return t.fetch()}),this.TTL),this.fetch())}},{key:"fromMeta",value:function(e){return e.isModTraining&&rh.Modding||e.isTutorial&&rh.Tutorial||e.isTrainingMode&&rh.Training||e.isLobbyPlaying&&rh.Lobby||e.isLobbySpectator&&rh.Lobby||e.isCasual&&rh.Casual||e.isRanked&&rh.Ranked||e.isPrivate&&rh.Private||e.isReplay&&rh.Replay||e.isCpuVsCpu&&rh.VersusCpu||e.isHumanVsBoss&&rh.VersusBoss||e.isHumanVsCpu&&rh.VersusCpu||rh.VersusLocal}},{key:"setFromMeta",value:function(e){this.set(this.fromMeta(e))}},{key:"get",value:function(){return this.state.tally}}]),e}(),oh=new ih,sh=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={playerCount:void 0},e.timeout=new Ve,e}return Object(h.a)(n,[{key:"componentDidMount",value:function(){this.fetch()}},{key:"componentWillUnmount",value:function(){this.timeout.clear()}},{key:"fetch",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(){var t,n,a=this;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=oh.get()){e.next=3;break}return e.abrupt("return");case 3:n=Object.values(t).reduce((function(e,t){return e+t}),0),this.setState({playerCount:n}),this.timeout.schedule((function(){return a.fetch()}),1e4);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.playerCount;if(void 0===e)return null;var t=(kn.isDebug?"testers":kn.isAprilFools&&"fools")||"players";return Object(o.createPortal)(Object(ac.jsxs)("div",{children:[e," ",t," online"]}),document.getElementById("version"))}}]),n}(i.a.Component),ch=n(16),uh=function(e){return e.Up="Up",e.Down="Down",e.Left="Left",e.Right="Right",e.Reset="Reset",e.Solve="Solve",e.NoOp="NoOp",e}({}),lh=function(e){return e.Up="U",e.Down="D",e.Left="L",e.Right="R",e}({}),hh=(nh={},Object(v.a)(nh,uh.Up,lh.Up),Object(v.a)(nh,uh.Down,lh.Down),Object(v.a)(nh,uh.Left,lh.Left),Object(v.a)(nh,uh.Right,lh.Right),nh),dh=(ah={},Object(v.a)(ah,lh.Up,uh.Up),Object(v.a)(ah,lh.Down,uh.Down),Object(v.a)(ah,lh.Left,uh.Left),Object(v.a)(ah,lh.Right,uh.Right),ah),ph=function(){function e(t,n,a){Object(l.a)(this,e),this.point=void 0,this.points=void 0,this.moves=void 0,this.point=t,this.points=n,this.moves=a}return Object(h.a)(e,[{key:"addMove",value:function(e,t){this.points.push(this.point),this.moves.push(t),this.point=e}},{key:"getNextMoves",value:function(){var e=this;return[lh.Up,lh.Down,lh.Left,lh.Right].map((function(t){return{move:t,history:e.clone()}}))}},{key:"clone",value:function(){return new e(this.point,Object(k.a)(this.points),Object(k.a)(this.moves))}},{key:"printMoves",value:function(){return this.moves.join(", ")}}]),e}(),fh=function(e){return e[e.Start=1]="Start",e[e.Win=2]="Win",e[e.Block=3]="Block",e}({}),bh=function(){function e(t,n,a,r,i){Object(l.a)(this,e),this.width=void 0,this.height=void 0,this.start=void 0,this.win=void 0,this.blocks=void 0,this.blocksByKey={},this.width=t,this.height=n,this.start=a,this.win=r,this.blocks=i,this.blocksByKey=this.blocks.reduce((function(e,t){return e[t.toString()]=fh.Block,e}),{})}return Object(h.a)(e,[{key:"isWinningPoint",value:function(e){return this.win.equals(e)}},{key:"isIllegalPoint",value:function(e){var t=this.blocksByKey,n=this.width,a=this.height;return!!t[e.toString()]||e.x<0||e.x>=n||e.y<0||e.y>=a}},{key:"applyMove",value:function(e,t){for(var n=e,a=[{move:t,point:n}];;){var r=n.clone();if(t===lh.Left)r.x--;else if(t===lh.Right)r.x++;else if(t===lh.Up)r.y--;else{if(t!==lh.Down)throw new Error("unexpected move: ".concat(t));r.y++}if(this.isIllegalPoint(r))break;if(a.push({move:t,point:r}),n=r,this.isWinningPoint(n))break}return{point:n,traveled:a}}},{key:"solve",value:function(){for(var e=this,t={},n=[new ph(this.start,[],[])];n.length;){var a=n.shift(),r=a.point.toString();if(!t[r]){if(t[r]=!0,this.isWinningPoint(a.point))return a;a.getNextMoves().forEach((function(t){var a=t.move,r=t.history,i=e.applyMove(r.point,a).point;r.addMove(i,a),n.push(r)}))}}return null}},{key:"solvableEverywhere",value:function(){for(var e=this,t={},n=[this.start],a=[lh.Up,lh.Down,lh.Left,lh.Right],r=function(){var r=n.shift(),i=r.toString();if(!t[i]){var o=a.map((function(t){return e.applyMove(r,t).point}));t[i]=o.map((function(e){return e.toString()})),n.push.apply(n,Object(k.a)(o))}};n.length;)r();var i={};for(var o in t){var s,c=Object(Rr.a)(t[o]);try{for(c.s();!(s=c.n()).done;){var u,l=s.value;i[l]=Lt(null!==(u=i[l])&&void 0!==u?u:[]).concat(o)}}catch(g){c.e(g)}finally{c.f()}}if(!!!i[this.win.toString()])return!1;for(var h={},d=[this.win.toString()];d.length;){var p=d.shift();if(!h[p]){var f;h[p]=!0;var b=null!==(f=i[p])&&void 0!==f?f:[];d.push.apply(d,Object(k.a)(b))}}return Object.keys(t).length===Object.keys(h).length}},{key:"print",value:function(){for(var e=this.width,t=this.height,n=this.start,a=this.win,r=this.blocks,i=[],o=function(t){for(var o=[],s=function(e){var i="_";a.x===e&&a.y===t&&(i="W"),n.x===e&&n.y===t&&(i="S"),r.forEach((function(n){n.x===e&&n.y===t&&(i="0")})),o.push(i)},c=0;c<e;c++)s(c);i.push(o)},s=0;s<t;s++)o(s);return i.map((function(e){return e.join("")})).join("\n")}}]),e}(),gh=Object(h.a)((function e(t,n){Object(l.a)(this,e),this.level=void 0,this.soln=void 0,this.level=t,this.soln=n})),mh=function(){function e(t){Object(l.a)(this,e),this.level=void 0,this.soln=void 0,this.hero=void 0,this.level=t.level,this.soln=t.soln,this.hero=new ph(this.level.start,[],[])}return Object(h.a)(e,[{key:"reset",value:function(){this.hero=new ph(this.level.start,[],[])}},{key:"moveHero",value:function(e){var t=this.level,n=this.hero,a=t.applyMove(n.point,e);return n.addMove(a.point,e),a}}]),e}(),vh=function(){function e(t,n){Object(l.a)(this,e),this.x=void 0,this.y=void 0,this.x=t,this.y=n}return Object(h.a)(e,[{key:"clone",value:function(){return new e(this.x,this.y)}},{key:"toString",value:function(){return"".concat(this.x,",").concat(this.y)}},{key:"equals",value:function(e){return this.toString()===e.toString()}}],[{key:"fromString",value:function(t){var n=t.split(",");return new e(parseFloat(n[0]),parseFloat(n[1]))}}]),e}();function kh(e){for(var t=[],n=0;n<e;n++)t.push(n);return t}function jh(e,t){return e+Math.random()*(t-e)}var yh,xh,Oh,wh,Sh,Ch,Ah,Th,Mh=function(){function e(t,n){Object(l.a)(this,e),this.spaces=[];for(var a=0;a<n;a++)for(var r=0;r<t;r++)this.spaces.push(new vh(r,a))}return Object(h.a)(e,[{key:"pop",value:function(){var e=Math.floor(Math.random()*this.spaces.length);return this.spaces.splice(e,1)[0]}}]),e}(),Ph=function(){function e(t){Object(l.a)(this,e),this.settings=t}return Object(h.a)(e,[{key:"tryGenerateLevel",value:function(e){var t=this.settings,n=t.width,a=t.height,r=t.minMovesOptions,i=new Mh(n,a),o=i.pop(),s=i.pop(),c=kh(e).map((function(e){return i.pop()})),u=new bh(n,a,s,o,c),l=u.solve();return l&&r.includes(l.moves.length)&&u.solvableEverywhere()?new gh(u,l):null}},{key:"generateLevels",value:function(e,t){for(var n=this.settings,a=n.width,r=n.height,i=n.blockPercentMin,o=n.blockPercentMax,s=[],c=0,u=Math.min(t/10,100);s.length<e&&c<t;)for(var l=a*r*jh(i,o),h=0;s.length<e&&h<u;h++){c+=1;var d=this.tryGenerateLevel(l);d&&s.push(d)}return s}}]),e}(),Rh=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;Object(l.a)(this,e),this.started=void 0,this.milliseconds=void 0,this.started=new Date,this.milliseconds=t}return Object(h.a)(e,[{key:"getElapsed",value:function(){return(new Date).getTime()-this.started.getTime()}},{key:"getRemaining",value:function(){return this.milliseconds-this.getElapsed()}},{key:"getPercent",value:function(){return this.getRemaining()/this.milliseconds}},{key:"addTime",value:function(e){this.milliseconds+=e}},{key:"formatElapsed",value:function(){return Math.floor(this.getElapsed()/1e3).toString(10)}},{key:"formatRemaining",value:function(){return Math.floor(this.getRemaining()/1e3).toString(10)}}]),e}(),Ih=function(e){return e[e.Easy=1]="Easy",e[e.Medium=2]="Medium",e[e.Hard=3]="Hard",e[e.Infinite=4]="Infinite",e}({}),Bh=(yh={},Object(v.a)(yh,Ih.Easy,{gridSize:1,levelsPerTier:1,minMoves:5,totalLevels:5}),Object(v.a)(yh,Ih.Medium,{gridSize:1.5,levelsPerTier:1,minMoves:10,totalLevels:10}),Object(v.a)(yh,Ih.Hard,{gridSize:2,levelsPerTier:2,minMoves:12,totalLevels:16}),Object(v.a)(yh,Ih.Infinite,{gridSize:1.5,levelsPerTier:3,minMoves:7,secondsPerLevel:10,totalLevels:20}),yh),Dh=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e,Ih.Infinite)).levels=[],a.lastIndex=0,a.buffer=3,a}return Object(h.a)(n,[{key:"generateLevels",value:function(){var e,t=this.dimensions,n=this.levels,a=this.progression,r=this.lastIndex,i=a.gridSize;if(!(n.length>r+this.buffer)){var o,s,c=new vh(t.x*i,t.y*i),u=new Ph({width:c.x,height:c.y,blockPercentMin:.05,blockPercentMax:.3,minMovesOptions:(o=a.minMoves,s=10,kh(s).map((function(e){return e+o})))});(e=this.levels).push.apply(e,Object(k.a)(u.generateLevels(this.buffer,10)))}}},{key:"loadLevel",value:function(e){if(e<1)throw new Error("invalid index");for(;e>this.levels.length;)this.generateLevels();return this.lastIndex=e,this.levels[e-1]}}]),n}(function(){function e(t,n){Object(l.a)(this,e),this.dimensions=void 0,this.difficulty=void 0,this.totalLevels=void 0,this.progression=void 0,this.dimensions=t,this.difficulty=n,this.progression=Bh[n],this.totalLevels=this.progression.totalLevels}return Object(h.a)(e,[{key:"displayName",value:function(){return Ih[this.difficulty]}},{key:"isInfinite",value:function(){return this.difficulty===Ih.Infinite}},{key:"createStopwatch",value:function(){var e=1e3*(60-(this.progression.secondsPerLevel||0));return new Rh(this.isInfinite()?e:void 0)}},{key:"generateLevels",value:function(){throw new Error("base class")}},{key:"loadLevel",value:function(e){throw new Error("base class")}}]),e}()),Hh=function(e){return e[e.Hero=0]="Hero",e[e.Start=1]="Start",e[e.Goal=2]="Goal",e[e.Block=3]="Block",e}({}),Eh=b.a.div(xh||(xh=Object(f.a)(["\n  position: absolute;\n  transform: translate(-50%, -50%);\n\n  transition-property: top left;\n  transition-duration: 0.2s;\n  transition-timing-function: ease;\n\n  background-position: center;\n  background-size: 100%;\n\n  ","\n"])),(function(e){return"\n    top: ".concat(e.top,"%;\n    left: ").concat(e.left,"%;\n    width: ").concat(e.width,"%;\n    height: ").concat(e.height,"%;\n\n    ").concat(e.color?"\n      background-color: ".concat(e.color,";\n    "):"","\n\n    ").concat(e.image?"\n      background-image: url(".concat(e.image,");\n    "):"","\n  ")})),_h=Object(b.a)(Eh)(Oh||(Oh=Object(f.a)(["\n  background-color: purple;\n"]))),Fh=Object(b.a)(Eh)(wh||(wh=Object(f.a)([""]))),Lh=Object(b.a)(Eh)(Sh||(Sh=Object(f.a)([""]))),Gh=Object(b.a)(Eh)(Ch||(Ch=Object(f.a)(["\n  background-size: 120%;\n"]))),zh=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={},e}return Object(h.a)(n,[{key:"render",value:function(){var e=this.props,t=e.sl,n=e.block,a=e.blockType,r=t.level,i={top:100*(n.y+.5)/r.height,left:100*(n.x+.5)/r.width,width:100/r.width,height:100/r.height};return a===Hh.Hero?Object(ac.jsx)(Fh,Object(g.a)(Object(g.a)({},i),{},{image:this.props.heroAssets.image})):a===Hh.Start?Object(ac.jsx)(Lh,Object(g.a)(Object(g.a)({},i),{},{image:this.props.assets.start})):a===Hh.Goal?Object(ac.jsx)(Gh,Object(g.a)(Object(g.a)({},i),{},{image:this.props.assets.goal,color:this.props.heroAssets.goalBackgroundColor})):Object(ac.jsx)(_h,Object(g.a)(Object(g.a)({},i),{},{image:this.props.heroAssets.wall}))}}]),n}(i.a.Component),Wh=b.a.div(Ah||(Ah=Object(f.a)(["\n  position: relative;\n\n  ","\n\n  color: white;\n\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n"])),(function(e){return"\n    width: ".concat(e.pixels.width,"px;\n    height: ").concat(e.pixels.height,"px;\n\n    ").concat(e.floor?"\n      background-image: url(".concat(e.floor.image,");\n      background-size: ").concat(e.floor.size,"px ").concat(e.floor.size,"px;\n      background-repeat: tile;\n      background-position: top left;\n    "):"","\n  ")})),Nh=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={},e.levelIndex=1,e.solved=!1,e.characters=function(e){for(var t=e.concat(),n=t.length-1;n>0;n--){var a=Math.floor(Math.random()*(n+1)),r=[t[a],t[n]];t[n]=r[0],t[a]=r[1]}return t}(e.props.assets.characters),e.heroAssets=e.characters[0],e.dimensions=new vh(12,8),e.world=new Dh(e.dimensions),e.mounted=!1,e}return Object(h.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.mounted=!0,this.props.registerCallback((function(t){return e.handleCommand(t)})),this.loadAssets().then((function(){return e.loadLevel()}))}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"playSfx",value:function(e){e.play((new Date).getTime())}},{key:"loadAssets",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(){var t;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Promise.all([].concat(Object(k.a)([this.props.assets.start,this.props.assets.goal].map((function(e){return gi.loadStaticImage(e)}))),Object(k.a)(Vt(this.props.assets.characters.map((function(e){return[].concat(Object(k.a)([e.image,e.floor,e.wall].map((function(e){return gi.loadStaticImage(e)}))),Object(k.a)(e.moveSfx.clips.map((function(e){return e.load()}))),Object(k.a)(e.victorySfx.clips.map((function(e){return e.load()}))))})))))),e.next=3,Le(500);case 3:return e.next=5,t;case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadLevel",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(){var t,n;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.mounted){e.next=2;break}return e.abrupt("return");case 2:return this.heroAssets=Ut(this.heroAssets,this.characters),t=this.world.loadLevel(this.levelIndex++),n=new mh(t),e.next=7,uc(this,{game:{hero:n.hero.point,pl:n}});case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleCommand",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(t){var n,a,r,i;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.state.game){e.next=3;break}return e.abrupt("return");case 3:if(a=n.pl,!this.solved){e.next=6;break}return e.abrupt("return");case 6:if(t!==uh.NoOp){e.next=8;break}return e.abrupt("return");case 8:if(t!==uh.Solve){e.next=10;break}return e.abrupt("return",this.solve(a));case 10:if(t!==uh.Reset){e.next=16;break}return a.reset(),this.playSfx(this.heroAssets.moveSfx),e.next=15,uc(this,{game:Object(g.a)(Object(g.a)({},n),{},{hero:a.hero.point})});case 15:return e.abrupt("return");case 16:return r=hh[t],i=a.moveHero(r),!n.hero.equals(i.point)&&this.playSfx(this.heroAssets.moveSfx),e.next=22,uc(this,{game:Object(g.a)(Object(g.a)({},n),{},{hero:i.point})});case 22:if(!a.level.isWinningPoint(i.point)){e.next=31;break}return this.solved=!0,this.playSfx(this.heroAssets.victorySfx),e.next=28,Le(200);case 28:return e.next=30,this.loadLevel();case 30:this.solved=!1;case 31:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"solve",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(t){var n,a,r,i;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.handleCommand(uh.Reset),n=Object(Rr.a)(t.soln.moves),e.prev=2,n.s();case 4:if((a=n.n()).done){e.next=12;break}return r=a.value,e.next=8,Le(200);case 8:i=dh[r],this.handleCommand(i);case 10:e.next=4;break;case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),n.e(e.t0);case 17:return e.prev=17,n.f(),e.finish(17);case 20:case"end":return e.stop()}}),e,this,[[2,14,17,20]])})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e={height:this.props.heightpx,width:this.props.heightpx*this.dimensions.x/this.dimensions.y},t=this.state.game;if(!t)return Object(ac.jsx)(Wh,{pixels:e,style:{backgroundColor:"navyblue"},children:Object(ac.jsx)("div",{children:"loading..."})});var a={sl:t.pl,assets:this.props.assets,heroAssets:this.heroAssets},r=this.props.heightpx/t.pl.level.height;return Object(ac.jsxs)(Wh,{pixels:e,floor:{image:this.heroAssets.floor,size:r},"data-testid":n.TestID,children:[t.pl.level.blocks.map((function(e){return Object(ac.jsx)(zh,Object(g.a)(Object(g.a)({},a),{},{block:e,blockType:Hh.Block}),e.toString())})),Object(ac.jsx)(zh,Object(g.a)(Object(g.a)({},a),{},{block:t.pl.level.start,blockType:Hh.Start})),Object(ac.jsx)(zh,Object(g.a)(Object(g.a)({},a),{},{block:t.pl.level.win,blockType:Hh.Goal})),Object(ac.jsx)(zh,Object(g.a)(Object(g.a)({},a),{},{block:t.hero,blockType:Hh.Hero})),Object(ac.jsx)("div",{style:{display:"none"},"data-testid":n.TestIDMoveCount,children:t.pl.hero.moves.length})]})}}]),n}(i.a.Component);Nh.TestID="SlideBoard",Nh.TestIDMoveCount="SlideBoardMoveCount";var Uh=b.a.div(Th||(Th=Object(f.a)(["\n  width: 100%;\n  height: 100%;\n\n  color: white;\n  background-color: black;\n\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n"]))),qh=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).state={heightpx:1},a.containerRef=void 0,a.assets={start:ni.SlidingPuzzle.StartHeart,goal:ni.SlidingPuzzle.Spikeball,characters:[{image:ni.SlidingPuzzle.HeroNoodle,floor:ni.SlidingPuzzle.FloorNoodle,wall:ni.SlidingPuzzle.WallNoodle,goalBackgroundColor:"#366bff",moveSfx:Pi.MiniGame.NoodleMove,victorySfx:Pi.MiniGame.NoodleWin},{image:ni.SlidingPuzzle.HeroRice,floor:ni.SlidingPuzzle.FloorRice,wall:ni.SlidingPuzzle.WallRice,goalBackgroundColor:"#7e55ff",moveSfx:Pi.MiniGame.RiceMove,victorySfx:Pi.MiniGame.RiceWin},{image:ni.SlidingPuzzle.HeroBeef,floor:ni.SlidingPuzzle.FloorBeef,wall:ni.SlidingPuzzle.WallBeef,goalBackgroundColor:"#ffb43b",moveSfx:Pi.MiniGame.BeefMove,victorySfx:Pi.MiniGame.BeefWin},{image:ni.SlidingPuzzle.HeroPork,floor:ni.SlidingPuzzle.FloorPork,wall:ni.SlidingPuzzle.WallPork,goalBackgroundColor:"#ff8017",moveSfx:Pi.MiniGame.PorkMove,victorySfx:Pi.MiniGame.PorkWin},{image:ni.SlidingPuzzle.HeroOnion,floor:ni.SlidingPuzzle.FloorOnion,wall:ni.SlidingPuzzle.WallOnion,goalBackgroundColor:"#ff1f4f",moveSfx:Pi.MiniGame.OnionMove,victorySfx:Pi.MiniGame.OnionWin},{image:ni.SlidingPuzzle.HeroGarlic,floor:ni.SlidingPuzzle.FloorGarlic,wall:ni.SlidingPuzzle.WallGarlic,goalBackgroundColor:"#ff39e3",moveSfx:Pi.MiniGame.GarlicMove,victorySfx:Pi.MiniGame.GarlicWin}]},a.mounted=!1,a.checkSize=Object(u.a)(Object(c.a)().mark((function e(){var t,n;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.mounted){e.next=2;break}return e.abrupt("return");case 2:if(1===a.state.heightpx){e.next=11;break}return e.next=5,uc(Object(ch.a)(a),{heightpx:1});case 5:return e.next=7,Le(100);case 7:return e.next=9,a.checkSize();case 9:case 16:e.next=20;break;case 11:if(!(t=a.containerRef.current)){e.next=18;break}return n=t.getBoundingClientRect(),e.next=16,uc(Object(ch.a)(a),{heightpx:n.height});case 18:return e.next=20,uc(Object(ch.a)(a),{errorMessage:"game window had an error"});case 20:case"end":return e.stop()}}),e)}))),a.containerRef=i.a.createRef(),a}return Object(h.a)(n,[{key:"componentDidMount",value:function(){this.mounted=!0,this.checkSize(),window.addEventListener("resize",this.checkSize)}},{key:"componentWillUnmount",value:function(){this.mounted=!1,window.removeEventListener("resize",this.checkSize)}},{key:"render",value:function(){var e=this.state,t=e.heightpx,a=e.errorMessage;return Object(ac.jsxs)(Uh,{ref:this.containerRef,"data-testid":n.TestID,children:[Object(ac.jsx)(Nh,Object(g.a)(Object(g.a)({},this.props),{},{heightpx:t,assets:this.assets})),a&&Object(ac.jsx)("div",{children:a})]})}}]),n}(i.a.Component);qh.TestID="SlidePuzzle";var Vh,Yh,Jh,Kh=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).cb=function(){return Promise.resolve()},e.defaultControls=Object(g.a)(Object(g.a)({},kn.isDebug?{Digit1:uh.Solve}:{}),{},{ArrowLeft:uh.Left,ArrowRight:uh.Right,ArrowUp:uh.Up,ArrowDown:uh.Down}),e}return Object(h.a)(n,[{key:"componentDidMount",value:function(){var e=this;ls.addCallback(this,"keydown",(function(t){return e.handleKeyDown(t)}))}},{key:"componentWillUnmount",value:function(){ls.removeCallbacks(this)}},{key:"handleKeyDown",value:function(e){if("Escape"===e)return this.props.onExit();var t=this.defaultControls[e];void 0!==t&&this.cb(t)}},{key:"handleControls",value:function(e,t){var n;if(!this.defaultControls[t]){var a=(n={},Object(v.a)(n,te.left,uh.Left),Object(v.a)(n,te.right,uh.Right),Object(v.a)(n,te.attack1,uh.Up),Object(v.a)(n,te.attack2,uh.Down),Object(v.a)(n,te.attack3,uh.Reset),Object(v.a)(n,te.attack4,uh.NoOp),Object(v.a)(n,te.menu,uh.NoOp),n)[e];void 0!==a&&this.cb(a)}}},{key:"handleHolds",value:function(e){var t,n=Object(Rr.a)(e);try{for(n.s();!(t=n.n()).done;){t.value===te.attack3&&this.props.onExit()}}catch(a){n.e(a)}finally{n.f()}}},{key:"render",value:function(){var e=this;return Object(ac.jsxs)(ac.Fragment,{children:[Object(ac.jsx)(qh,{registerCallback:function(t){return e.cb=t}}),Object(ac.jsx)(cc,{onPlayer1Press:function(t,n){return e.handleControls(t,n)},onPlayer1Hold:function(t){return e.handleHolds(t)}})]})}}]),n}(i.a.Component);Kh.Title="Slide Puzzle";var Qh=b.a.div(Vh||(Vh=Object(f.a)(["\n  position: absolute;\n  z-index: ",";\n  top: ","vh;\n  right: 8vh;\n  width: auto;\n  height: auto;\n\n  font-size: 2vh;\n\n  display: flex;\n  flex-direction: center;\n  justify-content: center;\n  align-items: center;\n"])),Ts.zIndex.MenuOverlay,(function(e){return 6*e.offset+2})),Zh=b.a.div(Yh||(Yh=Object(f.a)(["\n  padding: 1vh;\n  border: 0.2vh solid black;\n  border-radius: 0.5em;\n\n  cursor: pointer;\n  background-color: var(--backtext);\n  color: var(--foretext);\n  &:hover {\n    background-color: var(--foretext);\n    color: var(--backtext);\n  }\n\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n\n  & > div {\n    margin: 0 0.5em;\n  }\n"]))),Xh=b.a.div(Jh||(Jh=Object(f.a)(["\n  text-align: center;\n  width: 8em;\n"]))),$h=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).singleton=n,e.state={current:e.singleton.options.filter((function(t){return t.url===e.singleton.getMusicUrl()}))[0]},e.onPrev=function(t){t.stopPropagation();var n=Nt(e.state.current,e.singleton.options,(function(e,t){return e.url===t.url}));return e.onChange(n)},e.onNext=function(t){t.stopPropagation();var n=Ut(e.state.current,e.singleton.options,(function(e,t){return e.url===t.url}));return e.onChange(n)},e}return Object(h.a)(n,[{key:"componentDidMount",value:function(){this.singleton.play()}},{key:"onChange",value:function(e){li.MusicOverlayUrl.set(e.url),this.singleton.play(),this.setState({current:e})}},{key:"render",value:function(){var e,t;if(vn.isMobile)return null;if(null!==(e=Ts.getEventModeDipSwitch())&&void 0!==e&&e.hideVolumeControls)return null;var n=this.state.current;return Object(ac.jsx)(Qh,{offset:null!==(t=this.props.offset)&&void 0!==t?t:0,children:Object(ac.jsxs)(Zh,{onClick:this.onNext,children:[Object(ac.jsx)("div",{onClick:this.onPrev,children:"\ud83c\udfb6"}),Object(ac.jsx)(Xh,{children:n.title}),Object(ac.jsx)("div",{children:"\ud83c\udfb6"})]})})}}],[{key:"getMusicUrl",value:function(){var e=li.MusicOverlayUrl.get(),t=n.options.filter((function(t){return t.url===e}))[0];return(null!==t&&void 0!==t?t:n.options[0]).url}},{key:"play",value:function(){var e=this.getMusicUrl();e===this.muted?Si.stopAll():Si.load(e).playWhenLoaded()}}]),n}(i.a.Component);$h.muted="n/a",$h.options=[{title:"Title Music",url:ni.Music.Title},{title:"Character Select",url:ni.Music.CharSelect}].concat(Object(k.a)(ni.DefaultStages.map((function(e){return{title:e.name,url:e.musicSrc}}))),[{title:"(no music)",url:$h.muted}]);var ed,td,nd,ad,rd,id,od=function(e){return Object(ac.jsx)(Rp,{title:e.title,infos:[{label:Object(ac.jsx)("div",{style:{fontSize:"0.6em",padding:"0 1em"},children:"This menu has been disabled for the duration of the April Fools event. Please come back later."})}],onExit:e.onExit})},sd=function(e){return Object(ac.jsx)(Rp,{title:e.title,infos:[{label:Object(ac.jsx)("div",{style:{fontSize:"0.6em",padding:"0 1em"},children:"This section is under maintenance and is temporarily disabled. Please check back later."})}],onExit:e.onExit})},cd=function(){function e(){Object(l.a)(this,e),this.addListener((function(){return ls.releaseAll()}))}return Object(h.a)(e,[{key:"getElm",value:function(){return document.body}},{key:"isFullscreen",get:function(){return!!document.fullscreenElement||!!document.webkitFullscreenElement}},{key:"enter",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(){var t;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this.getElm()).requestFullscreen){e.next=3;break}return e.abrupt("return",t.requestFullscreen().catch(console.error));case 3:if(!t.webkitRequestFullscreen){e.next=5;break}return e.abrupt("return",t.webkitRequestFullscreen());case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"exit",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(){return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!document.exitFullscreen){e.next=2;break}return e.abrupt("return",document.exitFullscreen());case 2:if(!document.webkitExitFullscreen){e.next=4;break}return e.abrupt("return",document.webkitExitFullscreen());case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"toggle",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(){return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isFullscreen){e.next=4;break}return e.abrupt("return",this.exit());case 4:return e.abrupt("return",this.enter());case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addListener",value:function(e){var t=this.getElm();t.addEventListener("fullscreenchange",e),t.addEventListener("webkitfullscreenchange",e)}},{key:"removeListener",value:function(e){var t=this.getElm();t.removeEventListener("fullscreenchange",e),t.removeEventListener("webkitfullscreenchange",e)}}]),e}(),ud=new cd;function ld(e){var t=Object(r.useRef)(0),n=Object(r.useRef)(new Ve),a=Object(r.useCallback)((function(){t.current++,t.current===e.clicksToUnlock?n.current.schedule(e.onUnlock,3e3):n.current.clear()}),[e.clicksToUnlock,e.onUnlock]);return Object(ac.jsx)("span",{onClick:a,children:e.children})}var hd=b.a.div(ed||(ed=Object(f.a)(["\n  z-index: ",";\n  position: fixed;\n  bottom: 0vh;\n  right: 2vh;\n  width: auto;\n  height: auto;\n\n  font-size: 2vh;\n  text-transform: none;\n\n  display: flex;\n"])),Ts.zIndex.Pause),dd=b.a.img(td||(td=Object(f.a)(["\n  cursor: pointer;\n  height: 10vh;\n  width: auto;\n"]))),pd=b.a.div(nd||(nd=Object(f.a)(["\n  z-index: ",";\n  position: fixed;\n  width: 100%;\n  height: 100%;\n  background-color: rgba(0, 0, 0, 0.5);\n"])),Ts.zIndex.Pause),fd=Object(b.a)(Pc)(ad||(ad=Object(f.a)(["\n  width: auto;\n  height: auto;\n"])));function bd(e){return Object(ac.jsx)(fd,{children:Object(ac.jsxs)(Rc,{children:[e.children,Object(ac.jsx)(Ic,{onClick:e.onExit,children:"X"})]})})}var gd=b.a.div(rd||(rd=Object(f.a)(["\n  padding: 2em;\n"]))),md=b.a.div(id||(id=Object(f.a)(["\n  border: 1px solid white;\n  cursor: pointer;\n\n  margin: 0.5em;\n  padding: 1em;\n  width: 16em;\n  box-sizing: border-box;\n\n  ","\n"])),(function(e){return e.isHover?"\n    color: black;\n    background-color: white;\n  ":"\n    color: white;\n    background-color: black;\n  "}));function vd(e){return Object(ac.jsx)(md,{isHover:e.isHover,onMouseEnter:e.onHover,onClick:e.onClick,children:e.label})}var kd=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={isOpen:!1,ignoreInputs:!1,buttonPopup:!1,optionIndex:0,busyFullscreen:!1,isSoundOn:li.SoundToggleOn.get(),isFullscreen:ud.isFullscreen,settings:e.defaultSettings},e.callbacks=new Map,e.onGamepadConnect=function(t){li.GamepadConnectedTrigger.get()===me.OpenConfig&&(e.state.isOpen||e.openButtonPopup())},e.onGamepadRemove=function(e){},e.onSoundToggle=function(){e.setState({isSoundOn:li.SoundToggleOn.get()})},e.onFullscreenUpdate=function(){e.setState({busyFullscreen:!1,isFullscreen:ud.isFullscreen})},e}return Object(h.a)(n,[{key:"defaultSettings",get:function(){return{hideButton:!1,hideCustomControls:!1,showPlayer2:!1,requireHold:!1,forceOpen:!1,forceExit:!1,onOpen:void 0,onClose:void 0,onLeaveGame:void 0,onExitMenu:void 0,subMenu:void 0}}},{key:"addSettings",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(t){return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,uc(this,(function(e){return{settings:Object(g.a)(Object(g.a)({},e.settings),t)}}));case 2:this.checkSettingsForOpen();case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"resetSettings",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(t){var n,a=this;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=It(t,(function(e){return a.defaultSettings[e]})),e.next=3,uc(this,(function(e){return{settings:Object(g.a)(Object(g.a)({},e.settings),n)}}));case 3:this.checkSettingsForOpen();case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"checkSettingsForOpen",value:function(){this.state.settings.forceOpen?this.openPopup():this.state.settings.forceExit&&this.closePopup()}},{key:"componentDidMount",value:function(){n._instance=this,cu.addListener(this.onSoundToggle),ud.addListener(this.onFullscreenUpdate),window.addEventListener("gamepadconnected",this.onGamepadConnect),window.addEventListener("gamepaddisconnected",this.onGamepadRemove)}},{key:"componentWillUnmount",value:function(){n._instance===this&&(n._instance=void 0),cu.removeListener(this.onSoundToggle),ud.removeListener(this.onFullscreenUpdate),window.removeEventListener("gamepadconnected",this.onGamepadConnect),window.removeEventListener("gamepaddisconnected",this.onGamepadRemove)}},{key:"genOptions",value:function(e){var t,n=this,a=e.settings.subMenu?[{label:e.settings.subMenu.label,callback:function(){var t=Object(u.a)(Object(c.a)().mark((function t(){var a,r;return Object(c.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null===(a=e.settings.subMenu)||void 0===a||!a.closePauseMenu){t.next=3;break}return t.next=3,n.closePopup();case 3:null===(r=e.settings.subMenu)||void 0===r||r.callback();case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()}]:[],r=e.settings.onLeaveGame?[{label:"Leave Game",callback:function(){return n.leaveGame()}}]:[],i={label:e.isSoundOn?"Mute Audio":"Unmute Audio",callback:function(){return cu.toggleSound()}},o=vn.isMobile?[]:[e.busyFullscreen?{label:"Please wait"}:{label:e.isFullscreen?"Exit Fullscreen":"Enter Fullscreen",callback:function(){var e=Object(u.a)(Object(c.a)().mark((function e(){return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,uc(n,{busyFullscreen:!0});case 2:ud.toggle();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),submitSound:Pi.Menu.Forward}],s=vn.isMobile||e.settings.hideCustomControls?[]:[{label:Gc.Title,callback:function(){return n.openButtonPopup()}}],l=e.settings.onExitMenu?[{label:null!==(t=e.settings.onExitMenu.label)&&void 0!==t?t:"Exit to Menu",callback:function(){var t=Object(u.a)(Object(c.a)().mark((function t(){var a;return Object(c.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.closePopup();case 2:null===(a=e.settings.onExitMenu)||void 0===a||a.callback();case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()}]:[],h=li.isEventMode.get()?[{label:"Exit Event Mode",callback:function(){var e=Object(u.a)(Object(c.a)().mark((function e(){return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:li.isEventMode.set(!1),Ts.browserReload();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]:[];return[].concat(a,r,[i],o,s,l,h)}},{key:"openPopup",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(){return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.state.isOpen){e.next=2;break}return e.abrupt("return");case 2:return Pi.Menu.Forward.play(),e.next=5,uc(this,{isOpen:!0,ignoreInputs:!0,buttonPopup:!1,optionIndex:0});case 5:if(!this.state.settings.onOpen){e.next=8;break}return e.next=8,this.state.settings.onOpen();case 8:return e.next=10,Le(100);case 10:return e.next=12,uc(this,{ignoreInputs:!1});case 12:Array.from(this.callbacks.values()).forEach((function(e){return e.onOpen&&e.onOpen()}));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"closePopup",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(){return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.state.isOpen){e.next=2;break}return e.abrupt("return");case 2:return Pi.Menu.Backward.play(),e.next=5,uc(this,{isOpen:!1,buttonPopup:!1});case 5:if(!this.state.settings.onClose){e.next=8;break}return e.next=8,this.state.settings.onClose();case 8:Array.from(this.callbacks.values()).forEach((function(e){return e.onClose&&e.onClose()}));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"openButtonPopup",value:function(){this.state.buttonPopup||(Pi.Menu.Forward.play(),this.setState({buttonPopup:!0}))}},{key:"closeButtonPopup",value:function(){this.state.buttonPopup&&(Pi.Menu.Backward.play(),this.setState({buttonPopup:!1}))}},{key:"leaveGame",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(){return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.closePopup();case 2:this.state.settings.onLeaveGame&&this.state.settings.onLeaveGame();case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleProp",value:function(e,t){var n=this.state,a=n.isOpen,r=n.ignoreInputs,i=n.optionIndex,o=n.settings;if(!r)if(e!==te.menu){if(a)if("Escape"!==t){var s=this.genOptions(this.state);if(e===te.left)return Pi.Menu.Change.play(),void this.setState({optionIndex:(i+s.length-1)%s.length});if(e===te.right)return Pi.Menu.Change.play(),void this.setState({optionIndex:(i+s.length+1)%s.length});if(e!==te.attack1&&e!==te.attack4)e!==te.attack2||this.closePopup();else{var c,u=s[i];null!==u&&void 0!==u&&u.callback&&(null===(c=u.submitSound)||void 0===c||c.play(),u.callback())}}else this.closePopup()}else a?this.closePopup():o.requireHold||this.openPopup()}},{key:"handleHold",value:function(e){var t=this.state,n=t.isOpen,a=t.ignoreInputs,r=t.settings;if(!a&&!n&&r.requireHold){var i,o=li.Controls.get(),s=new ua(o),c=Object(Rr.a)(e);try{for(c.s();!(i=c.n()).done;){var u=i.value;if(s.either.menu(u.code))return void this.openPopup()}}catch(l){c.e(l)}finally{c.f()}}}},{key:"handleEventMenuInput",value:function(e,t){return e===ae.p1menuUp||e===ae.p2menuUp?this.handleProp(te.left,t):e===ae.p1menuDown||e===ae.p2menuDown?this.handleProp(te.right,t):void 0}},{key:"onCheatUnlock",value:function(){li.CanCheat.get()?Pi.Menu.CheatOff.play():Pi.Menu.CheatOn.play(),li.CanCheat.set(!li.CanCheat.get())}},{key:"renderPopup",value:function(e){var t=this,a=e.isOpen,r=e.buttonPopup,i=e.optionIndex,o=e.settings;if(r)return Object(ac.jsx)(pd,{onClick:function(){return t.closeButtonPopup()},children:Object(ac.jsx)("div",{onClick:function(e){return e.stopPropagation()},children:Object(ac.jsx)(Gc,{showPlayer2:o.showPlayer2,onExit:function(){return t.closeButtonPopup()}})})});if(!a)return null;var s=this.genOptions(e);return Object(ac.jsx)(pd,{onClick:function(){return t.closePopup()},children:Object(ac.jsx)("div",{onClick:function(e){return e.stopPropagation()},children:Object(ac.jsx)(bd,{onExit:function(){return t.closePopup()},children:Object(ac.jsxs)(gd,{children:[Object(ac.jsx)("h1",{children:Object(ac.jsx)(ld,{clicksToUnlock:7,onUnlock:function(){return t.onCheatUnlock()},children:n.Title})}),Object(ac.jsx)(Tc,{children:Object(ac.jsx)("div",{children:s.map((function(e,n){return Object(ac.jsx)(vd,{isHover:n===i,label:e.label,onHover:function(){return t.setState({optionIndex:n})},onClick:e.callback},n)}))})})]})})})})}},{key:"renderButton",value:function(e){var t=this;return e.settings.hideButton?null:Object(ac.jsx)(hd,{children:Object(ac.jsx)(dd,{src:ni.Notation.menu,onClick:function(){return t.openPopup()}})})}},{key:"render",value:function(){var e=this;return Object(ac.jsxs)(ac.Fragment,{children:[this.renderPopup(this.state),this.renderButton(this.state),Object(ac.jsx)(cc,{takeFocus:this.state.isOpen,onControllerInput:function(t,n){return e.handleProp(t,n)},onEventMenuInput:function(t,n){return e.handleEventMenuInput(t,n)},onHold:function(t){return e.handleHold(t)}})]})}}],[{key:"instance",get:function(){return this._instance}}]),n}(i.a.Component);kd.Title="Pause Menu",kd._instance=void 0;var jd,yd,xd,Od,wd,Sd,Cd,Ad,Td,Md,Pd,Rd,Id,Bd,Dd,Hd,Ed,_d,Fd,Ld,Gd,zd,Wd,Nd,Ud,qd,Vd,Yd,Jd,Kd,Qd,Zd,Xd,$d,ep,tp,np,ap,rp,ip,op,sp,cp,up,lp,hp,dp,pp,fp,bp,gp=function(){function e(t){Object(l.a)(this,e),this.generateSettings=t}return Object(h.a)(e,[{key:"mount",value:function(){var e,t,n=this.generateSettings();return wn("PauseSettings.mount()",n),null!==(e=null===(t=kd.instance)||void 0===t?void 0:t.addSettings(n))&&void 0!==e?e:Promise.resolve()}},{key:"unmount",value:function(){var e,t,n=this.generateSettings();return wn("PauseSettings.unmount()",n),null!==(e=null===(t=kd.instance)||void 0===t?void 0:t.resetSettings(n))&&void 0!==e?e:Promise.resolve()}}]),e}(),mp=function(e){return Object(ac.jsx)(Rp,{title:e.title,infos:[{label:Object(ac.jsx)("div",{style:{fontSize:"0.6em",padding:"0 1em"},children:"This menu has been disabled for this archived build."})}],onExit:e.onExit})},vp=b.a.div(jd||(jd=Object(f.a)(["\n  width: 80vh;\n\n  ","\n\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: stretch;\n  flex-wrap: nowrap;\n\n  text-align: center;\n  font-size: 1.5rem;\n  color: var(--foreground);\n"])),(function(e){return e.puzzleMargin?"\n    height: 95vh;\n    margin: 5vh;\n  ":"\n    height: 75vh;\n    margin: 5vh;\n    margin-top: 20vh;\n  "})),kp=b.a.div(yd||(yd=Object(f.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-start;\n  align-items: center;\n  flex-wrap: nowrap;\n"]))),jp=Object(b.a)(kp)(xd||(xd=Object(f.a)(["\n  /* scrolling */\n  overflow-x: hidden;\n  overflow-y: auto;\n"]))),yp=b.a.div(Od||(Od=Object(f.a)(["\n  position: absolute;\n  top: 5vh;\n  left: 0;\n  width: 100%;\n  height: 10vh;\n\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  flex-wrap: nowrap;\n\n  font-size: 10vh;\n  color: black;\n  text-shadow: 0.05em 0.05em 0px var(--heart);\n  text-decoration: underline;\n"]))),xp=b.a.img(wd||(wd=Object(f.a)(["\n  position: absolute;\n  top: 5vh;\n  left: 50%;\n  width: auto;\n  height: 15vh;\n  transform: translateX(-50%);\n"]))),Op=b.a.div(Sd||(Sd=Object(f.a)(["\n  flex-grow: 1;\n  margin-bottom: 5vh;\n  align-self: center;\n\n  border: 0.5vh solid white;\n  box-sizing: content-box;\n"]))),wp=b.a.div(Cd||(Cd=Object(f.a)(["\n  font-size: 0.8em;\n\n  & > * {\n    display: flex;\n    flex-direction: row;\n    justify-content: center;\n    align-items: center;\n  }\n\n  & img {\n    height: 1em;\n  }\n"]))),Sp=b.a.div(Ad||(Ad=Object(f.a)(["\n  font-size: 0.8em;\n\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n\n  & img {\n    height: 1em;\n    margin: 0 0.3em;\n  }\n"]))),Cp=b.a.div(Td||(Td=Object(f.a)(["\n  cursor: pointer;\n  text-transform: uppercase;\n  border: 1px solid var(--foretext);\n  border-radius: 0.5em;\n  box-sizing: border-box;\n  margin: 0.2vh 0px;\n\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n  flex-wrap: nowrap;\n\n  & > img {\n    height: 1em;\n    width: auto;\n    margin: 0px 0.5em;\n  }\n\n  color: var(--foretext);\n  ","\n  ","\n\n  width: ",";\n  min-height: ",";\n  height: ",";\n  font-size: ",";\n\n  ",";\n\n  ","\n  ","\n"])),(function(e){return e.isBack?"\n    background-color: var(--backtext-back);\n  ":"\n    background-color: var(--backtext);\n  "}),(function(e){return e.hover?"\n    background-color: var(--foretext);\n    color: var(--backtext);\n  ":""}),vn.isMobile?"100%":"70vh",(function(e){return e.shrink?"calc(6vh - 2px)":vn.isMobile?"12vh":"8vh"}),(function(e){return e.shrink?"calc(6vh - 2px)":vn.isMobile?"calc(16vh - 2px)":"calc(11vh - 2px)"}),(function(e){return e.shrink?"2.5vh":vn.isMobile?"6vh":"4vh"}),(function(e){return e.info?"\n    border-radius: 0;\n    cursor: not-allowed;\n    background-color: rgba(255, 255, 255, 0.7);\n  ":""}),(function(e){return e.copy&&e.copy.length>16?"\n    font-size: 3vh;\n  ":""}),(function(e){return e.copy&&e.copy.length>24?"\n    font-size: 2.5vh;\n  ":""})),Ap=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).divRef=i.a.createRef(),e}return Object(h.a)(n,[{key:"render",value:function(){return Object(ac.jsx)(Cp,Object(g.a)(Object(g.a)({},this.props),{},{hover:!1,info:!0,ref:this.divRef,children:this.props.children}))}}]),n}(i.a.Component),Tp=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).divRef=i.a.createRef(),e}return Object(h.a)(n,[{key:"render",value:function(){return Object(ac.jsx)(Cp,Object(g.a)(Object(g.a)({},this.props),{},{info:!1,ref:this.divRef,children:this.props.children}))}}]),n}(i.a.Component),Mp=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).divRef=i.a.createRef(),e}return Object(h.a)(n,[{key:"render",value:function(){var e=this.props.hover&&!this.props.hideHeart;return Object(ac.jsxs)(Cp,Object(g.a)(Object(g.a)({},this.props),{},{info:!1,ref:this.divRef,children:[e&&Object(ac.jsx)(Cc,{src:ni.MenuArt.ButtonHeart,alt:"heart"}),this.props.children,e&&Object(ac.jsx)(Cc,{src:ni.MenuArt.ButtonHeart,alt:"heart"})]}))}}]),n}(i.a.Component),Pp=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){var e,a;Object(l.a)(this,n);for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return(a=t.call.apply(t,[this].concat(o))).infoRefs=a.props.options.map((function(e){return i.a.createRef()})),a.optionRefs=a.props.options.map((function(e){return i.a.createRef()})),a.state={hoverIndex:0,focusIndex:void 0},a.handleInputPromise=Rl()(Promise.resolve()),a.hasFocused=!1,a.pauseSettings=null!==(e=a.props.pauseSettings)&&void 0!==e?e:new gp((function(){return a.hasFocused?{requireHold:void 0!==a.state.focusIndex}:{}})),a}return Object(h.a)(n,[{key:"componentDidMount",value:function(){this.pauseSettings.mount(),oh.set(this.props.presence),void 0!==this.props.startHoverIndex&&this.select(this.props.startHoverIndex,!0)}},{key:"componentWillUnmount",value:function(){this.pauseSettings.unmount(),this.handleInputPromise.trash()}},{key:"handleInput",value:function(e){var t=this.props,n=t.options,a=t.disableControllerInputs,r=t.includeSlidingPuzzle,i=this.state,o=i.hoverIndex,s=i.focusIndex,c=n.length;if(!a&&!r){if(void 0!==s)throw new Error("having focus already set should be unreachable");var u=Promise.resolve();if(e===te.attack2&&(Pi.Menu.Backward.play(),kn.setAppAsStarted(),this.props.onBack()),e!==te.attack1&&e!==te.attack4||(u=this.submit()),e===te.right){var l=(o+1)%c;u=this.select(l,!0)}if(e===te.left){var h=(o+c-1)%c;u=this.select(h,!0)}return this.handleInputPromise=Rl()(u),u}}},{key:"handleEventMenuInput",value:function(e){return e===ae.p1menuUp||e===ae.p2menuUp?this.handleInput(te.left):e===ae.p1menuDown||e===ae.p2menuDown?this.handleInput(te.right):void 0}},{key:"select",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(t,n){var a,r,i,o;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0!==this.state.focusIndex&&this.pauseSettings.mount(),e.next=3,uc(this,{hoverIndex:t,focusIndex:void 0});case 3:n&&(o=this.optionRefs[t],Ts.scrollIntoView(null===o||void 0===o||null===(i=o.current)||void 0===i?void 0:i.divRef)),null===(a=this.props.options[t])||void 0===a||null===(r=a.selectSound)||void 0===r||r.play();case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"setFocus",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(t){return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,uc(this,{focusIndex:t});case 2:this.hasFocused=!0,this.pauseSettings.mount();case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"unfocus",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(){return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Pi.Menu.Backward.play(),e.next=3,uc(this,{focusIndex:void 0});case 3:this.pauseSettings.mount();case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onClick",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(t){return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.select(t,!1);case 2:this.submit();case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"submit",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(){var t,n;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(kn.setAppAsStarted(),t=this.state.hoverIndex,((n=this.props.options[t]).submitSound||Pi.Menu.Forward).play(),!n.input&&!n.select){e.next=9;break}return e.next=7,this.setFocus(t);case 7:e.next=10;break;case 9:n.callback?n.callback():this.props.onChoose(t);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"renderTitle",value:function(e){return Object(ac.jsx)(yp,{children:e})}},{key:"renderLogo",value:function(e){return Object(ac.jsx)(xp,{src:e})}},{key:"renderInfo",value:function(e,t){return Object(ac.jsx)(Ap,{ref:this.infoRefs[t],copy:Zt(e.label)?e.label:void 0,children:e.label},"generic-info-"+t)}},{key:"renderOption",value:function(e,t){var n=this,a=this.state,r=a.hoverIndex,i=a.focusIndex,o=r===t,s=i===t;return e.select?Object(ac.jsx)(Tp,{ref:this.optionRefs[t],hover:o,onMouseOver:function(){return Dl.isVisible()&&n.select(t,!1)},onClick:function(){return n.onClick(t)},children:Object(ac.jsx)(Al,{label:e.label,select:e.select,focused:s,unfocus:function(){return n.unfocus()}})},"generic-select-"+t):e.input?Object(ac.jsxs)(Tp,{ref:this.optionRefs[t],hover:o,onMouseOver:function(){return Dl.isVisible()&&n.select(t,!1)},onClick:function(){return n.onClick(t)},children:[e.label&&Object(ac.jsxs)("span",{children:[e.label,"\xa0"]}),Object(ac.jsx)(Ml,{input:e.input,hover:r===t,focused:s,unfocus:function(){return n.unfocus()}})]},"generic-input-"+t):Object(ac.jsx)(Mp,{ref:this.optionRefs[t],hover:o,isBack:!!e.isBack,onMouseOver:function(){return Dl.isVisible()&&n.select(t,!1)},onClick:function(){return n.onClick(t)},hideHeart:e.hideHeart,children:e.label},"generic-button-"+t)}},{key:"renderSlidingPuzzle",value:function(){var e=this;return Object(ac.jsx)(Op,{children:Object(ac.jsx)(Kh,{onExit:function(){Pi.Menu.Backward.play(),kn.setAppAsStarted(),e.props.onBack()}})})}},{key:"render",value:function(){var e=this,t=this.props,n=t.bgStage,a=t.title,r=t.logoSrc,i=t.infos,o=t.options,s=t.disableAccount,c=t.enableSocial,u=t.includeSlidingPuzzle,l=this.state.focusIndex,h=o.slice(0,-1),d=o.slice(-1)[0],p=o.length-1,f=null!==n&&void 0!==n?n:ni.Stages.Playground;return Object(ac.jsxs)(yc,{src:gi.loadBackgroundImage(f.backgroundSrc).imageUrl,children:[a&&!u&&this.renderTitle(a),r&&!u&&this.renderLogo(r),Object(ac.jsxs)(vp,{puzzleMargin:u,children:[u&&this.renderSlidingPuzzle(),Object(ac.jsx)(kp,{children:i.map((function(t,n){return e.renderInfo(t,n)}))}),Object(ac.jsx)(jp,{children:h.map((function(t,n){return e.renderOption(t,n)}))}),d&&Object(ac.jsx)(kp,{children:this.renderOption(d,p)})]}),void 0===l&&Object(ac.jsx)(ac.Fragment,{children:Object(ac.jsx)(cc,{onControllerInput:function(t){return e.handleInput(t)},onEventMenuInput:function(t){return e.handleEventMenuInput(t)}})}),!s&&Object(ac.jsx)(sc,{}),c&&Object(ac.jsx)(Jl,{}),Object(ac.jsx)(cu,{}),Object(ac.jsx)($h,{}),Object(ac.jsx)(iu,{}),Object(ac.jsx)(sh,{}),Object(ac.jsx)(Bl,{}),Object(ac.jsx)(th,{}),this.props.children&&Object(ac.jsx)("div",{children:this.props.children})]})}}]),n}(i.a.Component),Rp=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={},e.backSound=Pi.Menu.Backward,e}return Object(h.a)(n,[{key:"componentDidMount",value:function(){this.checkForJump()}},{key:"componentDidUpdate",value:function(e){e.options!==this.props.options&&this.checkForJump()}},{key:"getFixedInfos",value:function(){return[].concat(Object(k.a)((this.props.infos||[]).filter((function(e){return!(vn.isMobile?e.hideOnMobile:e.hideOnDesktop)&&!(kn.hideBetaMenu&&e.isBeta)}))),Object(k.a)(this.props.includeSlidingPuzzle?[{label:Object(ac.jsx)(wp,{children:Object(ac.jsxs)("div",{children:["Arrow Keys / \xa0",Object(ac.jsx)("img",{src:ni.Notation.left,alt:"Left"}),Object(ac.jsx)("img",{src:ni.Notation.right,alt:"Right"}),Object(ac.jsx)("img",{src:ni.Notation.attack1,alt:"Light"}),Object(ac.jsx)("img",{src:ni.Notation.attack2,alt:"Heavy"}),"\xa0 to Move"]})})}]:[]))}},{key:"getFixedOptions",value:function(){var e;return[].concat(Object(k.a)((this.props.options||[]).filter((function(e){return!e.disable&&!(vn.isMobile?e.hideOnMobile:e.hideOnDesktop)&&!(kn.hideBetaMenu&&e.isBeta)}))),[{label:this.props.includeSlidingPuzzle?Object(ac.jsxs)(Sp,{children:["Hold ",Object(ac.jsx)("img",{src:ni.Notation.attack3,alt:"Special"})," to Exit"]}):null!==(e=this.props.onExitLabel)&&void 0!==e?e:"Back",submitSound:this.backSound,isBack:!0}])}},{key:"checkForJump",value:function(){var e=this.getFixedOptions(),t=e.map((function(e,t){return e.jumpTo?t:void 0})).filter((function(e){return void 0!==e})),n=t[0];if(void 0!==n){var a=e[n];(null!==a&&void 0!==a&&a.forceJump||kn.isAppStart)&&this.setState({chosenIndex:t[0]})}}},{key:"onChoose",value:function(e){e===this.getFixedOptions().length-1?this.props.onExit():this.setState({chosenIndex:e})}},{key:"onSubExit",value:function(){this.props.onChange&&(Pi.Menu.Backward.play(),kn.setAppAsStarted(),this.props.onChange()),this.setState({chosenIndex:void 0,previousIndex:this.state.chosenIndex})}},{key:"render",value:function(){var e,t=this,n=this.getFixedInfos(),a=this.getFixedOptions(),r=this.state,i=r.chosenIndex,o=r.previousIndex;if(void 0!==i){var s=a[i];if(!kn.Debug.SkipMenuEventBlocks){if(kn.isArchive&&null!==s&&void 0!==s&&s.blockDuringArchive){var c="string"===typeof s.label?s.label:"Archived";return Object(ac.jsx)(mp,{title:c,onExit:function(){return t.onSubExit()}})}if(kn.isAprilFools&&null!==s&&void 0!==s&&s.blockDuringAprilFools){var u="string"===typeof s.label?s.label:"April Fools";return Object(ac.jsx)(od,{title:u,onExit:function(){return t.onSubExit()}})}}if(s.blockWithFlag&&ss.get(s.blockWithFlag)){var l="string"===typeof s.label?s.label:"Under Construction";return Object(ac.jsx)(sd,{title:l,onExit:function(){return t.onSubExit()}})}if(null!==s&&void 0!==s&&s.comp)return s.comp({onExit:function(){return t.onSubExit()}})}var h=this.props.hideLast?a.slice(0,-1):a;return Object(ac.jsx)(Pp,{startHoverIndex:o,presence:null!==(e=this.props.presence)&&void 0!==e?e:rh.Menu,bgStage:this.props.bgStage,title:this.props.title,logoSrc:this.props.logoSrc,infos:n,options:h,onChoose:function(e){return t.onChoose(e)},onBack:function(){return t.onChoose(a.length-1)},hideLast:!!this.props.hideLast,disableAccount:!!this.props.disableAccount,disableControllerInputs:!!this.props.disableControllerInputs,enableSocial:!!this.props.enableSocial,includeSlidingPuzzle:!!this.props.includeSlidingPuzzle,pauseSettings:this.props.pauseSettings,children:this.props.children})}}]),n}(i.a.Component),Ip=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"render",value:function(){return Object(ac.jsx)(Rp,{presence:this.props.presence,bgStage:this.props.bgStage,title:this.props.title,infos:this.props.infos,onExit:function(){},hideLast:!0,disableAccount:!this.props.enableAccount,disableControllerInputs:!0})}}]),n}(i.a.Component),Bp=b.a.div(Md||(Md=Object(f.a)(["\n  padding: 1vh;\n  --block-size: 12vh;\n\n  color: white;\n  background-color: #333;\n"]))),Dp=b.a.div(Pd||(Pd=Object(f.a)(["\n\n  position: relative;\n\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: flex-start;\n  flex-wrap: nowrap;\n"]))),Hp=b.a.div(Rd||(Rd=Object(f.a)(["\n  ","\n  position: relative;\n  width: var(--block-size);\n  height: var(--block-size);\n  cursor: pointer;\n\n  background-image: url('","');\n  background-size: 90%;\n  background-position: center;\n  background-repeat: no-repeat;\n"])),(function(e){return e.smaller?"\n    font-size: 0.7em;\n    --block-size: 8vh;\n  ":""}),(function(e){return e.src})),Ep=b.a.div(Id||(Id=Object(f.a)(["\n  position: absolute;\n  text-align: center;\n  font-weight: bold;\n\n  ","\n  ","\n\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n\n  width: 1.5em;\n  height: 1.5em;\n  padding: 0.3em;\n  background-color: black;\n  border-radius: 0.2em;\n  box-sizing: border-box;\n"])),(function(e){return e.highlightColor?"\n    color: yellow;\n  ":""}),(function(e){return e.highlightReady?"\n    color: red;\n  ":""})),_p=Object(b.a)(Ep)(Bd||(Bd=Object(f.a)(["\n  top: 0.3em;\n  left: 0.3em;\n"]))),Fp=Object(b.a)(Ep)(Dd||(Dd=Object(f.a)(["\n  bottom: 0.3em;\n  right: 0.3em;\n"]))),Lp=function(e){return Object(ac.jsxs)(Hp,Object(g.a)(Object(g.a)({},e),{},{children:[e.selectPlayer1&&Object(ac.jsx)(_p,{highlightColor:e.colorPlayer1,highlightReady:e.readyPlayer1,children:"P1"}),e.selectPlayer2&&Object(ac.jsx)(Fp,{highlightColor:e.colorPlayer2,highlightReady:e.readyPlayer2,children:"P2"})]}))},Gp=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={},e.bosses=e.props.choiceOptions.filter((function(e){return!Zt(e)&&e.stats.isBoss})),e.modOptions=e.props.choiceOptions.filter((function(e){return e===Zu})),e.controlOptions=e.props.choiceOptions.filter((function(e){return e===Xu})),e.row1=ni.TopRowFighterWrappers.map((function(e){return e.original})),e.row2=ni.BottomRowFighterWrappers.map((function(e){return e.original})),e.row3=[].concat(Object(k.a)(e.bosses),[Qu],Object(k.a)(e.modOptions),Object(k.a)(e.controlOptions)),e.options=[].concat(Object(k.a)(e.row1),Object(k.a)(e.row2),Object(k.a)(e.row3)),e}return Object(h.a)(n,[{key:"isModChoice",value:function(e){return e===Zu||!Zt(e)&&e.stats.isMod}},{key:"renderRandom",value:function(e){var t=this.props;return Object(ac.jsx)(Lp,{smaller:!0,src:ni.MenuArt.UnknownFighter,selectPlayer1:!t.hidePlayer1&&t.hoverFighter1===e,selectPlayer2:!t.hidePlayer2&&t.hoverFighter2===e,colorPlayer1:t.colorPlayer1,colorPlayer2:t.colorPlayer2,readyPlayer1:t.readyPlayer1,readyPlayer2:t.readyPlayer2,onMouseOver:function(){return Dl.isVisible()&&t.onHover(e)},onClick:function(){return t.onClick(e)}},Qu)}},{key:"renderMods",value:function(e){var t=this.props;return Object(ac.jsx)(Lp,{smaller:!0,src:ni.MenuArt.CharacterSelectMods,selectPlayer1:!t.hidePlayer1&&this.isModChoice(t.hoverFighter1),selectPlayer2:!t.hidePlayer2&&this.isModChoice(t.hoverFighter2),colorPlayer1:t.colorPlayer1,colorPlayer2:t.colorPlayer2,readyPlayer1:t.readyPlayer1,readyPlayer2:t.readyPlayer2,onMouseOver:function(){return Dl.isVisible()&&t.onHover(e)},onClick:function(){return t.onClick(e)}},Zu)}},{key:"renderCustomControls",value:function(e){var t=this.props;return Object(ac.jsx)(Lp,{smaller:!0,src:ni.MenuArt.CharacterSelectCustomControls,selectPlayer1:!t.hidePlayer1&&t.hoverFighter1===e,selectPlayer2:!t.hidePlayer2&&t.hoverFighter2===e,colorPlayer1:t.colorPlayer1,colorPlayer2:t.colorPlayer2,readyPlayer1:t.readyPlayer1,readyPlayer2:t.readyPlayer2,onMouseOver:function(){return Dl.isVisible()&&t.onHover(e)},onClick:function(){return t.onClick(e)}},Xu)}},{key:"renderFighterData",value:function(e){var t=this.props;return Object(ac.jsx)(Lp,{smaller:e.stats.isBoss,src:e.hudUrl,selectPlayer1:!t.hidePlayer1&&tl(t.hoverFighter1,e),selectPlayer2:!t.hidePlayer2&&tl(t.hoverFighter2,e),colorPlayer1:t.colorPlayer1,colorPlayer2:t.colorPlayer2,readyPlayer1:t.readyPlayer1,readyPlayer2:t.readyPlayer2,onMouseOver:function(){return Dl.isVisible()&&t.onHover(e)},onClick:function(){return t.onClick(e)}},e.stats.code)}},{key:"render",value:function(){var e=this,t=this.row1,n=this.row2,a=this.row3;return Object(ac.jsx)(Bp,{children:[t,n,a].map((function(t,n){return Object(ac.jsx)(Dp,{children:t.map((function(t){if(t===Qu)return e.renderRandom(t);if(t===Zu)return e.renderMods(t);if(t===Xu)return e.renderCustomControls(t);var n=t;return e.renderFighterData(n)}))},"grid-row-"+n)}))})}}]),n}(i.a.Component),zp=b.a.div(Hd||(Hd=Object(f.a)(["\n  width: 100%;\n  height: 100%;\n  position: relative;\n"]))),Wp=b.a.div(Ed||(Ed=Object(f.a)(["\n  height: 10vh;\n  font-size: 4vh;\n  color: white;\n  text-shadow: 0.1em 0.1em 0px black;\n  margin: 0.2em;\n\n  box-sizing: border-box;\n  border-radius: 1em;\n\n  text-align: center;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n"]))),Np=b.a.div(_d||(_d=Object(f.a)(["\n  width: 100%;\n  height: 70vh;\n  position: relative;\n  overflow-x: hidden;\n"]))),Up=b.a.div(Fd||(Fd=Object(f.a)(["\n  cursor: pointer;\n\n  width: calc(30% - 4vh);\n  height: calc(60% - 4vh);\n\n  border: 1vh solid grey;\n  border-radius: 2vh;\n\n  color: white;\n\n  ","\n"])),(function(e){return"\n    ".concat(e.highlight?"\n      border-color: white;\n      width: calc(90% - 4vh);\n      height: calc(100% - 4vh);\n      z-index: ".concat(Ts.zIndex.Focused,";\n    "):"","\n\n    overflow: hidden;\n    background-color: rgba(0, 0, 0, 0.5);\n    background-image: url(").concat(e.bgSrc,");\n    background-size: auto 100%;\n    background-position: center;\n    background-repeat: no-repeat;\n\n    transition-property: left width height;\n    transition-duration: 0.2s;\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    transform: translate(").concat((0===e.offset?0:55*Math.sign(e.offset))+110*e.offset-50,"%, -50%);\n\n  ")})),qp=b.a.div(Ld||(Ld=Object(f.a)(["\n  width: 100%;\n  height: 100%;\n\n  color: white;\n  background-color: rgba(50, 50, 50, 0.5);\n  overlay: hidden;\n\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n"]))),Vp=b.a.img(Gd||(Gd=Object(f.a)(["\n  width: auto;\n\n  ","\n"])),(function(e){return e.highlight?"\n    height: 20vh;\n  ":"\n    height: 10vh;\n  "})),Yp=b.a.div(zd||(zd=Object(f.a)(["\n  text-align: center;\n  margin: 1em 2em;\n  padding: 1em;\n  border-radius: 0.5em;\n  color: white;\n  background-color: rgba(0, 0, 0, 0.8);\n\n  ","\n"])),(function(e){return e.highlight?"":"\n    display: none;\n  "})),Jp=b.a.div(Wd||(Wd=Object(f.a)(["\n  width: 100%;\n  height: 18vh;\n  padding: 1vh;\n  box-sizing: border-box;\n\n  display: flex;\n  flex-direction: row;\n  justify-content: stretch;\n  align-items: stretch;\n  flex-wrap: nowrap;\n"]))),Kp=b.a.div(Nd||(Nd=Object(f.a)(["\n  cursor: pointer;\n\n  background: black;\n  color: white;\n\n  margin: 1vh;\n  padding-bottom: 1vh;\n  font-size: 10vh;\n\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  flex-wrap: nowrap;\n"]))),Qp=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"getLockReason",value:function(e){var t;if(!(this.props.forceUnlockColors||!jn.isLocked(e.stats.flavor)||null!==(t=this.props.apiToken)&&void 0!==t&&t.account.canUnlock(e))){var n=[];return e.stats.flavor.requireMMR&&n.push("unlock by getting Peak MMR of atleast ".concat(e.stats.flavor.requireMMR," in Ranked Match")),e.stats.flavor.requirePremium&&n.push("unlock by winning an official major tournament"),e.stats.flavor.requireCode&&n.push("unlock by playing in an official special event"),e.stats.flavor.unlockSteam&&n.push("purchase the Steam version"),n}}},{key:"onChange",value:function(e){this.props.onSelect(e.fd)}},{key:"onClick",value:function(e){void 0===e.lockReason&&this.props.onConfirm(e.fd)}},{key:"render",value:function(){var e=this,t=this.props.current,n=ni.getAllColorsIncludingMods().filter((function(e){return e.stats.code===t.stats.code})).map((function(t){return{fd:t,lockReason:e.getLockReason(t)}})),a=n.findIndex((function(e){return e.fd.stats.id===t.stats.id})),r=n[(a+n.length-1)%n.length],i=n[(a+n.length+1)%n.length];return Object(ac.jsxs)(zp,{children:[Object(ac.jsxs)(Wp,{children:[Object(ac.jsx)("div",{children:"Choose Your Flavor"}),Object(ac.jsx)("div",{style:{fontSize:"0.8em"},children:t.stats.flavor.name})]}),Object(ac.jsx)(Np,{children:n.map((function(t,n){var r=n===a;return Object(ac.jsx)(Up,{highlight:r,bgSrc:t.fd.previewUrl,offset:n-a,onClick:function(){return r?e.onClick(t):void 0},children:t.lockReason&&Object(ac.jsxs)(qp,{children:[Object(ac.jsx)(Vp,{highlight:r,src:ni.MenuArt.LockedColor}),Object(ac.jsx)(Yp,{highlight:r,children:t.lockReason.map((function(e,t){return Object(ac.jsxs)("div",{children:[t>0?Object(ac.jsx)("div",{style:{margin:"0.5em"},children:"OR"}):"",e]},t)}))})]})},n)}))}),Object(ac.jsxs)(Jp,{children:[Object(ac.jsx)(Kp,{onClick:function(){return e.onChange(r)},children:"<"}),Object(ac.jsx)(Kp,{onClick:function(){return e.onChange(i)},children:">"})]})]})}}]),n}(i.a.Component),Zp=b.a.form(Ud||(Ud=Object(f.a)(["\n  position: absolute;\n  bottom: 300%;\n  right: 300%;\n"]))),Xp=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).inputRef=i.a.createRef(),e}return Object(h.a)(n,[{key:"processFile",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(t){var n;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){var n=new FileReader;n.onload=function(){return e(n.result)},n.readAsText(t)}));case 2:return n=e.sent,e.next=5,this.props.onUpload({filepath:t.name,filename:t.name.split(".").slice(0,-1).join("."),text:n,blob:t});case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onFileUpload",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(){var t,n,a=this;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=null===(t=this.inputRef.current)||void 0===t?void 0:t.files){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,Ne(Array.from(n),(function(e){return a.processFile(e)}));case 5:this.inputRef.current.value="";case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"trigger",value:function(){var e;return null===(e=this.inputRef.current)||void 0===e?void 0:e.click()}},{key:"render",value:function(){var e=this;return Object(ac.jsxs)("span",{onClick:function(){return e.trigger()},children:[this.props.children,Object(ac.jsx)(Zp,{children:Object(ac.jsx)("input",{type:"file",ref:this.inputRef,multiple:!!this.props.multiple,onInput:function(){return e.onFileUpload()}})})]})}}]),n}(i.a.Component),$p=b.a.div(qd||(qd=Object(f.a)(["\n  /* scrolling */\n  overflow-x: hidden;\n  overflow-y: auto;\n  height: 100%;\n  font-size: 1rem;\n"]))),ef=b.a.div(Vd||(Vd=Object(f.a)(["\n  margin: 1em;\n  display: flex;\n  flex-direction: row;\n  justify-content: stretch;\n  align-items: stretch;\n"]))),tf=b.a.div(Yd||(Yd=Object(f.a)(["\n  cursor: pointer;\n  width: 1.5em;\n  margin-left: 0.3em;\n\n  font-size: 2em;\n\n  display: flex;\n  flex-direction: column;\n  justify-content: stretch;\n  align-items: stretch;\n"]))),nf=b.a.div(Jd||(Jd=Object(f.a)(["\n  color: white;\n  background-color: salmon;\n  border-radius: 1vh;\n\n  height: 1.5em;\n  margin-bottom: 0.3em;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n\n  &:hover {\n    box-sizing: border-box;\n    border: 0.1em solid white;\n  }\n"]))),af=b.a.div(Kd||(Kd=Object(f.a)(["\n  background-color: lightblue;\n  border-radius: 1vh;\n  flex-grow: 1;\n\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n\n  &:hover {\n    box-sizing: border-box;\n    border: 0.1em solid white;\n  }\n\n  & img {\n    height: 1em;\n    width: auto;\n  }\n"]))),rf=b.a.div(Qd||(Qd=Object(f.a)(["\n  flex: 1;\n  overflow-x: hidden;\n  cursor: ",";\n  color: white;\n  background-color: black;\n\n  padding: 0em;\n  border: 0.4em solid ",";\n  border-radius: 1vh;\n\n  display: flex;\n  flex-direction: row;\n  justify-content: stretch;\n  align-items: stretch;\n"])),(function(e){return e.notAllowed?"not-allowed":"pointer"}),(function(e){return e.highlight?"white":"grey"})),of=b.a.div(Zd||(Zd=Object(f.a)(["\n  padding: 1em;\n\n  text-align: left;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: flex-start;\n"]))),sf=b.a.div(Xd||(Xd=Object(f.a)(["\n  font-size: 2em;\n"]))),cf=b.a.div($d||($d=Object(f.a)(["\n  font-size: 0.8em;\n  font-family: monospace;\n"]))),uf=b.a.div(ep||(ep=Object(f.a)(["\n  padding: 0.5em;\n  padding-right: 0;\n  & > img {\n    display: block;\n    width: auto;\n    height: 5em;\n  }\n"]))),lf="upload",hf="n/a",df="random",pf=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){var e,a;Object(l.a)(this,n);for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return(a=t.call.apply(t,[this].concat(o))).canUpload=Ts.areModsLoadable(a.props.gameMeta),a.canDelete=Ts.areModsLoadable(a.props.gameMeta)&&!(null!==(e=a.props.lobby)&&void 0!==e&&e.hideDelete),a.firstIndex=a.canUpload?lf:hf,a.state={hoverIndex:a.firstIndex,mods:[]},a.mounted=!1,a.uploadRef=i.a.createRef(),a.rowRefs={},a}return Object(h.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.mounted=!0;var t=this.props.modManager;t instanceof ei&&t.setTrigger((function(){return e.setState({mods:t.get()})})),this.updateRefs(),this.setState({mods:t.get()})}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var e=this.props.modManager;e instanceof ei&&e.setTrigger((function(){}))}},{key:"updateRefs",value:function(){var e=this.props.modManager.get();this.rowRefs=Object(g.a)(Object(g.a)(Object(v.a)({},this.firstIndex,i.a.createRef()),this.canRandom(e)?Object(v.a)({},df,i.a.createRef()):{}),Rt(e,(function(e){return e.fighter.code}),(function(e){return i.a.createRef()})))}},{key:"canRandom",value:function(e){return this.props.characterSelect&&e.length>1}},{key:"onDownload",value:function(e){Ts.downloadModZip(e.zip)}},{key:"onRemoveMod",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(t){var n;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=this.props.modManager).remove(t),this.updateRefs(),e.next=5,uc(this,{hoverIndex:this.firstIndex,mods:n.get()});case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onUploadMod",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(t){var n,a,r;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.props.modManager,e.prev=1,e.next=4,ao.unpackZipBlob(t.filename,t.blob);case 4:if(a=e.sent,r=a.wrapper,!n.has(r)){e.next=8;break}return e.abrupt("return",this.showError("This character has already been uploaded"));case 8:n.push(r),e.next=16;break;case 11:if(e.prev=11,e.t0=e.catch(1),t.filepath.endsWith(".zip")){e.next=15;break}return e.abrupt("return",this.showError("You can only upload zip files here"));case 15:return e.abrupt("return",this.showError("There was an error when uploading: "+t.filepath));case 16:return this.updateRefs(),e.next=19,uc(this,{mods:n.get()});case 19:case"end":return e.stop()}}),e,this,[[1,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"showError",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(t){return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,uc(this,{errorMessage:t});case 2:return e.next=4,Le(3e3);case 4:if(!this.mounted||this.state.errorMessage!==t){e.next=7;break}return e.next=7,uc(this,{errorMessage:void 0});case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setHoverIndex",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(t,n){var a;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,uc(this,{hoverIndex:t});case 2:n&&(a=this.rowRefs[t],Ts.scrollIntoView(a));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"cycleHoverIndex",value:function(e){var t=[this.firstIndex].concat(Object(k.a)(this.state.mods.map((function(e){return e.fighter.code}))),Object(k.a)(this.canRandom(this.state.mods)?[df]:[])),n=e?Nt(this.state.hoverIndex,t):Ut(this.state.hoverIndex,t);this.setHoverIndex(n,!0)}},{key:"chooseRandom",value:function(){if(this.props.characterSelect&&this.state.mods.length>0){var e=qt(this.state.mods);this.props.characterSelect.onClick(e.fighter.original)}}},{key:"onPlayerPress",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(t){var n,a,r=this;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==te.left){e.next=2;break}return e.abrupt("return",this.cycleHoverIndex(!0));case 2:if(t!==te.right){e.next=4;break}return e.abrupt("return",this.cycleHoverIndex());case 4:if(t!==te.attack1&&t!==te.attack4){e.next=16;break}if(this.state.hoverIndex!==lf){e.next=7;break}return e.abrupt("return",null===(n=this.uploadRef.current)||void 0===n?void 0:n.trigger());case 7:if(this.state.hoverIndex!==hf){e.next=9;break}return e.abrupt("return");case 9:if(this.state.hoverIndex!==df){e.next=11;break}return e.abrupt("return",this.chooseRandom());case 11:if(!(a=this.state.mods.find((function(e){return e.fighter.code===r.state.hoverIndex})))||!this.props.characterSelect){e.next=16;break}return e.next=15,Le(100);case 15:this.props.characterSelect.onClick(a.fighter.original);case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onPlayer1Press",value:function(e){if(this.props.characterSelect){var t=this.props.gameMeta.isTrainingMode||!!this.props.gameMeta.cpuDiff2;this.props.characterSelect.isPlayer2&&!t||this.onPlayerPress(e)}}},{key:"onPlayer2Press",value:function(e){this.props.characterSelect&&this.props.characterSelect.isPlayer2&&this.onPlayerPress(e)}},{key:"renderUpload",value:function(){var e=this,t=this.state,n=t.hoverIndex,a=t.errorMessage;return this.canUpload?Object(ac.jsx)(Xp,{ref:this.uploadRef,multiple:!0,onUpload:function(t){return e.onUploadMod(t)},children:Object(ac.jsx)(ef,{children:Object(ac.jsx)(rf,{ref:this.rowRefs[lf],highlight:n===lf,onMouseEnter:function(){return e.setHoverIndex(lf,!1)},children:Object(ac.jsx)(of,{children:Object(ac.jsx)(sf,{children:a||"Load Mod Files"})})})})}):Object(ac.jsx)(ef,{children:Object(ac.jsx)(rf,{ref:this.rowRefs[hf],notAllowed:!0,highlight:n===hf,onMouseEnter:function(){return e.setHoverIndex(hf,!1)},children:Object(ac.jsx)(of,{children:a||"You cannot load mods here"})})})}},{key:"renderOption",value:function(e){var t=this,n=e.fighter.code,a=this.state.hoverIndex===n;return Object(ac.jsxs)(ef,{children:[Object(ac.jsxs)(rf,{ref:this.rowRefs[n],highlight:a,onClick:function(){var n;return null===(n=t.props.characterSelect)||void 0===n?void 0:n.onClick(e.fighter.original)},onMouseEnter:function(){return t.setHoverIndex(n,!1)},children:[Object(ac.jsx)(uf,{children:Object(ac.jsx)("img",{src:e.fighter.original.previewUrl,alt:"preview for ".concat(e.fighter.name)})}),Object(ac.jsxs)(of,{children:[Object(ac.jsxs)(cf,{style:{color:"grey",marginBottom:"-0.5em"},children:["#",Ts.displayModWrapper(e)]}),Object(ac.jsx)(sf,{children:e.fighter.name}),[e.fighter.meta.modVersion?"Version: ".concat(e.fighter.meta.modVersion):"",e.fighter.meta.modAuthor?"Author: ".concat(e.fighter.meta.modAuthor):"",e.fighter.meta.modDescription?Object(ac.jsx)("i",{children:e.fighter.meta.modDescription}):""].filter((function(e){return e})).map((function(t,n){return Object(ac.jsx)(cf,{children:t},[e.fighter.code,n].join("-"))}))]})]}),Object(ac.jsxs)(tf,{children:[this.canDelete&&Object(ac.jsx)(nf,{onClick:function(){return t.onRemoveMod(e)},children:"X"}),Object(ac.jsx)(af,{onClick:function(){return t.onDownload(e)},children:Object(ac.jsx)("img",{src:ni.MenuArt.ModDownload,alt:"download"})})]})]},n)}},{key:"renderRandom",value:function(){var e=this,t=this.state.hoverIndex;return Object(ac.jsx)(ef,{children:Object(ac.jsx)(rf,{ref:this.rowRefs[df],highlight:t===df,onClick:function(){return e.chooseRandom()},onMouseEnter:function(){return e.setState({hoverIndex:df})},children:Object(ac.jsx)(of,{children:Object(ac.jsx)(sf,{children:"Choose Random"})})})})}},{key:"render",value:function(){var e=this,t=this.state.mods;return Object(ac.jsxs)($p,{children:[this.renderUpload(),t.map((function(t){return e.renderOption(t)})),this.canRandom(t)&&this.renderRandom(),this.props.characterSelect&&Object(ac.jsx)(cc,{onPlayer1Press:function(t){return e.onPlayer1Press(t)},onPlayer2Press:function(t){return e.onPlayer2Press(t)}})]})}}]),n}(i.a.Component),ff=b.a.div(tp||(tp=Object(f.a)(["\n  /* center column is 70vh */\n  width: calc(50% - 35vh);\n  height: 100%;\n  position: relative;\n"]))),bf=b.a.img(np||(np=Object(f.a)(["\n  position: absolute;\n  height: 100%;\n  width: auto;\n  top: 50%;\n  left: 50%;\n  ","\n"])),(function(e){return"\n    transform: translate(-50%, -50%) scaleX(".concat(e.flip?-1:1,");\n  ")})),gf=b.a.div(ap||(ap=Object(f.a)(["\n  position: absolute;\n  height: 8vh;\n  width: 12vh;\n  top: 4vh;\n  left: 50%;\n  transform: translateX(-50%);\n\n  font-family: monospace;\n  font-size: 8vh;\n  color: black;\n  background-color: rgba(255, 255, 255, 0.8);\n  border-radius: 0.2em;\n\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  flex-wrap: nowrap;\n"]))),mf=b.a.div(rp||(rp=Object(f.a)(["\n  position: absolute;\n  height: 100%;\n  width: 100%;\n  top: 0;\n  left: 0;\n  text-align: center;\n\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  flex-wrap: nowrap;\n"]))),vf=b.a.div(ip||(ip=Object(f.a)(["\n  font-size: 2em;\n  color: white;\n  text-shadow: 0.1em 0.1em 0px black;\n  margin: 0.2em;\n\n  box-sizing: border-box;\n  border-radius: 1em;\n  ","\n"])),(function(e){return e.highlight?"\n    border: 1px solid white;\n  ":"\n    padding: 1px;\n  "})),kf=function(e){var t=e.account,n=e.label,a=e.highlight,r=e.onClick,i=t?t.getTag():n;return Object(ac.jsx)(vf,{highlight:a,onClick:r,children:i})},jf=Object(b.a)(vf)(op||(op=Object(f.a)(["\n  color: black;\n  text-shadow: 0.1em 0.1em 0px white;\n  &::after {\n    content: 'READY';\n  }\n"]))),yf=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={},e}return Object(h.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.gameMeta,a=t.isPlayer2,r=t.apiToken,i=t.forceUnlockColors,o=t.account,s=t.hidePlayer,c=t.label,u=t.fighter,l=t.modManager,h=t.scoreboardWins,d=t.colorPlayer,p=t.readyPlayer,f=t.onlineCountdown;if(d&&u===Zu)return Object(ac.jsx)(ff,{children:Object(ac.jsx)(pf,{gameMeta:n,modManager:l,characterSelect:{isPlayer2:a,onClick:function(t){return e.props.onSelect(t)}}})});if(d&&!p){if(Zt(u))throw new Error("cannot choice color for random");return Object(ac.jsx)(ff,{children:Object(ac.jsx)(Qp,{current:u,apiToken:r,forceUnlockColors:i,onSelect:this.props.onSelect,onConfirm:this.props.onConfirm})})}var b=u===Qu,g=u===Zu,m=u===Xu,v=s&&ni.MenuArt.UnknownFighter||u===Qu&&ni.MenuArt.UnknownFighter||u===Zu&&ni.MenuArt.CharacterSelectModPortrait||u===Xu&&ni.MenuArt.CharacterSelectCustomControls||u.previewUrl,k=(s?"???":u===Qu&&"Random")||u===Zu&&"Mods"||u===Xu&&"Set Controls"||u.stats.name,j=!s&&!(b||g||m)&&a;return Object(ac.jsxs)(ff,{children:[Object(ac.jsx)(bf,{flip:j,src:v,alt:"character art"}),void 0!==f&&Object(ac.jsx)(gf,{children:f.toString().padStart(2,"0")}),Object(ac.jsxs)(mf,{children:[Object(ac.jsx)(kf,{account:o,label:c}),p?Object(ac.jsx)(jf,{}):Object(ac.jsx)(kf,{label:k}),void 0!==h&&Object(ac.jsx)(kf,{label:kn.prettyWins(h)})]})]})}}]),n}(i.a.Component),xf=b.a.img(sp||(sp=Object(f.a)(["\n  height: 14em;\n  width: auto;\n"]))),Of=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={},e}return Object(h.a)(n,[{key:"render",value:function(){var e,t=this,n=this.props,a=n.account,r=n.fighter;if(Zt(r))e={ratingCopy:"MMR: ???",peakCopy:"Best: ???",playedCopy:"Games: ???",assets:oi.getAssets(0)};else{var i=a.getCharacterMMROrDefault(r.stats.code),o=0===i.peak;e={ratingCopy:"MMR: ".concat(o?"???":i.rating),peakCopy:"Best: ".concat(o?"???":i.peak),playedCopy:"Games: ".concat(i.played),assets:oi.getAssets(i.peak)}}var s=oi.getRanges();return Object(ac.jsx)(ff,{children:Object(ac.jsxs)(mf,{children:[Object(ac.jsxs)("div",{style:{paddingBottom:"1em",marginBottom:"1em",borderBottom:"1px solid white"},children:[Object(ac.jsx)(kf,{label:"Choose Search Range:"}),s.map((function(e,n){return Object(ac.jsx)("div",{style:{fontSize:"0.8em",cursor:"pointer"},children:Object(ac.jsx)(kf,{label:e.name,highlight:e.range===t.props.rankedSearchRange.range,onClick:function(){return t.props.setRankedSearchRange(e)}})},e.range)}))]}),Object(ac.jsxs)("div",{children:[Object(ac.jsx)(kf,{label:e.assets.name}),Object(ac.jsx)(xf,{src:e.assets.iconUrl}),Object(ac.jsx)("div",{style:{fontSize:"0.8em"},children:Object(ac.jsx)(kf,{label:e.ratingCopy})}),Object(ac.jsxs)("div",{style:{fontSize:"0.6em"},children:[Object(ac.jsx)(kf,{label:e.peakCopy}),Object(ac.jsx)(kf,{label:e.playedCopy})]})]})]})})}}]),n}(i.a.Component),wf=Object(b.a)(yc)(cp||(cp=Object(f.a)(["\n  background-size: auto 100%;\n  background-color: black;\n"]))),Sf=Object(b.a)(Tc)(up||(up=Object(f.a)(["\n  width: 100%;\n  height: 100%;\n  overflow: hidden;\n\n  /* overwrite */\n  & > * {\n    margin: 0;\n  }\n"]))),Cf=b.a.div(lp||(lp=Object(f.a)(["\n  z-index: ",";\n  width: 70vh;\n  height: 100%;\n  box-sizing: border-box;\n\n  position: relative;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  flex-wrap: nowrap;\n  text-align: center;\n\n  font-size: 1.5rem;\n  color: var(--foreground);\n  background-color: rgba(50, 50, 50, 0.5);\n"])),Ts.zIndex.Absolute),Af=b.a.div(hp||(hp=Object(f.a)(["\n  margin-bottom: 2vh;\n  font-size: 2em;\n  font-weight: bold;\n  text-decoration: underline;\n"]))),Tf=b.a.div(dp||(dp=Object(f.a)(["\n  width: 100%;\n  & div {\n    width: 60%;\n    margin: 1em auto;\n  }\n"]))),Mf=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){var e,a,r,i,o,s,c,u,h;Object(l.a)(this,n);for(var d=arguments.length,p=new Array(d),f=0;f<d;f++)p[f]=arguments[f];return(h=t.call.apply(t,[this].concat(p))).recommendedInputDelay=h.props.isOnline&&h.props.gameMeta.inputDelay||0,h.isRanked=!!h.props.gameMeta.isRanked,h.permaReady1=!(!h.props.isOnline||h.props.isHost),h.permaReady2=!!(h.props.isOnline&&h.props.isHost||h.isRanked||h.props.gameMeta.isArcade||h.props.gameMeta.isTutorial||h.props.forceCPU),h.isTrainingOrTutorial=!(!h.props.gameMeta.isTrainingMode&&!h.props.gameMeta.isTutorial),h.isBossFight=h.props.forceCPU&&$u(h.props.forceCPU)&&h.props.forceCPU.stats.isBoss,h.forceUnlockColors=!!(h.props.gameMeta.isTrainingMode||h.props.gameMeta.isLocalVersus||h.props.gameMeta.isEventMode),h.heavyCanExit=!h.props.isOnline,h.shouldTimeout=!!h.props.gameMeta.isCasual,h.onlineTimeout=new Ve,h.token=h.props.gameMeta.isCasual||h.props.gameMeta.isLobbyPlaying||h.props.gameMeta.isLobbySpectator?gs.loadFromStorage():gs.loadRealToken(),h.account=h.props.gameMeta.isEventMode||null===(e=h.token)||void 0===e?void 0:e.account,h.accountFavorite=Ts.getAccountFavorite(h.account),h.state={gameConfig:null!==(a=h.props.existingConfig)&&void 0!==a?a:{matchId:nn(),firstTo:h.props.lobbyConfig&&h.props.lobbyConfig.firstTo||h.isTrainingOrTutorial&&1||(h.props.isOnline||h.isBossFight)&&li.DefaultFirstTo.defaultValue||li.DefaultFirstTo.get(),roundTime:(kn.Debug.ShortTimer?3:h.props.lobbyConfig&&h.props.lobbyConfig.roundTime)||h.isTrainingOrTutorial&&oe||(h.props.isOnline||h.isBossFight)&&li.DefaultRoundTime.defaultValue||li.DefaultRoundTime.get(),stage:qt(ni.DefaultStages),fighter1:!h.permaReady1&&h.accountFavorite||Ts.debugFighter1()||ni.Characters.Beef.original,fighter2:h.permaReady1&&h.accountFavorite||Ts.debugFighter2()||ni.Characters.Pork.original,account1:h.permaReady1||h.props.gameMeta.cpuDiff1?h.props.otherAccount:h.account,account2:h.permaReady1?h.account:h.props.otherAccount},gameMeta:Object(g.a)({},h.props.gameMeta),showControlsMenu:!1,hoverStage:null!==(r=null===(i=h.props.existingConfig)||void 0===i?void 0:i.stage)&&void 0!==r?r:gl,hoverFighter1:Qu,hoverFighter2:Qu,colorPlayer1:h.permaReady1,colorPlayer2:h.permaReady2,readyPlayer1:h.permaReady1,readyPlayer2:h.permaReady2,hoverBack:!1,onlineCountdown:15,rankedSearchRange:null!==(o=null===(s=h.props.ranked)||void 0===s?void 0:s.rankedSearchRange)&&void 0!==o?o:oi.defaultRange},h.bossesAllowed=Ts.areBossesPlayable(h.state.gameMeta),h.showAllBosses=h.bossesAllowed&&(kn.Debug.ShowBosses||li.CanCheat.get()||kn.Electron.isSteam()),h.showBossPork=h.bossesAllowed&&(h.showAllBosses||(null===(c=h.account)||void 0===c?void 0:c.canUnlock(ni.Characters.PlayableBossPork.original))),h.showBossGarlic=h.bossesAllowed&&(h.showAllBosses||(null===(u=h.account)||void 0===u?void 0:u.canUnlock(ni.Characters.PlayableBossGarlic.original))),h.modsAllowed=Ts.areModsPlayable(h.state.gameMeta),h.showCustomControls=!(h.props.gameMeta.isAccountFavorite||h.props.gameMeta.isEventMode),h.choiceOptions=[].concat(Object(k.a)(ni.FighterDataOriginal),Object(k.a)(h.showBossPork?[ni.Characters.PlayableBossPork.original]:[]),Object(k.a)(h.showBossGarlic?[ni.Characters.PlayableBossGarlic.original]:[]),[Qu],Object(k.a)(h.modsAllowed?[Zu]:[]),Object(k.a)(h.showCustomControls?[Xu]:[])),h.pauseSettings=new gp((function(){return Ts.getPreGamePauseSettings({gameMeta:h.props.gameMeta,onExit:h.props.onExit})})),h}return Object(h.a)(n,[{key:"componentDidMount",value:function(){var e,t=this;Si.load(ni.Music.CharSelect).playWhenLoaded(),oh.setFromMeta(this.props.gameMeta),this.pauseSettings.mount(),this.setState({hoverFighter1:this.state.gameConfig.fighter1,hoverFighter2:null!==(e=this.props.forceCPU)&&void 0!==e?e:this.state.gameConfig.fighter2,hoverStage:kn.Debug.SkipChars?ni.Stages.Notebook:gl}),this.shouldTimeout&&this.countdown(),kn.Debug.SkipChars&&setTimeout((function(){return t.readyBoth()}),1e3)}},{key:"componentWillUnmount",value:function(){this.pauseSettings.unmount(),this.onlineTimeout.clear()}},{key:"onExit",value:function(){Pi.Menu.Backward.play(),this.props.onExit()}},{key:"handleKeyDown",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(t){var n;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.state.showControlsMenu){e.next=2;break}return e.abrupt("return");case 2:if("Escape"!==t){e.next=4;break}return e.abrupt("return",this.onExit());case 4:if("Enter"!==t){e.next=6;break}return e.abrupt("return",this.readyBoth());case 6:if(!Ts.areBossesPlayable(this.state.gameMeta)){e.next=21;break}if(vn.isReactDevelopment&&("Digit5"===t&&(n=ni.Characters.PlayableBossPork.original),"Digit6"===t&&(n=ni.Characters.PlayableBossGarlic.original)),!n){e.next=21;break}if(this.state.colorPlayer1){e.next=16;break}return e.next=12,this.changeFighter1(n);case 12:return e.next=14,this.colorPlayer1();case 14:e.next=21;break;case 16:if(this.state.colorPlayer2){e.next=21;break}return e.next=19,this.changeFighter2(n);case 19:return e.next=21,this.colorPlayer2();case 21:if(kn.isDebug){e.next=23;break}return e.abrupt("return");case 23:if("Digit7"!==t){e.next=25;break}return e.abrupt("return",this.changeFighter1(ni.Characters.PlayableBossPork.original));case 25:if("Digit8"!==t){e.next=27;break}return e.abrupt("return",this.changeFighter2(ni.Characters.PlayableBossPork.original));case 27:if("Digit9"!==t){e.next=29;break}return e.abrupt("return",this.changeFighter1(ni.Characters.PlayableBossGarlic.original));case 29:if("Digit0"!==t){e.next=31;break}return e.abrupt("return",this.changeFighter2(ni.Characters.PlayableBossGarlic.original));case 31:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"countdown",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(){var t,n=this;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(t=this.state.onlineCountdown)>0?(this.onlineTimeout.schedule((function(){return n.countdown()}),1e3),this.setState({onlineCountdown:t-1})):this.readyBoth();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"changeFighter1",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(t,n){return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!el(this.state.hoverFighter1,t)){e.next=3;break}return e.abrupt("return");case 3:return n||Pi.Menu.Change.play(),e.next=6,uc(this,{hoverFighter1:t});case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"changeFighter2",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(t,n){return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!el(this.state.hoverFighter2,t)){e.next=3;break}return e.abrupt("return");case 3:return n||Pi.Menu.Change.play(),e.next=6,uc(this,{hoverFighter2:t});case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"tryToReady",value:function(){if(this.state.readyPlayer1&&this.state.readyPlayer2){var e=$u(this.state.hoverFighter1)?this.state.hoverFighter1:qt(ni.FighterDataOriginal),t=$u(this.state.hoverFighter2)?this.state.hoverFighter2:qt(ni.FighterDataOriginal),n=Object(g.a)(Object(g.a)({},this.state.gameConfig),{},{stage:this.state.hoverStage===gl?qt(ni.DefaultStages):this.state.hoverStage,fighter1:e,fighter2:t});this.props.onReady(n,this.state.gameMeta)}}},{key:"vertCycleFighter1",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(t){var n=this;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.state.hoverFighter1===Qu?Ne(Ft(2),(function(){return n.cycleFighter1(t)})):Ne(Ft(3),Object(u.a)(Object(c.a)().mark((function e(){return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!$u(n.state.hoverFighter1)){e.next=3;break}return e.next=3,n.cycleFighter1(t);case 3:case"end":return e.stop()}}),e)}))));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"vertCycleFighter2",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(t){var n=this;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.state.hoverFighter2===Qu?Ne(Ft(2),(function(){return n.cycleFighter2(t)})):Ne(Ft(3),Object(u.a)(Object(c.a)().mark((function e(){return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!$u(n.state.hoverFighter2)){e.next=3;break}return e.next=3,n.cycleFighter2(t);case 3:case"end":return e.stop()}}),e)}))));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"cycleFighter1",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(t){var n;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.state.hoverFighter1,e.abrupt("return",this.changeFighter1(t?Nt(n,this.choiceOptions,tl):Ut(n,this.choiceOptions,tl)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"cycleFighter2",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(t){var n;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.state.hoverFighter2,e.abrupt("return",this.changeFighter2(t?Nt(n,this.choiceOptions,tl):Ut(n,this.choiceOptions,tl)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"cycleFighter1Color",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(t){var n;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if($u(n=this.state.hoverFighter1)){e.next=3;break}return e.abrupt("return");case 3:return e.abrupt("return",this.changeFighter1(t?ni.getPrevCharacterColor(n):ni.getNextCharacterColor(n)));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"cycleFighter2Color",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(t){var n;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if($u(n=this.state.hoverFighter2)){e.next=3;break}return e.abrupt("return");case 3:return e.abrupt("return",this.changeFighter2(t?ni.getPrevCharacterColor(n):ni.getNextCharacterColor(n)));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"cycleStage",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(){var t,n;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state.hoverStage,n=Ut(t,ml),e.abrupt("return",this.setStage(n));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setStage",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(t){var n,a,r;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.props.gameMeta,a=n.isArcade,r=n.isTutorial,!a&&!r){e.next=3;break}return e.abrupt("return");case 3:return Pi.Menu.Change.play(),e.next=6,uc(this,{hoverStage:t});case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setFirstTo",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(t){var n,a,r,i,o;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.props.gameMeta,a=n.isArcade,r=n.isTrainingMode,i=n.isTutorial,o=this.state.gameConfig,!(a||r||i)){e.next=4;break}return e.abrupt("return");case 4:return Pi.Menu.Change.play(),e.next=7,uc(this,{gameConfig:Object(g.a)(Object(g.a)({},o),{},{firstTo:t})});case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setRoundTime",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(t){var n,a,r,i;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.props.gameMeta,a=n.isTrainingMode,r=n.isTutorial,i=this.state.gameConfig,!a&&!r){e.next=4;break}return e.abrupt("return");case 4:return Pi.Menu.Change.play(),e.next=7,uc(this,{gameConfig:Object(g.a)(Object(g.a)({},i),{},{roundTime:t})});case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setInputDelay",value:function(e){this.isRanked&&li.RankedMaxInputDelay.set(e),Pi.Menu.Change.play(),this.setState({gameMeta:Object(g.a)(Object(g.a)({},this.state.gameMeta),{},{inputDelay:e})})}},{key:"setCpuDiff",value:function(e){li.VersusCpuDifficulty.set(e),Pi.Menu.Change.play(),this.setState({gameMeta:Object(g.a)(Object(g.a)({},this.state.gameMeta),{},{cpuDiff2:e})})}},{key:"unReadyPlayer1",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(t){return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t||Pi.Menu.Backward.play(),!(this.state.colorPlayer1&&$u(this.state.hoverFighter1)&&this.state.hoverFighter1.stats.isMod)){e.next=6;break}return e.next=4,uc(this,{hoverFighter1:Zu,colorPlayer1:!0,readyPlayer1:!1});case 4:e.next=8;break;case 6:return e.next=8,uc(this,{colorPlayer1:!1,readyPlayer1:!1});case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"unReadyPlayer2",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(t){return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t||Pi.Menu.Backward.play(),!(this.state.colorPlayer2&&$u(this.state.hoverFighter2)&&this.state.hoverFighter2.stats.isMod)){e.next=6;break}return e.next=4,uc(this,{hoverFighter2:Zu,colorPlayer2:!0,readyPlayer2:!1});case 4:e.next=8;break;case 6:return e.next=8,uc(this,{colorPlayer2:!1,readyPlayer2:!1});case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"colorPlayer1",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(){return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.state.hoverFighter1!==Xu){e.next=5;break}return Pi.Menu.Forward.play(),e.next=4,uc(this,{showControlsMenu:!0});case 4:return e.abrupt("return");case 5:if(!this.props.skipColors&&this.state.hoverFighter1!==Qu){e.next=7;break}return e.abrupt("return",this.readyPlayer1());case 7:return Pi.Menu.Forward.play(),e.next=10,uc(this,{colorPlayer1:!0,readyPlayer1:!1});case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"colorPlayer2",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(){return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.state.hoverFighter2!==Xu){e.next=5;break}return Pi.Menu.Forward.play(),e.next=4,uc(this,{showControlsMenu:!0});case 4:return e.abrupt("return");case 5:if(!this.props.skipColors&&this.state.hoverFighter2!==Qu){e.next=7;break}return e.abrupt("return",this.readyPlayer2());case 7:return Pi.Menu.Forward.play(),e.next=10,uc(this,{colorPlayer2:!0,readyPlayer2:!1});case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"readyPlayer1",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(){return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.hoverPickIsLocked(this.state.hoverFighter1)){e.next=2;break}return e.abrupt("return");case 2:return Pi.Menu.Forward.play(),e.next=5,uc(this,{colorPlayer1:!0,readyPlayer1:!0});case 5:this.tryToReady();case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"readyPlayer2",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(){return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.hoverPickIsLocked(this.state.hoverFighter2)){e.next=2;break}return e.abrupt("return");case 2:return Pi.Menu.Forward.play(),e.next=5,uc(this,{colorPlayer2:!0,readyPlayer2:!0});case 5:this.tryToReady();case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"readyBoth",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(){var t,n,a,r,i;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state,n=t.hoverFighter1,a=t.hoverFighter2,r=this.hoverPickIsLocked(n)?ni.getOriginal(n):n,i=this.hoverPickIsLocked(a)?ni.getOriginal(a):a,e.next=5,uc(this,{hoverFighter1:r,hoverFighter2:i,colorPlayer1:!0,colorPlayer2:!0,readyPlayer1:!0,readyPlayer2:!0});case 5:this.tryToReady();case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"hoverPickIsLocked",value:function(e){var t;return!(!$u(e)||this.forceUnlockColors||!jn.isLocked(e.stats.flavor)||null!==(t=this.token)&&void 0!==t&&t.account.canUnlock(e))}},{key:"hideControlsMenu",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(){return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,uc(this,{showControlsMenu:!1,readyPlayer1:this.permaReady1,readyPlayer2:this.permaReady2});case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onEventMenuPress",value:function(e){var t=!this.state.readyPlayer1&&!this.state.colorPlayer1;if(t&&e===ae.p1menuUp)return this.vertCycleFighter1(!0);if(t&&e===ae.p1menuDown)return this.vertCycleFighter1();var n=!this.state.readyPlayer2&&!this.state.colorPlayer2;return n&&e===ae.p2menuUp?this.vertCycleFighter2(!0):n&&e===ae.p2menuDown?this.vertCycleFighter2():void 0}},{key:"onPlayer1Press",value:function(e){if(e===te.attack3)return this.cycleStage();if(this.state.hoverFighter1===Zu&&this.state.colorPlayer1)return e===te.attack2?this.unReadyPlayer1():void 0;if(this.state.readyPlayer1){var t=this.props.gameMeta.isTrainingMode||!!this.props.gameMeta.cpuDiff2;if(t&&this.state.colorPlayer2)return this.onPlayer2Press(e);if(e===te.attack2)return this.unReadyPlayer1();if(t)return this.onPlayer2Press(e)}else if(this.state.colorPlayer1){if(e===te.left)return this.cycleFighter1Color(!0);if(e===te.right)return this.cycleFighter1Color();if(e===te.attack1||e===te.attack4)return this.readyPlayer1();if(e===te.attack2)return this.unReadyPlayer1()}else{if(e===te.left)return this.cycleFighter1(!0);if(e===te.right)return this.cycleFighter1();if(e===te.attack1||e===te.attack4)return this.colorPlayer1();e===te.attack2&&this.heavyCanExit&&this.onExit()}}},{key:"onPlayer2Press",value:function(e){if(e===te.attack3)return this.cycleStage();if(this.state.hoverFighter2===Zu&&this.state.colorPlayer2)return e===te.attack2?this.unReadyPlayer2():void 0;if(this.state.readyPlayer2){if(e===te.attack2)return this.unReadyPlayer2()}else if(this.state.colorPlayer2){if(e===te.left)return this.cycleFighter2Color(!0);if(e===te.right)return this.cycleFighter2Color();if(e===te.attack1||e===te.attack4)return this.readyPlayer2();if(e===te.attack2)return this.unReadyPlayer2()}else{if(e===te.left)return this.cycleFighter2(!0);if(e===te.right)return this.cycleFighter2();if(e===te.attack1||e===te.attack4)return this.colorPlayer2();e===te.attack2&&this.heavyCanExit&&this.onExit()}}},{key:"onHover",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(t,n){var a,r;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!kn.Debug.SkipChars){e.next=2;break}return e.abrupt("return");case 2:if(this.state.colorPlayer1){e.next=7;break}if(!tl(a=this.state.hoverFighter1,t)){e.next=6;break}return e.abrupt("return",this.changeFighter1(a,n));case 6:return e.abrupt("return",this.changeFighter1(t,n));case 7:if(this.state.readyPlayer1){e.next=9;break}return e.abrupt("return");case 9:if(this.state.colorPlayer2){e.next=14;break}if(!tl(r=this.state.hoverFighter2,t)){e.next=13;break}return e.abrupt("return",this.changeFighter2(r,n));case 13:return e.abrupt("return",this.changeFighter2(t,n));case 14:if(this.state.readyPlayer2){e.next=16;break}return e.abrupt("return");case 16:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onClick",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(t){return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.onHover(t,!0);case 2:if(this.state.colorPlayer1){e.next=4;break}return e.abrupt("return",this.colorPlayer1());case 4:if(this.state.hoverFighter1!==Zu){e.next=6;break}return e.abrupt("return");case 6:if(this.state.readyPlayer1){e.next=14;break}if(!tl(this.state.hoverFighter1,t)){e.next=11;break}return e.abrupt("return",this.readyPlayer1());case 11:return e.next=13,this.unReadyPlayer1(!0);case 13:case 25:return e.abrupt("return",this.onClick(t));case 14:if(this.state.colorPlayer2){e.next=16;break}return e.abrupt("return",this.colorPlayer2());case 16:if(this.state.hoverFighter2!==Zu){e.next=18;break}return e.abrupt("return");case 18:if(this.state.readyPlayer2){e.next=26;break}if(!tl(this.state.hoverFighter2,t)){e.next=23;break}return e.abrupt("return",this.readyPlayer2());case 23:return e.next=25,this.unReadyPlayer2(!0);case 26:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onBackButton",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(){return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.state.readyPlayer2||this.permaReady2){e.next=2;break}return e.abrupt("return",this.unReadyPlayer2());case 2:if(!this.state.colorPlayer2||this.permaReady2){e.next=4;break}return e.abrupt("return",this.unReadyPlayer2());case 4:if(!this.state.readyPlayer1||this.permaReady1){e.next=6;break}return e.abrupt("return",this.unReadyPlayer1());case 6:if(!this.state.colorPlayer1||this.permaReady1){e.next=8;break}return e.abrupt("return",this.unReadyPlayer1());case 8:return Pi.Menu.Backward.play(),e.abrupt("return",this.props.onExit());case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props,a=t.title,r=t.isOnline,i=t.isHost,o=t.label1,s=t.label2,c=t.scoreboard,u=t.forceCPU,l=this.state,h=l.gameMeta,d=l.showControlsMenu,p=l.hoverStage,f=l.hoverFighter1,b=l.hoverFighter2,g=l.colorPlayer1,m=l.colorPlayer2,v=l.readyPlayer1,k=l.readyPlayer2,j=this.state.gameConfig,y=j.roundTime,x=j.firstTo,O=j.account1,w=j.account2,S=h.inputDelay,C=h.isArcade,A=h.isTrainingMode,T=h.isTutorial,M=h.isHumanVsCpu,P=h.cpuDiff2,R=r||A||!!P,I=!(!r||i),B=!!(r&&i||C||T)||this.isRanked,D=h.isLobbyPlaying?ni.LobbyMods:ni.OfflineMods,H=!!(h.isEventMode||this.isTrainingOrTutorial||this.isRanked||this.isBossFight||this.props.lobbyConfig),E=!!h.isEventMode,_=g&&!this.permaReady1||m&&!this.permaReady2;return Object(ac.jsxs)(wf,{"data-testid":n.TestID,children:[Object(ac.jsxs)(Sf,{children:[Object(ac.jsx)(yf,{gameMeta:h,isPlayer2:!1,apiToken:this.token,forceUnlockColors:this.forceUnlockColors,account:O,hidePlayer:I,label:o,fighter:f,modManager:D,scoreboardWins:c.isEmpty?void 0:c.p1wins,colorPlayer:g,readyPlayer:v,onlineCountdown:this.shouldTimeout?this.state.onlineCountdown:void 0,onSelect:function(t){return e.changeFighter1(t)},onConfirm:function(t){return e.changeFighter1(t).then((function(){return e.readyPlayer1()}))}}),Object(ac.jsxs)(Cf,{children:[Object(ac.jsx)(Af,{children:h.isEventMode?Object(ac.jsx)("img",{height:"auto",width:"90%",src:ni.Branding.Logo,alt:"Tough Love Arena"}):a}),Object(ac.jsx)(xl,{stage:p,onChange:function(t){return e.setStage(t)},disable:!(!C&&!T)}),!this.isTrainingOrTutorial&&Object(ac.jsx)(Du,{firstTo:x,onChange:function(t){return e.setFirstTo(t)},disable:H}),Object(ac.jsx)(Ku,{roundTime:y,onChange:function(t){return e.setRoundTime(t)},disable:H}),Object(ac.jsx)(Gp,{choiceOptions:this.choiceOptions,hoverFighter1:f,hoverFighter2:b,hidePlayer1:I,hidePlayer2:B,colorPlayer1:g,colorPlayer2:m,readyPlayer1:v,readyPlayer2:k,onHover:function(t){return e.onHover(t)},onClick:function(t){return e.onClick(t)}}),h.isRanked&&Object(ac.jsx)(Uu,{rankedMaxInputDelay:null!==S&&void 0!==S?S:li.RankedMaxInputDelay.get(),onChange:function(t){return e.setInputDelay(t)}}),(r||A)&&Object(ac.jsx)(Lu,{recommendedInputDelay:this.recommendedInputDelay,inputDelay:null!==S&&void 0!==S?S:0,onChange:function(t){return e.setInputDelay(t)}}),M&&P&&Object(ac.jsx)(Mu,{cpuDiff:P,onChange:u?void 0:function(t){return e.setCpuDiff(t)}}),!E&&Object(ac.jsx)(Tf,{children:Object(ac.jsx)(Mp,{shrink:r||A||M||this.isRanked,hover:this.state.hoverBack,onMouseOver:function(){return Dl.isVisible()&&e.setState({hoverBack:!0})},onMouseLeave:function(){return e.setState({hoverBack:!1})},onClick:function(){return e.onBackButton()},children:_?"Unselect":"Back"})})]}),h.isRanked&&O&&this.props.ranked?Object(ac.jsx)(Of,{account:O,fighter:f,rankedSearchRange:this.props.ranked.rankedSearchRange,setRankedSearchRange:this.props.ranked.setRankedSearchRange}):Object(ac.jsx)(yf,{gameMeta:h,isPlayer2:!0,apiToken:this.token,forceUnlockColors:this.forceUnlockColors,account:w,hidePlayer:B,label:s,fighter:b,modManager:D,scoreboardWins:c.isEmpty?void 0:c.p2wins,colorPlayer:m,readyPlayer:k,onlineCountdown:this.shouldTimeout?this.state.onlineCountdown:void 0,onSelect:function(t){return e.changeFighter2(t)},onConfirm:function(t){return e.changeFighter2(t).then((function(){return e.readyPlayer2()}))}})]}),d&&Object(ac.jsx)(Gc,{showPlayer2:!R||A,onExit:function(){return e.hideControlsMenu()}}),Object(ac.jsx)(cc,{isOnlineHost:r&&i,isOnlineGuest:r&&!i,isVersusCPU:!!P,isTraining:A,isTutorial:T,onEventMenuInput:function(t){return e.onEventMenuPress(t)},onPlayer1Press:function(t){return e.onPlayer1Press(t)},onPlayer2Press:function(t){return e.onPlayer2Press(t)},onPress:function(t){return e.handleKeyDown(t)}}),!(g&&!v)&&this.account&&Object(ac.jsx)(sc,{white:!0}),!(g&&!v)&&Object(ac.jsx)(iu,{}),!(m&&!k)&&!h.isEventMode&&Object(ac.jsx)(cu,{white:!0})]})}}]),n}(i.a.Component);Mf.TestID="CharacterSelect";var Pf,Rf,If,Bf,Df,Hf,Ef,_f,Ff,Lf,Gf,zf,Wf,Nf,Uf,qf,Vf,Yf,Jf,Kf=Object(b.b)(pp||(pp=Object(f.a)(["\n  from {\n    transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(359deg);\n  }\n"]))),Qf=b.a.img(fp||(fp=Object(f.a)(["\n  height: 8vh;\n  width: auto;\n\n  animation: ",";\n  animation-delay: 0s;\n  animation-duration: 2s;\n  animation-iteration-count: infinite;\n  animation-timing-function: ease-in-out;\n"])),Kf),Zf=function(){return Object(ac.jsx)(Qf,{src:ni.MenuArt.Spikeball})},Xf=b.a.div(bp||(bp=Object(f.a)(["\n  display: flex;\n  flex-direction: row;\n  justiy-content: center;\n  align-items: center;\n  flex-wrap: nowrap;\n\n  & > div {\n    margin: 0 1vh;\n    font-size: 0.8em;\n    display: flex;\n    flex-direction: column;\n    justiy-content: center;\n    align-items: center;\n    flex-wrap: nowrap;\n  }\n"]))),$f=function(e){return Object(ac.jsxs)(Xf,{children:[Object(ac.jsx)("div",{children:Object(ac.jsx)(Zf,{})}),Object(ac.jsx)("div",{children:e.label}),Object(ac.jsx)("div",{children:Object(ac.jsx)(Zf,{})})]})},eb=function(){function e(){Object(l.a)(this,e),this.fadeSeconds=.2,this.blackoutSeconds=.1,this.controls={fadeOut:function(){var e=Object(u.a)(Object(c.a)().mark((function e(){return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),fadeIn:function(){var e=Object(u.a)(Object(c.a)().mark((function e(){return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}}return Object(h.a)(e,[{key:"setFadeCallbacks",value:function(e){this.controls=e}},{key:"trigger",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(t){return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.controls.fadeOut(this.fadeSeconds);case 2:return t(),e.next=5,Le(1e3*this.blackoutSeconds);case 5:return e.next=7,this.controls.fadeIn(this.fadeSeconds);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),tb=new eb,nb=b.a.div(Pf||(Pf=Object(f.a)(["\n  position: absolute;\n  z-index: ",";\n  bottom: 2vh;\n  right: 2vh;\n  width: auto;\n  height: auto;\n\n  font-size: 2vh;\n\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n"])),Ts.zIndex.MenuOverlay),ab=b.a.div(Rf||(Rf=Object(f.a)(["\n  padding: 1vh;\n  border: 0.2vh solid black;\n  border-radius: 0.5em;\n\n  cursor: pointer;\n  background-color: var(--backtext);\n  color: var(--foretext);\n  &:hover {\n    background-color: var(--foretext);\n    color: var(--backtext);\n  }\n"]))),rb=b.a.div(If||(If=Object(f.a)(["\n  position: absolute;\n  z-index: ",";\n  bottom: 8vh;\n  left: 50%;\n  transform: translateX(-50%);\n  width: 95%;\n  height: auto;\n\n  font-size: 2.4vh;\n"])),Ts.zIndex.MenuOverlay),ib=b.a.div(Bf||(Bf=Object(f.a)(["\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n  flex-wrap: wrap;\n"]))),ob=b.a.div(Df||(Df=Object(f.a)(["\n  padding: 1vh 2vh;\n  border: 0.2vh solid black;\n  border-radius: 0.5em;\n\n  width: 7em;\n  height: 1.5em;\n  margin: 0.8em;\n  margin-bottom: 0;\n\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n  flex-wrap: wrap;\n\n  cursor: pointer;\n  background-color: var(--backtext);\n  color: var(--foretext);\n  &:hover {\n    background-color: var(--foretext);\n    color: var(--backtext);\n  }\n"]))),sb=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={showModal:!1,trainingShowInputs:li.TrainingShowInputDisplay.get(),trainingShowHitboxes:li.TrainingShowHitboxes.get(),trainingShowHUD:!li.TrainingHideHUD.get(),paused:!1},e.saveState=void 0,e}return Object(h.a)(n,[{key:"componentDidMount",value:function(){var e=this;ls.addCallback(this,"keydown",(function(t){return e.handleKeyDown(t)}))}},{key:"componentWillUnmount",value:function(){ls.removeCallbacks(this)}},{key:"handleKeyDown",value:function(e){"Digit2"===e&&this.toggleShowHitBoxes(),"Digit6"===e&&this.toggleRunning(),"Digit7"===e&&this.stepRunning(),"Digit8"===e&&this.seekBack(),"Digit9"===e&&this.seekForward()}},{key:"toggleShowInputs",value:function(){var e=this.props.runner,t=!li.TrainingShowInputDisplay.get();li.TrainingShowInputDisplay.set(t),this.setState({trainingShowInputs:li.TrainingShowInputDisplay.get()}),e.draw()}},{key:"toggleShowHitBoxes",value:function(){var e=this.props.runner,t=li.TrainingShowHitboxes.get()!==xe.Hide?xe.Hide:xe.Boxes;li.TrainingShowHitboxes.set(t),this.setState({trainingShowHitboxes:li.TrainingShowHitboxes.get()}),e.draw()}},{key:"toggleShowHUD",value:function(){var e=this.props.runner,t=!li.TrainingHideHUD.get();li.TrainingHideHUD.set(t),this.setState({trainingShowHUD:!li.TrainingHideHUD.get()}),e.draw()}},{key:"toggleRunning",value:function(){var e=this.props.runner;e.setup.loop.isRunning()?e.setup.loop.pause():e.setup.loop.resume(),this.setState({paused:!e.setup.loop.isRunning()})}},{key:"stepRunning",value:function(){var e=this.props.runner;e.setup.loop.isRunning()&&this.toggleRunning(),e.setup.loop.debug()}},{key:"seekBack",value:function(){var e,t=this.props.runner;null===(e=t.coord)||void 0===e||e.replayRewind(180),t.setup.loop.isRunning()||t.draw()}},{key:"seekForward",value:function(){var e=this.props.runner,t=!e.setup.loop.isRunning();e.setup.loop.pause(),Ft(180).forEach((function(){e.setup.loop.debug()})),t?e.draw():e.setup.loop.resume()}},{key:"render",value:function(){var e=this,t=this.state,n=t.showModal,a=t.trainingShowInputs,r=t.trainingShowHitboxes,i=t.trainingShowHUD,o=t.paused;return n?Object(ac.jsxs)("div",{children:[Object(ac.jsxs)(rb,{children:[Object(ac.jsxs)(ib,{children:[Object(ac.jsx)(ob,{onClick:function(){return e.toggleShowHUD()},children:i?"Hide HUD":"Show HUD"}),Object(ac.jsx)(ob,{onClick:function(){return e.toggleShowInputs()},children:a?"Hide Inputs":"Show Inputs"}),Object(ac.jsx)(ob,{onClick:function(){return e.toggleShowHitBoxes()},children:r===xe.Hide?"Show Boxes":"Hide Boxes"})]}),Object(ac.jsxs)(ib,{children:[Object(ac.jsx)(ob,{onClick:function(){return e.toggleRunning()},children:o?"Resume":"Stop"}),Object(ac.jsx)(ob,{onClick:function(){return e.stepRunning()},children:"Next Frame"}),Object(ac.jsx)(ob,{onClick:function(){return e.seekBack()},children:"Rewind"}),Object(ac.jsx)(ob,{onClick:function(){return e.seekForward()},children:"Fast Forward"}),Object(ac.jsx)(ob,{onClick:this.props.onExit,children:"Exit Replay"})]})]}),Object(ac.jsx)(nb,{children:Object(ac.jsx)(ab,{onClick:function(){return e.setState({showModal:!1})},children:"Close Menu"})})]}):Object(ac.jsx)("div",{children:Object(ac.jsx)(nb,{children:Object(ac.jsx)(ab,{onClick:function(){return e.setState({showModal:!0})},children:"Replay Menu"})})})}}]),n}(i.a.Component),cb=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"render",value:function(){return null}}]),n}(i.a.Component),ub=new(function(){function e(t){var n,a,r=this;if(Object(l.a)(this,e),this.emptyCallback={onHide:function(){},onShow:function(){}},this.callback=this.emptyCallback,"undefined"!==typeof t.hidden?(n="hidden",a="visibilitychange"):"undefined"!==typeof t.msHidden?(n="msHidden",a="msvisibilitychange"):"undefined"!==typeof t.webkitHidden&&(n="webkitHidden",a="webkitvisibilitychange"),n&&a){var i=n;t.addEventListener(a,(function(){return t[i]?r.onHide():r.onShow()}),!1)}}return Object(h.a)(e,[{key:"setCallback",value:function(e){this.callback=e}},{key:"removeCallback",value:function(){this.callback=this.emptyCallback}},{key:"onHide",value:function(){vn.isMobile&&li.updateVolume({mute:{announcer:!0,effect:!0,music:!0}}),this.callback.onHide()}},{key:"onShow",value:function(){vn.isMobile&&li.updateVolume(),this.callback.onShow()}}]),e}())(document),lb=b.a.div(Hf||(Hf=Object(f.a)(["\n  padding: 0.5em 1em;\n  margin: 0 0.5em;\n  border: 0.2vh solid black;\n  white-space: nowrap;\n\n  background-color: var(--backtext-back);\n  color: var(--foretext);\n\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n\n  & img {\n    margin-left: 0.5em;\n    height: 1.5em;\n    width: auto;\n  }\n"]))),hb=Object(b.a)(lb)(Ef||(Ef=Object(f.a)(["\n  border-radius: 0.5em;\n  cursor: pointer;\n  background-color: var(--backtext);\n"]))),db=b.a.div(_f||(_f=Object(f.a)(["\n  font-size: 4vh;\n  height: 15vh;\n\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n\n  background-color: rgba(0,0,0,0.6);\n\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n"]))),pb=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={editMode:!1,focused:void 0},e.touchManager=e.props.runner.touchManager,e.onTouch=function(t,n){var a=e.state.focused;if(a){var r=t.held[0];if(r){if(r.percentY<.15)return;a.moveTo(n,r)}}else{var i=e.touchManager.sortedByPriority().filter((function(e){return t.held.some((function(t){return e.contains(n,t)}))}))[0];i&&e.startEditingFocused(i)}},e}return Object(h.a)(n,[{key:"componentWillUnmount",value:function(){this.touchManager.onTouchOverride=void 0}},{key:"resetToDefault",value:function(){this.touchManager.sortedByPriority().forEach((function(e){return e.resetToDefault()}))}},{key:"saveAndExit",value:function(){li.TouchControls.set(this.touchManager.getCompleteConfig()),this.props.onExit()}},{key:"enterEditMode",value:function(){var e;this.touchManager.onTouchOverride=this.onTouch,null===(e=this.props.runner.coord)||void 0===e||e.game.setTouchConfigShowBoxes(!0),this.setState({editMode:!0})}},{key:"exitEditMode",value:function(){var e;this.touchManager.onTouchOverride=void 0,null===(e=this.props.runner.coord)||void 0===e||e.game.setTouchConfigShowBoxes(!1),this.setState({editMode:!1,focused:void 0})}},{key:"increaseSize",value:function(e){var t=this.props.runner.canvas.getTouchContext();e.changeDiameter(t,.02)}},{key:"decreaseSize",value:function(e){var t=this.props.runner.canvas.getTouchContext();e.changeDiameter(t,-.02)}},{key:"startEditingFocused",value:function(e){var t;null===(t=this.props.runner.coord)||void 0===t||t.game.setTouchConfigShowHighlight(e.key),this.setState({focused:e})}},{key:"cancelEditingFocused",value:function(e){var t;null===(t=this.props.runner.coord)||void 0===t||t.game.setTouchConfigShowHighlight(void 0),e.resetToLocked(),this.exitEditMode()}},{key:"finishEditingFocused",value:function(e){var t;null===(t=this.props.runner.coord)||void 0===t||t.game.setTouchConfigShowHighlight(void 0),e.finishMoving(),this.exitEditMode()}},{key:"render",value:function(){var e=this,t=this.state,n=t.editMode,a=t.focused;return n?a?Object(ac.jsxs)(db,{children:[Object(ac.jsxs)(lb,{children:["Touch anywhere to move ",Object(ac.jsx)("img",{src:a.imageSrc,alt:"the button"})]}),Object(ac.jsx)(hb,{onClick:function(){return e.increaseSize(a)},children:"+"}),Object(ac.jsx)(hb,{onClick:function(){return e.decreaseSize(a)},children:"-"}),Object(ac.jsx)(hb,{onClick:function(){return e.finishEditingFocused(a)},children:"Finish"}),Object(ac.jsx)(hb,{onClick:function(){return e.cancelEditingFocused(a)},children:"Cancel"})]}):Object(ac.jsxs)(db,{children:[Object(ac.jsx)(lb,{children:"Tap a button to start"}),Object(ac.jsx)(hb,{onClick:function(){return e.exitEditMode()},children:"Back"})]}):Object(ac.jsxs)(db,{children:[Object(ac.jsx)(hb,{onClick:function(){return e.enterEditMode()},children:"Edit Controls"}),Object(ac.jsx)(hb,{onClick:function(){return e.resetToDefault()},children:"Reset All"}),Object(ac.jsx)(hb,{onClick:function(){return e.saveAndExit()},children:"Save & Exit"}),Object(ac.jsx)(hb,{onClick:function(){return e.props.onExit()},children:"Cancel"})]})}}]),n}(i.a.Component),fb=b.a.div(Ff||(Ff=Object(f.a)(["\n  position: fixed;\n  height: 100%;\n  width: 100%;\n  top: 0;\n  left: 0;\n  background-color: rgba(0,0,0,0.2);\n\n  z-index: ",";\n\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n"])),Ts.zIndex.ModdingPopup),bb=b.a.div(Lf||(Lf=Object(f.a)(["\n  cursor: pointer;\n  width: 80%;\n  box-sizing: border-box;\n\n  font-size: 1.5rem;\n\n  padding: 2em 3em;\n  border: 0.5em dashed red;\n  border-radius: 0em;\n  color: white;\n  background-color: black;\n"]))),gb=b.a.div(Gf||(Gf=Object(f.a)(["\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: flex-start;\n  flex-wrap: nowrap;\n  margin-top: 1em;\n"]))),mb=b.a.div(zf||(zf=Object(f.a)(["\n  font-size: 1em;\n  padding: 0.5em 1em;\n  border: 0.2em solid white;\n  border-radius: 0.5em;\n\n  &:hover {\n    color: black;\n    background-color: white;\n  }\n"])));function vb(e){return Object(ac.jsx)(fb,{onClick:e.onExit,children:Object(ac.jsxs)(bb,{onClick:function(){},children:[e.message,e.onConfirm?Object(ac.jsxs)(gb,{children:[Object(ac.jsx)(mb,{onClick:e.onConfirm,style:{marginRight:"1em"},children:"PROCEED"}),Object(ac.jsx)(mb,{onClick:e.onExit,children:"CANCEL"})]}):Object(ac.jsx)(gb,{children:Object(ac.jsx)(mb,{onClick:e.onExit,children:"OK"})})]})})}var kb=Object(b.a)(kc)(Wf||(Wf=Object(f.a)(["\n  color: #eee;\n  background-color: #111;\n"]))),jb=b.a.div(Nf||(Nf=Object(f.a)(["\n  font-size: ",";\n  padding-top: 4vh;\n  padding-bottom: 4vh;\n\n  ","\n\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-start;\n  align-items: center;\n  flex-wrap: nowrap;\n  text-align: center;\n"])),vn.isMobile?"3vh":"16px",gc),yb=b.a.div(Uf||(Uf=Object(f.a)(["\n  font-size: 3em;\n  text-decoration: underline;\n  margin: 0.5em;\n"]))),xb=b.a.h2(qf||(qf=Object(f.a)([""]))),Ob=b.a.table(Vf||(Vf=Object(f.a)(["\n  border-collapse: collapse;\n  max-width: 100%;\n  & th {\n    font-size: 1.2em;\n  }\n  & td, & th {\n    border: 1px solid #ccc;\n    width: 4em;\n  }\n  & td:nth-child(1) div {\n    width: 7em;\n    display: flex;\n    flex-direction: row;\n    justify-content: center;\n    align-items: center;\n    flex-wrap: wrap;\n  }\n  & td:nth-child(2) {\n    width: 9em;\n  }\n  & td:last-child {\n    width: 9em;\n  }\n  & tr:hover {\n    color: black;\n    background-color: var(--heart);\n  }\n  & img {\n    height: 1.5em;\n    width: auto;\n  }\n"]))),wb=b.a.div(Yf||(Yf=Object(f.a)(["\n  margin: 1em;\n"]))),Sb=Object(b.a)(Oc)(Jf||(Jf=Object(f.a)(["\n  font-size: 2em !important;\n"])));function Cb(e){var t=e[0].seqData.sequenceIndex,n=e[e.length-1].seqData.sequenceIndex;return"".concat(t+1," - ").concat(n+1)}function Ab(e){return void 0===e?"":e>0?"+ ".concat(e):e<0?"- ".concat(Math.abs(e)):e}var Tb=function(e){var t=[];return e.proj.loop&&t.push("Loops"),e.proj.dieOnConsume&&t.push("Dies on contact"),e.proj.dieOnFighterHit&&t.push("Can be attacked"),Mb({fd:e.fd,seq:e.proj.sequence,override:{input:"<Projectile>",notes:t}})},Mb=function(e){var t,n,a=e.fd,r=e.seq,i=e.override,o={center:{x:0,y:0},size:{x:1,y:1}},s=new Fi(o,r),c=Bt(s.frameByTick.map((function(e){return e.data.projectileId}))).map((function(e){return ni.getProjectileFromFighter(a,e).sequence.displayName})),u=[s].filter((function(e){return e.hasAttacks})),l=Vt(u.map((function(e){return Gt(Bt(e.frameByTick.map((function(e){return e.attack}))),(function(e){return(e.seqData.attackIndex||0).toString()}))}))),h=zt(l),d=r.displayCancelsFrom?ni.getMoveFromFighter(a,r.displayCancelsFrom):void 0,p=0;if(d){var f=new Fi(o,d).frameByTick.findIndex((function(e){var t=e.data.cancel;return Vt([t.onArmor,t.onBlock,t.onHitAirborne,t.onHitGrounded,t.onHitTumbling,t.onWhiff].map((function(e){return Object.values(e)}))).includes(r.seqid)}));f>0&&(p=f)}var b=s.frameByTick.filter((function(e){return e.data.armor})),m=s.frameByTick.filter((function(e){return e.data.armorVsAirborne})),v=s.frameByTick.filter((function(e){return e.data.armorVsGrounded})),j=s.frameByTick.filter((function(e){return 0===e.strikeHurtboxes.length})),y=s.frameByTick.filter((function(e){return e.data.invulnVsProjectile})),x=s.frameByTick.filter((function(e){return e.data.onParry})),O=s.frameByTick.filter((function(e){return e.data.freezeOther})),w=Bt(s.frameByTick.map((function(e){var t;return Object(g.a)(Object(g.a)(Object(g.a)({},e.data.cancel.onHitGrounded),e.data.cancel.onHitAirborne),e.data.cancel.onHitTumbling).auto||(null===(t=e.data.onParry)||void 0===t?void 0:t.next)})))[0],S=l.some((function(e){return e.data.unblockable})),C=h&&h.data.ignoreScaling,A=Wt(l.map((function(e){return e.data.blueDamage}))),T=Wt(l.map((function(e){return e.data.blueOnBlock}))),M=Wt(s.frameByTick.map((function(e){return e.recoverBluePerFrame}))),P=[];null!==i&&void 0!==i&&i.notes?P.push.apply(P,Object(k.a)(i.notes)):(c.length&&P.push("Projectile: ".concat(c.join(", "))),x.length&&P.push("Parry: ".concat(Cb(x))),j.length&&P.push("Invuln: ".concat(Cb(j))),y.length&&P.push("Proj Invuln: ".concat(Cb(y))),b.length&&P.push("Armor: ".concat(Cb(b))),m.length&&P.push("ArmorVsAir: ".concat(Cb(m))),v.length&&P.push("ArmorVsGround: ".concat(Cb(v))),O.length&&P.push("StopTime: ".concat(Cb(O))),s.data.next&&P.push("Next: ".concat(ni.getMoveFromFighter(a,s.data.next).displayName)),w&&P.push("onHit: ".concat(ni.getMoveFromFighter(a,w).displayName)),S&&P.push("Unblockable"),C&&P.push("No Dmg Scaling"),A>0&&P.push("Blue: ".concat(A," on hit")),T>0&&P.push("Blue: ".concat(T," on block")),M>0&&P.push("Blue: ".concat(M," healed")));var R=null!==(t=null===i||void 0===i?void 0:i.input)&&void 0!==t?t:r.displayInput.split("").map((function(e,t){switch(e){case"5":return"";case"4":return Object(ac.jsx)("img",{alt:e,src:ni.Notation.left},"".concat(t,"-").concat(e));case"6":return Object(ac.jsx)("img",{alt:e,src:ni.Notation.right},"".concat(t,"-").concat(e));case"a":return Object(ac.jsx)("img",{alt:e,src:ni.Notation.attack1},"".concat(t,"-").concat(e));case"b":return Object(ac.jsx)("img",{alt:e,src:ni.Notation.attack2},"".concat(t,"-").concat(e));case"c":return Object(ac.jsx)("img",{alt:e,src:ni.Notation.attack3},"".concat(t,"-").concat(e));default:return e}}));return Object(ac.jsxs)("tr",{children:[Object(ac.jsx)("td",{children:Object(ac.jsx)("div",{children:R})}),Object(ac.jsx)("td",{children:r.displayName}),Object(ac.jsx)("td",{children:l.map((function(e){return e.data.damage})).join(", ")}),Object(ac.jsx)("td",{children:l.map((function(e){return e.data.chip})).join(", ")}),Object(ac.jsx)("td",{children:s.startupFrames+p}),Object(ac.jsx)("td",{children:s.activeFrames+s.activeGapFrames}),Object(ac.jsx)("td",{children:s.recoveryFrames}),Object(ac.jsx)("td",{children:l.map((function(e){return e.tumble?"launch".concat(e.tumble.juggles):e.data.hitstun})).join(", ")}),Object(ac.jsx)("td",{children:l.map((function(e){return e.data.blockstun})).join(", ")}),Object(ac.jsx)("td",{children:null!==h&&void 0!==h&&h.data.tumble?"launch".concat(h.data.tumble.juggles):Ab(null===h||void 0===h?void 0:h.data.onHit)}),Object(ac.jsx)("td",{children:Ab(null===(n=zt(l))||void 0===n?void 0:n.data.onBlock)}),Object(ac.jsx)("td",{children:P.map((function(e,t){return Object(ac.jsx)("div",{children:e},t)}))})]})},Pb=function(e){return Object(ac.jsx)("div",{onClick:e.onRemove,style:{fontSize:"0.6em",color:"salmon",cursor:"pointer"},children:"[ Remove Mod ]"})},Rb=function(e){return Object(ac.jsxs)("div",{id:e.id,children:[Object(ac.jsxs)(xb,{children:[e.label,e.onRemove&&Object(ac.jsx)(Pb,{onRemove:e.onRemove})]}),Object(ac.jsxs)(Ob,{children:[Object(ac.jsx)("thead",{children:Object(ac.jsxs)("tr",{children:[Object(ac.jsx)("th",{children:"Input"}),Object(ac.jsx)("th",{children:"Name"}),Object(ac.jsx)("th",{children:"Damage"}),Object(ac.jsx)("th",{children:"Chip"}),Object(ac.jsx)("th",{children:"Startup"}),Object(ac.jsx)("th",{children:"Active"}),Object(ac.jsx)("th",{children:"Recovery"}),Object(ac.jsx)("th",{children:"Hitstun"}),Object(ac.jsx)("th",{children:"Blockstun"}),Object(ac.jsx)("th",{children:"on Hit"}),Object(ac.jsx)("th",{children:"on Block"}),Object(ac.jsx)("th",{children:"Notes"})]})}),Object(ac.jsxs)("tbody",{children:[e.seqs.map((function(t,n){return Object(ac.jsx)(Mb,{fd:e.fd,seq:t},"attack-"+n)})),e.id&&e.fd.projectiles.map((function(t,n){return Object(ac.jsx)(Tb,{fd:e.fd,proj:t},"projectile-"+n)}))]})]})]})},Ib=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={mods:e.getLocalMods()},e}return Object(h.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.scrollToId;e&&setTimeout((function(){var t;return null===(t=document.getElementById(e))||void 0===t?void 0:t.scrollIntoView()}),100)}},{key:"getLocalMods",value:function(){return ni.OfflineMods.get()}},{key:"onRemoveMod",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(t){return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ni.OfflineMods.remove(t),e.next=3,uc(this,{mods:this.getLocalMods()});case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onUploadMod",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(t){var n,a,r;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ao.unpackZipBlob(t.filename,t.blob);case 3:n=e.sent,a=n.wrapper,ni.OfflineMods.push(a),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(0),t.filepath.endsWith(".zip")){e.next=12;break}return e.abrupt("return",this.showError("You can only upload zip files here"));case 12:return e.abrupt("return",this.showError("There was an error when uploading: "+t.filepath));case 13:if(r=this.getLocalMods(),this.state.mods.length!==r.length){e.next=16;break}return e.abrupt("return",this.showError("This character has already been uploaded"));case 16:return e.next=18,uc(this,{mods:this.getLocalMods()});case 18:case"end":return e.stop()}}),e,this,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()},{key:"showError",value:function(e){this.setState({modErrorMessage:e})}},{key:"render",value:function(){var e=this,t=this.state,a=t.mods,r=t.modErrorMessage,i=ni.FighterDataOriginal.concat(),o=ni.Characters.Beef.original,s=[o.actions.throwStart,o.actions.throwHit,o.actions.rejection,o.actions.rapid,o.actions.burst,o.actions.downed],c=gs.loadFromStorage();return(kn.Debug.ShowBosses||c&&c.account.canUnlock(ni.Characters.PlayableBossPork.original))&&i.push(ni.Characters.PlayableBossPork.original),(kn.Debug.ShowBosses||c&&c.account.canUnlock(ni.Characters.PlayableBossGarlic.original))&&i.push(ni.Characters.PlayableBossGarlic.original),Object(ac.jsxs)(jb,{children:[Object(ac.jsx)(yb,{children:n.Title}),Object(ac.jsxs)("div",{style:{textAlign:"left"},children:["Notes:",Object(ac.jsxs)("ul",{children:[Object(ac.jsx)("li",{children:"Startup = number of frames in Startup animation"}),Object(ac.jsx)("li",{children:"Therefore, to punish -8, you need a move with 7 Startup or less"}),Object(ac.jsx)("li",{children:"Average starting life is 1000 (some characters are slightly higher or lower)"}),Object(ac.jsx)("li",{children:"One LOVE meter bar is 1000. The max is two bars, or 2000"}),Object(ac.jsxs)("li",{children:["When your attack is blocked, you gain ",kn.MeterGainAttackOnBlock," meter"]}),Object(ac.jsxs)("li",{children:["When your attack hits, you gain ",kn.MeterGainAttackOnHit," meter"]}),Object(ac.jsxs)("li",{children:["When you block an attack, you gain ",kn.MeterGainDefendOnBlock," meter"]}),Object(ac.jsx)("li",{children:"When you get hit by attack, you gain (1.5 x damage you took) meter"}),Object(ac.jsxs)("li",{children:["A few select attacks override these rules, eg Throw builds ",.5*kn.MeterOneBar," meter"]}),Object(ac.jsx)("li",{children:"Combo damage scaling goes 100, 100, 90, 80, 70, 60, 50, 40, 30, 20, ...20"}),Object(ac.jsx)("li",{children:"On counterhit, damage scaling becomes 120, 100, 90, 80, 70, 60, 50, 40, 30 ...30"})]})]}),Object(ac.jsx)(Rb,{label:"Common",fd:o,seqs:s}),i.map((function(e){var t=e.stats,n=t.name,a=t.code,r=Et(e.attacks,(function(e){return e.displayIndex}));return Object(ac.jsx)(Rb,{id:a,label:n,fd:e,seqs:r},n)})),a.length?Object(ac.jsx)(yb,{children:"Mods"}):void 0,a.map((function(t){var n=t.fighter.original,a=n.stats,r=a.name,i=a.code,o=Et(n.attacks,(function(e){return e.displayIndex}));return Object(ac.jsx)(Rb,{id:i,label:r,fd:n,seqs:o,onRemove:e.props.canManageMods?function(){return e.onRemoveMod(t)}:void 0},r)})),Object(ac.jsxs)(wb,{children:[!!this.props.canManageMods&&Object(ac.jsx)(Xp,{multiple:!0,onUpload:function(t){return e.onUploadMod(t)},children:Object(ac.jsx)(Sb,{children:"Load Mod Files"})}),Object(ac.jsx)(Sb,{onClick:this.props.onExit,children:"Exit"})]}),r&&Object(ac.jsx)(vb,{message:r,onExit:function(){return e.setState({modErrorMessage:void 0})}})]})}}]),n}(i.a.Component);Ib.Title="Frame Data";var Bb,Db,Hb,Eb,_b,Fb,Lb,Gb,zb,Wb,Nb,Ub,qb,Vb,Yb=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"componentDidMount",value:function(){oh.set(rh.FrameData)}},{key:"onExit",value:function(){Pi.Menu.Backward.play(),this.props.onExit()}},{key:"render",value:function(){var e=this;return Object(ac.jsxs)(kb,{children:[Object(ac.jsx)(Ib,Object(g.a)(Object(g.a)({},this.props),{},{onExit:function(){return e.onExit()}})),Object(ac.jsx)(Bl,{}),Object(ac.jsx)(cc,{onControllerInput:function(t){return t===te.attack2&&e.props.onExit()}})]})}}]),n}(i.a.Component);Yb.Title=Ib.Title;var Jb,Kb,Qb,Zb,Xb,$b,eg,tg,ng,ag,rg,ig,og,sg,cg,ug,lg,hg,dg,pg,fg,bg,gg,mg,vg,kg,jg,yg=b.a.div(Bb||(Bb=Object(f.a)(["\n  padding: 1vh 2vh;\n  border: 0.2vh solid black;\n  border-radius: 0.5em;\n\n  cursor: pointer;\n  background-color: var(--backtext);\n  color: var(--foretext);\n  &:hover {\n    background-color: var(--foretext);\n    color: var(--backtext);\n  }\n"]))),xg=b.a.div(Db||(Db=Object(f.a)(["\n  position: absolute;\n  z-index: ",";\n  top: 0vh;\n  left: 0vh;\n  width: 100%;\n  height: 100%;\n\n  background-color: #00000060;\n\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n"])),Ts.zIndex.MenuOverlay),Og=b.a.div(Hb||(Hb=Object(f.a)(["\n  color: black;\n  background-color: #FFFFFFC0;\n  border: 0.2em solid black;\n  border-radius: 1em;\n  padding: 0 2em;\n\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-start;\n  align-items: center;\n\n  max-height: 96vh;\n  overflow-y: auto;\n"]))),wg=b.a.div(Eb||(Eb=Object(f.a)(["\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: flex-start;\n  flex-wrap: nowrap;\n"]))),Sg=b.a.div(_b||(_b=Object(f.a)(["\n  margin: 0 1em;\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-start;\n  align-items: center;\n  flex-wrap: nowrap;\n"]))),Cg=b.a.h3(Fb||(Fb=Object(f.a)(["\n  margin-bottom: 0;\n  text-decoration: underline;\n"]))),Ag=b.a.div(Lb||(Lb=Object(f.a)(["\n  margin-top: 0.2em;\n  margin-bottom: 0.5em;\n"]))),Tg=b.a.table(Gb||(Gb=Object(f.a)(["\n  border-collapse: collapse;\n  text-align: left;\n  width: 54vh;\n  & th {\n    font-size: 1.17em;\n  }\n  & td, & th {\n    border: 1px solid black;\n    padding: 0.3em 0.5em;\n  }\n  & th:first-child, & td:first-child {\n    text-align: center;\n  }\n  & tbody tr {\n    cursor: pointer;\n  }\n"]))),Mg=b.a.div(zb||(zb=Object(f.a)(["\n  margin: 2vh;\n  margin-top: 1vh;\n  width: 50vh;\n\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n  flex-wrap: wrap;\n"]))),Pg=b.a.div(Wb||(Wb=Object(f.a)(["\n  position: absolute;\n  z-index: ",";\n  top: 4vh;\n  left: 50%;\n  transform: translateX(-50%);\n  width: auto;\n  height: auto;\n\n  font-size: 2vh;\n\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n"])),Ts.zIndex.MenuOverlay),Rg=b.a.div(Nb||(Nb=Object(f.a)(["\n  text-align: left;\n  margin-bottom: 0.5em;\n"]))),Ig=b.a.div(Ub||(Ub=Object(f.a)(["\n  margin-bottom: 0.2em;\n"]))),Bg=b.a.div(qb||(qb=Object(f.a)(["\n  border: 0.15em solid black;\n  border-radius: 0.4em;\n  min-width: 50vh;\n\n  display: flex;\n  flex-direction: row;\n  justify-content: stretch;\n  align-items: stretch;\n"]))),Dg=b.a.div(Vb||(Vb=Object(f.a)(["\n  cursor: pointer;\n  padding: 0.1em;\n\n  flex: 1;\n  text-align: center;\n\n  color: black;\n  background-color: #bbb;\n\n  ","\n\n  ","\n"])),(function(e){return e.isOn?"\n    background-color: white;\n  ":""}),(function(e){return e.isFirst?"":"\n    border-left: 0.15em solid black;\n  "})),Hg=function(e){return e[e.Hidden=0]="Hidden",e[e.Menu=1]="Menu",e[e.FrameData=2]="FrameData",e}({}),Eg=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={trainingBlockingP1:li.TrainingBlockingP1.get(),trainingBlockingP2:li.TrainingBlockingP2.get(),trainingCounterHit:li.TrainingCounterHit.get(),trainingDummyBehavior:li.TrainingDummyBehavior.get(),trainingDummyBurst:li.TrainingDummyBurst.get(),trainingHideHUD:li.TrainingHideHUD.get(),trainingShowInputDisplay:li.TrainingShowInputDisplay.get(),trainingMeter:li.TrainingMeter.get(),trainingShowHitboxes:li.TrainingShowHitboxes.get(),paused:!1,showFrameData:!1,showSaveStateMessage:!1},e.keyboard=hi.fromGameType({isOnlineHost:!1,isOnlineGuest:!1,isVersusCPU:!1,isTraining:!0,isTutorial:!1}),e.saveState=void 0,e}return Object(h.a)(n,[{key:"componentDidMount",value:function(){var e=this;ls.addKeyboard(this.keyboard),ls.addCallback(this,"keydown",(function(t){return e.handleKeyDown(t,!0)})),ub.setCallback({onHide:function(){return e.props.runner.setup.loop.pause()},onShow:function(){return e.state.paused?void 0:e.props.runner.setup.loop.resume()}}),this.syncGameDummy()}},{key:"componentWillUnmount",value:function(){ls.removeKeyboard(this.keyboard),ls.removeCallbacks(this)}},{key:"handleKeyDown",value:function(e,t){var n,a,r=this,i=this.props.runner,o=i.coord.game;if((this.keyboard.step(),"Escape"===e&&this.props.viewState!==Hg.Hidden&&this.props.setViewState(Hg.Hidden),t)&&new ua(li.Controls.get()).either.includes(e))return;if("Digit1"===e&&this.props.setViewState(this.props.viewState===Hg.Menu?Hg.Hidden:Hg.Menu),"Digit2"!==e||kn.isAprilFools||this.props.setViewState(this.props.viewState===Hg.FrameData?Hg.Hidden:Hg.FrameData),"Digit3"===e&&this.setShowHitBoxes(this.state.trainingShowHitboxes!==xe.Hide?xe.Hide:xe.Boxes),"Digit4"===e){var s=[ke.Player2,ke.RecordAttack,ke.RecordMovement],c=Ut(this.state.trainingDummyBehavior,s);this.setDummyBehavior(c)}if("Digit5"===e){var u=[ke.Player2,ke.Loop,ke.Reversal],l=Ut(this.state.trainingDummyBehavior,u);this.setDummyBehavior(l)}("Digit6"===e&&(i.setup.loop.isRunning()?i.setup.loop.pause():i.setup.loop.resume(),this.setState({paused:!i.setup.loop.isRunning()})),"Digit7"===e&&(i.setup.loop.isRunning()||i.setup.loop.debug()),"Digit8"===e)&&(this.saveState=Kt(null===(n=i.coord)||void 0===n?void 0:n.game.getState()),this.setState({showSaveStateMessage:!0}),setTimeout((function(){return r.setState({showSaveStateMessage:!1})}),1e3));"Digit9"===e&&(this.saveState&&(null===(a=i.coord)||void 0===a||a.game.loadState(Kt(this.saveState))));if("Digit0"===e){var h;i.setup.loop.resume(),this.setState({paused:!1});var d=this.keyboard.getPressedOrHeld().map((function(e){return r.keyboard.getControl1Prop(e)})),p=o.getTrainingRecordingInputs();d.some((function(e){return e===te.left}))?i.reset(fe.Left):d.some((function(e){return e===te.right}))?i.reset(fe.Right):i.reset(fe.Center),null===(h=i.coord)||void 0===h||h.game.setTrainingRecordingInputs(p),this.syncGameDummy()}}},{key:"syncGameDummy",value:function(){var e=this.state.trainingDummyBehavior,t=this.props.runner.coord.game;e===ke.RecordAttack?t.startTrainingRecordingAttack():e===ke.RecordMovement?t.startTrainingRecordingMovement():e===ke.Loop?t.loopTrainingRecording():e===ke.Reversal?t.reversalTrainingRecording():t.stopTrainingRecording()}},{key:"setShowHitBoxes",value:function(e){var t;li.TrainingShowHitboxes.set(e),null===(t=this.props.runner.coord)||void 0===t||t.draw(),this.setState({trainingShowHitboxes:li.TrainingShowHitboxes.get()})}},{key:"setCounterHit",value:function(e){li.TrainingCounterHit.set(e),this.setState({trainingCounterHit:li.TrainingCounterHit.get()})}},{key:"setDisableInputDisplay",value:function(e){li.TrainingShowInputDisplay.set(e),this.setState({trainingShowInputDisplay:li.TrainingShowInputDisplay.get()})}},{key:"setDummyBehavior",value:function(e){var t=this;li.TrainingDummyBehavior.set(e),this.setState({trainingDummyBehavior:li.TrainingDummyBehavior.get()},(function(){t.syncGameDummy()}))}},{key:"setDummyBurst",value:function(e){li.TrainingDummyBurst.set(e),this.setState({trainingDummyBurst:li.TrainingDummyBurst.get()})}},{key:"setHideHUD",value:function(e){li.TrainingHideHUD.set(e),this.setState({trainingHideHUD:li.TrainingHideHUD.get()})}},{key:"setMeter",value:function(e){li.TrainingMeter.set(e),this.setState({trainingMeter:li.TrainingMeter.get()})}},{key:"setTrainingBlockP1",value:function(e){li.TrainingBlockingP1.set(e),this.setState({trainingBlockingP1:li.TrainingBlockingP1.get()})}},{key:"setTrainingBlockP2",value:function(e){li.TrainingBlockingP2.set(e),this.setState({trainingBlockingP2:li.TrainingBlockingP2.get()})}},{key:"renderPillElement",value:function(e,t){return Object(ac.jsx)(Dg,{isOn:e.isOn,onClick:e.cb,isFirst:0===t,children:e.name},e.name)}},{key:"renderPills",value:function(e){var t=this;return Object(ac.jsxs)(Rg,{children:[Object(ac.jsx)(Ig,{children:e.description}),Object(ac.jsx)(Bg,{children:e.options.map((function(e,n){return t.renderPillElement(e,n)}))})]})}},{key:"renderToggle",value:function(e,t){var n={color:e?"black":"grey",fontStyle:e?"normal":"italic",textDecoration:e?"underline":"none"};return Object(ac.jsx)("span",{style:n,children:t})}},{key:"renderHitboxKey",value:function(e,t,n){var a={backgroundColor:e,color:n?"black":"white",border:"0.1em solid black",padding:"0.5em",margin:"0.2em"};return Object(ac.jsx)("div",{style:a,children:t})}},{key:"renderSaveStateMessage",value:function(){return this.state.showSaveStateMessage?Object(ac.jsx)(Pg,{children:Object(ac.jsx)(yg,{children:"Saved State"})}):""}},{key:"render",value:function(){var e=this,t=this.state,n=t.trainingShowHitboxes,a=t.trainingBlockingP1,r=t.trainingBlockingP2,i=t.trainingCounterHit,o=t.trainingDummyBehavior,s=t.trainingDummyBurst,c=t.trainingHideHUD,u=t.trainingShowInputDisplay,l=t.trainingMeter,h=t.paused;if(this.props.viewState===Hg.Hidden)return Object(ac.jsx)("div",{children:this.renderSaveStateMessage()});if(this.props.viewState===Hg.FrameData){var d=this.props.runner.setup.gameConfig.fighter1.stats.code;return Object(ac.jsx)(xg,{onClick:function(){return e.props.setViewState(Hg.Hidden)},children:Object(ac.jsx)(Og,{onClick:function(e){return e.stopPropagation()},children:Object(ac.jsx)(Ib,{scrollToId:d,onExit:function(){return e.props.setViewState(Hg.Hidden)}})})})}return Object(ac.jsxs)(xg,{onClick:function(){return e.props.setViewState(Hg.Hidden)},children:[Object(ac.jsx)(Og,{onClick:function(e){return e.stopPropagation()},children:Object(ac.jsxs)(wg,{children:[Object(ac.jsxs)(Sg,{children:[Object(ac.jsx)(Cg,{children:"Training Settings"}),Object(ac.jsx)(Ag,{children:"These settings will be remembered on your device"}),Object(ac.jsxs)("div",{children:[this.renderPills({description:"Hitbox Display",options:[{isOn:n===xe.Hide,name:"None",cb:function(){return e.setShowHitBoxes(xe.Hide)}},{isOn:n===xe.Boxes,name:"Hitboxes",cb:function(){return e.setShowHitBoxes(xe.Boxes)}},{isOn:n===xe.Sprite,name:"Hit + Sprite",cb:function(){return e.setShowHitBoxes(xe.Sprite)}}]}),this.renderPills({description:"LOVE Meter",options:[{isOn:l===ye.Normal,name:"Normal",cb:function(){return e.setMeter(ye.Normal)}},{isOn:l===ye.Refill,name:"Refill",cb:function(){return e.setMeter(ye.Refill)}},{isOn:l===ye.Infinite,name:"Infinite",cb:function(){return e.setMeter(ye.Infinite)}},{isOn:l===ye.Empty,name:"Empty",cb:function(){return e.setMeter(ye.Empty)}}]}),this.renderPills({description:"Player Blocking",options:[{isOn:a===be.Enabled,name:"Enabled",cb:function(){return e.setTrainingBlockP1(be.Enabled)}},{isOn:a===be.Auto,name:"Auto",cb:function(){return e.setTrainingBlockP1(be.Auto)}},{isOn:a===be.Disabled,name:"Disabled",cb:function(){return e.setTrainingBlockP1(be.Disabled)}},{isOn:a===be.Random,name:"Random",cb:function(){return e.setTrainingBlockP1(be.Random)}}]}),this.renderPills({description:"Dummy Blocking",options:[{isOn:r===be.Enabled,name:"Enabled",cb:function(){return e.setTrainingBlockP2(be.Enabled)}},{isOn:r===be.Auto,name:"Auto",cb:function(){return e.setTrainingBlockP2(be.Auto)}},{isOn:r===be.Disabled,name:"Disabled",cb:function(){return e.setTrainingBlockP2(be.Disabled)}},{isOn:r===be.Random,name:"Random",cb:function(){return e.setTrainingBlockP2(be.Random)}}]}),this.renderPills({description:"Dummy Behavior",options:[{isOn:o===ke.Player2,name:"Player2",cb:function(){return e.setDummyBehavior(ke.Player2)}},{isOn:o===ke.Cpu,name:"Cpu",cb:function(){return e.setDummyBehavior(ke.Cpu)}},{isOn:[ke.RecordAttack,ke.RecordMovement].includes(o),name:"Record",cb:function(){return e.setDummyBehavior(ke.RecordAttack)}},{isOn:o===ke.Loop,name:"Loop",cb:function(){return e.setDummyBehavior(ke.Loop)}},{isOn:o===ke.Reversal,name:"Reversal",cb:function(){return e.setDummyBehavior(ke.Reversal)}}]}),this.renderPills({description:"Dummy Burst",options:[{isOn:s===je.Never,name:"Never",cb:function(){return e.setDummyBurst(je.Never)}},{isOn:s===je.Always,name:"Always",cb:function(){return e.setDummyBurst(je.Always)}},{isOn:s===je.Random,name:"Random",cb:function(){return e.setDummyBurst(je.Random)}}]}),this.renderPills({description:"Counter Hit",options:[{isOn:i===ve.Normal,name:"Normal",cb:function(){return e.setCounterHit(ve.Normal)}},{isOn:i===ve.Force,name:"Force",cb:function(){return e.setCounterHit(ve.Force)}},{isOn:i===ve.Random,name:"Random",cb:function(){return e.setCounterHit(ve.Random)}}]}),this.renderPills({description:"Input Display",options:[{isOn:u,name:"Show",cb:function(){return e.setDisableInputDisplay(!0)}},{isOn:!u,name:"Hide",cb:function(){return e.setDisableInputDisplay(!1)}}]}),this.renderPills({description:"Life Bars and Combo Counters",options:[{isOn:!c,name:"Show",cb:function(){return e.setHideHUD(!1)}},{isOn:c,name:"Hide",cb:function(){return e.setHideHUD(!0)}}]})]})]}),Object(ac.jsxs)(Sg,{children:[Object(ac.jsx)(Cg,{children:"Keyboard Shortcuts"}),Object(ac.jsx)(Ag,{children:"Press the following number keys for training tools:"}),Object(ac.jsxs)(Tg,{children:[Object(ac.jsx)("thead",{children:Object(ac.jsxs)("tr",{children:[Object(ac.jsx)("th",{children:"Key"}),Object(ac.jsx)("th",{children:"Effect (or click below)"})]})}),Object(ac.jsxs)("tbody",{children:[Object(ac.jsxs)("tr",{onClick:function(){return e.handleKeyDown("Digit1")},children:[Object(ac.jsx)("td",{children:"1"}),Object(ac.jsx)("td",{children:"Show/Hide this menu"})]}),kn.isAprilFools?"":Object(ac.jsxs)("tr",{onClick:function(){return e.handleKeyDown("Digit2")},children:[Object(ac.jsx)("td",{children:"2"}),Object(ac.jsx)("td",{children:"Show/Hide the Frame Data menu"})]}),Object(ac.jsxs)("tr",{onClick:function(){return e.handleKeyDown("Digit3")},children:[Object(ac.jsx)("td",{children:"3"}),Object(ac.jsx)("td",{children:"Toggle hitbox display"})]}),Object(ac.jsxs)("tr",{onClick:function(){return e.handleKeyDown("Digit4")},children:[Object(ac.jsx)("td",{children:"4"}),Object(ac.jsx)("td",{children:"Toggle Player 2 / Record Playback"})]}),Object(ac.jsxs)("tr",{onClick:function(){return e.handleKeyDown("Digit5")},children:[Object(ac.jsx)("td",{children:"5"}),Object(ac.jsx)("td",{children:"Toggle Player 2 / Loop / Reversal"})]}),Object(ac.jsxs)("tr",{onClick:function(){return e.handleKeyDown("Digit6")},children:[Object(ac.jsx)("td",{children:"6"}),Object(ac.jsxs)("td",{children:["Gameplay: ",this.renderToggle(!h,"NORMAL")," / ",this.renderToggle(h,"PAUSED")]})]}),Object(ac.jsxs)("tr",{onClick:function(){return e.handleKeyDown("Digit7")},children:[Object(ac.jsx)("td",{children:"7"}),Object(ac.jsx)("td",{children:"Step to next frame (when paused)"})]}),Object(ac.jsxs)("tr",{onClick:function(){return e.handleKeyDown("Digit8")},children:[Object(ac.jsx)("td",{children:"8"}),Object(ac.jsx)("td",{children:"Save State"})]}),Object(ac.jsxs)("tr",{onClick:function(){return e.handleKeyDown("Digit9")},children:[Object(ac.jsx)("td",{children:"9"}),Object(ac.jsx)("td",{children:"Load State"})]}),Object(ac.jsxs)("tr",{onClick:function(){return e.handleKeyDown("Digit0")},children:[Object(ac.jsx)("td",{children:"0"}),Object(ac.jsx)("td",{children:"Reset positions"})]})]})]}),!vn.isMobile&&Object(ac.jsx)("div",{children:"you can set P2 CONTROLS from Training Character Select"}),Object(ac.jsx)(Cg,{children:"Hitbox Key"}),Object(ac.jsxs)(Mg,{children:[this.renderHitboxKey(sn(kn.Color.PushBox),"Pushbox"),this.renderHitboxKey(sn(kn.Color.HitBoxUnused),"Hitbox"),this.renderHitboxKey(sn(kn.Color.HitBoxConsumed),"Used Hitbox"),this.renderHitboxKey(sn(kn.Color.ThrowableBox),"Throwable"),this.renderHitboxKey(sn(kn.Color.HurtBoxNormal),"Hurtbox",!0),this.renderHitboxKey(sn(kn.Color.HurtBoxRecovery),"Recovery"),this.renderHitboxKey(sn(kn.Color.HurtBoxStun),"Block / Hit Stun",!0),this.renderHitboxKey(sn(kn.Color.HurtBoxArmor),"Armor"),this.renderHitboxKey(sn(kn.Color.HurtBoxAirArmor),"AntiAir",!0),this.renderHitboxKey(sn(kn.Color.HurtBoxParry),"Parry",!0),this.renderHitboxKey(sn(kn.Color.DrawBox),"Sprite",!0)]})]})]})}),this.renderSaveStateMessage()]})}}]),n}(i.a.Component),_g=Object(b.b)(Jb||(Jb=Object(f.a)(["\n  0% {\n    left: -150%;\n    opacity: 0;\n  }\n  100% {\n    left: -50%;\n    opacity: 1;\n  }\n"]))),Fg=b.a.div(Kb||(Kb=Object(f.a)(["\n  position: absolute;\n  top: ",";\n  left: -50%;\n  width: 200%;\n  height: ",";\n  transform: rotate(-5deg);\n  overflow: hidden;\n\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  flex-wrap: nowrap;\n\n  box-sizing: border-box;\n  border: 0 solid var(--heart);\n  border-width: 2vh 0;\n  font-size: 1rem;\n  color: white;\n\n  /* fix dead pixels effect */\n  background: black;\n  box-shadow: 0 0 1px black;\n\n  animation-name: ",";\n  animation-duration: 0.3s;\n  animation-delay: 0s;\n  animation-timing-function: linear;\n  animation-iteration-count: 1;\n"])),vn.isMobile?"10vh":"18vh",vn.isMobile?"80vh":"64vh",_g),Lg=b.a.div(Qb||(Qb=Object(f.a)(["\n  width: 140vh;\n  height: 100%;\n\n  transform: rotate(5deg);\n\n  /* fix dead pixels effect */\n  background: black;\n  box-shadow: 0 0 1px black;\n\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n  flex-wrap: nowrap;\n"]))),Gg=Object(b.b)(Zb||(Zb=Object(f.a)(["\n  0% {\n    height: 300%;\n  }\n  25% {\n    height: 305%;\n  }\n  50% {\n    height: 310%;\n  }\n  75% {\n    height: 303%;\n  }\n  100% {\n    height: 300%;\n  }\n"]))),zg=Object(b.b)(Xb||(Xb=Object(f.a)(["\n  0% {\n    transform: rotate(-30deg);\n  }\n  50% {\n    transform: rotate(30deg);\n  }\n  100% {\n    transform: rotate(-30deg);\n  }\n"]))),Wg=b.a.div($b||($b=Object(f.a)(["\n  width: ",";\n  height: ",";\n  text-align: center;\n  position: relative;\n"])),(function(e){return e.width}),vn.isMobile?"75%":"100%"),Ng=b.a.img(eg||(eg=Object(f.a)(["\n  position: absolute;\n  height: 200%;\n  width: auto;\n  top: -40%;\n  left: 40%;\n  transform: translate(-50%, 0);\n\n  animation-name: ",";\n  animation-duration: 0.1s;\n  animation-delay: 0s;\n  animation-timing-function: ease-in;\n  animation-iteration-count: infinite;\n"])),Gg),Ug=b.a.img(tg||(tg=Object(f.a)(["\n  position: absolute;\n  height: 110%;\n  width: auto;\n  top: 0%;\n  left: 0%;\n\n  animation-name: ",";\n  animation-duration: 3s;\n  animation-delay: 0s;\n  animation-timing-function: ease-in;\n  animation-iteration-count: infinite;\n"])),zg),qg=b.a.div(ng||(ng=Object(f.a)(["\n  height: 100%;\n  text-align: center;\n\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  flex-wrap: nowrap;\n"]))),Vg=b.a.div(ag||(ag=Object(f.a)(["\n  width: ",";\n  height: 100%;\n  text-align: center;\n\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  flex-wrap: nowrap;\n"])),(function(e){return e.width})),Yg=Object(b.b)(rg||(rg=Object(f.a)(["\n  0% {\n    opacity: 0;\n    transform: scale(3);\n  }\n  50% {\n    opacity: 0;\n    transform: scale(3);\n  }\n  100% {\n    opacity: 1;\n    transform: rotate(5deg);\n  }\n"]))),Jg=b.a.div(ig||(ig=Object(f.a)(["\n  font-size: 3.5em;\n  text-decoration: underline;\n  text-shadow: 0.06em 0.06em 0px var(--heart);\n\n  transform: rotate(5deg);\n\n  animation-name: ",";\n  animation-duration: 1s;\n  animation-delay: 0s;\n  animation-timing-function: ease-in;\n  animation-iteration-count: 1;\n"])),Yg),Kg=b.a.div(og||(og=Object(f.a)(["\n  margin-top: 5vh;\n  ","\n"])),(function(e){return e.hide?"\n    visibility: hidden;\n  ":""})),Qg=b.a.div(sg||(sg=Object(f.a)(["\n  display: flex;\n  flex-direction: row;\n  justify-content: stretch;\n  align-items: stretch;\n  flex-wrap: nowrap;\n\n  margin: 1vh;\n  height: ",";\n  & img {\n    height: 6vh;\n    width: auto;\n  }\n"])),vn.isMobile?"14vh":"6vh"),Zg=b.a.div(cg||(cg=Object(f.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: flex-start;\n  flex-wrap: nowrap;\n"]))),Xg=b.a.div(ug||(ug=Object(f.a)(["\n  font-size: ",";\n  padding: 0.5em 0.7em;\n  border: 0.2em solid var(--backtext);\n  border-radius: 0.7em;\n  margin-left: 0.5em;\n  cursor: pointer;\n  text-transform: uppercase;\n\n  background-color: var(--backtext);\n  color: var(--foretext);\n  &:hover {\n    background-color: var(--foretext);\n    color: var(--backtext);\n  }\n"])),vn.isMobile?"5vh":"2.5vh"),$g=Object(b.a)(Xg)(lg||(lg=Object(f.a)(["\n  cursor: not-allowed;\n  background: repeating-linear-gradient(\n    45deg,\n    white,\n    white 10px,\n    lightgrey 10px,\n    lightgrey 20px\n  );\n  &:hover {\n    background: repeating-linear-gradient(\n      45deg,\n      white,\n      white 10px,\n      lightgrey 10px,\n      lightgrey 20px\n    );\n    color: var(--foretext);\n  }\n"]))),em=b.a.div(hg||(hg=Object(f.a)(["\n  font-size: 1.5em;\n"]))),tm=b.a.div(dg||(dg=Object(f.a)(["\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n"]))),nm=Object(b.a)(Xg)(pg||(pg=Object(f.a)(["\n  margin-left: 0;\n"]))),am=Object(b.a)($g)(fg||(fg=Object(f.a)(["\n  margin-left: 0;\n"]))),rm=function(e){var t=Object(r.useState)(!1),n=Object(m.a)(t,2),a=n[0],i=n[1],o=Object(r.useCallback)((function(){var t=ni.getPlayableBoss(e.fighter);i(!0),ns.accountUnlock(e.apiToken,{code:t.stats.code}).then((function(t){gs.update(t),e.onExit()})).catch((function(){return e.onExit()}))}),[e,i]);return Object(ac.jsx)(Fg,{children:Object(ac.jsx)(Lg,{children:Object(ac.jsxs)(qg,{children:[Object(ac.jsx)(Jg,{children:"CONGRATS!"}),Object(ac.jsx)("br",{}),Object(ac.jsxs)("div",{children:["As a reward for getting a Double Perfect, ",e.fighter.stats.name," is now unlocked for your account!"]}),Object(ac.jsx)("br",{}),Object(ac.jsxs)("div",{children:["While logged in to ",e.apiToken.account.getTag(),", ",e.fighter.stats.name," will appear on Character Select."]}),Object(ac.jsx)("div",{children:"NOTE: They are not playable in Ranked, Casual, or certain Lobbies"}),Object(ac.jsx)("br",{}),Object(ac.jsx)(Qg,{children:Object(ac.jsx)(Zg,{children:a?Object(ac.jsx)(am,{children:"PLEASE WAIT"}):Object(ac.jsx)(nm,{onClick:function(){return o()},children:"ACTIVATE"})})})]})})})},im=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).isLobby=!(!e.props.gameMeta.isLobbyPlaying&&!e.props.gameMeta.isLobbySpectator),e.isOnline=!!e.props.connection,e.state={waiting:!1,confirmUnlock:!1,localVersus:e.props.gameMeta.isLocalVersus?{ready1:!1,ready2:!1}:void 0},e.idleKey="WinnerModal",e}return Object(h.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.connection,n=e.gameConfig,a=e.gameMeta,r=e.outcome;if(t){var i=(a.isLobbySpectator?"n/a":a.isLobbyPlaying&&O.Lobby)||a.isRanked&&O.Ranked||a.isCasual&&O.Casual||a.isPrivate&&O.Private||"n/a";if("n/a"!==i){var o=t.isHost,s={isHost:o,queue:i,outcome:r,myCode:o?n.fighter1.stats.code:n.fighter2.stats.code,oppCode:o?n.fighter2.stats.code:n.fighter1.stats.code},c=gs.loadFromStorage();null!==c&&void 0!==c&&c.isReal?ns.accountStatsRecord(c,s).catch(wn):ns.anonStatsRecord(s).catch(wn)}}if(t&&a.isRanked)return this.ranked(t)}},{key:"ranked",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(t){var n;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,uc(this,{waiting:!0});case 2:return e.next=4,gs.syncRanked(t,this.props.outcome);case 4:if(n=e.sent){e.next=7;break}return e.abrupt("return",this.props.onExit());case 7:return e.next=9,uc(this,{waiting:!1,rankedResult:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onAnyPlayerPress",value:function(e){if(!this.isLobby&&this.props.isReadyForInput)return[te.attack1,te.attack4].includes(e)?this.props.isReplay?this.props.onRematch():this.props.isReadyForRematch?void 0:this.props.onRematch():e===te.attack2?this.props.onExit():e===te.attack3?this.props.onReplayCopy():void 0}},{key:"onPlayer1Press",value:function(e){var t=this.state.localVersus;if(t&&([te.attack1,te.attack4].includes(e)&&!t.ready2))return void this.setState({localVersus:Object(g.a)(Object(g.a)({},t),{},{ready1:!0})});return this.onAnyPlayerPress(e)}},{key:"onPlayer2Press",value:function(e){var t=this.state.localVersus;if(t&&([te.attack1,te.attack4].includes(e)&&!t.ready1))return void this.setState({localVersus:Object(g.a)(Object(g.a)({},t),{},{ready2:!0})});return this.onAnyPlayerPress(e)}},{key:"renderButtonRow",value:function(e){return e.hide?null:Object(ac.jsxs)(Qg,{children:[!vn.isMobile&&Object(ac.jsx)(Zg,{children:Object(ac.jsx)("img",{src:e.imgSrc,alt:e.button})}),Object(ac.jsx)(Zg,{children:e.disabled?Object(ac.jsx)($g,{children:e.disabled}):Object(ac.jsx)(Xg,{onClick:e.onClick,children:e.button})})]})}},{key:"render",value:function(){var e,t,n,a,r,i=this,o=this.props,s=o.matchState,c=o.outcome,u=o.connection,l=o.gameConfig,h=o.gameMeta,d=o.isVersusCPU,p=o.isReadyForInput,f=o.isReadyForRematch,b=o.isReplay,g=o.replayUploading,m=o.replayUploadError,v=o.replaySaved,k=this.state,y=k.waiting,x=k.localVersus,O=k.rankedResult,w=k.confirmUnlock,S=this.isLobby,C=this.isOnline;if(y)return Object(ac.jsx)(Fg,{children:Object(ac.jsx)("div",{children:"waiting for network..."})});if(h.isHumanVsCpu&&l.fighter2.stats.isBoss){var A=l.fighter2,T=c===j.Player1&&da.isAllPerfect(s),M=gs.loadFromStorage(),P=M&&M.account.canUnlock(A);if(T&&null!==M&&void 0!==M&&M.isReal&&!P&&!w)return Object(ac.jsx)(rm,{apiToken:M,fighter:A,onExit:function(){return i.setState({confirmUnlock:!0})}})}var R=c===j.Player1&&l.fighter1||c===j.Player2&&l.fighter2||void 0,I=c===j.Player1&&(null!==(e=null===(t=l.account1)||void 0===t?void 0:t.getTag())&&void 0!==e?e:l.fighter1.stats.name)||c===j.Player2&&(null!==(n=null===(a=l.account2)||void 0===a?void 0:a.getTag())&&void 0!==n?n:l.fighter2.stats.name)||void 0,B=R?R.previewUrl:ni.MenuArt.UnknownFighter,D=I?I+" wins!":"DRAW",H=O&&0===O.mmr.peak,E=x?"40%":"60%",_=x?"60%":"40%",F=(g?"uploading...":m&&"error uploading")||v&&"url copied!",L=h.isEventMode?"char select":"exit to menu",G=!!h.isEventMode,z=(null===(r=Ts.getEventModeDipSwitch())||void 0===r?void 0:r.noRematch)&&Object(ac.jsxs)("div",{children:["play in your browser at",Object(ac.jsx)("div",{style:{fontSize:"1.5em",marginTop:"0.3em"},children:"toughlovearena.com"})]})||S&&"returning to lobby..."||void 0;return Object(ac.jsxs)(Fg,{children:[Object(ac.jsxs)(Lg,{children:[Object(ac.jsx)(Wg,{width:E,children:R?Object(ac.jsx)(Ng,{src:B,alt:R.stats.name}):Object(ac.jsx)(Ug,{src:B,alt:"draw"})}),Object(ac.jsxs)(Vg,{width:_,children:[Object(ac.jsx)(Jg,{children:D}),Object(ac.jsxs)(Kg,{hide:!p,children:[z,!z&&Object(ac.jsxs)("div",{children:[O&&Object(ac.jsxs)("div",{style:{fontSize:"1.5em"},children:[H?Object(ac.jsx)(tm,{children:"Play more games to unlock your Rank"}):Object(ac.jsxs)(tm,{children:["MMR: ",O.mmr.rating,"\xa0",Object(ac.jsx)("img",{style:{height:"1em",width:"auto"},alt:oi.getAssets(O.mmr.rating).name,src:oi.getAssets(O.mmr.rating).iconUrl}),"\xa0 ( ",O.ppdelta>0?"+":"-",Math.abs(O.ppdelta)," )"]}),Object(ac.jsx)("br",{})]}),Object(ac.jsxs)(tm,{children:[Object(ac.jsxs)("div",{children:[x&&Object(ac.jsx)(em,{children:"Player 1"}),this.renderButtonRow({imgSrc:ni.Notation.attack1,button:b?"restart replay":"rematch",onClick:function(){return i.onPlayer1Press(te.attack1)},disabled:(C&&f||(null===x||void 0===x?void 0:x.ready1))&&"waiting..."}),this.renderButtonRow({imgSrc:ni.Notation.attack2,button:L,onClick:function(){return i.onPlayer1Press(te.attack2)}}),this.renderButtonRow({imgSrc:ni.Notation.attack3,button:"share replay",onClick:function(){return i.onPlayer1Press(te.attack3)},disabled:F,hide:G})]}),x&&Object(ac.jsxs)("div",{style:{marginLeft:"1em"},children:[Object(ac.jsx)(em,{children:"Player 2"}),!b&&this.renderButtonRow({imgSrc:ni.Notation.attack1,button:"rematch",onClick:function(){return i.onPlayer2Press(te.attack1)},disabled:(C&&f||(null===x||void 0===x?void 0:x.ready2))&&"waiting..."}),this.renderButtonRow({imgSrc:ni.Notation.attack2,button:L,onClick:function(){return i.onPlayer2Press(te.attack2)}}),this.renderButtonRow({imgSrc:ni.Notation.attack3,button:"share replay",onClick:function(){return i.onPlayer2Press(te.attack3)},disabled:F,hide:G})]})]})]})]})]})]}),Object(ac.jsx)(cc,{isOnlineHost:u&&u.local1,isOnlineGuest:u&&u.local2,isVersusCPU:d,isTraining:h.isTrainingMode,isTutorial:h.isTutorial,onPlayer1Press:function(e){return i.onPlayer1Press(e)},onPlayer2Press:function(e){return i.onPlayer2Press(e)}})]})}}]),n}(i.a.Component),om=b.a.div(bg||(bg=Object(f.a)(["\n  position: relative;\n  width: 100%;\n  height: 100%;\n  overflow: hidden;\n"]))),sm=b.a.div(gg||(gg=Object(f.a)(["\n  cursor: pointer;\n  position: absolute;\n  top: 0;\n  left: 50%;\n  width: 10vh;\n  height: 12vh;\n  transform: translate(-50%, -50%);\n\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  flex-wrap: nowrap;\n"]))),cm=b.a.div(mg||(mg=Object(f.a)(["\n  & > div {\n    white-space: nowrap;\n  }\n"]))),um=Object(b.a)(cm)(vg||(vg=Object(f.a)(["\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n  flex-wrap: nowrap;\n\n  & > div {\n    flex: 0.5;\n  }\n"]))),lm=b.a.div(kg||(kg=Object(f.a)(["\n  position: fixed;\n  bottom: 0px;\n  left: 50%;\n  width: auto;\n  transform: translateX(-50%);\n\n  text-align: center;\n  font-size: 0.8rem;\n  padding: 0.5em 2em;\n  background-color: rgba(0, 0, 0, 0.8);\n  color: white;\n\n"]))),hm=b.a.div(jg||(jg=Object(f.a)(["\n  position: fixed;\n  top: 0.1em;\n  right: 0.3em;\n  cursor: pointer;\n"]))),dm=function(e){return Object(ac.jsxs)(lm,{children:[e.children,e.onHide&&Object(ac.jsx)(hm,{onClick:e.onHide,children:"(X)"})]})};function pm(e){return"press ".concat(kn.prettyControls(e.left)," / ").concat(kn.prettyControls(e.right)," to move, ").concat(kn.prettyControls(e.attack1)," / ").concat(kn.prettyControls(e.attack2)," / ").concat(kn.prettyControls(e.attack3)," to attack")}var fm,bm,gm,mm,vm,km,jm,ym,xm,Om,wm,Sm,Cm,Am=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).hideReplayInfo=kn.Debug.HideReplayInfo,e.state={outcome:void 0,isReadyForInput:!1,isReadyForRematch:!1,replay:void 0,replayUploading:!1,replayUploadError:!1,replayCopied:!1,showDesktopControls:li.ShowDesktopControls.get(),showOverlay:Hg.Hidden,isPaused:!1,forcePauseMenuOpen:!1,forcePauseMenuExit:!1},e.mounted=!1,e.pauseSettings=new gp((function(){return{hideButton:!0,showPlayer2:e.props.gameMeta.isTrainingMode||e.props.gameMeta.isLocalVersus,requireHold:e.props.gameMeta.isEventMode||!(e.props.gameMeta.isHumanVsCpu||e.props.gameMeta.isHumanVsBoss||e.props.gameMeta.isCpuVsCpu||e.props.gameMeta.isReplay||e.props.gameMeta.isTutorial||e.props.gameMeta.isTrainingMode||e.props.gameMeta.isModTraining),forceOpen:e.state.forcePauseMenuOpen,forceExit:e.state.forcePauseMenuExit,onOpen:function(){return e.onPauseMenuOpen()},onClose:function(){return e.onPauseMenuClose()},onLeaveGame:e.getOnPauseMenuLeave(),subMenu:e.props.gameMeta.isTrainingMode&&!e.props.gameMeta.isTouchConfig&&{label:"Training Menu",closePauseMenu:!0,callback:function(){return e.setState({showOverlay:Hg.Menu})}}||e.props.gameMeta.isEventMode&&{label:"Toggle Hitbox Display",closePauseMenu:!1,callback:function(){var t,n=li.EventShowHitboxes.get()===xe.Hide?xe.Boxes:xe.Hide;li.EventShowHitboxes.set(n),null===(t=e.props.runner.coord)||void 0===t||t.draw()}}||void 0}})),e}return Object(h.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.runner,a=t.gameConfig,r=t.gameMeta,i=Ts.areBossesPlayable(r),o=[a.fighter1,a.fighter2].some((function(e){return e.stats.isBoss}));if(n.setup.network&&o&&!i)n.setup.network.onDesync(new Error("boss characters not allowed in online modes"));else if(this.mounted=!0,this.props.runner.setMatchCallback((function(){return e.updateMatch.apply(e,arguments)})),this.props.runner.setTutorialCallback((function(){return e.props.onExit()})),ub.setCallback({onHide:function(){return e.props.runner.setup.loop.pause()},onShow:function(){e.state.isPaused||e.props.runner.setup.loop.resume()}}),this.startGame(),oh.setFromMeta(this.props.gameMeta),this.pauseSettings.mount(),vn.isMobile&&Cs.hooks.onHideOverlay.broadcast(!0),kn.Debug.PeekData){var s=window;s.debug=this.props.runner,s.runner=function(){return e.props.runner},s.game=function(){return e.props.runner.coord.game}}}},{key:"componentWillUnmount",value:function(){var e;this.mounted=!1,this.props.runner.terminate(),ub.removeCallback(),this.pauseSettings.unmount(),null===(e=this.props.connection)||void 0===e||e.clearRematch(),vn.isMobile&&Cs.hooks.onHideOverlay.broadcast(!1)}},{key:"handleKeyDown",value:function(e){if(this.state.isReadyForInput&&"Enter"===e)return this.startRematch();if("Escape"===e)return this.onTimerClick();if(kn.isDebug){if(!this.props.gameMeta.isTrainingMode){var t,n;if("Digit1"===e)null===(t=this.props.runner.coord)||void 0===t||t.game.setDebug({killPlayer1:!0});if("Digit2"===e)null===(n=this.props.runner.coord)||void 0===n||n.game.setDebug({killPlayer2:!0})}"Backquote"===e&&this.updateMatch({firstTo:1,rounds:[{winner:j.Player1,finish:Pe.Knockout}]},void 0)}}},{key:"startRematch",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(){var t,n;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===(t=Ts.getEventModeDipSwitch())||void 0===t||!t.noRematch){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,uc(this,{isReadyForRematch:!0});case 4:if(!(n=this.props.connection)){e.next=15;break}return e.prev=6,e.next=9,n.waitForRematch();case 9:e.next=15;break;case 11:return e.prev=11,e.t0=e.catch(6),wn(e.t0),e.abrupt("return");case 15:this.props.onRematch();case 16:case"end":return e.stop()}}),e,this,[[6,11]])})));return function(){return e.apply(this,arguments)}}()},{key:"startGame",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(){var t,n,a;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.props.runner,void 0===(a=n.setup.loop.options.epoch)){e.next=7;break}return e.next=5,n.setup.loop.timeKeeper.sleepUntil(a);case 5:if(this.mounted){e.next=7;break}return e.abrupt("return");case 7:return n.startRound(),null===(t=n.setup.tutorial)||void 0===t||t.startTutorial(),e.next=11,uc(this,{isReadyForInput:!1,isReadyForRematch:!1,replay:void 0,replayUploading:!1,replayCopied:!1});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onReplayCopy",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(){var t,n,a,r;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.state,n=t.replay,!t.replayUploading){e.next=3;break}return e.abrupt("return");case 3:if(!n){e.next=29;break}if(!n.id){e.next=10;break}return Ts.clipboard(Ts.getReplayUrlForId(n.id)),e.next=8,uc(this,{replayCopied:!0});case 8:e.next=29;break;case 10:return e.next=12,uc(this,{replayUploading:!0});case 12:return a=so.createId(n),r=Object(g.a)(Object(g.a)({},n),{},{id:a}),so.storage.updateReplay(r.hash,{id:a}),e.prev=15,e.next=18,ns.replayUpload(r);case 18:e.next=26;break;case 20:return e.prev=20,e.t0=e.catch(15),wn(e.t0),e.next=25,uc(this,{replayUploading:!1,replayUploadError:!0});case 25:return e.abrupt("return");case 26:return e.next=28,uc(this,{replay:r,replayUploading:!1,replayCopied:!0});case 28:Ts.clipboard(Ts.getReplayUrlForId(a));case 29:case"end":return e.stop()}}),e,this,[[15,20]])})));return function(){return e.apply(this,arguments)}}()},{key:"hideDesktopControls",value:function(){li.ShowDesktopControls.set(!1),this.setState({showDesktopControls:li.ShowDesktopControls.get()})}},{key:"updateMatch",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(t,n){var a,r,i,o,s;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=da.getWinner(t)){e.next=3;break}return e.abrupt("return");case 3:return this.props.onMatchFinish(t),e.next=6,uc(this,{matchState:t,outcome:r});case 6:return e.next=8,Le(2e3);case 8:return e.next=10,uc(this,{replay:n,isReadyForInput:!0});case 10:return e.next=12,Le(1500);case 12:if(i=this.props,o=i.gameConfig,i.gameMeta.isHumanVsCpu&&r===j.Player2?Pi.Announcer.YouLose.play():r!==j.Draw&&(s=r===j.Player1?o.fighter1:o.fighter2,Pi.sfx(s.stats.winSound).play()),null===(a=Ts.getEventModeDipSwitch())||void 0===a||!a.noRematch){e.next=18;break}return e.next=17,Le(3e3);case 17:this.props.onExit();case 18:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"pauseStopsGameplay",get:function(){return!ia.isOnline(this.props.gameMeta)}},{key:"onPauseMenuOpen",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(){var t;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,uc(this,{isPaused:!0,forcePauseMenuOpen:!1,forcePauseMenuExit:!1});case 2:if(this.pauseSettings.mount(),null===(t=this.props.runner.coord)||void 0===t||t.disableInputs(),this.pauseStopsGameplay){e.next=6;break}return e.abrupt("return");case 6:this.props.runner.setup.loop.pause();case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onPauseMenuClose",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(){var t;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.mounted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,uc(this,{isPaused:!1,forcePauseMenuOpen:!1,forcePauseMenuExit:!1});case 4:if(this.mounted){e.next=6;break}return e.abrupt("return");case 6:return this.pauseSettings.mount(),e.next=9,Le(100);case 9:if(this.mounted){e.next=11;break}return e.abrupt("return");case 11:if(null===(t=this.props.runner.coord)||void 0===t||t.enableInputs(),this.pauseStopsGameplay){e.next=14;break}return e.abrupt("return");case 14:this.props.runner.setup.loop.resume();case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onTimerClick",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(){return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,uc(this,{forcePauseMenuOpen:!this.state.isPaused,forcePauseMenuExit:this.state.isPaused});case 2:this.pauseSettings.mount();case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getOnPauseMenuLeave",value:function(){var e=this.props.gameMeta;if(!(e.isRanked||e.isLobbyPlaying))return this.props.onExit}},{key:"render",value:function(){var e=this,t=this.props,a=this.state,r=t.connection,i=t.gameConfig,o=t.gameMeta,s=t.runner,c=t.replay,u=t.isArcade,l=t.isVersusCPU,h=a.matchState,d=a.outcome,p=a.showDesktopControls,f=s.coord;if(!f)return Object(ac.jsx)(Ip,{bgStage:i.stage,infos:[{label:Object(ac.jsx)($f,{label:"starting game"})}],enableAccount:!0});var b=i.fighter1.stats.isMod||i.fighter2.stats.isMod;return Object(ac.jsxs)(om,{"data-testid":n.TestID,children:[!vn.isMobile&&!c&&!o.isLobbySpectator&&p&&Object(ac.jsx)(dm,{onHide:function(){return e.hideDesktopControls()},children:f.isSinglePlayer||f.cpu2||f.game.tutorial?Object(ac.jsx)(cm,{children:pm(f.local1?f.keyboard.controls1:f.keyboard.controls2)}):Object(ac.jsxs)(um,{children:[Object(ac.jsxs)("div",{children:["player 1: ",pm(f.keyboard.controls1)]}),Object(ac.jsxs)("div",{children:["player 2: ",pm(f.keyboard.controls2)]})]})}),!this.hideReplayInfo&&c&&Object(ac.jsx)(dm,{children:Object(ac.jsxs)(cm,{children:["REPLAY ",new Date(c.created).toLocaleString()]})}),o.isTrainingMode&&!o.isTouchConfig&&Object(ac.jsx)(Eg,{runner:s,viewState:this.state.showOverlay,setViewState:function(t){return e.setState({showOverlay:t})}}),o.isTouchConfig&&Object(ac.jsx)(pb,{runner:s,onExit:this.props.onExit}),o.isTutorial&&Object(ac.jsx)(cb,{runner:s}),!this.hideReplayInfo&&o.isReplay&&!d&&Object(ac.jsx)(sb,{runner:s,onExit:this.props.onExit}),Object(ac.jsx)(iu,{}),Object(ac.jsx)(Bl,{modding:b}),h&&d&&!u&&Object(ac.jsx)(im,{matchState:h,outcome:d,connection:r,gameConfig:i,gameMeta:o,isReadyForInput:a.isReadyForInput,isReadyForRematch:a.isReadyForRematch,isReplay:!!c,isVersusCPU:l,replayUploading:a.replayUploading,replayUploadError:a.replayUploadError,replaySaved:a.replayCopied,onRematch:function(){return e.startRematch()},onExit:this.props.onExit,onReplayCopy:function(){return e.onReplayCopy()}}),!o.isTouchConfig&&Object(ac.jsx)(sm,{onClick:function(){return e.onTimerClick()}}),Object(ac.jsx)(cc,{onPress:function(t){return e.handleKeyDown(t)}})]})}}]),n}(i.a.Component);Am.TestID="HudView";var Tm=Object(b.a)(Tc)(fm||(fm=Object(f.a)(["\n  width: 100%;\n  height: 100%;\n  overflow: hidden;\n  justify-content: space-between;\n"]))),Mm=Object(b.b)(bm||(bm=Object(f.a)(["\n  from {\n    top: -100%;\n  }\n  to {\n    top: 80%;\n  }\n"]))),Pm=Object(b.b)(gm||(gm=Object(f.a)(["\n  from {\n    top: 180%;\n  }\n  to {\n    top: 80%;\n  }\n"]))),Rm=b.a.img(mm||(mm=Object(f.a)(["\n  position: absolute;\n  height: 170%;\n  width: auto;\n  top: 80%;\n\n  animation-delay: 0s;\n  animation-duration: ","s;\n  animation-iteration-count: 1;\n  animation-timing-function: ease-in;\n  animation-direction: 'normal';\n"])),.5),Im=Object(b.a)(Rm)(vm||(vm=Object(f.a)(["\n  left: 50%;\n  animation-name: ",";\n  transform: translate(-50%, -50%) scaleX(1);\n"])),Mm),Bm=Object(b.a)(Rm)(km||(km=Object(f.a)(["\n  left: 50%;\n  animation-name: ",";\n  transform: translate(-50%, -50%) scaleX(-1);\n"])),Pm),Dm=b.a.div(jm||(jm=Object(f.a)(["\n  cursor: pointer;\n  width: 30%;\n  height: 100%;\n  position: relative;\n\n  & > div {\n    position: absolute;\n    height: 100%;\n    width: 100%;\n    top: 0;\n    left: 0;\n    text-align: center;\n\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n    flex-wrap: nowrap;\n  }\n"]))),Hm=Object(b.b)(ym||(ym=Object(f.a)(["\n0% {\n  opacity: 0;\n  transform: scale(3);\n}\n50% {\n  opacity: 0;\n  transform: scale(3);\n}\n100% {\n  opacity: 1;\n}\n"]))),Em=b.a.div(xm||(xm=Object(f.a)(["\n  z-index: ",";\n  width: 30vh;\n  height: 100%;\n  box-sizing: border-box;\n\n  position: relative;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  flex-wrap: nowrap;\n  text-align: center;\n\n  font-size: 2rem;\n  color: white;\n  background-color: rgba(50, 50, 50, 0.5);\n\n  animation-name: ",";\n  animation-duration: ","s;\n  animation-delay: 0s;\n  animation-timing-function: ease-in;\n  animation-iteration-count: 1;\n"])),Ts.zIndex.Absolute,Hm,.5),_m=b.a.img(Om||(Om=Object(f.a)(["\n  position: absolute;\n  top: 5vh;\n  left: 50%;\n  width: auto;\n  height: 15vh;\n  transform: translateX(-50%);\n"]))),Fm=b.a.div(wm||(wm=Object(f.a)(["\n  color: var(--heart);\n  font-size: 5em;\n  text-shadow: 0.06em 0.06em 0px black;\n"]))),Lm=b.a.div(Sm||(Sm=Object(f.a)(["\n  position: absolute;\n  bottom: 1em;\n\n  font-size: 0.6em;\n"]))),Gm=b.a.div(Cm||(Cm=Object(f.a)(["\n  position: fixed;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n\n  ","\n\n  padding: 2em 3em;\n  border: 0.5em dashed red;\n  border-radius: 0em;\n  color: white;\n  background-color: black;\n\n  z-index: ",";\n"])),gc,Ts.zIndex.Focused),zm=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).mounted=!1,e.state={progress:0},e.pauseSettings=new gp((function(){return Ts.getPreGamePauseSettings({gameMeta:e.props.gameMeta,onExit:e.canExit?e.props.onExit:void 0})})),e}return Object(h.a)(n,[{key:"componentDidMount",value:function(){this.mounted=!0,this.pauseSettings.mount(),this.props.hideLoading?is.drawBlack():is.drawLoading(),oh.setFromMeta(this.props.gameMeta),this.load()}},{key:"componentWillUnmount",value:function(){this.mounted=!1,this.pauseSettings.unmount()}},{key:"canExit",get:function(){var e;return(null===(e=this.state.error)||void 0===e?void 0:e.allowExit)||!ia.isOnline(this.props.gameMeta)}},{key:"load",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(){var t,n,a,r,i,o=this;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.props.hideLoading){e.next=3;break}return e.next=3,Le(1e3);case 3:return e.prev=3,e.next=6,ds.loadGame(this.props.gameConfig,(function(e){return o.setState({progress:e.percent})}));case 6:return(t=e.sent).retries>0&&ns.log({context:"AssetRetry",error:"".concat(t.retries," retries for ").concat(t.files," files"),message:"LoadingScreen"}),e.next=10,Le(0);case 10:if(this.mounted){e.next=12;break}return e.abrupt("return");case 12:this.props.onFinish(),e.next=32;break;case 15:if(e.prev=15,e.t0=e.catch(3),this.mounted){e.next=19;break}return e.abrupt("return");case 19:return n=this.props.gameConfig.fighter1.stats.isMod||this.props.gameConfig.fighter2.stats.isMod,a=e.t0,n||ns.log({context:"LoadingScreen",error:a.toString(),message:"gameMeta: ".concat(JSON.stringify(this.props.gameMeta))}),r=!ia.isOnline(this.props.gameMeta),i={instance:a,allowExit:r,messageAbove:n?"There was an error loading the mods. Please double check your sprite configs.":"There was an error loading the game. This is usually caused by the local cache. Try hard refreshing your browser.",messageBelow:r?"Click outside this box or press ESCAPE to exit":"This window will close in 10 seconds"},e.next=28,uc(this,{error:i});case 28:if(this.mounted){e.next=30;break}return e.abrupt("return");case 30:this.pauseSettings.mount(),r||setTimeout((function(){o.mounted&&o.props.onExit()}),1e4);case 32:case"end":return e.stop()}}),e,this,[[3,15]])})));return function(){return e.apply(this,arguments)}}()},{key:"handleInput",value:function(e,t){"Escape"===t&&this.canExit&&this.props.onExit()}},{key:"render",value:function(){var e=this,t=this.props,a=t.gameConfig,r=t.gameMeta,i=t.waiting;if(t.hideLoading)return null;var o=a.fighter1,s=a.fighter2,c=a.stage,u=o.previewUrl,l=s.previewUrl,h=this.state,d=h.progress,p=h.error,f=i?["waiting for opponent..."]:["loading fight","".concat(Math.floor(100*d),"%")];return Object(ac.jsxs)(yc,{src:gi.loadBackgroundImage(c.backgroundSrc).imageUrl,"data-testid":n.TestID,onClick:function(){return(null===p||void 0===p?void 0:p.allowExit)&&e.props.onExit()},children:[Object(ac.jsxs)(Tm,{children:[Object(ac.jsx)(Dm,{flip:!1,children:Object(ac.jsx)(Im,{src:u,alt:"character art 1"})}),Object(ac.jsxs)(Em,{children:[Object(ac.jsx)(_m,{src:ni.Branding.Logo}),Object(ac.jsx)(Fm,{children:"VS"}),f.map((function(e,t){return Object(ac.jsx)("div",{children:e},t)})),void 0!==r.inputDelay&&Object(ac.jsxs)(Lm,{children:["Input Delay: ",r.inputDelay," frames"]})]}),Object(ac.jsx)(Dm,{flip:!0,children:Object(ac.jsx)(Bm,{src:l,alt:"character art 2"})})]}),Object(ac.jsx)(iu,{}),Object(ac.jsx)(cc,{onControllerInput:function(t,n){return e.handleInput(t,n)}}),p&&Object(ac.jsxs)(Gm,{onClick:function(e){return e.stopPropagation()},children:[Object(ac.jsx)("div",{style:{fontSize:"2em",textAlign:"center"},children:"Loading Error"}),Object(ac.jsx)("br",{}),Object(ac.jsx)("p",{children:p.messageAbove}),p.instance&&Object(ac.jsx)("p",{children:p.instance.toString()}),Object(ac.jsx)("p",{style:{textAlign:"center"},children:p.messageBelow})]})]})}}]),n}(i.a.Component);zm.TestID="LoadingScreen";var Wm,Nm,Um,qm,Vm=function(e){return e.Setup="SETUP",e.CharSelect="CHAR",e.CharSelectWait="CHARWAIT",e.GameLoading="LOAD",e.GameLoadingWait="LOADWAIT",e.ConnectionSync="SYNC",e.Play="PLAY",e}(Vm||{}),Ym=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).settings={draftGameMeta:e.props.gameMeta,title:"Online Menu",label1:e.props.connection.isHost?"You":"Them",label2:e.props.connection.isHost?"Them":"You"},e.skipCharacterSelect=!!e.props.gameMeta.isRanked,e.state={view:Vm.Setup,gameConfig:void 0,prevConfig:void 0,scoreboard:co.empty(),gameMeta:e.settings.draftGameMeta,runner:void 0},e.presence=oh.fromMeta(e.props.gameMeta),e}return Object(h.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props,a=t.connection,r=t.draftGameConfig,i=t.gameMeta;if($c.setConn(a),a.waitForExitSignal().then((function(){return e.handleOtherPlayerExit()})),this.skipCharacterSelect){if(!r)throw new Error("cannot start ranked without gameConfig");var o=Object(g.a)({},i),s=a.recommendInputDelay(kn.FPS,3);i.isRanked?o.inputDelay=n.calculateRankedInputDelay(s):o.inputDelay=s,this.finishCharSelect(r,o)}else this.finishSetup()}},{key:"componentWillUnmount",value:function(){$c.freeConn()}},{key:"onMatchFinish",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(t){var n;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=co.concat(this.state.scoreboard,t),e.next=3,uc(this,{scoreboard:n});case 3:this.props.onMatchFinish&&this.props.onMatchFinish(co.getLatestOutcome(n));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onRematch",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(){var t,n,a;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.state,n=t.gameConfig,a=t.gameMeta,n){e.next=3;break}throw new Error("cannot rematch without gameConfig");case 3:return e.next=5,this.startLoading(n,a);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleOtherPlayerExit",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(){var t,n,a=this;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props.connection,n=this.state.view,!this.skipCharacterSelect){e.next=4;break}return e.abrupt("return");case 4:if(n!==Vm.Play){e.next=10;break}return e.next=7,this.finishGamePlay({notifyOther:!1});case 7:t.waitForExitSignal().then((function(){return a.handleOtherPlayerExit()})),e.next=11;break;case 10:this.props.onExit();case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"finishSetup",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(){var t=this;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Le(500);case 2:return e.next=4,tb.trigger(Object(u.a)(Object(c.a)().mark((function e(){return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,uc(t,{view:Vm.CharSelect});case 2:case"end":return e.stop()}}),e)}))));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"finishCharSelect",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(t,n){var a,r,i,o;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,uc(this,{view:Vm.CharSelectWait});case 2:return a=new fs(this.props.connection),e.next=5,a.waitForGameConfig(ni.serializeGameConfig(t));case 5:if(r=e.sent,i=ni.deserializeGameConfig(r),!ia.configIsInvalid(i)){e.next=9;break}return e.abrupt("return",this.props.onError(R.InvalidGameConfig));case 9:return o=Object(g.a)(Object(g.a)({},t),i),e.next=12,this.startLoading(o,n);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"startLoading",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(t,n){var a,r;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.props.connection,r=ni.fixGameConfig(t),this.props.setGameConfig&&this.props.setGameConfig(r,a.isHost),e.next=5,uc(this,{view:Vm.GameLoading,gameConfig:r,gameMeta:n});case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"finishLoading",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(){var t;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.connection,e.next=3,uc(this,{view:Vm.GameLoadingWait});case 3:return e.next=5,t.waitForLoadingFinish();case 5:return e.next=7,this.startSync();case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"startSync",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(){var t,n,a,r,i,o;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.props.connection,e.next=3,uc(this,{view:Vm.ConnectionSync});case 3:return e.next=5,(new ht).syncConnection(n);case 5:return a=n.getGuestOffset(),fi.recordLoopOffset(a),r=new fs(n),e.next=10,r.waitForOpponentAccount((null===(t=gs.loadFromStorage())||void 0===t?void 0:t.account.jwt)||null);case 10:return i=e.sent,o=Mn.tryParse(i),e.next=14,uc(this,{otherAccount:o});case 14:return e.next=16,this.startGamePlay();case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"startGamePlay",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(){var t,n,a,r,i,o,s,u,l=this;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props.connection,n=this.state,a=n.gameConfig,r=n.gameMeta,i=n.scoreboard,a){e.next=4;break}throw new Error("cannot start w/o gameConfig");case 4:return e.next=6,t.waitForClockStart();case 6:return o=e.sent,s=new Ot({fps:kn.FPS,frameRate:li.FrameRate.get(),canPause:!1,epoch:o.localEpoch,timeKeeper:t.timeKeeper}),u=new ps({gameConfig:a,gameMeta:r,loop:s,scoreboard:i,replay:void 0,tutorial:void 0,isSpectator:!1,network:t?{connection:t,onDesync:function(e){return l.setState({errorMessage:e.message})}}:void 0}),this.props.setRunner&&this.props.setRunner(u),e.next=12,uc(this,{view:Vm.Play,runner:u});case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"finishGamePlay",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(t){var n,a=this;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.props.connection,t.notifyOther&&n.sendExitSignal(),!this.props.onSetFinish){e.next=4;break}return e.abrupt("return",this.props.onSetFinish());case 4:return e.next=6,tb.trigger(Object(u.a)(Object(c.a)().mark((function e(){return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,uc(a,{view:Vm.CharSelect,gameConfig:void 0,prevConfig:a.state.gameConfig});case 2:case"end":return e.stop()}}),e)}))));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.settings,n=this.props.connection,a=this.state,r=a.view,i=a.otherAccount,o=a.runner,s=a.gameConfig,c=a.prevConfig,u=a.gameMeta,l=a.scoreboard,h=a.errorMessage;if(h)return Object(ac.jsx)(Rp,{presence:this.presence,infos:[{label:h}],onExit:this.props.onExit});if(r===Vm.Setup)return Object(ac.jsx)(Ip,{presence:this.presence,infos:[{label:Object(ac.jsx)($f,{label:"Loading game mode"})}]});if(r===Vm.CharSelect)return Object(ac.jsx)(Mf,{existingConfig:c,lobbyConfig:this.props.lobbyConfig,onExit:this.props.onExit,onReady:function(t,n){return e.finishCharSelect(t,n)},title:t.title,label1:t.label1,label2:t.label2,isOnline:!0,isHost:n.isHost,otherAccount:i,gameMeta:Object(g.a)({inputDelay:n?n.recommendInputDelay(kn.FPS,3):u.inputDelay},u),scoreboard:l});if(r===Vm.CharSelectWait)return Object(ac.jsx)(Ip,{presence:this.presence,infos:[{label:Object(ac.jsx)($f,{label:"Waiting for opponent to select their character"})}]});if(!s)throw new Error("gameConfig should be set by this point");if(r===Vm.GameLoading||r===Vm.GameLoadingWait)return Object(ac.jsx)(zm,{gameConfig:s,gameMeta:u,waiting:r===Vm.GameLoadingWait,onFinish:function(){return e.finishLoading()},onExit:this.props.onExit});if(r===Vm.ConnectionSync){var d=Object(ac.jsx)($f,{label:"Calibrating, please wait"});return Object(ac.jsx)(Ip,{presence:this.presence,bgStage:s.stage,infos:[{label:d}],enableAccount:!0})}if(!o)throw new Error("runner should be set by this point");return r===Vm.Play?Object(ac.jsx)(Am,{runner:o,gameConfig:s,gameMeta:u,connection:n,replay:void 0,isVersusCPU:!1,onMatchFinish:function(t){return e.onMatchFinish(t)},onRematch:function(){return e.onRematch()},onExit:function(){return e.finishGamePlay({notifyOther:!0})}}):Object(ac.jsx)(Ip,{presence:this.presence,infos:[{label:"reached an invalid state :("}]})}}],[{key:"calculateRankedInputDelay",value:function(e){return Math.min(Math.max(3,e),li.RankedMaxInputDelay.get())}}]),n}(i.a.Component),Jm=b.a.div(Wm||(Wm=Object(f.a)(["\n  z-index: ",";\n  position: fixed;\n  width: 100%;\n  height: 100%;\n  background-color: rgba(0, 0, 0, 0.5);\n"])),Ts.zIndex.Pause),Km=Object(b.a)(Mc)(Nm||(Nm=Object(f.a)(["\n  min-width: 30%;\n  width: auto;\n  height: auto;\n  background: black;\n\n  ","\n"])),(function(e){return e.squareCorner?"\n    border-radius: 2em 0 2em 2em;\n  ":"\n    border-radius: 2em;\n  "})),Qm=b.a.div(Um||(Um=Object(f.a)(["\n  padding: 2em;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n"])));function Zm(e){return Object(ac.jsx)(Km,{squareCorner:!!e.onExit,children:Object(ac.jsxs)(Rc,{children:[e.children,e.onExit&&Object(ac.jsx)(Ic,{onClick:e.onExit,children:"X"})]})})}function Xm(e){var t=e.children,n=e.onExit;return Object(ac.jsx)(Jm,{children:Object(ac.jsx)("div",{onClick:function(e){return e.stopPropagation()},children:Object(ac.jsx)(Zm,{onExit:n,children:Object(ac.jsx)(Qm,{children:t})})})})}var $m,ev,tv=b.a.div(qm||(qm=Object(f.a)(["\n  border: 1px solid white;\n  cursor: pointer;\n\n  margin: 0.5em;\n  padding: 1em;\n  width: 16em;\n  box-sizing: border-box;\n\n  color: white;\n  background-color: #222;\n\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n  gap: 1em;\n\n  /* unique to mm */\n  & img {\n    height: 2em;\n    width: auto;\n  }\n"]))),nv=function(e){return e[e.PendingInfo=1]="PendingInfo",e[e.Prompt=2]="Prompt",e[e.Waiting=3]="Waiting",e[e.Declined=4]="Declined",e[e.Blocked=5]="Blocked",e[e.GotDisconnected=6]="GotDisconnected",e}(nv||{});function av(e){var t,n,a,i=Object(r.useState)(nv.Prompt),o=Object(m.a)(i,2),s=o[0],c=o[1],u=Object(r.useState)(),l=Object(m.a)(u,2),h=l[0],d=l[1],p=function(e,t,n){var a=Object(r.useState)(e),i=Object(m.a)(a,2),o=i[0],s=i[1],c=Is();return Ms((function(){return c.schedule((function(){return s(t)}),n)})),o}(!0,!1,1500);Object(r.useEffect)((function(){return Cs.hooks.onOpponentInfo.subscribe(d)}),[d]),Object(r.useEffect)((function(){return Cs.hooks.onDisconnect.subscribe((function(){c(nv.GotDisconnected)}))}),[c]),Ms((function(){var e,t,n;return kn.Debug.SkipConfirm&&setTimeout((function(){return f()}),500),null===(e=kd.instance)||void 0===e||null===(t=(n=e.state.settings).onOpen)||void 0===t||t.call(n),function(){var e,t,n;null===(e=kd.instance)||void 0===e||null===(t=(n=e.state.settings).onClose)||void 0===t||t.call(n)}}));var f=Object(r.useCallback)((function(){s===nv.Prompt&&(c(nv.Waiting),Cs.confirm.waitForConfirm(e.match))}),[e.match,s,c]),b=function(){e.match.connection.terminate(),c(nv.Declined)},g=function(){e.match.connection.terminate(),e.onRetry()},k=function(){e.onExit()},j=null===h||void 0===h?void 0:h.otherAccount,y=void 0===e.match.ranked&&void 0!==j&&function(){ci.usingLocalStorage().addCasualBlock({aid:j.aid(),tag:j.getTag(),durationMS:864e5}),e.match.connection.terminate(),c(nv.Blocked)}||void 0,x=h&&e.match.ranked&&["Frame Delay: ".concat(Ym.calculateRankedInputDelay(h.frameDelay))]||h&&[null!==(t=null===(n=h.otherAccount)||void 0===n?void 0:n.getTag())&&void 0!==t?t:"Anonymous","Frame Delay: ".concat(h.frameDelay)]||["Getting info..."],O=(a={},Object(v.a)(a,nv.PendingInfo,"Connecting..."),Object(v.a)(a,nv.Prompt,"Fight this person?"),Object(v.a)(a,nv.Waiting,"Waiting..."),Object(v.a)(a,nv.Declined,"You have declined the match"),Object(v.a)(a,nv.Blocked,"You have blocked that user for the next ".concat(24," hours")),Object(v.a)(a,nv.GotDisconnected,"Opponent declined the match"),a)[s];return Object(ac.jsxs)(Xm,{children:[Object(ac.jsx)("h1",{children:"Match found!"}),Object(ac.jsx)("h3",{children:x.map((function(e,t){return Object(ac.jsx)("div",{children:e},["info",t].join("-"))}))}),p?Object(ac.jsx)("h2",{children:"Connecting..."}):Object(ac.jsxs)(ac.Fragment,{children:[Object(ac.jsx)("h2",{children:O}),[nv.PendingInfo].includes(s)&&Object(ac.jsx)(ac.Fragment,{children:Object(ac.jsxs)(tv,{onClick:b,children:[Object(ac.jsx)("img",{src:ni.Notation.attack2,alt:"heavy"}),"Cancel"]})}),[nv.Prompt].includes(s)&&Object(ac.jsxs)(ac.Fragment,{children:[Object(ac.jsxs)(tv,{onClick:f,children:[Object(ac.jsx)("img",{src:ni.Notation.attack1,alt:"light"}),"Yes"]}),Object(ac.jsxs)(tv,{onClick:b,children:[Object(ac.jsx)("img",{src:ni.Notation.attack2,alt:"heavy"}),"No"]}),y&&Object(ac.jsxs)(tv,{onClick:y,children:[Object(ac.jsx)("img",{src:ni.Notation.attack3,alt:"special"}),"Block"]})]}),[nv.Waiting].includes(s)&&Object(ac.jsxs)(ac.Fragment,{children:[Object(ac.jsxs)(tv,{onClick:b,children:[Object(ac.jsx)("img",{src:ni.Notation.attack2,alt:"heavy"}),"Cancel"]}),y&&Object(ac.jsxs)(tv,{onClick:y,children:[Object(ac.jsx)("img",{src:ni.Notation.attack3,alt:"special"}),"Block"]})]}),[nv.Declined,nv.Blocked,nv.GotDisconnected].includes(s)&&Object(ac.jsxs)(ac.Fragment,{children:[Object(ac.jsxs)(tv,{onClick:g,children:[Object(ac.jsx)("img",{src:ni.Notation.attack1,alt:"special"}),"Retry Search"]}),Object(ac.jsxs)(tv,{onClick:k,children:[Object(ac.jsx)("img",{src:ni.Notation.attack2,alt:"heavy"}),"Stop Matchmaking"]}),s!==nv.Blocked&&y&&Object(ac.jsxs)(tv,{onClick:y,children:[Object(ac.jsx)("img",{src:ni.Notation.attack3,alt:"special"}),"Block"]})]})]}),Object(ac.jsx)(cc,{takeFocus:!0,onControllerInput:function(e){var t;return!p&&(t={},Object(v.a)(t,nv.PendingInfo,(function(){e===te.attack2&&b()})),Object(v.a)(t,nv.Prompt,(function(){e===te.attack1&&f(),e===te.attack2&&b(),e===te.attack3&&(null===y||void 0===y||y())})),Object(v.a)(t,nv.Waiting,(function(){e===te.attack2&&b(),e===te.attack3&&(null===y||void 0===y||y())})),Object(v.a)(t,nv.Declined,(function(){e===te.attack1&&g(),e===te.attack2&&k(),e===te.attack3&&(null===y||void 0===y||y())})),Object(v.a)(t,nv.Blocked,(function(){e===te.attack1&&g(),e===te.attack2&&k()})),Object(v.a)(t,nv.GotDisconnected,(function(){e===te.attack1&&g(),e===te.attack2&&k(),e===te.attack3&&(null===y||void 0===y||y())})),t)[s]()}})]})}var rv,iv=b.a.div($m||($m=Object(f.a)(["\n  position: fixed;\n  z-index: ",";\n  bottom: 6vh;\n  left: 1vh;\n\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  gap: 0.5vh;\n"])),Ts.zIndex.MenuOverlay),ov=b.a.div(ev||(ev=Object(f.a)(["\n  padding: 1vh;\n  width: auto;\n  height: auto;\n\n  font-size: 2vh;\n\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n\n  cursor: pointer;\n  color: white;\n  background-color: #00000060;\n"]))),sv=function(e){var t=Object(r.useState)(void 0),n=Object(m.a)(t,2),a=n[0],i=n[1],o=Object(r.useState)(null),s=Object(m.a)(o,2),c=s[0],u=s[1],l=Object(r.useState)(!1),h=Object(m.a)(l,2),d=h[0],p=h[1];return Object(r.useEffect)((function(){return Cs.hooks.onMatch.subscribe(u)}),[e]),Object(r.useEffect)((function(){return Cs.hooks.onMessage.subscribe(i)}),[i]),Object(r.useEffect)((function(){return Cs.hooks.onConfirm.subscribe(e.setMatch)}),[e]),Object(r.useEffect)((function(){return Cs.hooks.onHideOverlay.subscribe(p)}),[e]),d?null:c||a?c?Object(ac.jsxs)(ac.Fragment,{children:[Object(ac.jsx)(iv,{children:Object(ac.jsx)(ov,{children:c.connection.isHost?"Connected as host":"Connected as guest"})}),Object(ac.jsx)(av,{match:c,onRetry:function(){u(null),Cs.retry(c.ranked)},onExit:function(){return u(null)}})]}):Object(ac.jsx)(iv,{children:Object(ac.jsx)(ov,{onClick:function(){return Cs.close()},children:a})}):Object(ac.jsx)(iv,{children:Object(ac.jsx)(ov,{onClick:function(){return Cs.startCasual()},children:"Matchmaker is idle"})})},cv=function(e){return e[e.MainMenu=1]="MainMenu",e[e.Matchmaking=2]="Matchmaking",e}({}),uv=function(e){return e[e.Ranked=1]="Ranked",e[e.Casual=2]="Casual",e[e.PrivateMatch=3]="PrivateMatch",e[e.Lobby=4]="Lobby",e}({}),lv=b.a.div(rv||(rv=Object(f.a)(["\n  font-size: 0.7em;\n"]))),hv=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).info=Object(ac.jsx)(lv,{children:"Resetting and refreshing, please wait..."}),e}return Object(h.a)(n,[{key:"componentDidMount",value:function(){setTimeout((function(){try{ci.usingLocalStorage().clear()}catch(e){Ts.browserReload()}}),3e3)}},{key:"render",value:function(){return Object(ac.jsx)(Ip,{infos:[{label:this.info}]})}}]),n}(i.a.Component),dv=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).options=[{label:Object(ac.jsx)(lv,{children:"Delete all settings, replays, and saved controls"}),comp:function(e){return Object(ac.jsx)(hv,Object(g.a)({},e))}}],e}return Object(h.a)(n,[{key:"render",value:function(){return Object(ac.jsx)(Rp,{options:this.options,onExit:this.props.onExit})}}]),n}(i.a.Component);function pv(e){var t,n=Object(v.a)({},ni.Characters.Beef.code,{chapters:[{config:{enemyCode:ni.Characters.Pork.code,stage:ni.Stages.Apartment},before:[[1,"hello! my name is *beef*"],[1,"i am made of meat"]],afterWin:[[1,"i am delicious"]],afterLose:[[2,"more like <i>ground</i> beef"]]},{config:{enemyCode:ni.Characters.Noodle.code,stage:ni.Stages.GroceryStore},before:[[1,"hello noodle"],[1,"i will eat you"]],afterWin:[[1,"you are not delicious"]],afterLose:[[2,"carbs > protein"]]}]})[e.heroCode];if(!n)throw new Error("inaccessible story! ".concat(e.heroCode));var a=n.chapters[e.chapterIndex],r=(t={},Object(v.a)(t,A.Loading,[]),Object(v.a)(t,A.Before,a.before),Object(v.a)(t,A.Fight,[]),Object(v.a)(t,A.AfterWin,a.afterWin),Object(v.a)(t,A.AfterLose,a.afterLose),Object(v.a)(t,A.Refresh,[]),Object(v.a)(t,A.Continue,[]),Object(v.a)(t,A.Victory,[]),Object(v.a)(t,A.Exit,[]),t)[e.chapterStep];return{story:n,chapter:a,dialogueList:r,dialogue:r[e.dialogueIndex]}}var fv=new(function(){return Object(h.a)((function e(){var t=this;Object(l.a)(this,e),this.onNextDialogue=new Ct,this.onFinishLoading=new Ct,this.onFinishFight=new Ct,this.onState=new Ct,this.onFinishLoading.subscribe((function(e){t.onState.broadcast(Object(g.a)(Object(g.a)({},e),{},{chapterStep:A.Before}))})),this.onNextDialogue.subscribe((function(e){var n=pv(e),a=n.story,r=n.dialogueList,i=e.dialogueIndex+1,o=Object(g.a)(Object(g.a)({},e),{},{dialogueIndex:i});if(!r)throw new Error("should not be able to advance dialog at this step "+e.chapterStep);if(i>=r.length)if(e.chapterStep===A.Before)o=Object(g.a)(Object(g.a)({},e),{},{chapterStep:A.Fight,dialogueIndex:0});else{if(e.chapterStep===A.Fight)throw new Error("cannot NextDialogue during fight");e.chapterStep===A.AfterWin?o=e.chapterIndex+1>=a.chapters.length?Object(g.a)(Object(g.a)({},e),{},{chapterStep:A.Victory}):Object(g.a)(Object(g.a)({},e),{},{chapterStep:A.Refresh}):e.chapterStep===A.AfterLose&&(o=Object(g.a)(Object(g.a)({},e),{},{chapterStep:A.Continue}))}t.onState.broadcast(o)})),this.onFinishFight.subscribe((function(e){var n=Object(m.a)(e,2),a=n[0],r=n[1];t.onState.broadcast(Object(g.a)(Object(g.a)({},a),{},{chapterStep:da.getWinner(r)===j.Player1?A.AfterWin:A.AfterLose,dialogueIndex:0}))}))}))}()),bv=function(e){return e[e.CharacterSelect=0]="CharacterSelect",e[e.Loading=1]="Loading",e[e.Fighting=2]="Fighting",e}(bv||{}),gv=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={view:bv.CharacterSelect,scoreboard:co.empty(),gameMeta:e.props.settings.baseGameMeta},e.skipCharSelect=[e.props.settings.replay,e.props.settings.arcade,e.props.settings.tutorial,e.props.settings.touchConfig,e.props.settings.modFighter,e.props.settings.attractConfig].some((function(e){return!!e})),e.unsubs=[],e}return Object(h.a)(n,[{key:"componentDidMount",value:function(){var e,t=this,n=this.props.settings;if(n.replay){if(ia.configIsInvalid(n.replay.gameConfig))throw new Error("cannot start replay with invalid gameConfig");return this.finishCharSelect(n.replay.gameConfig,this.state.gameMeta)}if(n.arcade)return this.unsubs.push(fv.onState.subscribe((function(e){var n,a,r;null===(n=t.state.runner)||void 0===n||null===(a=n.coord)||void 0===a||null===(r=a.game)||void 0===r||r.setArcade(e)}))),this.finishCharSelect(n.arcade.gameConfig,this.state.gameMeta);if(n.tutorial)return this.finishCharSelect(n.tutorial.gameConfig,this.state.gameMeta);if(n.touchConfig)return this.finishCharSelect(n.touchConfig.gameConfig,this.state.gameMeta);if(n.attractConfig)return this.finishCharSelect(n.attractConfig.gameConfig,this.state.gameMeta);if(n.modFighter)return this.finishCharSelect({matchId:nn(),firstTo:1,roundTime:oe,stage:ni.Stages.Notebook,fighter1:n.modFighter.colors[0],fighter2:null!==(e=n.modFighter.colors[1])&&void 0!==e?e:n.modFighter.colors[0]},this.state.gameMeta);if(this.skipCharSelect)throw new Error("Reached an impossible state in OfflineVersus")}},{key:"onComponentWillUnmount",value:function(){this.unsubs.forEach((function(e){return e()}))}},{key:"onMatchFinish",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(t){var n;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,uc(this,{scoreboard:co.concat(this.state.scoreboard,t)});case 2:if(null===(n=this.props.settings.arcade)||void 0===n||n.onComplete(t),!this.props.settings.attractConfig){e.next=5;break}return e.abrupt("return",this.finishGamePlay());case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onRematch",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(){var t,n,a;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.state,n=t.gameConfig,a=t.gameMeta,n){e.next=3;break}throw new Error("cannot rematch without gameConfig");case 3:return e.next=5,this.finishCharSelect(n,a);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"finishCharSelect",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(t,n){return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,uc(this,{view:bv.Loading,gameConfig:ni.fixGameConfig(t),gameMeta:n});case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"finishLoading",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(){var t,n,a,r,i,o,s,u;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.props.settings,a=this.state,r=a.gameConfig,i=a.gameMeta,o=a.scoreboard,s=new Ot({fps:kn.FPS,frameRate:li.FrameRate.get(),canPause:!0,timeKeeper:st.instance()}),u=new ps({gameConfig:r,gameMeta:i,loop:s,scoreboard:o,replay:n.replay,tutorial:n.tutorial,isSpectator:!1,network:void 0}),null===(t=this.props.settings.arcade)||void 0===t||t.onLoaded(),e.next=7,uc(this,{view:bv.Fighting,runner:u});case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"finishGamePlay",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(){var t;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===(t=Ts.getEventModeDipSwitch())||void 0===t||!t.noRematch){e.next=2;break}return e.abrupt("return",this.props.onExit());case 2:if(!this.skipCharSelect){e.next=4;break}return e.abrupt("return",this.props.onExit());case 4:return e.next=6,uc(this,{view:bv.CharacterSelect,gameConfig:void 0,prevConfig:this.state.gameConfig});case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props.settings,n=this.state,a=n.view,r=n.runner,i=n.prevConfig,o=n.gameConfig,s=n.gameMeta,c=n.scoreboard;if(a===bv.CharacterSelect)return Object(ac.jsx)(Mf,{existingConfig:i,onExit:this.props.onExit,onReady:function(t,n){return e.finishCharSelect(t,n)},title:t.title,label1:t.label1,label2:t.label2,forceCPU:t.forceCPU,gameMeta:s,scoreboard:c});if(!o)throw new Error("gameConfig should be set by this point");if(a===bv.Loading)return Object(ac.jsx)(zm,{gameConfig:o,gameMeta:s,waiting:!1,hideLoading:!!this.props.settings.attractConfig,onFinish:function(){return e.finishLoading()},onExit:this.props.onExit});if(!r)throw new Error("runner should be set by this point");return a===bv.Fighting?Object(ac.jsx)(Am,{runner:r,gameConfig:o,gameMeta:s,connection:void 0,replay:t.replay,isArcade:!!t.arcade,isVersusCPU:!!s.cpuDiff2,onMatchFinish:function(t){return e.onMatchFinish(t)},onRematch:function(){return e.onRematch()},onExit:function(){return e.finishGamePlay()}}):Object(ac.jsx)(Rp,{infos:[{label:"ERROR: reached an invalid state in OfflineVersus"}],onExit:this.props.onExit})}}]),n}(i.a.Component),mv=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"render",value:function(){var e,t,n={baseGameMeta:{skipReady:!0,isTrainingMode:!0,cpuDiff2:D.Hard,isTouchConfig:!0},title:"Touch Controls",label1:"Human",label2:"Dummy",touchConfig:{gameConfig:{matchId:nn(),firstTo:1,roundTime:oe,stage:ni.Stages.Notebook,fighter1:null!==(e=Ts.getAccountFavorite(null===(t=gs.loadFromStorage())||void 0===t?void 0:t.account))&&void 0!==e?e:ni.Characters.Beef.original,fighter2:ni.Characters.Pork.original}}};return Object(ac.jsx)(gv,Object(g.a)(Object(g.a)({},this.props),{},{settings:n}))}}]),n}(i.a.Component);mv.Title="Touch Controls";var vv=function(){function e(e){return kn.DebugReader.enableDevCodes&&ln(e)}var t,n=(t={forceServerLobby:!!kn.urlServerLobby,forcePrivateMatch:!!kn.urlPrivateMatch,forceReplay:!!kn.urlReplay},{MainMenu:e("gotomenu"),About:e("gotoabout"),ClearData:e("gotodata"),Debug:e("gotobug"),FrameData:e("gotoframe"),ArtRef:e("gotoart")||e("gotoref"),HallOfFame:e("gotohall"),EULA:e("gotoeula"),ExtrasSlidePuzzle:e("gotoslide"),Event:e("gotoevent"),Introduction:e("gotointro"),Leaderboard:e("gotoleader"),PlayOfflineMenu:e("gotooffline"),Arcade:e("gotoarcade"),LocalVersus:e("gotolocal"),ServerLobbyMenu:e("gotolobby")||!!t.forceServerLobby,TouchConfig:e("gototouch"),ModMenu:e("gotomod"),OnlinePrivate:e("gotoprivate")||!!t.forcePrivateMatch,OnlineRanked:e("gotoranked"),OnlineCasual:e("gotocasual"),Options:e("gotooptions"),Replays:e("gotoreplay")||!!t.forceReplay,TestFPS:e("gotofps"),Training:e("gototrain"),Tutorial:e("gototutor"),TutorialStrategy:e("gotostrat"),TutorialCombo:e("gotocombo"),VersusCpu:e("gotocpu"),VersusCpuBossPork:e("gotobosspork"),VersusCpuBossGarlic:e("gotobossgarlic"),VersusTwoCpu:e("gotodemo"),AccountMenu:e("account"),AccountStats:e("astat")});return Object(g.a)(Object(g.a)({},n),{},{Any:Object.values(n).some((function(e){return e}))})}(),kv={resolution:li.Resolution,frameRate:li.FrameRate,defaultFirstTo:li.DefaultFirstTo,defaultRoundTime:li.DefaultRoundTime,attractMode:li.AttractMode,gamepadConnectedTrigger:li.GamepadConnectedTrigger,screenShake:li.ScreenShake,showDesktopControls:li.ShowDesktopControls,showEmotes:li.ShowEmotes,showMobileControls:li.ShowMobileControls,volume:li.Volume},jv=function(){return e=kv,t=function(e){return e.get()},Object.keys(e).reduce((function(n,a){return n[a]=t(e[a]),n}),{});var e,t},yv=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state=Object(g.a)(Object(g.a)({},jv()),{},{launchButtonSelectP1:!1,launchButtonSelectP2:!1}),e.desktopOptions=function(t){return vn.isMobile?[]:[{label:"Controls Reminder",select:{onChange:function(t){return e.setSetting(li.ShowDesktopControls,t.value)},current:t.showDesktopControls,options:[{label:"Show",value:!0},{label:"Hide",value:!1}]}}]},e.mobileOptions=function(t){return vn.isMobile?[{label:"Touch Controls",select:{onChange:function(t){return e.setSetting(li.ShowMobileControls,t.value)},current:t.showMobileControls,options:[{label:"Show",value:!0},{label:"Hide",value:!1}]}}]:[]},e.options=function(t){return[{label:"P1 Custom Controls",callback:function(){return e.setState({launchButtonSelectP1:!0})},hideOnMobile:!0},{label:"P1 and P2 Controls",callback:function(){return e.setState({launchButtonSelectP2:!0})},hideOnMobile:!0},{label:mv.Title,comp:function(e){return Object(ac.jsx)(mv,Object(g.a)({},e))},jumpTo:vv.TouchConfig,hideOnDesktop:!0},{label:"Best of X rounds",select:{onChange:function(t){return e.setSetting(li.DefaultFirstTo,t.value)},current:t.defaultFirstTo,options:kn.FirstToOptions.map((function(e){return{label:kn.prettyFirstTo(e),value:e}}))}},{label:"Round Timer",select:{onChange:function(t){return e.setSetting(li.DefaultRoundTime,t.value)},current:t.defaultRoundTime,options:se.map((function(e){return{label:kn.prettyRoundTime(e),value:e}}))}},{label:"Resolution",select:{onChange:function(t){return e.setSetting(li.Resolution,t.value)},current:t.resolution,options:ue.map((function(e){return{label:e,value:ce[e]}}))}},{label:"Frame Rate",select:{onChange:function(t){return e.setSetting(li.FrameRate,t.value)},current:t.frameRate,options:xt.map((function(e){return e}))}},{label:"Announcer Volume",select:{onChange:function(t){return e.setVolumeAnnouncer(t.value)},current:t.volume.announcer,sound:Pi.Menu.OptionAnnouncer,options:Ft(11).map((function(e){return{label:"".concat(10*e,"%"),value:e/10}}))}},{label:"SFX Volume",select:{onChange:function(t){return e.setVolumeEffect(t.value)},current:t.volume.effect,options:Ft(11).map((function(e){return{label:"".concat(10*e,"%"),value:e/10}}))}},{label:"Music Volume",select:{onChange:function(t){return e.setVolumeMusic(t.value)},current:t.volume.music,options:Ft(11).map((function(e){return{label:"".concat(10*e,"%"),value:e/10}}))}},{label:"Screen Shake",select:{onChange:function(t){return e.setSetting(li.ScreenShake,t.value)},current:t.screenShake,options:[{label:"Enabled",value:!0},{label:"Disabled",value:!1}]}}].concat(Object(k.a)(e.desktopOptions(t)),Object(k.a)(e.mobileOptions(t)),[{label:"Online Emotes",select:{onChange:function(t){return e.setSetting(li.ShowEmotes,t.value)},current:t.showEmotes,options:[{label:"Show",value:!0},{label:"Hide",value:!1}]}},{label:"Attract Mode",select:{onChange:function(t){return e.setSetting(li.AttractMode,t.value)},current:t.attractMode,options:[{label:"Enabled",value:!0},{label:"Disabled",value:!1}]}},{label:"On Connect Gamepad",select:{onChange:function(t){return e.setSetting(li.GamepadConnectedTrigger,t.value)},current:t.gamepadConnectedTrigger,options:[{label:"Config",value:me.OpenConfig},{label:"Nothing",value:me.Nothing}]}},{label:"Restore Defaults",callback:function(){return e.restoreDefaults()}},{label:"Delete Local Data",comp:function(e){return Object(ac.jsx)(dv,Object(g.a)({},e))}}])},e}return Object(h.a)(n,[{key:"reloadState",value:function(){li.updateVolume(),this.setState(Object(g.a)({},jv()))}},{key:"setSetting",value:function(e,t){e.set(t),this.reloadState()}},{key:"setVolumeAnnouncer",value:function(e){li.Volume.set(Object(g.a)(Object(g.a)({},this.state.volume),{},{announcer:e})),this.reloadState()}},{key:"setVolumeEffect",value:function(e){li.Volume.set(Object(g.a)(Object(g.a)({},this.state.volume),{},{effect:e})),this.reloadState()}},{key:"setVolumeMusic",value:function(e){li.Volume.set(Object(g.a)(Object(g.a)({},this.state.volume),{},{music:e})),this.reloadState()}},{key:"restoreDefaults",value:function(){Object.values(kv).forEach((function(e){return e.reset()})),this.reloadState()}},{key:"render",value:function(){var e=this;return Object(ac.jsxs)(ac.Fragment,{children:[Object(ac.jsx)(Rp,{title:n.Title,options:this.options(this.state),onExit:this.props.onExit}),this.state.launchButtonSelectP1?Object(ac.jsx)(Gc,{showPlayer2:!1,onExit:function(){return e.setState({launchButtonSelectP1:!1})}}):null,this.state.launchButtonSelectP2?Object(ac.jsx)(Gc,{showPlayer2:!0,onExit:function(){return e.setState({launchButtonSelectP2:!1})}}):null]})}}]),n}(i.a.Component);function xv(e){var t=Object(r.useState)(void 0),n=Object(m.a)(t,2),a=n[0],i=n[1];return Object(r.useEffect)((function(){return Cs.hooks.onMessage.subscribe(i,!0)}),[i]),Object(r.useEffect)((function(){return Cs.hooks.onMatchmakerClose.subscribe(e.onExit)})),Ms((function(){return Cs.startCasual()})),Object(ac.jsx)(Rp,{title:"Casual Match",infos:[{label:a}],options:[{label:"Stop searching",callback:function(){return Cs.close()}}],onExitLabel:"Back to menu",onExit:function(){return e.onExit()}})}yv.Title="Options",yv.ShouldJumpTo=[vv.Options,vv.ClearData,vv.TouchConfig].some((function(e){return e})),xv.Title="Casual Match";var Ov="Ranked Match",wv=!1;function Sv(e){var t,n,a=Object(r.useState)(null!==(t=oi.getRanges().filter((function(e){return e.range===li.RankedSearchRange.get()}))[0])&&void 0!==t?t:oi.defaultRange),i=Object(m.a)(a,2),o=i[0],s=i[1],c={matchId:nn(),firstTo:li.DefaultFirstTo.defaultValue,roundTime:li.DefaultRoundTime.defaultValue,stage:qt(ni.DefaultStages),fighter1:null!==(n=Ts.getAccountFavorite(e.apiToken.account))&&void 0!==n?n:ni.Characters.Beef.original,fighter2:ni.Characters.Pork.original,account1:e.apiToken.account};return Object(ac.jsx)(Mf,{existingConfig:c,scoreboard:co.empty(),gameMeta:{isRanked:!0},ranked:{rankedSearchRange:o,setRankedSearchRange:function(e){li.RankedSearchRange.set(e.range),s(e)}},onExit:e.onExit,onReady:function(t){return e.onSelect({apiToken:e.apiToken,fighter:t.fighter1,rankedSearchRange:o})},title:Ov,label1:"You",label2:"Ranked Opponent"})}function Cv(e){var t=Object(r.useState)(void 0),n=Object(m.a)(t,2),a=n[0],i=n[1];return Object(r.useEffect)((function(){return Cs.hooks.onMessage.subscribe(i,!0)}),[i]),Object(r.useEffect)((function(){return Cs.hooks.onMatchmakerClose.subscribe(e.onExit)})),Ms((function(){return Cs.startRanked(e.options)})),Object(ac.jsx)(Rp,{title:Ov,infos:[{label:a}],options:[{label:"Stop searching",callback:function(){return Cs.close()}}],onExitLabel:"Back to menu",onExit:function(){return e.onExit()}})}function Av(e){var t,n=Object(r.useState)(gs.loadRealToken()),a=Object(m.a)(n,1)[0],i=Object(r.useState)(wv),o=Object(m.a)(i,2),s=o[0],c=o[1],u=Object(r.useState)(null===(t=Cs.status)||void 0===t?void 0:t.ranked),l=Object(m.a)(u,2),h=l[0],d=l[1];return a?s?h?Object(ac.jsx)(Cv,{options:h,onDisconnect:e.onDisconnect,onExit:e.onExit}):Object(ac.jsx)(Sv,{apiToken:a,onSelect:d,onExit:e.onExit}):Object(ac.jsx)(Rp,{title:Ov,presence:rh.Ranked,infos:[{label:Object(ac.jsxs)("div",{style:{fontSize:"0.8em"},children:["Tough Love Arena is still in beta",Object(ac.jsx)("br",{}),"Ranks may be reset before release"]})}],options:[{label:"OK",callback:function(){c(wv=!0)}}],onExit:e.onExit}):Object(ac.jsx)(Rp,{title:Ov,presence:rh.Ranked,infos:[{label:"You must sign into an account to use Ranked"}],onExit:e.onExit})}function Tv(){return(Tv=Object(u.a)(Object(c.a)().mark((function e(t,n,a,r){var i,o,s,u;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.account,(o=n.account1).aid()===i.aid()&&(o=n.account2),s=n.fighter1.stats.code,u=n.fighter2.stats.code,a||(s=n.fighter2.stats.code,u=n.fighter1.stats.code),e.next=8,ns.rankedStart(t,{mid:n.matchId,myAccountJWT:i.jwt,oppAccountJWT:o.jwt,myCode:s,oppCode:u,isHost:a});case 8:r.current=!0;case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Mv(e){var t=Object(r.useRef)(!1),n=Object(r.useState)(),a=Object(m.a)(n,2),i=a[0],o=a[1],s=Object(r.useState)(!1),l=Object(m.a)(s,2),h=l[0],d=l[1],p=Object(r.useState)(),f=Object(m.a)(p,2),b=f[0],g=f[1],v=function(e){var t=Object(r.useState)(e),n=Object(m.a)(t,2),a=n[0],i=n[1],o=Is();return[a,Object(r.useCallback)((function(t,n){i(t),o.schedule((function(){return i(e)}),n)}),[e,o,i])]}(!1),k=Object(m.a)(v,2),j=k[0],x=k[1],O=e.ranked?Av.Title:xv.Title,w=Object(r.useCallback)((function(t){wn("NetworkError in PortableMatchVersus",t),g(Ts.prettyNetworkError(t)),x(!0,3e3),e.connection.terminate()}),[e,g,x]);Object(r.useEffect)((function(){return Cs.hooks.onDisconnect.subscribe(function(){var n=Object(u.a)(Object(c.a)().mark((function n(a){var r,i;return Object(c.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(r=e.ranked)||!t){n.next=10;break}return d(!0),n.next=5,ns.rankedDisconnected(r.apiToken);case 5:if(i=n.sent,gs.update(i.apiToken),!i.result){n.next=10;break}return o(i.result),n.abrupt("return");case 10:w(a);case 11:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}())}),[e,w]),Ps((function(){if(!e.connection.isClosed())throw new Error("impossible state! you should not be able to leave PortableMatchVersus with an existing connection")}));var S={label:"Search for match",callback:function(){Cs.retry(e.ranked),e.onExit()}};if(i){var C=i.type===y.OppRagequit&&["they ragequit! you win","MMR: ".concat(i.mmr.rating," ( ").concat(i.ppdelta>0?"+":"-").concat(Math.abs(i.ppdelta)," )")]||i.type===y.Disconnect&&["real disconnect"]||["could not determine, sorry"];return Object(ac.jsx)(Rp,{title:O,infos:C.map((function(e){return{label:e}})),options:[S],onExit:e.onExit})}if(h)return Object(ac.jsx)(Ip,{title:O,infos:[{label:"you got disconnected"},{label:"please wait while we determine if it was a ragequit"}],enableAccount:!0});if(b)return Object(ac.jsx)(Rp,{title:O,infos:[{label:b}],options:j?[]:[S],disableControllerInputs:j,hideLast:j,onExit:function(){return!j&&e.onExit()}});var A=e.ranked,T=e.connection,M={isCasual:!e.ranked,isRanked:!!e.ranked};if(!A)return Object(ac.jsx)(Ym,{gameMeta:M,connection:T,onError:w,onExit:function(){return w(R.LocalQuit)}});var P,I={matchId:ut(),firstTo:li.DefaultFirstTo.defaultValue,roundTime:li.DefaultRoundTime.defaultValue,stage:(P=ni.DefaultStages,P[Math.floor(Math.random()*P.length)]),fighter1:A.fighter,fighter2:A.fighter,account1:A.apiToken.account,account2:A.apiToken.account};return Object(ac.jsx)(Ym,{gameMeta:M,draftGameConfig:I,setGameConfig:function(e,n){return function(e,t,n,a){return Tv.apply(this,arguments)}(A.apiToken,e,n,t)},onMatchFinish:function(){return t.current=!1},onSetFinish:function(){return w(R.LocalQuit)},connection:T,onError:w,onExit:function(){return w(R.LocalQuit)}})}Av.Title=Ov;var Pv,Rv,Iv=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"render",value:function(){var e={baseGameMeta:{isReplay:!0},title:"Replay",label1:"Player 1",label2:"Player 2",replay:this.props.replay};return Object(ac.jsx)(gv,Object(g.a)(Object(g.a)({},this.props),{},{settings:e}))}}]),n}(i.a.Component),Bv=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={userInput:"",loading:!1,error:void 0},e}return Object(h.a)(n,[{key:"tryLoad",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(){var t,n,a,r;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.state.userInput,a=null===(t=n.trim().split("replay=").pop())||void 0===t?void 0:t.split("&")[0]){e.next=4;break}return e.abrupt("return",this.setState({error:"You must enter a valid replay URL or ID"}));case 4:return e.next=6,uc(this,{loading:!0});case 6:if(!so.getById(a)){e.next=9;break}return e.abrupt("return",this.props.onLoad(a));case 9:return e.prev=9,e.next=12,ns.replayGet(a);case 12:return r=e.sent,so.addRemote(r),e.abrupt("return",this.props.onLoad(a));case 17:return e.prev=17,e.t0=e.catch(9),e.next=21,uc(this,{userInput:"",loading:!1,error:"Replay not found"});case 21:case"end":return e.stop()}}),e,this,[[9,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,a=t.userInput,r=t.loading,i=t.error;return i?Object(ac.jsx)(Rp,{title:n.Title,infos:[{label:i}],onExit:function(){return e.setState({error:void 0})}}):r?Object(ac.jsx)(Ip,{title:n.Title,infos:[{label:"Loading, please wait"}]}):Object(ac.jsx)(Rp,{title:n.Title,infos:[{label:"Enter replay URL or ID"}],options:[{input:{placeholder:"eg: tla.com?replay=A1B2C3D4E5",allowCapital:!0,value:a,onChange:function(t){return e.setState({userInput:t})},onSubmit:function(){return e.tryLoad()}}},{label:"Load",callback:function(){return e.tryLoad()}}],onExit:this.props.onExit})}}]),n}(i.a.Component);Bv.Title="Load Replay";var Dv,Hv,Ev,_v,Fv,Lv,Gv,zv=b.a.div(Pv||(Pv=Object(f.a)(["\n  font-size: 0.5em;\n\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n"]))),Wv=b.a.img(Rv||(Rv=Object(f.a)(["\n  height: 2.5em;\n  width: auto;\n  margin: 0 1em;\n\n  ","\n"])),(function(e){return e.winner?"\n    border: 0.3em solid var(--heart);\n    border-radius: 3em;\n    margin: 0 0.5em;\n  ":""})),Nv=function(e){var t=e.record,n=da.getWinner(t.match),a=!!n&&[j.Player1,j.Draw].includes(n),r=!!n&&[j.Player2,j.Draw].includes(n),i=t.gameConfig,o=Hn.is(i.fighter1)&&"<MOD ".concat(Ts.displayModId(t.compressed.gameConfig.fighter1Id),">")||(Bn.is(i.fighter1)?"MOD ERROR":i.fighter1.stats.name),s=Hn.is(i.fighter2)&&"<MOD ".concat(Ts.displayModId(t.compressed.gameConfig.fighter2Id),">")||(Bn.is(i.fighter2)?"MOD ERROR":i.fighter2.stats.name),c=i.account1?i.account1.getTag():"",u=i.account2?i.account2.getTag():"",l=c||o,h=u||s,d=i.stage.name,p=Hn.is(i.fighter1)&&ni.MenuArt.CharacterSelectMods||(Bn.is(i.fighter1)?ni.MenuArt.CharacterSelectMods:i.fighter1.hudUrl),f=Hn.is(i.fighter2)&&ni.MenuArt.CharacterSelectMods||(Bn.is(i.fighter2)?ni.MenuArt.CharacterSelectMods:i.fighter2.hudUrl);return Object(ac.jsxs)(zv,{style:{textTransform:"none"},children:[Object(ac.jsx)(Wv,{winner:a,src:p,alt:"player 1 character"}),Object(ac.jsxs)("div",{children:[Object(ac.jsx)("div",{style:{fontSize:"0.8em"},children:new Date(t.created).toLocaleString()}),Object(ac.jsx)("div",{children:"".concat(l," vs ").concat(h)}),Object(ac.jsxs)("div",{style:{fontSize:"0.8em"},children:[d," | Best of ",2*t.match.firstTo-1," | ",i.roundTime," seconds"]})]}),Object(ac.jsx)(Wv,{winner:r,src:f,alt:"player 2 character"})]})},Uv=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={record:e.props.record,replayUploading:!1,replayCopied:!1},e.mounted=!1,e.infos=function(e){var t=!ia.configIsInvalid(e.record.gameConfig);return[{label:Object(ac.jsx)(Nv,{record:e.record})}].concat(Object(k.a)(t?[]:[{label:"This replay requires mods that are missing. Please upload them and come back."}]))},e.options=function(t){var n=t.record,a=(t.replayCopied?"Copied!":t.replayUploading&&"Uploading...")||"Copy to clipboard";return ia.replayIsInvalid(n)?[{label:a,callback:function(){return e.onCopy()}}]:[{label:"Start Replay",comp:function(e){return Object(ac.jsx)(Iv,Object(g.a)({replay:n},e))},jumpTo:e.props.autoplay},{label:a,callback:function(){return e.onCopy()}}]},e}return Object(h.a)(n,[{key:"componentDidMount",value:function(){this.mounted=!0}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"onCopy",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(){var t,n,a,r;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.state.replayUploading&&!this.state.replayCopied){e.next=2;break}return e.abrupt("return");case 2:if(!(t=this.state.record.compressed).id){e.next=9;break}return Ts.clipboard(Ts.getReplayUrlForId(t.id)),e.next=7,uc(this,{replayCopied:!0});case 7:e.next=20;break;case 9:return e.next=11,uc(this,{replayUploading:!0,replayCopied:!1});case 11:return n=so.createId(t),a=Object(g.a)(Object(g.a)({},t),{},{id:n}),r=so.helper.decompressReplay(a),so.storage.updateReplay(a.hash,{id:n}),e.next=17,ns.replayUpload(a).then(wn).catch(wn);case 17:return Ts.clipboard(Ts.getReplayUrlForId(n)),e.next=20,uc(this,{replayUploading:!1,replayCopied:!0,record:r});case 20:return e.next=22,Le(2e3);case 22:if(!this.mounted){e.next=25;break}return e.next=25,uc(this,{replayCopied:!1});case 25:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(ac.jsx)(Rp,{title:qv.Title,presence:rh.Replay,infos:this.infos(this.state),options:this.options(this.state),onExit:this.props.onExit})}}]),n}(i.a.Component),qv=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={autoplay:kn.isAppStart&&kn.urlReplay||void 0,replays:so.get()},e}return Object(h.a)(n,[{key:"loadReplay",value:function(e){this.setState({replays:so.get(),autoplay:e})}},{key:"onChange",value:function(){this.setState({replays:so.get()})}},{key:"render",value:function(){var e=this,t=this.state,a=t.autoplay,r=t.replays,i=r.map((function(e){var t=e.id===a;return{label:Object(ac.jsx)(Nv,{record:e}),hideHeart:!0,comp:function(n){return Object(ac.jsx)(Uv,Object(g.a)({record:e,autoplay:t},n))},jumpTo:t,forceJump:t}})),o=0===r.length?[{label:"No replays have been recorded yet"}]:[],s=[{label:"Load Replay",comp:function(t){return Object(ac.jsx)(Bv,Object(g.a)({onLoad:function(t){return e.loadReplay(t)}},t))}}].concat(Object(k.a)(i));return Object(ac.jsx)(Rp,{title:n.Title,presence:rh.Replay,infos:o,options:s,onChange:function(){return e.onChange()},onExit:this.props.onExit})}}]),n}(i.a.Component);qv.Title="Replays";var Vv,Yv,Jv,Kv,Qv,Zv,Xv=Object(b.a)(Mc)(Dv||(Dv=Object(f.a)(["\n  padding: 1em 8em;\n  font-size: 1.2rem;\n  justify-content: space-around;\n  color: var(--white);\n  & a {\n    color: var(--heart);\n  }\n\n  ","\n"])),gc),$v=function(){return Object(ac.jsxs)("div",{style:{marginTop:"1rem"},children:[Object(ac.jsx)("div",{children:Object(ac.jsx)("img",{src:ni.Branding.Logo,alt:"Tough Love Arena logo",style:{height:"10vh",width:"auto"}})}),Object(ac.jsxs)("div",{style:{fontSize:"1rem"},children:["v",kn.PatchVersion]})]})},ek=b.a.button(Hv||(Hv=Object(f.a)(["\n  font-size: 1em !important;\n  padding: 0.5em 1em;\n  background-color: var(--backtext);\n  color: var(--foretext);\n  border: 1px solid var(--foretext);\n  border-radius: 1em;\n  cursor: pointer;\n\n  &:hover {\n    background-color: var(--foretext);\n    color: var(--backtext);\n  }\n"]))),tk=b.a.table(Ev||(Ev=Object(f.a)(["\n  text-align: center;\n  margin: 0 auto;\n  border-collapse: collapse;\n  font-size: 1em;\n  & th {\n    font-size: 1.2em;\n  }\n  & td, & th {\n    border: 1px solid #ccc;\n    width: 6em;\n  }\n  & tr:hover {\n    color: black;\n    background-color: var(--heart);\n  }\n  & td div {\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n  }\n  & img {\n    height: 1.2em;\n    width: auto;\n  }\n"]))),nk=Object(b.b)(_v||(_v=Object(f.a)(["\n  0% {\n    background-position: 0% 82%;\n  }\n  50% {\n    background-position: 100% 19%;\n  }\n  100% {\n    background-position: 0% 82%;\n  }\n"]))),ak=Object(b.a)(ek)(Fv||(Fv=Object(f.a)(["\n  font-size: 2em;\n  cursor: pointer;\n  border: 0 solid white;\n  border-radius: 1em;\n\n  background-color: white;\n"]))),rk=Object(b.a)(ak)(Lv||(Lv=Object(f.a)(["\n  color: black;\n  font-style: normal;\n  animation: "," 10s ease infinite;\n  background: linear-gradient(124deg, #ff2400, #e81d1d, #e8b71d, #e3e81d, #1de840, #1ddde8, #2b1de8, #dd00f3, #dd00f3);\n  background-size: 1800% 1800%;\n"])),nk),ik=b.a.div(Gv||(Gv=Object(f.a)(["\n  display: flex;\n  & > * {\n    margin: 0 1em;\n  }\n"]))),ok=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={pageNumber:0,isSoundOn:li.SoundToggleOn.get()},e.maxPages=1,e}return Object(h.a)(n,[{key:"toggleSound",value:function(){li.SoundToggleOn.set(!li.SoundToggleOn.get()),this.setState({isSoundOn:li.SoundToggleOn.get()})}},{key:"continue",value:function(){Pi.Menu.Forward.play(),this.state.pageNumber<this.maxPages-1?this.setState({pageNumber:this.state.pageNumber+1}):this.props.onExit()}},{key:"renderControlsRow",value:function(e,t){var n=li.Controls.get()[re.left];return Object(ac.jsxs)("tr",{children:[Object(ac.jsx)("td",{children:e}),Object(ac.jsx)("td",{children:Object(ac.jsx)("div",{children:Object(ac.jsx)("img",{src:ni.Notation[t],alt:t})})}),Object(ac.jsx)("td",{children:kn.prettyControls(n[t])})]})}},{key:"renderMusicAndExit",value:function(){var e=this,t=this.state.isSoundOn;return Object(ac.jsxs)(ik,{children:[Object(ac.jsx)("div",{children:t?Object(ac.jsx)(rk,{onClick:function(){return e.toggleSound()},children:"Music and SFX: ON"}):Object(ac.jsx)(ak,{onClick:function(){return e.toggleSound()},children:"Music and SFX: OFF"})}),Object(ac.jsx)("div",{children:Object(ac.jsx)(ek,{onClick:function(){return e.continue()},children:"I'M READY TO FIGHT"})})]})}},{key:"renderPage0Desktop",value:function(){return Object(ac.jsxs)(Xv,{children:[Object(ac.jsx)($v,{}),Object(ac.jsx)("div",{children:"Welcome to the Tough Love Arena public beta!"}),Object(ac.jsxs)("div",{children:[Object(ac.jsx)("div",{children:"These are the default controls:"}),Object(ac.jsx)("br",{}),Object(ac.jsxs)(tk,{children:[Object(ac.jsx)("thead",{children:Object(ac.jsxs)("tr",{children:[Object(ac.jsx)("th",{children:"action"}),Object(ac.jsx)("th",{children:"symbol"}),Object(ac.jsx)("th",{children:"input"})]})}),Object(ac.jsxs)("tbody",{children:[this.renderControlsRow("move left",te.left),this.renderControlsRow("move right",te.right),this.renderControlsRow("light attack",te.attack1),this.renderControlsRow("heavy attack",te.attack2),this.renderControlsRow("special attack",te.attack3),this.renderControlsRow("throw",te.attack4),this.renderControlsRow("pause",te.menu)]})]}),Object(ac.jsx)("br",{}),Object(ac.jsxs)("div",{children:["You can change the controls at any menu with the button in the bottom right.",Object(ac.jsx)("br",{}),"There is also external controller support! Just plug something in and press any button."]})]}),this.renderMusicAndExit()]})}},{key:"renderPage0Mobile",value:function(){return Object(ac.jsxs)(Xv,{children:[Object(ac.jsx)($v,{}),Object(ac.jsx)("div",{children:"Welcome to the Tough Love Arena Beta!"}),Object(ac.jsxs)("div",{children:[Object(ac.jsx)("div",{children:"To exit a match in progress, touch the timer at the top of the screen:"}),Object(ac.jsx)("br",{}),Object(ac.jsx)("div",{children:Object(ac.jsx)("img",{src:ni.MenuArt.IntroTimer,alt:"timer example",style:{width:"80%",height:"auto",border:"1vh solid white"}})})]}),Object(ac.jsxs)("div",{children:["Add Tough Love Arena to your\xa0",Object(ac.jsx)("a",{target:"_blank",rel:"noopener noreferrer",href:"https://www.macrumors.com/how-to/add-a-web-link-to-home-screen-iphone-ipad/",children:"iPhone"}),"\xa0or\xa0",Object(ac.jsx)("a",{target:"_blank",rel:"noopener noreferrer",href:"https://www.howtogeek.com/196087/how-to-add-websites-to-the-home-screen-on-any-smartphone-or-tablet/",children:"Android"}),"\xa0home screen to hide the address bar and prevent accidental scrolling and zooming",Object(ac.jsx)("br",{})]}),this.renderMusicAndExit()]})}},{key:"render",value:function(){var e=this,t=this.state.pageNumber;return Object(ac.jsxs)(yc,{src:gi.loadBackgroundImage(ni.Stages.Notebook.backgroundSrc).imageUrl,children:[Object(ac.jsx)(jc,{children:0===t&&(vn.isMobile?this.renderPage0Mobile():this.renderPage0Desktop())}),Object(ac.jsx)(Bl,{}),Object(ac.jsx)(cc,{onControllerInput:function(t,n){return t===te.attack1&&e.continue()},onPress:function(t){return"Backquote"===t&&e.continue()}})]})}}]),n}(i.a.Component),sk=b.a.div(Vv||(Vv=Object(f.a)(["\n  z-index: ",";\n  font-size: 1rem;\n\n  ","\n\n  position: fixed;\n  top: 0%;\n  left: 0%;\n  width: 100%;\n  height: 100%;\n  box-sizing: border-box;\n  padding: 1em;\n\n  color: white;\n  background-color: rgba(0, 0, 0, 0.8);\n\n  text-align: center;\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-start;\n  align-items: center;\n  flex-wrap: nowrap;\n\n  justify-content: space-around;\n  color: var(--white);\n  & a {\n    color: var(--heart);\n  }\n"])),Ts.zIndex.Absolute,gc),ck=b.a.div(Yv||(Yv=Object(f.a)(["\n  margin: 0px auto;\n  font-size: 0.6em;\n\n  display: flex;\n  justify-content: center;\n  align-items: flex-start;\n  flex-wrap: wrap;\n"]))),uk=b.a.div(Jv||(Jv=Object(f.a)(["\n  margin: 1em;\n"]))),lk=b.a.div(Kv||(Kv=Object(f.a)(["\n  font-size: 3em;\n"]))),hk=b.a.div(Qv||(Qv=Object(f.a)(["\n  font-size: ",";\n"])),vn.isMobile?"2.4rem":"1.2rem"),dk=b.a.div(Zv||(Zv=Object(f.a)(["\n  font-size: ",";\n"])),vn.isMobile?"2rem":"1rem"),pk=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).playtesters=["Adam Heart","Alec Boccio","Dakota Hadfield","Dan Gant","Dan Enders","David O'Sullivan",'Eddy "RLBS" Hung',"Eliah Hecht","Eric Ngeo","Khalid Husain","Khalid Richards","Marvin Ma","Nathan Richardson","Scott Roepnack","Tony Pietra"].sort(),e}return Object(h.a)(n,[{key:"componentDidMount",value:function(){oh.set(rh.About),ro("menu:about")}},{key:"onExit",value:function(){Pi.Menu.Backward.play(),this.props.onExit()}},{key:"renderLink",value:function(e,t,n){return n?Object(ac.jsx)("a",{href:e,children:t}):Object(ac.jsx)("a",{target:"_blank",rel:"noopener noreferrer",href:e,children:t})}},{key:"renderColumns",value:function(e,t){return Object(ac.jsx)(ck,{children:Ft(t).map((function(n,a){return Object(ac.jsx)(uk,{children:e.filter((function(e,n){return n%t===a})).map((function(e,t){return Object(ac.jsx)("div",{children:e},"playtester-"+t)}))},a)}))})}},{key:"render",value:function(){var e=this,t=this.playtesters;return Object(ac.jsxs)(yc,{src:gi.loadBackgroundImage(ni.Stages.ParkingLot.backgroundSrc).imageUrl,children:[Object(ac.jsx)(jc,{children:Object(ac.jsxs)(sk,{children:[!vn.isMobile&&Object(ac.jsx)($v,{}),Object(ac.jsxs)("div",{children:[vn.isMobile&&Object(ac.jsxs)(lk,{children:["Tough Love Arena v",kn.PatchVersion]}),Object(ac.jsx)(hk,{children:"coding and game design by M. Paul Weeks"}),Object(ac.jsx)(hk,{children:"art and animation by Amy Xu"}),Object(ac.jsx)(dk,{children:"original music and sound design by Josie Brechner and M Gewehr"})]}),Ts.showExternalLinks()?Object(ac.jsxs)(ac.Fragment,{children:[Object(ac.jsxs)(hk,{children:["resources",Object(ac.jsxs)(dk,{children:[this.renderLink(kn.External.About,"about"),"\xa0/\xa0",this.renderLink(kn.External.Download,"download"),"\xa0/\xa0",this.renderLink(kn.External.Status,"status"),"\xa0/\xa0",this.renderLink(kn.Links.ChangelogUrl,"changelog",!0),"\xa0/\xa0",this.renderLink(kn.Links.FaqUrl,"faq",!0),"\xa0/\xa0",this.renderLink(kn.Links.RoadmapUrl,"todo",!0),"\xa0/\xa0",this.renderLink(kn.Links.LicensesUrl,"open source licenses",!0)]})]}),Object(ac.jsxs)(hk,{children:["contact / support",Object(ac.jsxs)(dk,{children:[this.renderLink(kn.External.Email,"email"),"\xa0/\xa0",this.renderLink(kn.External.Facebook,"facebook"),"\xa0/\xa0",this.renderLink(kn.External.Twitter,"twitter"),"\xa0/\xa0",this.renderLink(kn.External.YouTube,"youtube"),"\xa0/\xa0",this.renderLink(kn.External.Twitch,"twitch"),"\xa0/\xa0",this.renderLink(kn.External.Discord,"discord"),"\xa0/\xa0",this.renderLink(kn.External.Redbubble,"merch"),"\xa0/\xa0",this.renderLink(kn.External.PayPal,"paypal"),"\xa0/\xa0",this.renderLink(kn.External.Patreon,"patreon"),"\xa0/\xa0",this.renderLink(kn.External.Bandcamp,"bandcamp")]})]})]}):Object(ac.jsxs)(hk,{children:["contact / social",Object(ac.jsxs)(dk,{children:[this.renderLink(kn.External.Email,"email"),"\xa0/\xa0",this.renderLink(kn.External.Facebook,"facebook"),"\xa0/\xa0",this.renderLink(kn.External.Twitter,"twitter"),"\xa0/\xa0",this.renderLink(kn.External.YouTube,"youtube"),"\xa0/\xa0",this.renderLink(kn.External.Twitch,"twitch"),"\xa0/\xa0",this.renderLink(kn.External.Discord,"discord")]})]}),!vn.isMobile&&Object(ac.jsxs)(hk,{children:["alpha playtesters",this.renderColumns(t,4),Object(ac.jsx)(dk,{children:'special thanks to David "UltraDavid" Graham and shygybeats'})]}),Object(ac.jsx)("div",{children:Object(ac.jsx)(ek,{onClick:function(){return e.onExit()},children:"BACK"})})]})}),Object(ac.jsx)(cc,{onControllerInput:function(t){return t===te.attack2&&e.onExit()}})]})}}]),n}(i.a.Component);pk.Title="About";var fk,bk,gk,mk,vk,kk,jk,yk,xk,Ok,wk,Sk,Ck,Ak,Tk,Mk,Pk,Rk,Ik,Bk,Dk,Hk=n(195),Ek=n.n(Hk),_k=function(){function e(){Object(l.a)(this,e),this.cache={}}return Object(h.a)(e,[{key:"fetch",value:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){var e=Object(u.a)(Object(c.a)().mark((function e(t){var n,a,r;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return n=e.sent,e.next=5,n.text();case 5:return a=e.sent,r=Ek.a.parse(a),e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},{key:"get",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(t){var n;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.cache[t]){e.next=6;break}return e.next=4,this.fetch(t);case 4:n=e.sent,this.cache[t]=n;case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Fk=new _k,Lk=b.a.div(fk||(fk=Object(f.a)(["\n  ","\n\n  font-size: 1.2rem;\n  text-align: center;\n  color: white;\n  background: rgba(0, 0, 0, 0.7);\n\n  padding: 0 2em;\n  border-radius: 0.5em;\n\n  & a {\n    color: var(--heart);\n  }\n"])),gc),Gk=b.a.div(bk||(bk=Object(f.a)(["\n  font-size: 2em;\n  margin-top: 1em;\n"]))),zk=b.a.div(gk||(gk=Object(f.a)(["\n  & > * > * {\n    padding-left: 0;\n  }\n"]))),Wk=b.a.div(mk||(mk=Object(f.a)(["\n  max-height: 44vh;\n  overflow-y: auto;\n  & > *:nth-child(odd) {\n    background: #202020;\n  }\n  & > *:hover {\n    color: black;\n    background-color: var(--heart);\n  }\n"]))),Nk=b.a.div(vk||(vk=Object(f.a)(["\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n"]))),Uk=b.a.div(kk||(kk=Object(f.a)(["\n  cursor: pointer;\n  font-size: 0.8rem;\n\n  margin: 1em 0.5em;\n  padding: 0.5em 1em;\n\n  border-radius: 2rem;\n  border: 1px solid white;\n\n  background-color: ",";\n  color: ",";\n\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n"])),(function(e){return e.highlight?"white":"black"}),(function(e){return e.highlight?"black":"white"})),qk=b.a.div(jk||(jk=Object(f.a)(["\n  display: flex;\n  flex-direction: row;\n  justify-content: flex-start;\n  align-items: center;\n"]))),Vk=b.a.div(yk||(yk=Object(f.a)(["\n  box-sizing: border-box;\n  padding: 0.2em 1em;\n  padding-right: 0;\n  width: 8em;\n\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  align-items: center;\n\n  ","\n"])),(function(e){return e.isClickable?"\n    cursor: pointer;\n  ":""})),Yk=Object(b.a)(Vk)(xk||(xk=Object(f.a)(["\n  width: 6em;\n"]))),Jk=Object(b.a)(Vk)(Ok||(Ok=Object(f.a)(["\n  width: 15em;\n"]))),Kk=Object(b.a)(Vk)(wk||(wk=Object(f.a)(["\n  width: 10em;\n"]))),Qk=Object(b.a)(Vk)(Sk||(Sk=Object(f.a)(["\n  width: 6em;\n"]))),Zk=Object(b.a)(Vk)(Ck||(Ck=Object(f.a)(["\n  width: 6em;\n"]))),Xk=Object(b.a)(Vk)(Ak||(Ak=Object(f.a)(["\n  width: 10em;\n  justify-content: flex-start;\n\n  a {\n    color: white;\n    margin-right: 0.5em;\n  }\n"]))),$k=b.a.button(Tk||(Tk=Object(f.a)(["\n  margin: 0 0.5em;\n"]))),ej=b.a.img(Mk||(Mk=Object(f.a)(["\n  height: 1em;\n  width: auto;\n  margin: 0;\n"]))),tj=b.a.div(Pk||(Pk=Object(f.a)(["\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n  flex-wrap: wrap;\n\n  & > div {\n    width: 30%;\n  }\n"]))),nj=b.a.input(Rk||(Rk=Object(f.a)(["\n  font-size: 1rem;\n  border-radius: 1em;\n  width: 10em;\n\n  margin: 1em 0.5em;\n  padding: 0.4em 1em;\n"]))),aj=b.a.div(Ik||(Ik=Object(f.a)(["\n  font-size: 0.8em;\n"]))),rj=Object(b.a)(aj)(Bk||(Bk=Object(f.a)(["\n  margin-top: 0.5em;\n  margin-bottom: 0.8em;\n"]))),ij="all",oj=[ij,Ee.Official,Ee.Community];function sj(e){var t;return e===ij?"All":(t={},Object(v.a)(t,Ee.Official,"Official"),Object(v.a)(t,Ee.Community,"Community"),t)[e]}var cj=function(e){return e[e.Date=0]="Date",e[e.TournamentName=1]="TournamentName",e[e.WinnerName=2]="WinnerName",e[e.EntrantNum=3]="EntrantNum",e}(cj||{}),uj=function(e){return e[e.Ascending=0]="Ascending",e[e.Descending=1]="Descending",e}(uj||{}),lj=(Dk={},Object(v.a)(Dk,cj.Date,uj.Descending),Object(v.a)(Dk,cj.TournamentName,uj.Ascending),Object(v.a)(Dk,cj.WinnerName,uj.Ascending),Object(v.a)(Dk,cj.EntrantNum,uj.Descending),Dk),hj=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={view:ij,search:"",searchFocused:!1,sortBy:cj.Date,sortOrder:lj[cj.Date]},e.minRows=11,e}return Object(h.a)(n,[{key:"componentDidMount",value:function(){var e=this;oh.set(rh.HallOfFame),Fk.get(kn.Links.TournamentsYaml).then((function(t){return e.setState({data:t})})).catch((function(){return e.setState({dataError:"Error loading tournament data"})}))}},{key:"changeView",value:function(e){this.setState({view:e})}},{key:"handleController",value:function(e){var t=this.state,n=t.view;if(!t.searchFocused)return e===te.left?this.changeView(Nt(n,oj)):e===te.right?this.changeView(Ut(n,oj)):e===te.attack2?this.props.onExit():void 0}},{key:"setSort",value:function(e){e!==this.state.sortBy?this.setState({sortBy:e,sortOrder:lj[e]}):this.setState({sortOrder:Ut(this.state.sortOrder,[uj.Ascending,uj.Descending])})}},{key:"renderChallonge",value:function(e){if(!e)return null;var t=e.startsWith("https://")?e:"https://challonge.com/".concat(e);return Object(ac.jsx)("a",{target:"_blank",rel:"noopener noreferrer",href:t,children:"Bracket"})}},{key:"renderYouTube",value:function(e){if(!e)return null;var t="https://youtube.com/watch?v=".concat(e);return Object(ac.jsx)("a",{target:"_blank",rel:"noopener noreferrer",href:t,children:"YouTube"})}},{key:"renderSortIcon",value:function(e){var t=e?this.state.sortOrder===uj.Ascending?"\ud83d\udd3c":"\ud83d\udd3d":"\u23fa\ufe0f";return Object(ac.jsx)("div",{children:t})}},{key:"renderTable",value:function(e){var t=this,n=this.state.sortBy,a=e.concat(),r=Math.max(0,this.minRows-a.length);return a.push.apply(a,Object(k.a)(Ft(r).map((function(){})))),Object(ac.jsxs)("div",{children:[Object(ac.jsx)(zk,{children:Object(ac.jsxs)(qk,{children:[Object(ac.jsxs)(Yk,{isClickable:!0,onClick:function(){return t.setSort(cj.Date)},children:[Object(ac.jsx)("div",{children:Object(ac.jsx)("u",{children:"Date"})}),this.renderSortIcon(n===cj.Date)]}),Object(ac.jsx)(Jk,{children:Object(ac.jsx)("u",{children:"Tournament"})}),Object(ac.jsx)(Kk,{children:Object(ac.jsx)("u",{children:"Champion"})}),Object(ac.jsxs)(Qk,{isClickable:!0,onClick:function(){return t.setSort(cj.EntrantNum)},children:[Object(ac.jsx)("div",{children:Object(ac.jsx)("u",{children:"Entrants"})}),this.renderSortIcon(n===cj.EntrantNum)]}),Object(ac.jsx)(Zk,{children:Object(ac.jsx)("u",{children:"Type"})}),Object(ac.jsx)(Xk,{children:Object(ac.jsx)("u",{children:"Links"})})]})}),Object(ac.jsx)(Wk,{children:a.map((function(e,n){var a;return e?Object(ac.jsxs)(qk,{children:[Object(ac.jsx)(Yk,{children:e.date}),Object(ac.jsx)(Jk,{children:e.name}),Object(ac.jsx)(Kk,{children:e.winner}),Object(ac.jsx)(Qk,{children:e.entrants}),Object(ac.jsx)(Zk,{children:sj(null!==(a=e.category)&&void 0!==a?a:_e)}),Object(ac.jsxs)(Xk,{children:[t.renderChallonge(e.challonge),t.renderYouTube(e.youtube)]})]},n):Object(ac.jsxs)(qk,{children:[Object(ac.jsx)(Yk,{children:"\xa0"}),Object(ac.jsx)(Jk,{children:"\xa0"}),Object(ac.jsx)(Kk,{children:"\xa0"}),Object(ac.jsx)(Qk,{children:"\xa0"}),Object(ac.jsx)(Zk,{children:"\xa0"}),Object(ac.jsx)(Xk,{children:"\xa0"})]},n)}))})]})}},{key:"render",value:function(){var e,t=this,a=n.Title,r=this.props.onExit,i=this.state,o=i.data,s=i.dataError,c=i.view,u=i.search,l=i.sortBy,h=i.sortOrder;if(s)return Object(ac.jsx)(Rp,{title:a,infos:[{label:s}],onExit:r});if(!o)return Object(ac.jsx)(Ip,{title:a,infos:[{label:"Loading..."}]});var d,p=o.events,f=null!==(e=(d=p.map((function(e){return e.date})),Et(d,(function(e){return e}))).reverse()[0])&&void 0!==e?e:"???",b=u.toLowerCase().split(" "),g=c===ij?p:p.filter((function(e){var t;return c===(null!==(t=e.category)&&void 0!==t?t:_e)})),m=u?g.filter((function(e){var t=[e.name.toLowerCase(),e.winner.toLowerCase()];return b.every((function(e){return t.some((function(t){return t.includes(e)}))}))})):g,v=m,k=function(){switch(l){case cj.Date:return Et(v,(function(e){return e.date}));case cj.TournamentName:return Et(v,(function(e){return e.name}));case cj.WinnerName:return Et(v,(function(e){return e.winner}));case cj.EntrantNum:return Et(v,(function(e){return e.entrants}))}}(),j=h===uj.Ascending?k:k.reverse();return Object(ac.jsxs)(xc,{src:gi.loadBackgroundImage(ni.Stages.ParkingLot.backgroundSrc).imageUrl,children:[Object(ac.jsxs)(Lk,{children:[Object(ac.jsx)(Gk,{children:"The Hall of Fame"}),Object(ac.jsx)("div",{children:"Here we celebrate and immortalize all of the Tough Love Arena champions"}),Object(ac.jsx)(aj,{children:Object(ac.jsxs)("i",{children:["last updated ",f]})}),Object(ac.jsxs)(Nk,{children:[oj.map((function(e){return Object(ac.jsx)(Uk,{highlight:e===c,onClick:function(){return t.changeView(e)},children:sj(e)},e)})),Object(ac.jsx)(nj,{placeholder:"Filter events",value:u,onChange:function(e){return t.setState({search:e.target.value})},onFocus:function(){return t.setState({searchFocused:!0})},onBlur:function(){return t.setState({searchFocused:!1})}})]}),this.renderTable(j),Object(ac.jsx)("br",{}),vn.isMobile?Object(ac.jsxs)("div",{children:[Object(ac.jsx)($k,{onClick:function(){return t.handleController(te.left)},children:"prev"}),Object(ac.jsx)($k,{onClick:r,children:"exit"}),Object(ac.jsx)($k,{onClick:function(){return t.handleController(te.right)},children:"next"})]}):Object(ac.jsx)("div",{children:Object(ac.jsxs)(tj,{children:[Object(ac.jsxs)(Mp,{hover:!1,shrink:!0,onClick:function(){return t.handleController(te.left)},children:[Object(ac.jsx)(ej,{src:ni.Notation[te.left]}),": previous"]}),Object(ac.jsxs)(Mp,{hover:!1,shrink:!0,onClick:function(){return t.handleController(te.attack2)},children:[Object(ac.jsx)(ej,{src:ni.Notation[te.attack2]}),": exit"]}),Object(ac.jsxs)(Mp,{hover:!1,shrink:!0,onClick:function(){return t.handleController(te.right)},children:[Object(ac.jsx)(ej,{src:ni.Notation[te.right]}),": next"]})]})}),Object(ac.jsxs)(rj,{children:["Want to submit your event to the Hall of Fame? Send us an ",Object(ac.jsx)("a",{href:kn.External.Email,children:"email"})," or message us on ",Object(ac.jsx)("a",{href:kn.External.Twitter,children:"Twitter"})]})]}),Object(ac.jsx)(cc,{onControllerInput:function(e){return t.handleController(e)}})]})}}]),n}(i.a.Component);hj.Title="Hall of Fame",hj.ShouldJumpTo=[vv.HallOfFame].some((function(e){return e}));var dj,pj,fj,bj,gj,mj,vj,kj,jj,yj,xj,Oj,wj,Sj,Cj,Aj,Tj,Mj=n(74),Pj=Object(b.a)(kc)(dj||(dj=Object(f.a)(["\n  ","\n  padding-top: 7vh;\n  padding-bottom: 13vh;\n\n  ","\n"])),(function(e){return"\n    font-size: calc(".concat(e.zoom," * 1em);\n  ")}),gc),Rj=b.a.div(pj||(pj=Object(f.a)(["\n  position: fixed;\n  top: 0px;\n  left: 0px;\n  width: 100%;\n  height: auto;\n  font-size: 1rem;\n\n  background-color: var(--background);\n  border-bottom: 0.2em solid var(--foreground);\n"]))),Ij=b.a.div(fj||(fj=Object(f.a)(["\n  position: fixed;\n  bottom: 0px;\n  left: 0px;\n  width: 100%;\n  height: auto;\n  font-size: 1rem;\n\n  background-color: var(--background);\n  border-top: 0.2em solid var(--foreground);\n"]))),Bj=Object(b.a)(Oc)(bj||(bj=Object(f.a)(["\n  font-size: 0.8em !important;\n"]))),Dj=b.a.div(gj||(gj=Object(f.a)(["\n  font-size: 3em;\n  text-decoration: underline;\n  margin: 0.5em;\n"]))),Hj=b.a.div(mj||(mj=Object(f.a)(["\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: flex-start;\n  flex-wrap: wrap;\n"]))),Ej=b.a.div(vj||(vj=Object(f.a)(["\n  border: 0.2em solid var(--foreground);\n  border-bottom-width: 0;\n  padding: 1rem;\n"]))),_j=b.a.div(kj||(kj=Object(f.a)(["\n  font-size: 2em;\n  margin: 0.5em;\n"]))),Fj=b.a.div(jj||(jj=Object(f.a)(["\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: flex-start;\n  flex-wrap: wrap;\n"]))),Lj=b.a.div(yj||(yj=Object(f.a)(["\n  min-width: 20em;\n  height: 28em;\n\n  background-color: #e0e0e0;\n  color: var(--foretext);\n\n  margin: 0.1em;\n  box-shadow: 0 0 0 0.2em var(--foretext);\n\n  & > div {\n    margin: 0.5em;\n\n    display: flex;\n    flex-direction: row;\n    justify-content: center;\n    align-items: center;\n    flex-wrap: wrap;\n  }\n"]))),Gj=b.a.div(xj||(xj=Object(f.a)(["\n  font-size: 1.5em;\n"]))),zj=b.a.img(Oj||(Oj=Object(f.a)(["\n  height: 18em;\n  width: auto;\n  background-color: #ccc;\n  border: 0.2em solid black;\n  ","\n  ","\n"])),(function(e){return e.hasAttack&&"\n    border-color: red;\n  "}),(function(e){return e.copyAttack&&"\n    border-color: purple;\n  "})),Wj=b.a.img(wj||(wj=Object(f.a)(["\n  height: 30em;\n  width: auto;\n  background-color: #ccc;\n  border: 0.2em solid black;\n"]))),Nj=b.a.div(Sj||(Sj=Object(f.a)(["\n  flex-direction: row;\n  max-width: 25em;\n\n  & > div {\n    font-size: 0.8em;\n    padding: 0.4em;\n    margin: 0.4em;\n    background-color: var(--darktext);\n    color: var(--backtext);\n  }\n"])));function Uj(e){return{4:"<",5:"",6:">"}[e[0]]+{a:"L",b:"H",c:"S"}[e[1]]}var qj=function(e){var t=e.fighter,n=e.id,a=e.seq,r=Object.keys(t.input).sort().filter((function(e){return t.input[e]===a.seqid})),i=Object.values(t.attacks).filter((function(e){return e.frames.some((function(e){var t=Vt([e.cancel.onWhiff,e.cancel.onBlock,e.cancel.onHitAirborne,e.cancel.onHitGrounded,e.cancel.onHitTumbling].map((function(e){return Object.values(e)})));return t.some((function(e){return e===a.seqid}))}))})).map((function(e){return e.displayName})),o=a.frames;return a.seqid===F.Tumbling&&(o=o.slice(0,5)),Object(ac.jsxs)(Ej,{id:n,children:[Object(ac.jsx)(_j,{children:a.displayName}),r.length>0&&Object(ac.jsxs)("h4",{children:["input: ",r.map(Uj).join(" / ")]}),i.length>0&&Object(ac.jsxs)("h4",{children:["cancels from: ",i.join(" / ")]}),Object(ac.jsx)(Fj,{children:o.map((function(e,t){var n,r=null!==(n=e.imageSrc)&&void 0!==n?n:e.behindSrc,i=r?mi.loadSprite(r,!0).imageUrl:"";return Object(ac.jsxs)(Lj,{children:[Object(ac.jsxs)(Gj,{children:[" ",e.duration," frames "]}),Object(ac.jsx)("div",{children:i?Object(ac.jsx)("a",{href:i,target:"_blank",rel:"noopener noreferrer",children:Object(ac.jsx)(zj,{src:i,alt:"sprite",hasAttack:!!e.attack,copyAttack:!!e.copyPrevAttack})}):"(no image)"}),Object(ac.jsxs)(Nj,{children:[!!e.sound&&Object(ac.jsxs)("div",{children:[" audio: ",e.sound," "]}),!!e.particle&&Object(ac.jsxs)("div",{children:[" particle: ",e.particle.seqid," "]}),!!e.attack&&Object(ac.jsx)("div",{children:" attacking "}),!!e.attack&&Object(ac.jsxs)("div",{children:[" onHit: ",e.attack.onHit," "]}),!!e.attack&&Object(ac.jsxs)("div",{children:[" onBlock: ",e.attack.onBlock," "]}),!!e.copyPrevAttack&&Object(ac.jsx)("div",{children:" continue attacking "}),!!e.projectileId&&Object(ac.jsx)("div",{children:" shoots a fireball "}),!!e.onParry&&Object(ac.jsx)("div",{children:" parrying "}),e.effects.map((function(e){return Object(ac.jsxs)("div",{children:[" effect: ",e," "]},a.seqid+t+e)})),e.armor&&Object(ac.jsx)("div",{children:" has armor "}),e.armorVsAirborne&&Object(ac.jsx)("div",{children:" armor vs airborne "}),e.armorVsGrounded&&Object(ac.jsx)("div",{children:" armor vs grounded "}),e.invulnVsProjectile&&Object(ac.jsx)("div",{children:" goes through fireballs "}),e.isAirborne&&Object(ac.jsx)("div",{children:" is airborne "}),e.slide<0&&Object(ac.jsx)("div",{children:" moves backward "}),e.slide>0&&Object(ac.jsx)("div",{children:" moves forward "}),e.hover<0&&Object(ac.jsx)("div",{children:" moves up "}),e.hover>0&&Object(ac.jsx)("div",{children:" moves down "})]})]},"frame-"+t)}))})]})},Vj=b.a.div(Cj||(Cj=Object(f.a)([""]))),Yj=["standing","walkForward","walkBackward","blockstun","hitstun","throwstun","tumbling","exhausted","downed","throwStart","throwHit","rapid","burst","falling","landing"],Jj=function(e){var t=e.fighter,n=t.stats,a=t.actions,r=t.attacks,i=t.previewUrl,o=n.name,s=ni.FighterDataAllColorsWithBosses.filter((function(e){return n.code===e.stats.code}));return Object(ac.jsxs)(Vj,{children:[Object(ac.jsx)("div",{children:s.map((function(t,a){return Object(ac.jsxs)(Oc,{selected:n.id===t.stats.id,onClick:function(){return e.onColorChange(t)},children:["Color #",a+1]},"color-"+a)}))}),Object(ac.jsx)("a",{href:i,target:"_blank",rel:"noopener noreferrer",children:Object(ac.jsx)(Wj,{src:i,alt:"preview"})}),Yj.map((function(e){return a[e]})).map((function(t,n){return Object(ac.jsx)(qj,{fighter:e.fighter,seq:t,id:o+":"+t.seqid},"action-"+n)})),Et(Object.values(r),(function(e){return e.displayIndex})).map((function(t,n){return Object(ac.jsx)(qj,{fighter:e.fighter,seq:t,id:o+":"+t.seqid},"attack-"+n)}))]})},Kj=b.a.div(Aj||(Aj=Object(f.a)(["\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: flex-start;\n  flex-wrap: wrap;\n"]))),Qj=b.a.table(Tj||(Tj=Object(f.a)(["\n  border-collapse: collapse;\n  margin: 1em;\n  & th {\n    font-size: 1.2em;\n  }\n  & td, & th {\n    border: 1px solid #ccc;\n    max-width: 16em;\n    padding: 0.3em;\n    box-sizing: border-box;\n  }\n  button {\n    font-size: 0.8em;\n  }\n"]))),Zj=function(){function e(e,t){var n=e.load(),a=n.url.includes("/sfx/")?n.url.split("/sfx/")[1].split("?v")[0]:n.url;return Object(ac.jsx)("button",{onClick:function(){return n.play()},children:a},t)}var t,n=Object.values(Se);return Object(ac.jsxs)("div",{children:[Object(ac.jsx)("h3",{children:"Global Sounds"}),Object(ac.jsx)(Kj,{children:(t=["Menu","Stun","Music","Round","Match","UI","Tutorial","Carb","Meat","Spice"],t.map((function(e){return{category:e,ids:n.filter((function(t){return t.includes("_".concat(e,"_"))}))}}))).map((function(t){return Object(ac.jsxs)("div",{children:[Object(ac.jsx)("h3",{children:t.category}),Object(ac.jsxs)(Qj,{children:[Object(ac.jsx)("thead",{children:Object(ac.jsxs)("tr",{children:[Object(ac.jsx)("th",{children:"SFX ID"}),Object(ac.jsx)("th",{children:"Possible sounds"})]})}),Object(ac.jsx)("tbody",{children:t.ids.map((function(t){return function(t,n){return Object(ac.jsxs)("tr",{children:[Object(ac.jsx)("td",{children:Object(ac.jsx)("button",{onClick:function(){return n.play(Math.floor(st.now()))},children:t})}),Object(ac.jsx)("td",{children:n.clips.map(e)})]},t)}(t,Pi.sfx(t))}))})]})]},t.category)}))})]})},Xj=function(){return Object(ac.jsx)("div",{children:ni.DefaultStages.map((function(e){var t=gi.loadBackgroundImage(e.backgroundSrc,ce.Low).imageUrl;return Object(ac.jsxs)("div",{children:[Object(ac.jsx)("h1",{children:e.name}),Object(ac.jsx)("a",{href:t,target:"_blank",rel:"noopener noreferrer",children:Object(ac.jsx)("img",{style:{height:"20em",width:"auto"},alt:e.name,src:t})})]},e.name)}))})},$j=function(){var e=Et(Object.values(Jr),(function(e){return e.seqid})),t=Et(ni.AllParticles,(function(e){return e.seqid}));return Object(ac.jsxs)("div",{children:[e.map((function(e){return Object(ac.jsx)(qj,{fighter:ni.Characters.Beef.original,seq:e,id:e.seqid},e.seqid)})),t.map((function(e){return Object(ac.jsx)(qj,{fighter:ni.Characters.Beef.original,seq:e,id:e.seqid},e.seqid)}))]})},ey=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).chars=ni.FighterDataOriginal,e.state={sounds:!0,stages:!1,effects:!1,selected:e.chars[0],zoom:1},e}return Object(h.a)(n,[{key:"componentDidMount",value:function(){oh.set(rh.DebugRef),vv.ArtRef&&setTimeout((function(){return Si.stopAll()}),1e3)}},{key:"zoomIn",value:function(){this.setState({zoom:1.5*this.state.zoom})}},{key:"zoomOut",value:function(){this.setState({zoom:this.state.zoom/1.5})}},{key:"zoomReset",value:function(){this.setState({zoom:1})}},{key:"render",value:function(){var e=this;Si.stopAll();var t=this.chars,a=this.state,r=a.sounds,i=a.stages,o=a.effects,s=a.selected,c=a.zoom,u=s.stats,l=s.actions,h=s.attacks;return Object(ac.jsxs)(Pj,{zoom:c,children:[Object(ac.jsx)(Dj,{children:n.Title}),r&&Object(ac.jsx)(Zj,{}),i&&Object(ac.jsx)(Xj,{}),o&&Object(ac.jsx)($j,{}),!r&&!i&&!o&&Object(ac.jsx)(Jj,{fighter:s,onColorChange:function(t){return e.setState({selected:t})}}),Object(ac.jsxs)(Rj,{children:["Zoom",Object(ac.jsx)(Oc,{onClick:function(){return e.zoomIn()},children:"+"}),Object(ac.jsx)(Oc,{onClick:function(){return e.zoomOut()},children:"-"}),Object(ac.jsx)(Oc,{onClick:function(){return e.zoomReset()},children:"Reset"}),"|||",Object(ac.jsx)(Oc,{onClick:function(){return e.setState({sounds:!0,stages:!1,effects:!1})},selected:r,children:"SFX"}),Object(ac.jsx)(Oc,{onClick:function(){return e.setState({sounds:!1,stages:!0,effects:!1})},selected:i,children:"Stages"}),Object(ac.jsx)(Oc,{onClick:function(){return e.setState({sounds:!1,stages:!1,effects:!0})},selected:o,children:"Effects"}),t.map((function(t,n){return Object(ac.jsx)(Oc,{onClick:function(){return e.setState({sounds:!1,stages:!1,effects:!1,selected:t})},selected:!r&&!i&&!o&&t.stats.code===u.code,children:t.stats.name},"char-"+n)})),"|||",Object(ac.jsx)(Oc,{onClick:function(){return Mj.animateScroll.scrollToTop()},children:"Scroll To Top"}),Object(ac.jsx)(wc,{onClick:this.props.onExit})]}),!r&&!i&&!o&&Object(ac.jsxs)(Ij,{children:[Object(ac.jsx)(Hj,{children:Yj.map((function(e){return l[e]})).map((function(e,t){return Object(ac.jsx)(Bj,{children:Object(ac.jsx)(Mj.Link,{to:u.name+":"+e.seqid,smooth:!0,offset:-100,children:e.displayName})},"link-action-"+t)}))}),Object(ac.jsx)(Hj,{children:Et(h,(function(e){return e.displayIndex})).map((function(e,t){return Object(ac.jsx)(Bj,{children:Object(ac.jsx)(Mj.Link,{to:u.name+":"+e.seqid,smooth:!0,offset:-100,children:e.displayName})},"link-attack-"+t)}))})]})]})}}]),n}(i.a.Component);ey.Title="Debug Reference";var ty,ny,ay,ry,iy='\nTOUGH LOVE ARENA END USER LICENSE AGREEMENT\n\nThis document represents the End User License Agreement (the "Agreement"), a legal contract governing the terms of your relationship with this website https://toughlovearena.com (the "Website"), containing the game Tough Love Arena (the "Game"), and the developer of the Website and the Game, Michael Paul Weeks (the "Developer"). You may access and use the Website and the Game only if you agree to the terms and conditions set forth below. PLEASE READ THE TERMS OF THIS AGREEMENT CAREFULLY. This Agreement was last updated on October 18, 2021 with updates regarding modifications, user license, and copyright concerns.\n\nIF YOU AGREE TO BE BOUND BY THE TERMS OF THIS AGREEMENT, PLEASE CLICK ON THE BOX ON THIS PAGE LABELED "I AGREE." IF YOU DO NOT AGREE TO THE TERMS OF THIS AGREEMENT, LEAVE THIS WEBSITE WITHOUT USING IT OR THE GAME.\n\nAccess to and use of the Website and the Game is at the permission of the Developer and only for users who accept this Agreement. The Developer may grant, withhold, or revoke approval of your access and use of the Website and the Game at any time and for any reason. If the Developer allows you to use the Website and the Game, the Developer may also allow you to sign in with an email address and create or purchase a user identification name (the "User ID").\n\n1.\tOWNERSHIP.  The Developer owns and retains all rights in and to the Website, the Game, and all copyrights and other intellectual property rights therein. This Agreement does not transfer to you any title to or any proprietary or intellectual property rights in or to the Website, the Game, or any updates or derivative works thereto, except as expressly granted in this Agreement.\n\n2.\tGRANT OF LICENSE.  The Developer hereby grants to you a nonexclusive, nonassignable, nonsublicenseable license for you to access and use the Website and the Game and any guides, specifications, and other related documentation available online, subject to the terms and conditions of this Agreement.\n\n3.\tMODIFICATIONS.  You may use, copy, or modify the Game, its files, and its underlying code in whole or in part, including making mods of the Game, for any noncommercial reason, provided that no such use or modification alters or interferes in any way with any aspect of the Website. Any reproduction, distribution, or modification of the Game must include a full and complete copy of this Agreement and an unedited copy of the Website\'s About page in which the Developer and authors are credited. You may use, copy, or modify the audiovisual work in the Game in whole or in part for the exclusive purposes of playing it and offering it to be played in competitions and creating and transmitting online video content of it in industry-standard and community-standard ways, including for both noncommercial and commercial reasons. These rights are revocable by the Developer at any time and for any reason and the Developer reserves the right to prevent and take down any modifications or other uses of the Game at any time and for any reason.\nIn addition, you hereby grant to the Developer a nonexclusive, assignable, sublicensable, perpetual, worldwide, royalty-free license to use any modifications you make or supply to the Game for the purposes of promoting, advertising, and marketing the Website, the Game, and the Developer.\n\n4.\tACCOUNTS.  If you sign up on the Website and the Game by providing an email address, or if you create or purchase a User ID, you agree to take all reasonable steps to safeguard such email address or User ID so as to ensure that no unauthorized person will have or obtain access to them or make any unauthorized use of them with respect to the Website and the Game. If you become aware of any unauthorized access or use of the Website, the Game, your provided email address, or your User ID, you must promptly report such information to the Developer and take any further steps reasonably requested by the Developer to prevent such unauthorized access or use.\n\nThe Developer reserves the right to ban any user and remove and revoke any User ID for any actually or potentially abusive or harmful behavior or material as judged by the sole discretion of the Developer, including but not limited to using an abusive or objectionable email address or User ID, disconnecting from the Game too frequently, or misusing or abusing the Website or the Game network.\n\nAny payments relating to your use of the Website, the Game, and any User ID will be nonrefundable. Fees will be exclusive of any taxes or duties payable in the jurisdiction where the payment is either made or received.\n\n5.\tPRIVACY.  The Website may use cookies to track and collect your IP address, domain server, web browser, and operating system. This is anonymous information that does not personally identify you but that may help the Developer improve the Website and the Game, customize content specific to your interests, and store your provided email address and User ID, among other uses. Other than any email address you may provide, the Developer will not store, sell, or make any other use of any information that may personally identify you, such as your real name, mailing address or zip code, credit card number or other financial data, or age, income, or other demographic data.\n\n6.\tCOPPA PROTECTION.  If you are under 13 years of age, you must receive explicit permission from your parent or guardian before accessing and using the Website and the Game. If you are under 13 years of age and wish to provide an email address or sign up for a User ID, the Developer will collect and store your email address and User ID in accordance with the provisions of the Children\u2019s Online Privacy Protection Act (\u201cCOPPA\u201d), which stipulates that any parents or legal guardians of minors under 13 years of age have the option to consent to or reject the collection and use of such minors\u2019 personal information. If your parent or legal guardian asks that the Developer make no use of or delete any storage of and reference to your email address and User ID, the Developer shall abide by that request. Your parent or legal guardian must agree to all other terms contained in this Agreement, including on your behalf, and must bind themselves and you to the terms of this Agreement. This notice and consent shall constitute a waiver of any right, issue, complaint, or other action arising under COPPA or other laws or regulations intending to shield the privacy of minors.\n\n7.\tCOPYRIGHT ISSUES.  The Developer has in place certain legally mandated procedures regarding allegations of copyright infringement occurring on or with the Website or Game. If you are found to have infringed the rights of the Developer or of any third party or otherwise violated any intellectual property law, your access to the Website and Game and your User ID will be suspended immediately and may be terminated. The Developer\'s policy is to investigate any allegations of copyright infringement brought to its attention. If you have evidence, know, or have a good faith belief that your rights or the rights of anyone else have been violated and you want the Developer to delete, edit, or disable the material in question, you must provide the Developer with all of the following information: (a) a physical or electronic signature of a person authorized to act on behalf of the owner of the exclusive right that is allegedly infringed; (b) identification of the copyrighted work claimed to have been infringed, or, if multiple copyrighted works are covered by a single notification, a representative list of such works; (c) identification of the material that is claimed to be infringed or to be the subject of infringing activity and that is to be removed or access to which is to be disabled, and information reasonably sufficient to permit the Developer to locate the material; (d) information reasonably sufficient to permit the Developer to contact you, such as an address, telephone number, and if available, an electronic mail address at which you may be contacted; (e) a statement that you have a good faith belief that use of the material in the manner complained of is not authorized by the copyright owner, its agent, or the law; and (f) a statement that the information in the notification is accurate, and under penalty of perjury, that you are authorized to act on behalf of the owner of an exclusive right that is allegedly infringed.\n\nFor this notification to be effective, you must provide it to the Developer\'s designated agent at:\n\nPaul Weeks, Lead Developer\nPhone: (929) 277-8311\nEmail: toughlovearena.agent@gmail.com\n\n8.\tTERM AND TERMINATION.  The license granted to you in Section 2 of this Agreement will commence on the date you first agree to this Agreement and will be effective until terminated. The Developer may terminate this license at any time and for any reason. This license will terminate automatically upon your failure to comply with any part of this Agreement. In addition, this Agreement may be terminated by the Developer at any time and for any reason and will automatically terminate upon your failure to comply with any part of this Agreement.\n\n9.\tCONFIDENTIALITY.  You agree that you shall not disclose to any third party any technical, product, business, or other information related to the Website or the Game that the Developer may identify as confidential (the "Confidential Information") without the prior written consent of the Developer. You shall maintain the confidentiality of all Confidential Information and shall not use it for any purpose other than any performance authorized under this Agreement.\n\nNotwithstanding the foregoing, Confidential Information does not include information that you can demonstrate was publicly available at the time of disclosure or later became publicly available through no act or omission by you, was in your possession before disclosure by the Developer, or was disclosed to you by a third party not in violation of any obligations of confidentiality to the Developer or to any third party.\n\n10.\tLIMITATION OF LIABILITY.  You are not entitled to receive any damages from the Developer for any cause relating to this Agreement, your use of the Website and the Game, any reproduction or modification of the Game, any services provided by the Developer under this Agreement, or any services provided by any third party in connection with your use of the Website or Game. In addition, in no event shall you be entitled to obtain any injunctive relief or otherwise enjoin, restrain, or interfere with the Developer or with the operation, development, or performance of the Website, the Game, and any related products and services.\n\nIN NO EVENT SHALL THE DEVELOPER BE LIABLE TO YOU FOR ANY DAMAGES WHATSOEVER ARISING OUT OF YOUR USE OF OR INABILITY TO USE THE WEBSITE AND THE GAME. IN NO EVENT SHALL THE DEVELOPER BE LIABLE FOR ANY SPECIAL, INDIRECT, INCIDENTAL, CONSEQUENTIAL, OR OTHER DAMAGES FOR LOSS OF DATA, LOSS OF PROFITS, OR LOST BUSINESS OPPORTUNITIES, REGARDLESS OF THE LEGAL THEORY UNDER WHICH SUCH DAMAGES ARE SOUGHT AND EVEN IF ADVISED IN ADVANCE OF THE POSSIBILITY OF SUCH DAMAGES. AS SOME STATES DO NOT ALLOW THE LIMITATION OR EXCLUSION OF LIABILITY FOR INCIDENTAL OR CONSEQUENTIAL DAMAGES, THE ABOVE LIMITATION OR EXCLUSION MAY NOT APPLY TO YOU.\n\n11.\tLIMITED WARRANTY AND DISCLAIMER.  TO THE MAXIMUM EXTENT PERMITTED BY LAW, THE DEVELOPER EXPRESSLY DISCLAIMS ANY AND ALL WARRANTIES, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE, AS WELL AS ANY WARRANTIES ALLEGED TO HAVE ARISEN FROM CUSTOM, USAGE, OR THE COURSE OF DEALING BETWEEN THE PARTIES. THE DEVELOPER DOES NOT WARRANT THAT THE FUNCTIONS CONTAINED IN THE WEBSITE AND THE GAME WILL MEET YOUR REQUIREMENTS OR THAT THE OPERATION OF THE WEBSITE AND THE GAME WILL BE UNINTERRUPTED OR ERROR-FREE. IN ADDITION, THE DEVELOPER DOES NOT WARRANT OR GUARANTEE THAT YOU WILL BE ABLE TO ACCESS THE WEBSITE AND THE GAME AT ALL TIMES. YOU UNDERSTAND AND ACKNOWLEDGE THAT INTERNET CONGESTION, OUTAGES, MAINTENANCE, DOWNTIME, AND OTHER INTERRUPTIONS MAY INTERFERE AT TIMES WITH YOUR ABILITY TO ACCESS THE WEBSITE AND THE GAME.\n\n12.\tGOVERNING LAW.  This Agreement shall in all respects be governed by and be construed in accordance with the laws of the state of New York, without regard to its conflict of laws provisions.\n\n13.\tFORCE MAJEURE.  If the performance of the Developer under this Agreement is prevented, hindered, or otherwise made impractical by reason of natural disaster, strike, war, civil unrest, zombie apocalypse, ongoing effects of the COVID-19 pandemic or any similarly severe future pandemic, acts or omissions of government, or any other cause beyond the control of the Developer, then the Developer shall be excused from performance to the extent and so long as the Developer is prevented, hindered, or delayed by such event(s).\n\n14.\tSEVERABILITY.  If any one or more of the provisions contained in this Agreement is held for any reason to be invalid, illegal, or unenforceable in any respect, then such invalidity, illegality, or unenforceability shall not affect any other provision of this Agreement, to the maximum extent permitted by law.\n\n15.\tNO ASSIGNMENT.  You may not assign this Agreement or any of the rights granted to you by the Developer hereunder in whole or in part without the prior written consent of the Developer, and any attempt by you to do so otherwise shall be void. This Agreement is binding on and shall iure to the benefit of the parties and their respective successors and permitted assigns.\n\n16.\tACKNOWLEDGMENT AND EXCLUSIVITY.  YOU ACKNOWLEDGE THAT YOU HAVE READ THIS AGREEMENT, UNDERSTAND IT, AND AGREE TO BE BOUND BY ITS TERMS AND CONDITIONS. YOU FURTHER AGREE THAT IT IS THE COMPLETE AND EXCLUSIVE STATEMENT OF THE AGREEMENT BETWEEN YOU AND THE DEVELOPER AND THAT IT SUPERSEDES ANY ORAL OR WRITTEN PROPOSAL, PRIOR AGREEMENT, UNDERSTANDING, OR ANY OTHER COMMUNICATION BETWEEN YOU AND THE DEVELOPER RELATING TO THE SUBJECT MATTER OF THIS AGREEMENT. THE DEVELOPER MAY CHANGE, ALTER, OR MODIFY THIS AGREEMENT AT ANY TIME.\n'.split("\n").map((function(e){return e.trim()})).filter((function(e){return e.length>0})),oy=Object(b.a)(Xv)(ty||(ty=Object(f.a)(["\n  padding: 2em 8em;\n"]))),sy=Object(b.a)(ek)(ny||(ny=Object(f.a)(["\n  margin-top: 0.5em;\n  margin-left: 0.5em;\n  margin-right: 0.5em;\n\n  ","\n"])),(function(e){return e.isDisabled?"\n    background-color: grey;\n    color: black;\n\n    &:hover {\n      cursor: not-allowed !important;\n      background-color: grey;\n      color: black;\n    }\n  ":""})),cy=b.a.div(ay||(ay=Object(f.a)(["\n  /* scrolling */\n  overflow-x: hidden;\n  overflow-y: auto;\n\n  text-align: left;\n  color: white;\n  font-size: 0.8em;\n  border: 0.2vh solid var(--heart);\n  border-style: double;\n\n  & > div {\n    margin: 1em;\n  }\n"]))),uy=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).prompt="\n    Please read and agree to the following End-User License Agreement.\n    If you are under 13 years of age, get your parent or legal guardian to read and agree to it as well.\n  ",e.state={canConfirm:!1},e.onProp=function(t){t===te.attack1&&e.continue()},e.onScroll=function(t){var n=t.currentTarget,a=n.scrollTop,r=n.offsetHeight,i=n.scrollHeight;e.setState({canConfirm:e.state.canConfirm||a+r>i})},e}return Object(h.a)(n,[{key:"continue",value:function(){Pi.Menu.Forward.play(),this.props.onConfirm?this.props.onConfirm():this.props.onExit()}},{key:"retreat",value:function(){Pi.Menu.Forward.play(),this.props.onExit()}},{key:"render",value:function(){var e=this;return Object(ac.jsxs)(yc,{src:gi.loadBackgroundImage(this.props.bgStage.backgroundSrc).imageUrl,children:[Object(ac.jsx)(jc,{children:Object(ac.jsxs)(oy,{children:[Object(ac.jsx)($v,{}),Object(ac.jsx)("p",{children:this.prompt}),Object(ac.jsx)(cy,{onScroll:this.onScroll,children:iy.map((function(e,t){return Object(ac.jsx)("div",{children:e},t)}))}),Object(ac.jsxs)("div",{children:[Object(ac.jsx)("br",{}),this.props.onConfirm&&Object(ac.jsx)(sy,{isDisabled:!this.state.canConfirm,onClick:function(){return e.state.canConfirm&&e.continue()},children:"\u2705 I AGREE"}),Object(ac.jsx)(sy,{isDisabled:!1,onClick:function(){return e.retreat()},children:this.props.onConfirm?"\ud83d\udeab BACK":"BACK"})]})]})}),Object(ac.jsx)(Bl,{}),Object(ac.jsx)(cc,{onControllerInput:function(t,n){return e.onProp(t)},onPress:function(t){return"Backquote"===t&&e.continue()}})]})}}]),n}(i.a.Component);uy.Title="EULA";var ly=b.a.div(ry||(ry=Object(f.a)(["\n  font-size: 8vh;\n\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n\n  padding: 5vh;\n  box-sizing: border-box;\n  border-radius: 5vh;\n\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-start;\n  align-items: flex-start;\n  flex-wrap: nowrap;\n\n  color: black;\n  background-color: rgba(255, 255, 255, 0.8);\n"]))),hy=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={running:!1},e}return Object(h.a)(n,[{key:"run",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(){var t,n,a,r,i,o,s,u,l,h,d;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,uc(this,{running:!0});case 2:return t=new Date,n=5,e.next=6,ds.loadMenu();case 6:return is.drawLoading(),e.next=9,Le(0);case 9:return a={matchId:nn(),firstTo:1,roundTime:99,fighter1:ni.Characters.Noodle.original,fighter2:ni.Characters.Onion.original,stage:ni.Stages.GroceryStore},r={cpuDiff1:D.Hard,cpuDiff2:D.Hard},e.next=13,ds.loadGame(a,(function(){}));case 13:i=Ki.loadGame({canvas:is,gameConfig:a,gameMeta:r,hudInfo:{match:da.default(),scoreboard:co.empty()}}),o=new bi({game:i,gameMeta:r}),s=st.now(),u=s+1e3*n,l=0;case 18:if(!(st.now()<u)){e.next=26;break}return l++,o.step(!0),o.draw(),e.next=24,Le(0);case 24:e.next=18;break;case 26:return h=st.now(),d={started:t,seconds:n,resolution:li.Resolution.get(),frames:l,ms:h-s},e.next=30,uc(this,{data:d,running:!1});case 30:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"rerunReso",value:function(e){li.Resolution.set(e),this.run()}},{key:"render",value:function(){var e,t,a=this,r=this.state,i=r.data,o=r.running,s=li.Resolution.get();if(o)return Object(ac.jsxs)(ly,{children:["Testing ",s," graphics",Object(ac.jsx)("br",{}),"please wait a moment..."]});if(!i)return Object(ac.jsx)(Rp,{title:n.Title,infos:[{label:"Let's test your graphics by running the game as fast as possible"}],options:[{label:"Test Graphics",callback:function(){return a.run()}}],onExit:this.props.onExit});var c=Math.floor(1e3*i.frames/i.ms),u=(e={},Object(v.a)(e,ce.High,ce.High),Object(v.a)(e,ce.Medium,ce.High),Object(v.a)(e,ce.Low,ce.Medium),e)[s],l=(t={},Object(v.a)(t,ce.High,ce.Medium),Object(v.a)(t,ce.Medium,ce.Low),Object(v.a)(t,ce.Low,ce.Low),t)[s];if(c>=100){var h=[{label:"Continue",callback:this.props.onComplete}].concat(Object(k.a)(s===ce.Low?[{label:"Increase graphics and test again",callback:function(){return a.rerunReso(u)}}]:[]));return Object(ac.jsx)(Rp,{title:n.Title,infos:[{label:"Reso: ".concat(s," / FPS: ").concat(c)},{label:"Your current settings look good!"}],options:h,onExit:this.props.onExit})}return s===ce.Low?Object(ac.jsx)(Rp,{title:n.Title,infos:[{label:"Reso: ".concat(s," / FPS: ").concat(c)},{label:"Graphics cannot go lower. Try shrinking the size of your window."}],options:[{label:"Test again",callback:function(){return a.run()}}],onExit:this.props.onExit}):Object(ac.jsx)(Rp,{title:n.Title,infos:[{label:"Reso: ".concat(s," / FPS: ").concat(c)},{label:"FPS should be 100+ in case of slowdown. You can lower the graphics or shrink your window and test again."}],options:[{label:"Lower graphics and test again",callback:function(){return a.rerunReso(l)}},{label:"Test again",callback:function(){return a.run()}}],onExit:this.props.onExit})}}]),n}(i.a.Component);hy.Title="Graphics Test";var dy=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"render",value:function(){var e={baseGameMeta:{skipReady:!this.props.modFighter,isTrainingMode:!0,isModTraining:!!this.props.modFighter,cpuDiff2:D.Hard},title:"Training Mode",label1:"Human",label2:"Dummy",modFighter:this.props.modFighter};return Object(ac.jsx)(gv,Object(g.a)(Object(g.a)({},this.props),{},{settings:e}))}}]),n}(i.a.Component);dy.Title="Training Mode";var py,fy,by,gy,my,vy,ky,jy,yy,xy,Oy,wy,Sy=n(71),Cy=n.n(Sy),Ay=(n(363),n(186),n(187),n(364),n(365),"\nWelcome to the TLA mod tool!\n\nCurrent modding abilities are primitive. Using this tool, you can:\n- Easily edit existing characters\n- Test your changes out in Training Mode (click Run Test in the top right)\n  - Press Escape or click on the timer to return here\n- Read basic documentation about how the code works\n- Easily copy your changes out of the tool to save in an offline document\n  - Quickly copy/paste in previous mod work and resume experimenting\n\nHowever, you cannot currently do any of the following:\n- Play your mods outside of Training Mode\n- Choose your opponent character in Training Mode\n- Reference artwork outside of the character's available sprites\n- Upload new artwork\n\nSome handy keyboard shortcuts:\n- Ctrl + U: Upload a zip file (or legacy/incomplete Javascript file)\n- Ctrl + S: Download as a zip file\n- Ctrl + B: Try to load your config and see errors in the Output tab\n- Ctrl + Enter: Run Test in Training Mode\nNOTE: You must have the right editor focused\nNOTE: If using a Mac, replace Ctrl with Command\n\nWe are working to improve this tool!\nEventually, you will be able to upload an original character!\nIn the meantime, feel free to familiarize yourself with the engine ;)\n\nWARNING\n- The TLA engine will continue to change as we develop the beta\n- For security reasons, you can no longer load older mods using the .js file format in Versus or Lobbies\n  - However, you can upload those old mod files here and download the new and improved .zip format!\n- Your mods might be made invalid / incompatible at any time\n- You have been warned. Sorry!\n\nPlease keep an eye on the changelog for future development <3\n".trim()),Ty='\ninterface TypeExplanation {\n  // number = any number\n  example?: number;\n\n  // string = any readable text within quotes. eg "sweep_0001"\n  example: string;\n\n  // boolean = must be true or false (all lowercase)\n  example: boolean;\n\n  // any property with a question mark at the end of the name is optional\n  // if not specified, it picks a sensible default value\n  example?: number;\n\n  // any capitalized type is a custom type that is documented below\n  example: InputData;\n}\n\nexport interface FighterConfig {\n  engine: '.concat(ba,"; // DO NOT MANUALLY CHANGE THIS OR YOUR MOD MAY BREAK\n  name: string;\n  modAuthor?: string;\n  modDescription?: string;\n  modVersion?: string; // if present, is added to the filename and displayed during mod selection\n  setup: FighterSetupConfig;\n  actions: ActionConfig;\n  attacks: AttackLookup;\n  projectiles: ProjectileLookup;\n  installs: InstallLookup;\n}\nexport interface CommandConfig {\n  throw: string[];\n  rapid: string[];\n  burst: string[];\n  reject: string[];\n}\nexport interface FighterSetupConfig {\n  code: CharacterCode; // ignore this, as it is overwritten by the mod loader\n  imagePrefix: string;\n  winSound?: SFX;\n  flavors: FlavorConfig[];\n  stats: FighterStatsConfig;\n  defaults: DefaultConfig;\n  input: InputData;\n  commands: CommandConfig;\n  introSequence: IntroSequenceConfig;\n}\nexport interface FlavorConfig {\n  fid: string; // value does not matter except that it must be unique\n  name: string;\n  folder: string;\n  theme?: string; // unlocked + moved to 1st when the game has a matching theme\n  requireCode?: string;\n  requireMMR?: number;\n  requirePremium?: boolean;\n  unlockSteam?: boolean;\n}\nexport interface ActionConfig {\n  rejection: SequenceConfig;\n  rapid: SequenceConfig;\n  burst: SequenceConfig;\n  downed: SequenceConfig;\n  standing: SequenceConfig;\n  blockstun: SequenceConfig;\n  hitstun: SequenceConfig;\n  throwstun: SequenceConfig;\n  tumbling: SequenceConfig;\n  exhausted: SequenceConfig;\n  falling: SequenceConfig;\n  landing: SequenceConfig;\n  walkForward: SequenceConfig;\n  walkBackward: SequenceConfig;\n  throwStart: SequenceConfig;\n  throwHit: SequenceConfig;\n  poseWin: string[]; // list of sprites, animated with duration: 5, holds on the last one\n  poseLose: string[]; // list of sprites, animated with duration: 5, holds on the last one\n}\nexport type AttackLookup = {\n  [id in SequenceId]?: AttackSequenceConfig;\n}\nexport type ProjectileLookup = {\n  [id in ProjectileId]?: ProjectileConfig;\n}\nexport type InstallLookup = {\n  [id in InstallId]?: InstallConfig;\n}\nexport interface InstallConfig {\n  duration?: number; // if set, duration in frames before install ends\n  speedForward?: number; // if set, overrides FighterStatsConfig\n  speedBackward?: number; // if set, override FighterStatsConfig\n  healthGainPer15?: number; // can be negative, but won't kill\n  meterGainPer15?: number;\n  afterimages?: AfterimageConfig[]; // if set, overrides DefaultConfig\n  input?: InputData; // if set, overrides FighterSetupConfig\n  sequenceOverride?: {\n    [id in SequenceId]?: SequenceId; // replaces first sequence with second\n  };\n}\n\n// setup\n\nexport interface FighterStatsConfig {\n  speedForward: number;\n  speedBackward: number;\n  maxHealth?: number;\n  disableMeter?: boolean;\n  isBoss?: boolean; // ignore this, the mod loader will set it to false\n}\nexport interface DefaultConfig {\n  drawBox: BoxData;\n  pushboxes: BoxData[];\n  strikeHurtboxes: BoxData[];\n  throwHurtboxes: BoxData[];\n  afterimages?: AfterimageConfig[];\n}\n\n// action & attack sequences\n\nexport interface ProjectileConfig {\n  displayName: string;\n  displayIndex: number;\n  loop: boolean;\n  offset: Point;\n  dieOnConsume: boolean;\n  dieOnFighterHit?: boolean;\n  hideImpactOnVoid?: boolean;\n  sequence: SequenceConfig;\n  onBlock?: SequenceConfig; // followup animation to play when blocked or voided\n  onHit?: SequenceConfig; // followup animation to play when projectile makes contact\n}\nexport interface AttackSequenceConfig extends SequenceConfig {\n  displayName: string; // these display values are for the Frame Data menu\n  displayIndex: number;\n  displayInput: string;\n  displayCancelsFrom?: string; // adds the startup of the listed move (e.g. for LemonFake)\n}\nexport interface NamedSequenceConfig extends SequenceConfig {\n  seqid: SequenceId;\n}\nexport interface SequenceConfig {\n  frames: FrameConfig[];\n  meterCost?: number; // cannot start or cancel into this Sequence without paying meter\n  requireInstall?: InstallId; // similar to meterCost\n  canBlock?: boolean;\n  isIdle?: boolean;\n  isInStun?: boolean;\n  isDowned?: boolean;\n  forceRecovery?: boolean;\n  cannotCounterHit?: boolean;\n  cannotBePushed?: boolean;\n  slowPushback?: boolean;\n  afterimages?: AfterimageConfig[];\n  isWalkingForward?: boolean;\n  next?: SequenceId;\n  onLand?: SequenceId; // if you pass the floor, sets position to the floor and cancels to this Sequence\n  keepFacingRight?: boolean;\n  palindromeAnimation?: boolean; // only used for hitstun/blockstun\n  projectileLimit?: number; // if you have this many (or more) projectiles out, you cannot start this Sequence\n  isAirborne?: boolean;\n  attack?: AttackConfig;\n  drawBox?: BoxData;\n  pushboxes?: BoxData[];\n  hurtboxes?: BoxData[]; // use if you want the same hurtboxes for strike and throw\n  strikeHurtboxes?: BoxData[]; // overrides hurtboxes\n  throwHurtboxes?: BoxData[]; // overrides hurtboxes\n}\n\n// frames\n\nexport interface FrameConfig {\n  sound?: SFX;\n  sprite?: string;\n  behind?: string;\n  mirrorImage?: boolean;\n  particle?: NamedSequenceConfig;\n  duration: number;\n  effects?: ScreenEffect[];\n  freezeOther?: boolean;\n  isAirborne?: boolean;\n  armor?: boolean;\n  armorVsAirborne?: boolean;\n  armorVsGrounded?: boolean;\n  invulnVsAirborne?: boolean;\n  invulnVsProjectile?: boolean;\n  hover?: number;\n  slide?: number;\n  storePosition?: boolean; // see FrameConfig.teleportToStoredPosition\n  eraseStoredPosition?: boolean;\n  recoverBlue?: number; // deprecated\n  cancel?: CancelConfig;\n  attack?: AttackConfig;\n  copyPrevAttack?: boolean;\n  onParry?: ParryConfig;\n  healthGain?: number; // you can use negative values to hurt yourself\n  meterGain?: number;\n  forceRecovery?: boolean;\n  cannotCounterHit?: boolean;\n  slowPushback?: boolean;\n  cannotBePushed?: boolean;\n  opacity?: number; // between 0 (invisible) and 1 (opaque), defaults to 1\n  afterimages?: AfterimageConfig[];\n  drawBox?: BoxData;\n  pushboxes?: BoxData[];\n  hurtboxes?: BoxData[]; // use if you want the same hurtboxes for strike and throw\n  strikeHurtboxes?: BoxData[]; // overrides hurtboxes\n  throwHurtboxes?: BoxData[]; // overrides hurtboxes\n  remote?: RemoteAnimationConfig;\n  projectileId?: ProjectileId;\n  updateFacingRight?: boolean;\n  teleportToOther?: boolean;\n  teleportToStoredPosition?: boolean; // see RemoteConfig.storePosition\n  allowOffStage?: boolean;\n  crossupOnOverlap?: boolean;\n  setInstall?: InstallId;\n  exitInstall?: boolean;\n  phase?: string;\n  aiIgnoreAttack?: boolean;\n  aiNextOnHit?: SequenceId;\n}\nexport interface TumbleConfig {\n  dx: number;\n  dy: number;\n  juggles: number;\n  canRelaunch?: boolean;\n  nextHitSetAngle?: boolean;\n  skipStartupAnimation?: boolean;\n}\nexport interface AttackConfig {\n  ignoreArmor?: boolean;\n  ignoreParry?: boolean;\n  unblockable?: boolean;\n  isThrowStart?: boolean;\n  sameSide?: boolean;\n  hitsAirborneOnly?: boolean;\n  hitsGroundedOnly?: boolean;\n  impactAutoCorrect?: boolean;\n  impactType?: ImpactType; // defaults to \"small\"\n  impactScale?: number;\n  hitstop?: number; // defaults to (damage / 5) but capped at 10\n  damage: number;\n  addScaling?: number; // applies to all hits\n  addScalingFirstHit?: number; // overrides addScaling for first hit\n  ignoreScaling?: boolean;\n  chip?: number;\n  blueDamage?: number; // deprecated\n  blueOnBlock?: number; // deprecated\n  blockstun?: number;\n  hitstun?: number;\n  onBlock?: number;\n  onHit?: number;\n  hitboxes: BoxData[];\n  pushback?: number;\n  isProjectile?: boolean;\n  tumble?: TumbleConfig;\n  tumbleOnAirborne?: TumbleConfig;\n  tumbleOnTumbling?: TumbleConfig;\n  cannotBurst?: boolean;\n  capture?: boolean;\n  snapTo?: {\n    x?: number;\n    y?: number;\n  };\n  snapTowards?: {\n    percent: number; // on a scale of 0 - 1, where 0 is no change and 1 is the same as snapTo\n    center: {\n      x?: number;\n      y?: number;\n    };\n  };\n  stunPhase?: string;\n  setStunPhase?: string;\n  meterGainAttackOnHit?: number;\n  meterGainAttackOnBlock?: number;\n  meterGainDefendOnHit?: number;\n  meterGainDefendOnBlock?: number;\n}\nexport interface CancelConfig {\n  duration?: number; // if not specified, uses the parent FrameConfig.duration\n  canRapid?: boolean;\n  canRapidBlock?: boolean;\n  canRapidHitAirborne?: boolean;\n  canRapidHitGrounded?: boolean;\n  canWhiffRapid?: boolean;\n  onHit?: InputData;\n  onHitAirborne?: InputData;\n  onHitGrounded?: InputData;\n  onHitTumbling?: InputData;\n  onArmor?: InputData;\n  onBlock?: InputData;\n  onWhiff?: InputData;\n  aiOnBlock?: SequenceId;\n  aiOnHit?: SequenceId;\n  aiRapidOnBlock?: boolean;\n  aiRapidOnHit?: boolean;\n}\nexport interface RemoteAnimationConfig {\n  sprite?: string;\n  mirrorImage?: boolean;\n  relativeDrawBox?: BoxData; // relative to the parent Frame's drawBox\n  offset: Point;\n  keepOnScreen?: boolean;\n  keepOnStage?: boolean; // previously known as onScreen\n  slide?: number;\n  hover?: number;\n  storePosition?: boolean; // see FrameConfig.teleportToStoredPosition\n  eraseStoredPosition?: boolean;\n}\nexport interface ParryConfig {\n  next: SequenceId;\n  onProjectile?: SequenceId;\n}\nexport interface AfterimageConfig {\n  delay: number; // number of frames to delay\n  opacity?: number; // between 0 (invisible) and 1 (opaque), defaults to 1\n  dieOnFighterHit?: boolean;\n}\nexport interface IntroSequenceConfig {\n  seqid: SequenceId;\n  offset: Point;\n}\n\n//// enums ////\n// when working with enums, use the string code on the right\n// eg: impactType: 'large',\n\nexport enum ImpactType {\n  None = 'none',\n  Small = 'small',\n  Large = 'large',\n}\nexport enum SFX {\n  Empty = 'sfx_Empty', // you can ignore this\n\n  /// announcer sfx ///\n\n  // round\n  AnnouncerRoundReady = 'afx_Round_Ready',\n  AnnouncerRoundFight = 'afx_Round_Fight',\n  AnnouncerRoundKO = 'afx_Round_KO',\n  AnnouncerRoundTime = 'afx_Round_Time',\n  AnnouncerRoundDraw = 'afx_Round_Draw',\n  AnnouncerRoundPerfect = 'afx_Round_Perfect',\n\n  // match\n  AnnouncerMatchYouLose = 'afx_Match_YouLose',\n  AnnouncerMatchWinBeef = 'afx_Match_WinBeef',\n  AnnouncerMatchWinGarlic = 'afx_Match_WinGarlic',\n  AnnouncerMatchWinNoodle = 'afx_Match_WinNoodle',\n  AnnouncerMatchWinOnion = 'afx_Match_WinOnion',\n  AnnouncerMatchWinPork = 'afx_Match_WinPork',\n  AnnouncerMatchWinRice = 'afx_Match_WinRice',\n\n  // tutorial\n  AnnouncerTutorialNice = 'afx_Tutorial_Nice',\n  AnnouncerTutorialGreatJob = 'afx_Tutorial_GreatJob',\n  AnnouncerTutorialChallengeComplete = 'afx_Tutorial_ChallengeComplete',\n\n  /// music sfx ///\n\n  MusicRoundOver = 'mfx_Music_RoundOver',\n  MusicMatchOver = 'mfx_Music_MatchOver',\n\n  /// general sfx ///\n\n  MenuForward = 'sfx_Menu_Forward',\n  MenuBackward = 'sfx_Menu_Backward',\n  MenuChange = 'sfx_Menu_Change',\n  MenuMatchFound = 'sfx_Menu_MatchFound',\n\n  StunBlock = 'sfx_Stun_Block',\n  StunHitSmall = 'sfx_Stun_HitSmall',\n  StunHitLarge = 'sfx_Stun_HitLarge',\n\n  MeterGain = 'sfx_Meter_Gain',\n  MeterRapid = 'sfx_Meter_Rapid',\n  MeterBurst = 'sfx_Meter_Burst',\n  MeterReject = 'sfx_Meter_Reject',\n\n  Blep = 'sfx_UI_Blep',\n  Bling = 'sfx_UI_Bling',\n  Love = 'sfx_UI_Love',\n\n  CarbDash = 'sfx_Carb_Dash',\n  CarbDeath = 'sfx_Carb_Death',\n  Deprecated_CarbFist = 'sfx_Carb_Fist',\n  CarbFrenzy = 'sfx_Carb_Frenzy',\n  Deprecated_CarbGrounder = 'sfx_Carb_Grounder',\n  CarbJump = 'sfx_Carb_Jump',\n  CarbPrep = 'sfx_Carb_Prep',\n  CarbThrowStart = 'sfx_Carb_ThrowStart',\n  CarbThrowHit = 'sfx_Carb_ThrowHit',\n  CarbServe = 'sfx_Carb_Serve',\n  CarbSlap = 'sfx_Carb_Slap',\n  CarbSoupBowl = 'sfx_Carb_SoupBowl',\n  CarbSwat = 'sfx_Carb_Swat',\n  CarbSwipe = 'sfx_Carb_Swipe',\n  CarbTrample = 'sfx_Carb_Trample',\n  CarbTeleport = 'sfx_Carb_Teleport',\n  CarbWhip = 'sfx_Carb_Whip',\n  CarbWhip2 = 'sfx_Carb_Whip2',\n  CarbWhip3 = 'sfx_Carb_Whip3',\n  CarbGrunt = 'sfx_Carb_Grunt',\n  CarbMisc = 'sfx_Carb_Misc',\n\n  MeatChop = 'sfx_Meat_Chop',\n  MeatDeath = 'sfx_Meat_Death',\n  MeatFlex = 'sfx_Meat_Flex',\n  MeatWin = 'sfx_Meat_Win',\n  MeatLaugh = 'sfx_Meat_Laugh',\n  MeatTaunt = 'sfx_Meat_Taunt',\n  MeatJump = 'sfx_Meat_Jump',\n  MeatThrowStart = 'sfx_Meat_ThrowStart',\n  MeatThrowHit = 'sfx_Meat_ThrowHit',\n  MeatLemon = 'sfx_Meat_Lemon',\n  MeatGutpunch = 'sfx_Meat_Gutpunch',\n  MeatPunch = 'sfx_Meat_Punch',\n  MeatUppercut1 = 'sfx_Meat_Uppercut1',\n  MeatUppercut2 = 'sfx_Meat_Uppercut2',\n  MeatSpikeSetup = 'sfx_Meat_SpikeSetup',\n  MeatSpikeHit = 'sfx_Meat_SpikeHit',\n  MeatCaberStart = 'sfx_Meat_CaberStart',\n  MeatToss = 'sfx_Meat_Toss',\n  MeatMisc = 'sfx_Meat_Misc',\n\n  SpiceFlick = 'sfx_Spice_Flick',\n  SpiceSweep = 'sfx_Spice_Sweep',\n  SpiceRoundhouse = 'sfx_Spice_Roundhouse',\n  SpiceTrip = 'sfx_Spice_Trip',\n  SpiceJump = 'sfx_Spice_Jump',\n  SpiceThrowStart = 'sfx_Spice_ThrowStart',\n  SpiceThrowHit = 'sfx_Spice_ThrowHit',\n  SpiceHopkick = 'sfx_Spice_Hopkick',\n  SpiceParry = 'sfx_Spice_Parry',\n  SpiceParryHit = 'sfx_Spice_ParryHit',\n  SpiceDash = 'sfx_Spice_Dash',\n  SpiceSneak = 'sfx_Spice_Sneak',\n  SpiceBackflip = 'sfx_Spice_Backflip',\n  SpiceDeath = 'sfx_Spice_Death',\n  SpiceMisc = 'sfx_Spice_Misc',\n};\n").split("\nexport ").join("\n").split("'").join('"').trim(),My=b.a.div(py||(py=Object(f.a)(["\n  height: 100%;\n  width: 50%;\n\n  display: flex;\n  flex-direction: column;\n  justify-content: stretch;\n  align-items: stretch;\n"]))),Py=b.a.div(fy||(fy=Object(f.a)(["\n  display: flex;\n  flex-direction: row;\n  justify-content: flex-start;\n  align-items: flex-end;\n"]))),Ry=b.a.div(by||(by=Object(f.a)(["\n  border: 0.2em solid black;\n  border-bottom: none;\n  border-radius: 1em 1em 0 0;\n  padding: 0.3em;\n  width: 6em;\n  box-sizing: border-box;\n\n  cursor: pointer;\n  color: black;\n  background-color: ",";\n"])),(function(e){return e.selected?"white":"#aaa"})),Iy="How To",By="Types",Dy="Output",Hy=[Iy,By,Dy];function Ey(e){var t,n=e.view,a=e.output,r=e.setView,i="text";if(n===Iy&&(t=Ay),n===By&&(i="typescript",t=Ty),n===Dy&&(t=a),void 0!==t)return Object(ac.jsxs)(My,{children:[Object(ac.jsx)(Py,{children:Hy.map((function(e,t){return Object(ac.jsx)(Ry,{selected:e===n,onClick:function(){return r(e)},children:e},t)}))}),Object(ac.jsx)(Cy.a,{style:{height:"100%",width:"99%"},placeholder:"Output goes here",readOnly:!0,mode:i,theme:"monokai",name:"docs",value:"\n".concat(t,"\n"),fontSize:14,showPrintMargin:!0,highlightActiveLine:!0})]});throw new Error("unsupported mod view: "+n)}var _y=b.a.div(gy||(gy=Object(f.a)(["\n  width: 100%;\n  height: 100%;\n"]))),Fy=b.a.div(my||(my=Object(f.a)(["\n  width: 100%;\n  height: 100%;\n  box-sizing: border-box;\n  padding: 1vh;\n\n  display: flex;\n  flex-direction: column;\n  justify-content: stretch;\n  align-items: stretch;\n  flex-wrap: nowrap;\n  text-align: center;\n\n  font-size: 18px;\n  color: var(--foreground);\n  background-color: var(--background);\n\n  ","\n"])),(function(e){return e.hide?"\n    display: none;\n  ":""})),Ly=b.a.div(vy||(vy=Object(f.a)(["\n  width: 100%;\n  box-sizing: border-box;\n\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  align-items: center;\n  flex-wrap: nowrap;\n\n  margin-bottom: 1em;\n  padding-right: 3em;\n  & > * {\n    margin: 0 0.5em;\n  }\n"]))),Gy=b.a.div(ky||(ky=Object(f.a)(["\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: flex-end;\n  flex-wrap: nowrap;\n"]))),zy=b.a.div(jy||(jy=Object(f.a)(["\n  flex: 1;\n\n  position: relative;\n\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n  flex-wrap: nowrap;\n"]))),Wy=b.a.div(yy||(yy=Object(f.a)(["\n  position: absolute;\n  font-size: 0.5em;\n  top: 0;\n  right: 4em;\n  color: white;\n  background-color: rgba(0,0,0,0.4);\n  padding: 0 0.5em;\n\n  & > span {\n    cursor: pointer;\n  }\n"]))),Ny=b.a.div(xy||(xy=Object(f.a)(["\n  font-size: 2em;\n"]))),Uy=b.a.div(Oy||(Oy=Object(f.a)(["\n  cursor: pointer;\n  text-decoration: underline;\n  padding: 0 0.5em;\n"]))),qy=b.a.div(wy||(wy=Object(f.a)(["\n  max-height: 50vh;\n  overflow-y: auto;\n  font-size: 0.8em;\n"]))),Vy=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).configs=Kt(Yr),e.state={tabView:Hy[0],code:"",hasChanges:!1,output:"No output yet"},e.uploadRef=i.a.createRef(),e.uploadManyRef=i.a.createRef(),e.pauseSettings=new gp((function(){return{requireHold:!0,onExitMenu:{callback:e.props.onExit}}})),e}return Object(h.a)(n,[{key:"componentDidMount",value:function(){oh.set(rh.Modding),this.pauseSettings.mount()}},{key:"componentWillUnmount",value:function(){this.pauseSettings.unmount()}},{key:"collapse",value:function(){var e=this.refs.aceEditor.editor;e.session.foldAll(void 0,void 0,2),e.session.foldAll(void 0,void 0,1),e.session.unfold(1,!1)}},{key:"expand",value:function(){var e=this.refs.aceEditor.editor;e.session.foldAll(),e.session.unfold(1,!0)}},{key:"loadPreset",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(t){return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.state.hasChanges){e.next=4;break}if(window.confirm("You will lose your current work. Proceed?")){e.next=4;break}return e.abrupt("return");case 4:return e.abrupt("return",this.loadCode(ao.configToCode(t)));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"loadFile",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(t){var n,a;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.filepath.endsWith(".zip")){e.next=6;break}return e.next=3,ao.unpackZipBlob(t.filepath,t.blob);case 3:return n=e.sent,a=n.code,e.abrupt("return",this.loadCode(a));case 6:if(!t.filepath.endsWith(".js")){e.next=8;break}return e.abrupt("return",this.loadCode(t.text));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"loadCode",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(t){return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,uc(this,{code:t,hasChanges:!1});case 2:this.collapse(),this.checkUpgrade();case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onEditorChange",value:function(e){this.setState({code:e,hasChanges:!0})}},{key:"bulkUpgrade",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(t){var n,a,r,i,o,s;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=Kt(null!==(n=this.state.bulkUpload)&&void 0!==n?n:{files:[]}),e.prev=1,!t.filepath.endsWith(".zip")){e.next=9;break}return e.next=5,ao.unpackZipBlob(t.filepath,t.blob);case 5:i=e.sent,r=i.code,e.next=14;break;case 9:if(!t.filepath.endsWith(".js")){e.next=13;break}r=t.text,e.next=14;break;case 13:throw new Error("invalid filetype");case 14:return o=ao.DANGEROUS_evalCode(r),e.next=17,ao.packMod({code:r,rawConfig:o,filename:t.filename});case 17:s=e.sent,Ts.downloadModZip(s.zip),a.files.unshift({success:!0,filepath:t.filepath}),e.next=26;break;case 22:e.prev=22,e.t0=e.catch(1),wn(e.t0),a.files.unshift({success:!1,filepath:t.filepath});case 26:return e.next=28,uc(this,{bulkUpload:a,popup:{message:Object(ac.jsxs)(ac.Fragment,{children:[Object(ac.jsx)("p",{children:"Bulk Legacy Updater Progress"}),Object(ac.jsx)(qy,{children:a.files.map((function(e){return Object(ac.jsxs)("div",{children:[e.success?"SUCCESS":"FAILURE"," - ",e.filepath]})}))})]})}});case 28:return e.next=30,Le(400);case 30:case"end":return e.stop()}}),e,this,[[1,22]])})));return function(t){return e.apply(this,arguments)}}()},{key:"checkUpgrade",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(){var t,n=this;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ao.DANGEROUS_evalCode(this.state.code);case 3:t=e.sent,e.next=12;break;case 6:return e.prev=6,e.t0=e.catch(0),wn(e.t0),e.next=11,uc(this,{popup:{message:"Warning: this file appears to have broken syntax, and cannot be played in it's current state"}});case 11:return e.abrupt("return");case 12:if(t.engine===ba){e.next=15;break}return e.next=15,uc(this,{popup:{message:Object(ac.jsxs)("div",{children:["This file is for an older engine version of Tough Love Arena.",Object(ac.jsx)("br",{}),Object(ac.jsx)("br",{}),"Would you like to update it to v",ba,' to be compatible with the current engine? You can choose to do this later by clicking "Update" in the top right.',Object(ac.jsx)("br",{}),Object(ac.jsx)("br",{}),"Note: Even if you don't update it now, your code will be forced to update when testing and saving."]}),confirm:function(){return n.performUpgrade()}}});case 15:case"end":return e.stop()}}),e,this,[[0,6]])})));return function(){return e.apply(this,arguments)}}()},{key:"performUpgrade",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(){var t,n,a;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ao.DANGEROUS_evalCode(this.state.code);case 3:t=e.sent,e.next=12;break;case 6:return e.prev=6,e.t0=e.catch(0),wn(e.t0),e.next=11,uc(this,{popup:{message:Object(ac.jsxs)("div",{children:["Could not update your code due to a syntax error.",Object(ac.jsx)("br",{}),Object(ac.jsx)("br",{}),"Please check the output for build errors, fix those, and then try again."]})}});case 11:case 16:return e.abrupt("return");case 12:if(n=ao.upgradeConfig(t),t.engine!==n.engine){e.next=17;break}return e.next=16,uc(this,{popup:{message:"You already have the latest engine version."}});case 17:return a=ao.configToCode(n),e.next=20,this.loadCode(a);case 20:return e.next=22,uc(this,{popup:{message:"Success! Updated to engine ".concat(n.engine)}});case 22:case"end":return e.stop()}}),e,this,[[0,6]])})));return function(){return e.apply(this,arguments)}}()},{key:"triggerUpload",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(){var t;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.state.hasChanges){e.next=4;break}if(window.confirm("You will lose your current work. Proceed?")){e.next=4;break}return e.abrupt("return");case 4:null===(t=this.uploadRef.current)||void 0===t||t.trigger();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"triggerBulkUpload",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(){var t=this;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,uc(this,{bulkUpload:void 0,popup:{message:Object(ac.jsxs)(ac.Fragment,{children:[Object(ac.jsx)("p",{children:"Bulk Updater"}),Object(ac.jsx)("div",{children:"You can use this tool to quickly update multiple older mod files (js OR zip). For each file, it will upload it, update the engine code, and then download the complete and updated zip, ready for sharing. Any failed updates will be listed, and will need to be debugged manually by loading them the traditional way."})]}),confirm:function(){var e;return null===(e=t.uploadManyRef.current)||void 0===e?void 0:e.trigger()}}});case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"triggerDownload",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(){var t,n;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.compile();case 2:if(!(t=e.sent)){e.next=7;break}return e.abrupt("return",Ts.downloadModZip(t.zip));case 7:return n=this.state.code,e.next=10,uc(this,{popup:{message:Object(ac.jsxs)("div",{children:["There is an error in the code, so you cannot compile it into a complete mod file. Would you like to save the source code instead?",Object(ac.jsx)("br",{}),Object(ac.jsx)("br",{}),"Note: Source code can be loaded only within this Mod manager. You will need to get the code compiling before other people can play it."]}),confirm:function(){return Ts.downloadModSource(n)}}});case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"compile",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(){var t,n,a;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,uc(this,{output:"Checking..."});case 2:return e.next=4,Le(1e3);case 4:return e.prev=4,t=this.state.code,n=ao.DANGEROUS_evalCode(t),e.next=9,ao.packMod({code:t,rawConfig:n,validate:!0});case 9:return a=e.sent,e.next=12,uc(this,{output:"Code loaded OK, no errors!"});case 12:return e.abrupt("return",a);case 15:return e.prev=15,e.t0=e.catch(4),wn(e.t0),e.next=20,uc(this,{output:e.t0.toString()});case 20:case"end":return e.stop()}}),e,this,[[4,15]])})));return function(){return e.apply(this,arguments)}}()},{key:"loadTraining",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(){var t;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.compile();case 2:(t=e.sent)?(ni.OfflineMods.push(t),this.setState({compiled:t})):this.setState({tabView:Dy});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"exitTraining",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(){var t;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=this.state.compiled)&&ni.OfflineMods.remove(t),e.next=4,uc(this,{compiled:void 0});case 4:this.pauseSettings.mount();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;Si.stopAll();var t=this.state,n=t.tabView,a=t.code,r=t.output,i=t.popup,o=t.compiled,s=[{name:"upload",bindKey:{win:"Ctrl-u",mac:"Command-u"},exec:function(){return e.triggerUpload()}},{name:"download",bindKey:{win:"Ctrl-s",mac:"Command-s"},exec:function(){return e.triggerDownload()}},{name:"compile",bindKey:{win:"Ctrl-b",mac:"Command-b"},exec:function(){return e.compile()}},{name:"runtest",bindKey:{win:"Ctrl-Enter",mac:"Command-Enter"},exec:function(){return e.loadTraining()}}];return Object(ac.jsxs)(_y,{children:[o&&Object(ac.jsx)(dy,{modFighter:o.fighter,onExit:function(){return e.exitTraining()}}),Object(ac.jsxs)(Fy,{hide:!!o,children:[Object(ac.jsxs)(Ly,{children:[Object(ac.jsx)(Ny,{children:"Tough Love Mods"}),Object(ac.jsxs)("div",{children:[Object(ac.jsx)("div",{children:"Click to Load Starting Config"}),Object(ac.jsx)(Gy,{children:this.configs.map((function(t,n){return Object(ac.jsx)(Uy,{onClick:function(){return e.loadPreset(t)},children:t.name},n)}))})]}),Object(ac.jsxs)(Gy,{children:[Object(ac.jsx)(Uy,{onClick:function(){return e.triggerBulkUpload()},children:"Bulk Update"}),Object(ac.jsx)(Uy,{onClick:function(){return e.performUpgrade()},children:"Update"}),Object(ac.jsx)(Uy,{onClick:function(){return e.triggerUpload()},children:"Load"}),Object(ac.jsx)(Uy,{onClick:function(){return e.triggerDownload()},children:"Save"}),Object(ac.jsx)(Uy,{onClick:function(){return e.loadTraining()},children:"Run Test"}),Object(ac.jsx)(Uy,{onClick:this.props.onExit,children:"Exit"})]})]}),Object(ac.jsxs)(zy,{children:[Object(ac.jsx)(Ey,{view:n,output:r,setView:function(t){return e.setState({tabView:t})}}),Object(ac.jsx)(Cy.a,{style:{height:"100%",width:"50%"},placeholder:"Click a name above to load starting config",mode:"javascript",theme:"monokai",name:"basic-code-editor",onChange:function(t){return e.onEditorChange(t)},value:a,fontSize:14,showPrintMargin:!0,showGutter:!0,highlightActiveLine:!0,ref:"aceEditor",commands:s,setOptions:{enableBasicAutocompletion:!0,enableLiveAutocompletion:!0,showLineNumbers:!0,tabSize:2}}),Object(ac.jsxs)(Wy,{children:[Object(ac.jsx)("span",{onClick:function(){return e.expand()},children:"expand"}),"\xa0 / \xa0",Object(ac.jsx)("span",{onClick:function(){return e.collapse()},children:"collapse"})]})]})]}),Object(ac.jsx)(Xp,{ref:this.uploadRef,onUpload:function(t){return e.loadFile(t)}}),Object(ac.jsx)(Xp,{ref:this.uploadManyRef,onUpload:function(t){return e.bulkUpgrade(t)},multiple:!0}),i&&Object(ac.jsx)(vb,{message:i.message,onConfirm:i.confirm,onExit:function(){return e.setState({popup:void 0})}})]})}}]),n}(i.a.Component);Vy.Title="Modding (WIP)";var Yy,Jy,Ky=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"render",value:function(){return Object(ac.jsx)(Rp,{title:n.Title,includeSlidingPuzzle:!0,infos:[{label:"Sliding Puzzle"}],onExit:this.props.onExit})}}]),n}(i.a.Component);Ky.Title="Slide Puzzle";var Qy,Zy,Xy,$y=b.a.div(Yy||(Yy=Object(f.a)(["\n  width: 100%;\n  height: 100%;\n  text-align: center;\n\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n\n  input {\n    font-size: 3em;\n  }\n  button {\n    width: 10em;\n    font-size: 1.5em;\n    padding: 0.3em;\n    margin: 0 0.5em;\n    cursor: pointer;\n  }\n"]))),ex=b.a.div(Jy||(Jy=Object(f.a)(["\n  padding: 1em;\n  color: white;\n  background-color: rgba(0,0,0,0.6);\n  border: 1px solid white;\n\n  & > h1 {\n    margin-top: 0;\n    text-decoration: none;\n  }\n"])));function tx(){var e=Object(r.useState)(!1),t=Object(m.a)(e,2),n=t[0],a=t[1];if(n)return Object(ac.jsx)(TA,{});return Object(ac.jsx)(yc,{src:ni.Branding.Splash,children:Object(ac.jsxs)($y,{children:[Object(ac.jsxs)(ex,{children:[Object(ac.jsxs)("h1",{children:["Tough Love Arena",Object(ac.jsx)("br",{}),"April Fools 2023"]}),Object(ac.jsxs)("div",{children:["This is Tough Love Arena as it existed on April 1st, 2023, preserved for posterity.",Object(ac.jsx)("br",{}),"Online play has been disabled and a few small things have been fixed / removed.",Object(ac.jsx)("br",{}),"This version of the game is unbalanced and silly.",Object(ac.jsx)("br",{}),'To play the latest and greatest version, please click "exit" below.']}),Object(ac.jsx)("br",{}),Object(ac.jsxs)("div",{children:[Object(ac.jsx)("button",{onClick:function(){return a(!0)},children:"proceed"}),Object(ac.jsx)("button",{onClick:function(){return window.location.href="https://toughlovearena.com"},children:"exit"})]})]}),Object(ac.jsx)(Bl,{})]})})}var nx=Object(b.a)(yc)(Qy||(Qy=Object(f.a)(["\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n\n  background-size: auto 100%;\n  background-color: black;\n"]))),ax=b.a.div(Zy||(Zy=Object(f.a)(["\n  width: 100%;\n  height: 100%;\n\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n\n  input {\n    font-size: 3em;\n  }\n  button {\n    font-size: 2em;\n    padding: 0.3em;\n    cursor: pointer;\n  }\n"]))),rx=b.a.div(Xy||(Xy=Object(f.a)(["\n  position: absolute;\n  z-index: ",";\n  bottom: 2vh;\n  right: 2vh;\n  width: auto;\n  height: auto;\n\n  font-size: 2vh;\n\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n\n  color: white;\n"])),Ts.zIndex.MenuOverlay);function ix(){var e=Object(r.useState)(!1),t=Object(m.a)(e,2),n=t[0],a=(t[1],Object(r.useState)("")),i=Object(m.a)(a,2),o=i[0],s=i[1],c=Qt(8,o.trim());if(vn.isReactDevelopment&&wn("'".concat(c,"', // ").concat(o)),n||["66ab87c2","41c7461b"].includes(c))return Object(ac.jsx)(TA,{});return Object(ac.jsx)(nx,{src:ni.Branding.Splash,children:Object(ac.jsxs)(ax,{children:[Object(ac.jsx)("input",{type:"password",placeholder:" canary password",autoFocus:!0,onChange:function(e){return s(e.target.value)}}),Object(ac.jsx)("br",{}),Object(ac.jsx)("button",{onClick:function(){return Ts.browserRedirect(kn.Links.HomepageUrl)},children:"exit canary mode"}),Object(ac.jsx)(Bl,{}),Object(ac.jsx)(rx,{children:"balance patch 2023/12/12"})]})})}var ox=n(196),sx=n.n(ox),cx=n(106),ux=!1;function lx(e){return new Promise((function(t,n){Object(cx.install)(e);var a=document.getElementById("ga-gtag");a.onload=t,a.onerror=n}))}var hx,dx,px,fx,bx,gx,mx=function(){var e=Object(u.a)(Object(c.a)().mark((function e(){var t;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!ux&&!kn.isTest){e.next=2;break}return e.abrupt("return");case 2:return ux=!0,e.prev=3,e.next=6,lx(vn.isReactDevelopment?"G-G7QZZF14HR":"G-F2TLRKNREL");case 6:wn("gtag success"),t={track:function(e,t){return Object(cx.gtag)("event",e,t)}},ro.init(t),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3),wn("gtag was blocked");case 14:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(){return e.apply(this,arguments)}}(),vx=b.a.div(hx||(hx=Object(f.a)(["\n  font-size: 16px;\n  width: 100%;\n  min-height: 100%;\n\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-start;\n  align-items: center;\n  flex-wrap: nowrap;\n\n  background-color: rgba(255, 255, 255, 0.95);\n"]))),kx=b.a.div(dx||(dx=Object(f.a)(["\n  color: black;\n  margin: 4vh;\n  box-sizing: border-box;\n  max-width: 800px;\n  @media (max-width: 800px) {\n    max-width: 100%;\n  }\n\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-start;\n  align-items: stretch;\n  flex-wrap: nowrap;\n\n  h2 {\n    text-decoration: underline;\n  }\n  h1, h2, h3 {\n    margin: 0;\n  }\n"]))),jx=b.a.div(px||(px=Object(f.a)(["\n  font-size: 1.2em;\n\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n  flex-wrap: wrap;\n\n  & > * {\n    margin: 0 0.8em;\n  }\n"])));function yx(e){return Rs((function(){return mx()})),Object(ac.jsx)(vx,{children:Object(ac.jsxs)(kx,{children:[Object(ac.jsxs)("div",{style:{textAlign:"center",fontSize:"1.5em"},children:["Tough Love Arena v",kn.PatchVersion]}),Object(ac.jsx)("div",{style:{textAlign:"center",fontSize:"3em"},children:e.title}),Object(ac.jsxs)(jx,{children:[Object(ac.jsx)(xx,{url:kn.Links.HomepageUrl,children:"play"}),e.hideChangelog?Object(ac.jsx)("div",{children:"changelog"}):Object(ac.jsx)(xx,{url:kn.Links.ChangelogUrl,children:"changelog"}),e.hideFaq?Object(ac.jsx)("div",{children:"faq"}):Object(ac.jsx)(xx,{url:kn.Links.FaqUrl,children:"faq"}),e.hideRoadmap?Object(ac.jsx)("div",{children:"todo"}):Object(ac.jsx)(xx,{url:kn.Links.RoadmapUrl,children:"todo"})]}),Object(ac.jsx)("br",{}),e.children]})})}function xx(e){return Object(ac.jsx)("div",{children:Object(ac.jsx)("a",{href:e.url,children:e.children})})}var Ox=b.a.a(fx||(fx=Object(f.a)(["\n  color: black;\n  text-decoration: none;\n  margin-right: 0.2em;\n\n  ","\n"])),(function(e){return e.large?"\n    font-size: 2em;\n  ":"\n    font-size: 1.2em;\n  "})),wx=b.a.span(bx||(bx=Object(f.a)(["\n  font-size: 0.8em;\n  font-style: italic;\n"]))),Sx=b.a.code(gx||(gx=Object(f.a)(["\n  cursor: pointer;\n  padding-left: 1em;\n"])));function Cx(e){var t,n,a=Object(r.useState)(),i=Object(m.a)(a,2),o=i[0],s=i[1];Rs(Object(u.a)(Object(c.a)().mark((function t(){var n,a,r;return Object(c.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null===(n=null===(a=e.test)||void 0===a?void 0:a.data)||void 0===n){t.next=4;break}t.t0=n,t.next=7;break;case 4:return t.next=6,Fk.get(kn.Links.ChangelogYaml);case 6:t.t0=t.sent;case 7:r=t.t0,s(r);case 9:case"end":return t.stop()}}),t)})))),Object(r.useEffect)((function(){var e=window.location.hash;if(e){var t=e.slice(1);setTimeout((function(){var e;return null===(e=document.getElementById(t))||void 0===e?void 0:e.scrollIntoView()}),500)}}),[o]);var l=[].concat(Object(k.a)((null!==(t=null===o||void 0===o?void 0:o.draft)&&void 0!==t?t:[]).map((function(e){return Object(g.a)(Object(g.a)({},e),{},{v:"[draft] "+e.v})}))),Object(k.a)(null!==(n=null===o||void 0===o?void 0:o.versions)&&void 0!==n?n:[]));return Object(ac.jsx)(yx,{title:"Changelog",hideChangelog:!0,children:o?Object(ac.jsxs)(ac.Fragment,{children:[Object(ac.jsx)("div",{style:{textAlign:"right"},"data-testid":Cx.LoadedTestID,children:Object(ac.jsx)("a",{href:kn.Links.ChangelogYaml,download:"toughlovearena-changelog-".concat(kn.PatchVersion,".yaml"),children:"Download as YAML"})}),l.map((function(e){return Object(ac.jsx)(Ax,{log:e},e.v)}))]}):Object(ac.jsx)("div",{style:{textAlign:"center"},children:"loading..."})})}function Ax(e){var t=e.log,n="0"===t.v.split(".").pop();return Object(ac.jsxs)("div",{id:t.v,children:[Object(ac.jsxs)("h3",{children:[Object(ac.jsx)(Ox,{href:"#"+t.v,large:n,children:t.v}),t.date&&Object(ac.jsxs)(wx,{children:[" ",t.date]}),kn.isDebug&&Object(ac.jsxs)("span",{children:[Object(ac.jsx)(Sx,{onClick:function(){return function(e){Ts.clipboard("\n".concat(e.v,"\n\n").concat(e.notes.map((function(e){return"- ".concat(e)})).join("\n"),"\n\nLog: https://toughlovearena.com?changelog#").concat(e.v,"\n").trim())}(t)},children:"Twitter"}),Object(ac.jsx)(Sx,{onClick:function(){return function(e){Ts.clipboard("\n@Updates\n```\n".concat(e.v," ").concat(e.date,"\n\n").concat(e.notes.map((function(e){return"- ".concat(e)})).join("\n"),"\n```").trim())}(t)},children:"Discord"}),Object(ac.jsx)(Sx,{onClick:function(){return function(e){Ts.clipboard("\nYou can find the full changelog at [url=https://toughlovearena.com?changelog#".concat(e.v,"]toughlovearena.com?changelog[/url]\n\n[list]\n").concat(e.notes.map((function(e){return"[*] ".concat(e)})).join("\n"),"\n[/list]\n").trim())}(t)},children:"Steam"})]})]}),Object(ac.jsx)("ul",{children:t.notes.map((function(e,n){return Object(ac.jsx)("li",{children:Object(ac.jsx)(sx.a,{children:e})},[t.v,n].join("-"))}))})]},t.v)}Cx.LoadedTestID="ChangelogLoaded";var Tx,Mx,Px,Rx=function(e){var t=On();return Object(ac.jsxs)("div",{style:{fontFamily:"monospace",margin:"0"},children:[Object(ac.jsxs)("div",{style:{fontSize:"1.5em"},children:[Object(ac.jsx)("a",{href:kn.Links.HomepageUrl,children:"Tough Love Arena"}),"\xa0v",kn.PatchVersion,"\xa0",e.title]}),Object(ac.jsx)("div",{children:t?[t.os,t.name,t.version,"rating = ".concat(t.isNotRecommended?"slow":"fast")].join(" / "):"browser unknown"}),e.onExit?Object(ac.jsx)("div",{children:Object(ac.jsx)("button",{onClick:e.onExit,children:"back to Debug Menu"})}):""]})},Ix=b.a.div(Tx||(Tx=Object(f.a)(["\n  font-family: monospace;\n  font-size: 16px;\n\n  position: absolute;\n  top: 0px;\n  left: 0px;\n  width: 100%;\n  min-height: 100%;\n\n  padding: 5vh;\n  box-sizing: border-box;\n\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-start;\n  align-items: flex-start;\n  flex-wrap: nowrap;\n\n  color: black;\n  background-color: rgba(255, 255, 255, 0.8);\n\n  & > h1 {\n    margin-top: 0;\n  }\n"]))),Bx=b.a.table(Mx||(Mx=Object(f.a)(["\n  text-align: center;\n  border-collapse: collapse;\n  font-size: 1em;\n  & th {\n    font-size: 1.2em;\n  }\n  & td, & th {\n    border: 1px solid #ccc;\n    width: 6em;\n  }\n  & tr:hover {\n    color: black;\n    background-color: var(--heart);\n  }\n"]))),Dx=b.a.canvas(Px||(Px=Object(f.a)(["\n  position: absolute;\n  top: 0px;\n  left: 0px;\n  width: 100%;\n  height: 100%;\n"])));function Hx(e){var t=window.location.search;return new URLSearchParams(t).get(e)}var Ex,_x,Fx,Lx,Gx,zx,Wx,Nx,Ux,qx,Vx,Yx=function(e){return e.Epoch="Epoch (v1)",e.Eager="Eager (v2)",e.Multi1="Multi-1",e.Multi2="Multi-2",e.Multi3="Multi-3",e.Multi4="Multi-4",e.Multi5="Multi-5",e.Multi6="Multi-6",e.Multi7="Multi-7",e.Multi8="Multi-8",e.Multi9="Multi-9",e.Multi10="Multi-10",e}(Yx||{}),Jx=[Yx.Epoch,Yx.Eager,Yx.Multi1,Yx.Multi2,Yx.Multi3,Yx.Multi4,Yx.Multi5,Yx.Multi6,Yx.Multi7,Yx.Multi8,Yx.Multi9,Yx.Multi10],Kx=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).canvasRef=void 0,a.urlSeconds=Hx("s"),a.urlResolution=Hx("r"),a.urlGo=Hx("go"),a.state={data:[],seconds:a.urlSeconds?parseFloat(a.urlSeconds):5,resolution:a.urlResolution?a.urlResolution:li.Resolution.get(),renderFps:60,loopType:Yx.Eager,running:!1},a.timeOptions=[1,3,5,10,30,60],a.canvasRef=i.a.createRef(),a}return Object(h.a)(n,[{key:"componentDidMount",value:function(){var e=this.canvasRef.current;if(!e)throw new Error("canvas did not mount, game will not render");is.setCanvas(e),this.urlGo&&this.run()}},{key:"run",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(){var t,n,a,r,i,o,s,u,l,h;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,uc(this,{running:!0});case 2:return t=this.state,n=t.resolution,a=t.loopType,r=li.Resolution.get(),li.Resolution.set(n),e.next=7,ds.loadMenu();case 7:return is.drawLoading(),e.next=10,Le(0);case 10:return i={matchId:nn(),firstTo:1,roundTime:oe,fighter1:ni.Characters.Noodle.original,fighter2:ni.Characters.Onion.original,stage:ni.Stages.GroceryStore},o={isDebugTool:!0,skipReady:!0,cpuDiff1:D.Hard,cpuDiff2:D.Hard},e.next=14,ds.loadGame(i,(function(){}));case 14:return s=Ki.loadGame({canvas:is,gameConfig:i,gameMeta:o,hudInfo:{match:da.default(),scoreboard:co.empty()}}),u=new bi({game:s,gameMeta:o}),l=a===Yx.Epoch&&this.runLinear(u)||a===Yx.Eager&&this.runEager(u)||this.runStaggered(u),e.next=19,l;case 19:return h=e.sent,li.Resolution.set(r),e.next=23,uc(this,{data:[h].concat(Object(k.a)(this.state.data)),running:!1});case 23:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"step",value:function(e){e.step(!0)}},{key:"runEager",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(t){var n,a,r,i,o,s,u,l,h,d,p,f,b,g,m,v,k,j,y,x,O,w;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=this.state,o=i.seconds,s=i.resolution,u=i.renderFps,l=i.loopType,h=function(){return!1},30===u&&(h=function(e){return e%2===0}),40===u&&(h=function(e){return e%3===0}),45===u&&(h=function(e){return e%4===0}),d=new Date,p=st.now(),f=p+1e3*o,b=0,g=[];case 10:if(!(st.now()<f)){e.next=27;break}if(b++,m=h(b),v=void 0,m||(v=Le(0)),k=st.now(),this.step(t),j=st.now(),m||t.draw(),y=st.now(),m){e.next=23;break}return e.next=23,v;case 23:x=st.now(),g.push({step:j-k,draw:y-j,sleep:x-y}),e.next=10;break;case 27:return O=st.now(),w={started:d,seconds:o,resolution:s,renderFps:u,loopType:l,frames:b,ms:O-p,step:null!==(n=_t(g.map((function(e){return e.step}))))&&void 0!==n?n:-1,draw:null!==(a=_t(g.map((function(e){return e.draw}))))&&void 0!==a?a:-1,sleep:null!==(r=_t(g.map((function(e){return e.sleep}))))&&void 0!==r?r:-1},e.abrupt("return",w);case 30:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"runLinear",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(t){var n,a,r,i,o,s,u,l,h,d,p,f,b,g,m,v,k,j,y,x,O;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=this.state,o=i.seconds,s=i.resolution,u=i.renderFps,l=i.loopType,h=function(){return!1},30===u&&(h=function(e){return e%2===0}),40===u&&(h=function(e){return e%3===0}),45===u&&(h=function(e){return e%4===0}),d=new Date,p=st.now(),f=p+1e3*o,b=0,g=[];case 10:if(!(st.now()<f)){e.next=25;break}if(b++,m=h(b),v=st.now(),this.step(t),k=st.now(),m||t.draw(),j=st.now(),m){e.next=21;break}return e.next=21,Le(0);case 21:y=st.now(),g.push({step:k-v,draw:j-k,sleep:y-j}),e.next=10;break;case 25:return x=st.now(),O={started:d,seconds:o,resolution:s,renderFps:u,loopType:l,frames:b,ms:x-p,step:null!==(n=_t(g.map((function(e){return e.step}))))&&void 0!==n?n:-1,draw:null!==(a=_t(g.map((function(e){return e.draw}))))&&void 0!==a?a:-1,sleep:null!==(r=_t(g.map((function(e){return e.sleep}))))&&void 0!==r?r:-1},e.abrupt("return",O);case 28:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"runStaggered",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(t){var n,a,r,i,o,s,l,h,d,p,f,b,g,m,v,k,j,y,x,O,w=this;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=this.state,s=o.seconds,l=o.resolution,h=o.renderFps,d=o.loopType,p=function(){return!1},30===h&&(p=function(e){return e%2===0}),40===h&&(p=function(e){return e%3===0}),45===h&&(p=function(e){return e%4===0}),f=new Date,b=st.now(),g=b+1e3*s,m=0,v=[],k=function(){var e=Object(u.a)(Object(c.a)().mark((function e(){var n,a,r,i,o;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(st.now()<g)){e.next=15;break}if(m++,n=p(m),a=st.now(),w.step(t),r=st.now(),n||t.draw(),i=st.now(),n){e.next=11;break}return e.next=11,Le(0);case 11:o=st.now(),v.push({step:r-a,draw:i-r,sleep:o-i}),e.next=0;break;case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),j=parseFloat(null!==(n=d.split("-").pop())&&void 0!==n?n:"0"),y=Ft(j).map((function(){return k()})),e.next=15,Promise.all(y);case 15:return x=st.now(),O={started:f,seconds:s,resolution:l,renderFps:h,frames:m,loopType:d,ms:x-b,step:null!==(a=_t(v.map((function(e){return e.step}))))&&void 0!==a?a:-1,draw:null!==(r=_t(v.map((function(e){return e.draw}))))&&void 0!==r?r:-1,sleep:null!==(i=_t(v.map((function(e){return e.sleep}))))&&void 0!==i?i:-1},e.abrupt("return",O);case 18:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"renderRun",value:function(e,t){var n=1e3*e.frames/e.ms,a=e.ms/e.frames,r=a-(e.step+e.draw);return Object(ac.jsxs)("tr",{children:[Object(ac.jsx)("td",{children:e.started.toLocaleTimeString()}),Object(ac.jsx)("td",{children:e.ms.toFixed(0)}),Object(ac.jsx)("td",{children:e.frames}),Object(ac.jsx)("td",{children:e.resolution}),Object(ac.jsx)("td",{children:e.renderFps}),Object(ac.jsx)("td",{children:e.loopType}),Object(ac.jsx)("td",{children:e.step.toFixed(2)}),Object(ac.jsx)("td",{children:e.draw.toFixed(2)}),Object(ac.jsx)("td",{children:e.sleep.toFixed(2)}),Object(ac.jsx)("td",{children:r.toFixed(2)}),Object(ac.jsx)("td",{children:a.toFixed(2)}),Object(ac.jsx)("td",{children:n.toFixed(0)})]},"run-".concat(t))}},{key:"render",value:function(){var e=this,t=this.state,n=t.data,a=t.running;return Object(ac.jsxs)("div",{children:[Object(ac.jsx)(Dx,{ref:this.canvasRef}),!a&&Object(ac.jsxs)(Ix,{children:[Object(ac.jsx)(Rx,{title:"Canvas Probe",onExit:this.props.onExit}),Object(ac.jsx)("br",{}),Object(ac.jsx)("div",{children:"Simulate game at fastest FPS possible"}),Object(ac.jsx)("br",{}),Object(ac.jsxs)("div",{children:[Object(ac.jsx)("select",{value:this.state.resolution,onChange:function(t){return e.setState({resolution:t.target.value})},children:ue.map((function(e){return Object(ac.jsx)("option",{value:ce[e],children:e},e)}))}),Object(ac.jsx)("select",{value:this.state.renderFps,onChange:function(t){return e.setState({renderFps:parseInt(t.target.value,10)})},children:[30,40,45,60].map((function(e){return Object(ac.jsx)("option",{value:e,children:e},e)}))}),Object(ac.jsx)("select",{value:this.state.loopType,onChange:function(t){return e.setState({loopType:t.target.value})},children:Jx.map((function(e){return Object(ac.jsx)("option",{value:e,children:e},e)}))}),Object(ac.jsx)("select",{value:this.state.seconds,onChange:function(t){return e.setState({seconds:parseInt(t.target.value,10)})},children:this.timeOptions.map((function(e){return Object(ac.jsx)("option",{value:e,children:e},e)}))}),Object(ac.jsx)("button",{onClick:function(){return e.run()},children:"RUN"})]}),Object(ac.jsx)("br",{}),n.length>0&&Object(ac.jsxs)(Bx,{children:[Object(ac.jsx)("thead",{children:Object(ac.jsxs)("tr",{children:[Object(ac.jsx)("th",{children:"start"}),Object(ac.jsx)("th",{children:"ms"}),Object(ac.jsx)("th",{children:"frames"}),Object(ac.jsx)("th",{children:"reso"}),Object(ac.jsx)("th",{children:"renderFps"}),Object(ac.jsx)("th",{children:"loopType"}),Object(ac.jsx)("th",{children:"step"}),Object(ac.jsx)("th",{children:"draw"}),Object(ac.jsx)("th",{children:"sleep"}),Object(ac.jsx)("th",{children:"render?"}),Object(ac.jsx)("th",{children:"mspf"}),Object(ac.jsx)("th",{children:"fps"})]})}),Object(ac.jsx)("tbody",{children:n.map((function(t,n){return e.renderRun(t,n)}))})]})]})]})}}]),n}(i.a.Component),Qx=b.a.div(Ex||(Ex=Object(f.a)(["\n  font-family: monospace;\n  font-size: 16px;\n\n  position: absolute;\n  top: 0px;\n  left: 0px;\n  width: 100%;\n  min-height: 100%;\n\n  padding: 5vh;\n  box-sizing: border-box;\n\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-start;\n  align-items: flex-start;\n  flex-wrap: nowrap;\n\n  color: black;\n  background-color: rgba(255, 255, 255, 0.8);\n\n  & > h1 {\n    margin-top: 0;\n  }\n"]))),Zx=b.a.div(_x||(_x=Object(f.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-start;\n  align-items: flex-start;\n  flex-wrap: wrap;\n"]))),Xx=b.a.div(Fx||(Fx=Object(f.a)(["\n  display: flex;\n  flex-direction: row;\n  justify-content: flex-start;\n  align-items: flex-start;\n  flex-wrap: wrap;\n"]))),$x=b.a.div(Lx||(Lx=Object(f.a)(["\n  padding: 0.2em;\n  box-shadow: 1px 1px 1px 1px black;\n"]))),eO=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={data:[],seconds:5,running:!1},e.eagerMarker=wt.EagerLoop(),e.timeOptions=Ft(12).map((function(e){return 5*(e+1)})),e}return Object(h.a)(n,[{key:"componentDidMount",value:function(){}},{key:"run",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(t){var n;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,uc(this,{running:!0});case 2:return e.next=4,t.run(this.state.seconds);case 4:return n=e.sent,e.next=7,uc(this,{data:[n].concat(Object(k.a)(this.state.data)),running:!1});case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"renderStep",value:function(e,t){var n=(e.delta>0?"salmon":e.delta<0&&"lightblue")||"white";return Object(ac.jsx)($x,{style:{backgroundColor:n},children:e.delta},"run-".concat(t,"-step-").concat(e.tick))}},{key:"renderRun",value:function(e,t){var n=this,a=Math.abs(e.earliestDrift)>e.latestDrift?e.earliestDrift:e.latestDrift,r=e.finishedAt-e.epoch,i=e.steps.length;return Object(ac.jsxs)(Zx,{children:[Object(ac.jsxs)("h3",{children:[e.label," / ",e.seconds," seconds / started ",e.epoch]}),Object(ac.jsxs)("div",{children:["Took ",r.toFixed(1)," ms to run ",i," frames, averaging ",(1e3*i/r).toFixed(1)," fps"]}),Object(ac.jsxs)("div",{children:["Worst slowdown between frames: ",e.earliestDelta," ms aka ",(e.earliestDelta/kn.msPerFrame).toFixed(1)," frames"]}),Object(ac.jsxs)("div",{children:["Worst speedup between frames: ",e.latestDelta," ms aka ",(e.latestDelta/kn.msPerFrame).toFixed(1)," frames"]}),Object(ac.jsxs)("div",{children:["Worst total drift: ",a.toFixed(1)," ms aka ",(a/kn.msPerFrame).toFixed(1)," frames"]}),Object(ac.jsx)("br",{}),Object(ac.jsx)(Xx,{children:e.steps.map((function(e){return n.renderStep(e,t)}))})]},"run-".concat(t))}},{key:"render",value:function(){var e=this,t=this.state,n=t.data,a=t.running;return Object(ac.jsxs)(Qx,{children:[Object(ac.jsx)(Rx,{title:"Loop Probe",onExit:this.props.onExit}),Object(ac.jsx)("br",{}),Object(ac.jsxs)("div",{children:["- Epoch: timer that tries to match projected frame timings based on start time, and adjusts frame-by-frame delay to try and re-sync.",Object(ac.jsx)("br",{}),"- Stoppable: timer that always does best effort of 60 fps. When lag happens, it happens. If the clock is a little fast/slow, it will stay that way.",Object(ac.jsx)("br",{}),"- Slowdown/speedup: by how much two consecutive frames miss the perfect 60 fps timing. Shown in the red/blue boxes respectively (ideally = 0).",Object(ac.jsx)("br",{}),"- Drift: at any given frame X, how far off is the clock from the projected time for the start time."]}),Object(ac.jsx)("br",{}),a?Object(ac.jsxs)("div",{children:["running, please wait ",this.state.seconds," seconds..."]}):Object(ac.jsxs)("div",{children:[Object(ac.jsx)("select",{value:this.state.seconds,onChange:function(t){return e.setState({seconds:parseInt(t.target.value,10)})},children:this.timeOptions.map((function(e){return Object(ac.jsx)("option",{value:e,children:e},e)}))}),Object(ac.jsx)("button",{onClick:function(){return e.run(e.eagerMarker)},children:"RUN EagerLoop"})]}),n.map((function(t,n){return e.renderRun(t,n)}))]})}}]),n}(i.a.Component),tO=b.a.div(Gx||(Gx=Object(f.a)(["\n  font-family: monospace;\n  font-size: 16px;\n\n  position: absolute;\n  top: 0px;\n  left: 0px;\n  width: 100%;\n  min-height: 100%;\n\n  padding: 5vh;\n  box-sizing: border-box;\n\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-start;\n  align-items: flex-start;\n  flex-wrap: nowrap;\n\n  color: black;\n  background-color: rgba(255, 255, 255, 0.8);\n\n  & > h1 {\n    margin-top: 0;\n  }\n"]))),nO=b.a.div(zx||(zx=Object(f.a)(["\n  display: flex;\n  flex-diretion: row;\n  justify-content: flex-start;\n  align-items: flex-start;\n\n  & > div {\n    border-right: 1px solid black;\n    padding: 1em;\n  }\n"]))),aO=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={replayId:"",replays:[],errors:[]},e.helper=new oo,e}return Object(h.a)(n,[{key:"componentDidMount",value:function(){this.loadReplay("B5F267BC")}},{key:"loadReplay",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(t){var n;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ns.replayGet(t);case 3:n=e.sent,this.setState({replayId:"",replays:[n].concat(Object(k.a)(this.state.replays))}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.setState({errors:[e.t0.toString()].concat(Object(k.a)(this.state.errors))});case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"renderControllerState",value:function(e){var t="5",n=e.map((function(e,t){return{tick:t,input:new oa(e).getInput(!0)}})).filter((function(e){var n=t!==e.input;return t=e.input,n})).filter((function(e){return"5"!==e.input}));return Object(ac.jsx)("div",{children:n.map((function(e){return Object(ac.jsxs)("div",{children:[e.tick.toString().padStart(4,"0"),": ",e.input]},e.tick)}))})}},{key:"renderReplay",value:function(e){var t=this;wn(e);var n=this.helper.decompressReplay(e);return Object(ac.jsxs)("div",{children:[Object(ac.jsx)("h3",{children:e.id?Object(ac.jsx)("a",{target:"_blank",rel:"noopener noreferrer",href:Ts.getReplayUrlForId(e.id),children:e.id}):Object(ac.jsx)("i",{children:"No URL available"})}),Object(ac.jsx)("pre",{children:JSON.stringify(e,null,2)}),Object(ac.jsx)(nO,{children:n.roundInputs.map((function(e,n){return Object(ac.jsxs)("div",{children:[Object(ac.jsxs)("h4",{children:["Round ",n+1]}),Object(ac.jsx)("hr",{}),Object(ac.jsxs)(nO,{children:[t.renderControllerState(e.input1),t.renderControllerState(e.input2)]})]})}))})]},e.id)}},{key:"render",value:function(){var e=this,t=this.state,n=t.replayId,a=t.replays,r=t.errors;return Object(ac.jsxs)(tO,{children:[Object(ac.jsx)(Rx,{title:"Replay Probe",onExit:this.props.onExit}),Object(ac.jsx)("br",{}),Object(ac.jsxs)("div",{children:[Object(ac.jsx)("input",{value:n,onChange:function(t){return e.setState({replayId:t.target.value})}}),Object(ac.jsx)("button",{onClick:function(){return e.loadReplay(n)},children:"LOAD"})]}),Object(ac.jsx)("br",{}),r.length?r.map((function(e,t){return Object(ac.jsx)("div",{children:e},t)})):Object(ac.jsx)("div",{children:Object(ac.jsx)("i",{children:"no errors"})}),Object(ac.jsx)("br",{}),a.map((function(t){return e.renderReplay(t)}))]})}}]),n}(i.a.Component),rO=b.a.div(Wx||(Wx=Object(f.a)(["\nfont-family: monospace;\nfont-size: 16px;\n\nposition: absolute;\ntop: 0px;\nleft: 0px;\nwidth: 100%;\nmin-height: 100%;\n\npadding: 5vh;\nbox-sizing: border-box;\n\ndisplay: flex;\nflex-direction: column;\njustify-content: flex-start;\nalign-items: flex-start;\nflex-wrap: nowrap;\n\ncolor: black;\nbackground-color: rgba(255, 255, 255, 0.8);\n\n& > h1 {\n  margin-top: 0;\n}\n\n& textarea {\n  width: 30em;\n  height: 20em;\n}\n"]))),iO=b.a.div(Nx||(Nx=Object(f.a)(["\nfont-size: 1.8em;\nfont-weight: bold;\nmargin: 0.5em 0;\n"]))),oO=b.a.div(Ux||(Ux=Object(f.a)(["\ndisplay: flex;\nflex-direction: row;\njustify-content: flex-start;\nalign-items: flex-start;\nflex-wrap: nowrap;\n\nmargin-bottom: 1em;\n& > * {\n  margin-right: 1em;\n}\n"]))),sO=b.a.button(qx||(qx=Object(f.a)(["\nfont-size: 1.5em;\npadding: 0.3em 1em;\n"])));function cO(e){return JSON.stringify(e,null,2)}function uO(e){var t=e.onExit,n=cO(li.EventModeDipSwitch.defaultValue),a=Object(r.useState)(""),i=Object(m.a)(a,2),o=i[0],s=i[1],c=Object(r.useState)(""),u=Object(m.a)(c,2),l=u[0],h=u[1];Object(r.useEffect)((function(){var e=li.EventModeDipSwitch.get();s(cO(e))}),[]);var d=Object(r.useCallback)((function(){try{var e=JSON.parse(o);li.EventModeDipSwitch.set(e),h("dipswitch saved!")}catch(t){h("dipswitch saving failed! ".concat(t))}}),[o]),p=Object(r.useCallback)((function(e){s(cO(e))}),[s]),f=Object(r.useCallback)((function(){li.isEventMode.set(!0),Ts.browserReload()}),[]),b=Object(r.useCallback)((function(){li.resetAll({skip:[li.Controls,li.isEventMode,li.EventModeDipSwitch]}),li.FrameRate.set(yt.Fixed30),li.ShowDesktopControls.set(!1),li.GamepadConnectedTrigger.set(me.Nothing),li.Volume.set({announcer:1,effect:1,music:1}),h("game settings set!")}),[]);return Object(ac.jsxs)(rO,{children:[Object(ac.jsx)(Rx,{title:"Event Mode DIP Switch"}),Object(ac.jsx)(iO,{children:"Step #1: Change Public Game Settings"}),Object(ac.jsx)(oO,{children:Object(ac.jsx)(sO,{onClick:b,children:"Use recommended Game Settings"})}),Object(ac.jsx)(iO,{children:"Step #2: Specify Dipswitch Settings and Save"}),Object(ac.jsxs)(oO,{children:[Object(ac.jsx)(sO,{onClick:function(){return p(Oe())},children:"preset: Default"}),Object(ac.jsx)(sO,{onClick:function(){return p(we())},children:"preset: Wondercab"}),Object(ac.jsx)(sO,{onClick:d,children:"Save"})]}),Object(ac.jsxs)(oO,{children:[Object(ac.jsxs)("div",{children:[Object(ac.jsx)("div",{children:"current"}),Object(ac.jsx)("textarea",{onChange:function(e){return s(e.target.value)},value:o})]}),Object(ac.jsxs)("div",{children:[Object(ac.jsx)("div",{children:"default"}),Object(ac.jsx)("textarea",{readOnly:!0,value:n,style:{backgroundColor:"#eee"}})]})]}),Object(ac.jsx)(iO,{children:"Step #3: Exit back to Game or Reboot in Event Mode"}),Object(ac.jsxs)(oO,{children:[Object(ac.jsx)(sO,{onClick:t,children:"Exit"}),Object(ac.jsx)(sO,{onClick:f,children:"Reboot in Event Mode"})]}),Object(ac.jsx)(oO,{}),Object(ac.jsx)("div",{children:l})]})}var lO,hO=b.a.div(Vx||(Vx=Object(f.a)(["\n  font-family: monospace;\n  font-size: 16px;\n\n  position: absolute;\n  top: 0px;\n  left: 0px;\n  width: 100%;\n  min-height: 100%;\n\n  padding: 5vh;\n  box-sizing: border-box;\n\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-start;\n  align-items: flex-start;\n  flex-wrap: nowrap;\n\n  color: black;\n  background-color: rgba(255, 255, 255, 0.8);\n\n  & > h1 {\n    margin-top: 0;\n  }\n"]))),dO=function(e){return e[e.Menu=0]="Menu",e[e.EventSettings=1]="EventSettings",e[e.Canvas=2]="Canvas",e[e.Loop=3]="Loop",e[e.Replay=4]="Replay",e}(dO||{});function pO(e){var t=kn.Redirect.ProbeCanvas&&dO.Canvas||kn.Redirect.ProbeLoop&&dO.Loop||kn.Redirect.ProbeReplay&&dO.Replay||dO.Menu,n=Object(r.useState)(t),a=Object(m.a)(n,2),i=a[0],o=a[1];if(i===dO.Canvas)return Object(ac.jsx)(Kx,{onExit:function(){return o(dO.Menu)}});if(i===dO.Loop)return Object(ac.jsx)(eO,{onExit:function(){return o(dO.Menu)}});if(i===dO.Replay)return Object(ac.jsx)(aO,{onExit:function(){return o(dO.Menu)}});if(i===dO.EventSettings)return Object(ac.jsx)(uO,{onExit:function(){return o(dO.Menu)}});var s=[{label:"Debug FPS time to draw",view:dO.Canvas},{label:"Debug game loop timer",view:dO.Loop},{label:"Debug replays",view:dO.Replay},{label:"Download Replay Dump",callback:function(){var e="tla_dump_replay_".concat((new Date).getTime(),".json"),t=so.getCompressed();Ts.downloadText(e,JSON.stringify(t,null,2))}},{label:Object(ac.jsx)(Xp,{onUpload:function(){var e=Object(u.a)(Object(c.a)().mark((function e(t){return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{JSON.parse(t.text).forEach((function(e){return so.addRemote(e)})),alert("replay upload success")}catch(n){alert("replay upload failed: "+n)}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:"Upload Replay Dump"})},{label:"Event Mode DIP Switch",view:dO.EventSettings}].concat(Object(k.a)(e.onExit?[e.onExit]:[]));return Object(ac.jsxs)(hO,{children:[Object(ac.jsx)(Rx,{title:"Debug Menu"}),Object(ac.jsx)("br",{}),s.map((function(e,t){return Object(ac.jsx)("div",{style:{margin:"1em 0"},children:Object(ac.jsx)("button",{style:{fontSize:"2em",padding:"0.3em 1em"},onClick:function(){e.view&&o(e.view),e.callback&&e.callback()},children:e.label})},t)}))]})}var fO=b.a.div(lO||(lO=Object(f.a)(["\n  text-align: center;\n  margin: 1em;\n\n  & > img {\n    width: 60%;\n    height: auto;\n    border: 2px solid black;\n  }\n"])));function bO(){var e=[{q:"What is Tough Love Arena?",a:"Tough Love Arena is a web-based, indie fighting game with rollback netcode that's 100% free to play!"},{q:"Who makes Tough Love Arena?",a:Object(ac.jsxs)("div",{children:["Tough Love Arena is made by two people: Paul and Amy.",Object(ac.jsx)(fO,{children:Object(ac.jsx)("img",{src:ni.Faq.SelfPortrait,alt:"self portrait drawn by Amy"})}),"Paul does the coding, game design, voice acting, and tweeting.",Object(ac.jsx)("br",{}),"Amy does the animation, character design, UI design, video editing, and lots of other stuff.",Object(ac.jsx)("br",{}),"The background music is an original score produced by Josie Brechner and M Gewehr."]})},{q:"This game is cool / horrible! Where can I send my compliments / complaints?",a:Object(ac.jsxs)("div",{children:["You can contact us by:",Object(ac.jsxs)("ul",{children:[Object(ac.jsxs)("li",{children:["Send an email to ",Object(ac.jsx)("em",{children:"toughlovearena@gmail.com"})]}),Object(ac.jsxs)("li",{children:["Direct Message us on Twitter ",Object(ac.jsx)("a",{href:kn.External.Twitter,children:"@ToughLoveArena"})]}),Object(ac.jsxs)("li",{children:["Find us in the ",Object(ac.jsx)("a",{href:kn.External.Discord,children:"Discord"})]}),Object(ac.jsxs)("li",{children:["Watch Paul stream game dev on ",Object(ac.jsx)("a",{href:kn.External.Twitch,children:"Twitch"})," and drop a message in chat"]}),Object(ac.jsxs)("li",{children:["Leave a comment on one of our ",Object(ac.jsx)("a",{href:kn.External.YouTube,children:"YouTube"})," videos"]})]}),"We look forward to hearing from you!"]})},{q:"How do I report a bug / request a feature?",a:Object(ac.jsxs)("div",{children:["Same as above, but please check the ",Object(ac.jsx)("a",{href:kn.Links.RoadmapUrl,children:"TODO LIST"})," first to see if it's already there."]})},{q:"I can't play online / connect with my friend!",a:Object(ac.jsxs)("div",{children:["While online play works right away for most users, the P2P connection is sometimes blocked by firewalls and other security software. Try the following:",Object(ac.jsxs)("ul",{children:[Object(ac.jsx)("li",{children:"Make sure you are not connected to a restricted network (eg: bank wifi, some school networks, etc)"}),Object(ac.jsx)("li",{children:"Try to use one of these browsers: Chrome, Safari, or Edge"}),Object(ac.jsxs)("li",{children:["If you are using Firefox, make sure your ",Object(ac.jsx)("a",{target:"_blank",rel:"noreferrer",href:ni.Faq.DebugFirefox,children:"Browser Privacy"})," is set to Standard"]})]})]})},{q:"I'm playing with my friend and we're getting lots of rollbacks, even though we live close together!",a:Object(ac.jsxs)("div",{children:["One of the current ",Object(ac.jsx)("a",{target:"_blank",rel:"noreferrer",href:kn.Links.RoadmapUrl,children:"Known Issues"})," is that one-sided rollbacks will occur if one of the players cannot reach 60 FPS (aka their game is running slow). You can check the FPS in game with the counter in the top right. If you can confirm that either you or your friend is running below 60 FPS, these are some of the steps you can try to mitigate it:",Object(ac.jsxs)("ul",{children:[Object(ac.jsx)("li",{children:"Try to use one of these browsers: Chrome, Safari, or Edge"}),Object(ac.jsx)("li",{children:"Close other intensive applications or browser tabs that might be hogging computer resources"}),Object(ac.jsx)("li",{children:"Go into Options and lower the Frame Rate to 30 FPS"}),Object(ac.jsx)("li",{children:"Go into Options and lower the Resolution"}),Object(ac.jsx)("li",{children:"Resize the browser window to be smaller"})]})]})},{q:"How does Ranked work?",a:Object(ac.jsxs)("div",{children:["Ranked Match is a relatively new feature (added April 30) and is currently being polished. That said, this is how it currently works:",Object(ac.jsxs)("ul",{children:[Object(ac.jsx)("li",{children:"Ranks are tied to your account. You must sign up for a free account in order to play Ranked"}),Object(ac.jsx)("li",{children:"Ranks are unique to each character. Playing a Ranked Match as Onion won't affect your Beef rank"}),Object(ac.jsx)("li",{children:"Each character starts out Unranked. You must play at least 10 games with that character to see your Rank and appear on the Leaderboard"}),Object(ac.jsx)("li",{children:"You will have a chance to see your estimated delay before committing to a Ranked match"}),Object(ac.jsx)("li",{children:"Once matched, you are welcome to rematch against that person as many times as you wish, but you cannot change character"}),Object(ac.jsx)("li",{children:'If you "ragequit" during a game, that will be counted as a loss for you and a win for the opponent'}),Object(ac.jsx)("li",{children:"If you close the browser or lose connection at any point during Loading, Calibration, or Gameplay, that counts as a ragequit"})]})]})},{q:"What does my Ranked MMR mean?",a:Object(ac.jsxs)("div",{children:["Ranked Match is a relatively new feature (added April 30) and is currently being polished. That said, this is how it currently works:",Object(ac.jsxs)("ul",{children:[Object(ac.jsx)("li",{children:'MMR stands for "matchmaking rank", and is the sole representation of your skill with each character'}),Object(ac.jsx)("li",{children:"The MMR system is based off the Elo Rating System"}),Object(ac.jsx)("li",{children:"Everyone starts with 1400 MMR, and then it goes up and down each match according to who was expected to win"}),Object(ac.jsx)("li",{children:"For example, two evenly matched opponent will both risk wining or losing a dozen or so points each game"}),Object(ac.jsx)("li",{children:"But if a high ranked player fights a lower ranked one, then the higher ranked player is expected to win. If they do, they only take a few points. If they lose in an upset, they lose a lot of points"}),Object(ac.jsx)("li",{children:'Your "Peak" number is a memory of the highest MMR you ever had (to discourage sitting on a high rank)'}),Object(ac.jsx)("li",{children:"Your MMR goes up and down while Unranked, but your Peak isn't tracked"}),Object(ac.jsx)("li",{children:"The Spice Medals you see on the Ranked menu and Leaderboard are based off your MMR"}),Object(ac.jsxs)("li",{children:[$[X.Rank4],"+ is ",ri(X.Rank4).name," (Purple)"]}),Object(ac.jsxs)("li",{children:[$[X.Rank3],"+ is ",ri(X.Rank3).name," (Red)"]}),Object(ac.jsxs)("li",{children:[$[X.Rank2],"+ is ",ri(X.Rank2).name," (Yellow)"]}),Object(ac.jsxs)("li",{children:["Everything else is ",ri(X.Rank1).name," (Green)"]}),Object(ac.jsx)("li",{children:"If you are unranked (haven't played 10 matches yet), the medal is Unranked (Grey)"})]})]})},{q:"What do the different search ranges do in Ranked?",a:Object(ac.jsxs)("div",{children:["Ranked Match is a relatively new feature (added April 30) and is currently being polished. That said, this is how it currently works:",Object(ac.jsxs)("ul",{children:[oi.getRanges().map((function(e){return Object(ac.jsxs)("li",{children:["If you search for ",e.name,", your range is between (MMR) and (MMR + ",e.range,")"]},e.name)})),Object(ac.jsx)("li",{children:"If either person's current MMR fits within the other's range, the match is made"}),Object(ac.jsx)("li",{children:"These ranges are subject to change"})]})]})},{q:"Will the in game art ever match the character select art?",a:"Yes! Amy is hard at work on finishing some existing animation first,\n    but the goal is to have the sprites eventually match the high-res designs"},{q:"When are you adding a fourth character?",a:"Unless something drastic happens, adding a fourth character is extremely unlikely.\n    The amount of work it took to make the current cast of characters was enormous, and we're not even done yet!\n    Paul and Amy currently have day jobs. We only have so much time and energy on weeknights and weekends.\n    We never say never, but please don't plan on this happening."},{q:"Can I host a tournament of this game?",a:Object(ac.jsxs)("div",{children:["Please see the EULA for the exact terms. TL;DR go ahead, but know if your event is controversial somehow, I reserve the right to say no. However, this should almost never be the case, so please drop a note in the Discord (linked above) for help and cross promotion! If you are running an in-person event, please download the offline version of the game from ",Object(ac.jsx)("a",{href:kn.External.Download,children:"download.toughlovearena.com"})," to avoid any network issues during your event."]})},{q:"Can I mod the game?",a:"Please see the EULA for the exact terms.\n    TL;DR yes, but you cannot alter the EULA or credits.\n    We currently have limited mod support within the game client (check out Extras > Modding),\n    but more robust support is planned!\n    "},{q:"When are you adding X?",a:Object(ac.jsxs)("div",{children:["Please check the ",Object(ac.jsx)("a",{href:kn.Links.RoadmapUrl,children:"TODO LIST"})," for a rough sense of priority / timeline."]})},{q:"Why is X on the Won't Fix list?",a:"Because :)"},{q:"How did you make Tough Love Arena?",a:"Tough Love Arena is written in TypeScript, which is then transpiled to JavaScript to run in the browser.\n    The core game is a custom made engine and the graphics are powered by HTML <canvas>.\n    This is all wrapped in a React app to make code re-use easy across menus.\n    "},{q:"How are you making money?",a:"We are not!\n    We made Tough Love Arena for free, and we are currently hosting it at our personal expense.\n    This was always the plan: to be a passion project on the side.\n    "},{q:"How can I support you?",a:Object(ac.jsxs)("div",{children:["While we don't plan to make money off of Tough Love Arena, we appreciate our fans helping out with the costs! You can fund us directly by:",Object(ac.jsxs)("ul",{children:[Object(ac.jsxs)("li",{children:["Donating to our ",Object(ac.jsx)("a",{href:kn.External.Patreon,children:"Patreon"})]}),Object(ac.jsxs)("li",{children:["Buying official ",Object(ac.jsx)("a",{href:kn.External.Redbubble,children:"merch on Redbubble"})]}),Object(ac.jsxs)("li",{children:["Subbing to Paul's ",Object(ac.jsx)("a",{href:kn.External.Twitch,children:"Twitch"})," channel, where he streams TLA development every week"]})]}),"If you like the music, you can support our composers directly by buying the official album on ",Object(ac.jsx)("a",{href:"https://visager.bandcamp.com/album/tough-love-arena-original-game-soundtrack",children:"Bandcamp"}),"!"]})},{q:"How can I support you but without spending money?",a:"We are happy with people just sharing and enjoying the game! Send us a nice email or something :)"}].map((function(e){return{question:e.q,answer:"string"===typeof e.a?e.a.split("\n").map((function(e){return e.trim()})).join(" "):e.a}}));return Object(ac.jsxs)(yx,{title:"F. A. Q.",hideFaq:!0,children:[Object(ac.jsxs)("div",{style:{textAlign:"right"},children:["Last updated: ","June 27, 2022"]}),e.map((function(e,t){return Object(ac.jsx)(gO,Object(g.a)({},e),t)}))]})}function gO(e){return Object(ac.jsxs)("div",{style:{margin:"1em 0"},children:[Object(ac.jsx)("div",{style:{fontSize:"1.5em",marginBottom:"0.5em"},children:e.question}),Object(ac.jsx)("div",{children:e.answer})]})}function mO(){var e=Object(r.useState)(),t=Object(m.a)(e,2),n=t[0],a=t[1];return Rs(Object(u.a)(Object(c.a)().mark((function e(){var t,n;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("licenses.json");case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,a(n);case 7:case"end":return e.stop()}}),e)})))),Object(ac.jsxs)(yx,{title:"Open Source Licenses",children:[Object(ac.jsx)("div",{children:"Tough Love Arena was made possible thanks to the following open source libraries:"}),n?Object.keys(n).map((function(e){return Object(ac.jsx)(vO,{id:e,lic:n[e]},e)})):Object(ac.jsx)("p",{children:"loading, please wait..."})]})}function vO(e){return Object(ac.jsxs)("div",{style:{margin:"1em 0"},children:[Object(ac.jsx)("h3",{children:e.id.split("@")[0]}),Object(ac.jsxs)("div",{children:[Object(ac.jsx)(kO,{href:e.lic.repository,children:"Source"})," ",Object(ac.jsx)(kO,{href:e.lic.licenseUrl,children:"License"})," ",e.lic.licenses]})]})}function kO(e){var t=e.sameTab?{}:{target:"_blank",rel:"noopener noreferrer"};return Object(ac.jsx)("a",Object(g.a)(Object(g.a)({},t),{},{href:e.href,children:e.children}))}function jO(){return Object(ac.jsxs)(yx,{title:"TODO",hideRoadmap:!0,children:[Object(ac.jsxs)("div",{style:{textAlign:"right"},children:["Last updated: ","October 5, 2022"]}),Object(ac.jsx)("h2",{children:"Upcoming Tasks"}),Object(ac.jsx)("div",{children:"These are bugs or features that we plan to address ASAP"}),Object(ac.jsx)(yO,{notes:["Performance: Try prefabbed text and AB test the performance","Gameplay: Round positional values to integers","Gameplay: Add optional Handicap settings for Local Vs",'Training: Move "No HUD" setting to temporary memory',"Replays: Collect and display Ranked replays","Replays: Include mod code inside Replays to remove external dependency","Ranked/Lobbies: If logged out, show Account screen instead of showing error","Online P2P: Detect, display, and log whether using TURN relay server","Lobbies: Display total win/loss for each player","Lobbies: See inputs while spectating","Account: View other user accounts + stats","Mobile: Improve scrolling issues","Mobile: Improve corner touch target","Mobile: Investigate touch controls feeling worse in iOS 15",'Modding: Draw the "floor" to help with debugging',"Modding: Support simpler configs for common mechanics","Modding: Ability to save mods to user account","Infrastructure: Migrate database to new hosting provider"]}),Object(ac.jsx)("h2",{children:"Phase 1: Finish the Prototype"}),Object(ac.jsx)("div",{children:"These are either quick tasks or high priority projects"}),Object(ac.jsx)(yO,{notes:["Android/iOS app for offline play","Gameplay: Add live input display (like a stream overlay) in bottom middle","Training Mode: Add current/best combo info in a persistant box","Training Mode: Command list (how to do each move)","Online: Queue for Ranked/Casual from Training Mode","Account: Save replays to account for cross-device replay history"]}),Object(ac.jsx)("h2",{children:"Phase 2: Polish and Release"}),Object(ac.jsx)("div",{children:"These are larger projects that aren't high priority, but still considered blockers to release"}),Object(ac.jsx)(yO,{notes:["Animation cleanup (in-game art will match Character Select art)","Menu UI redesign","Story mode with NPC bosses","Intro and/or win quotes","One-time-purchase premium accounts","Achievements (potentially unlocking cosmetics)","Rewrite + improve the Character guides","Modding: Support custom art assets","AI improvements"]}),Object(ac.jsx)("h2",{children:"Phase 3: Support"}),Object(ac.jsx)("div",{children:"These are stretch goals to complete after the game leaves beta"}),Object(ac.jsx)(yO,{notes:['Discord "Rich Presence" Integration',"Chat window for lobbies","Friend list","Steam port","Host TURN servers around the world","Open source the rollback code as standalone JS library","Open source the game engine w/o TLA brand or IP"]}),Object(ac.jsx)("h2",{children:"Known Issues"}),Object(ac.jsx)("div",{children:"Bugs that will be fixed soon"}),Object(ac.jsx)(yO,{notes:["Gameplay: Very one-sided rollbacks happen if either player cannot reach consistent 60 FPS","Menu: Going fullscreen breaks the scrolling on Frame Data / Debug Ref menus","Training Mode: Frame advantage counter in the top left can be incorrect","Tutorials: Lemon and Grounder trials will trigger on startup, not on hit"]}),Object(ac.jsx)("h2",{children:"Won't Fix"}),Object(ac.jsx)("div",{children:"These are features that are commonly requested that we don't currently plan on doing"}),Object(ac.jsx)(yO,{notes:["Console ports (infeasible with current team)","Lobbies: Quick rematch (if you want to quickly rematch, do a Private Match)","Lobbies: Public lobbies (use Casual Match or share the code freely)","Gameplay: Meter carrying over between rounds","Gameplay: Block button (neutral block exists)","Gameplay: Multi-button inputs (accessibility issues on mobile)","Gameplay: Special move inputs (quarter circle, charge back-forward, etc)","Gameplay: New/additional attacks","Gameplay: Super attacks","Gameplay: Additional characters"]})]})}function yO(e){return Object(ac.jsx)("ul",{children:e.notes.map((function(e){return Object(ac.jsx)("li",{children:e},e)}))})}var xO=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"componentDidMount",value:function(){is.drawBlack()}},{key:"render",value:function(){var e=this;return Object(ac.jsxs)(ac.Fragment,{children:[Object(ac.jsx)(pO,{onExit:{label:"Exit back to the game",callback:this.props.onExit}}),Object(ac.jsx)(cc,{onControllerInput:function(t,n){t===te.attack2&&e.props.onExit()}})]})}}]),n}(i.a.Component);xO.Title="Debug Tools",xO.ShouldJumpTo=[vv.Debug].some((function(e){return e}));var OO=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).options=[{label:hy.Title,comp:function(e){return Object(ac.jsx)(hy,Object(g.a)({onComplete:e.onExit},e))},jumpTo:vv.TestFPS,hideOnMobile:!0},{label:ey.Title,comp:function(e){return Object(ac.jsx)(ey,Object(g.a)({},e))},jumpTo:vv.ArtRef,hideOnMobile:!0},{label:Vy.Title,comp:function(e){return Object(ac.jsx)(Vy,Object(g.a)({},e))},jumpTo:vv.ModMenu,hideOnMobile:!0},{label:Ky.Title,comp:function(e){return Object(ac.jsx)(Ky,Object(g.a)({},e))},jumpTo:vv.ExtrasSlidePuzzle,hideOnMobile:!0},{label:uy.Title,comp:function(e){return Object(ac.jsx)(uy,Object(g.a)({bgStage:ni.Stages.Playground},e))},jumpTo:vv.EULA},{label:xO.Title,comp:function(e){return Object(ac.jsx)(xO,Object(g.a)({},e))},jumpTo:vv.Debug}],e}return Object(h.a)(n,[{key:"render",value:function(){return Object(ac.jsx)(Rp,{title:n.Title,options:this.options,onExit:this.props.onExit})}}]),n}(i.a.Component);OO.Title="Advanced Extras",OO.ShouldJumpTo=[vv.TestFPS,vv.ArtRef,vv.ModMenu,vv.ExtrasSlidePuzzle,vv.EULA,vv.Debug].some((function(e){return e}));var wO="Extras",SO={label:wO,jumpTo:[vv.Replays,vv.FrameData,vv.HallOfFame,vv.About,OO.ShouldJumpTo].some((function(e){return e})),comp:function(e){var t=[{label:qv.Title,comp:function(e){return Object(ac.jsx)(qv,Object(g.a)({},e))},jumpTo:vv.Replays},{label:Yb.Title,comp:function(e){return Object(ac.jsx)(Yb,Object(g.a)({canManageMods:!0},e))},jumpTo:vv.FrameData},{label:hj.Title,comp:function(e){return Object(ac.jsx)(hj,Object(g.a)({},e))},jumpTo:vv.HallOfFame},{label:pk.Title,comp:function(e){return Object(ac.jsx)(pk,Object(g.a)({},e))},jumpTo:vv.About},{label:OO.Title,comp:function(e){return Object(ac.jsx)(OO,Object(g.a)({},e))},jumpTo:OO.ShouldJumpTo}];return Object(ac.jsx)(Rp,{title:wO,options:t,onExit:e.onExit})}},CO=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"render",value:function(){var e={baseGameMeta:n.TutorialGameMeta,title:"Tutorial",label1:"Human",label2:"Dummy",tutorial:this.props.tutorial};return Object(ac.jsx)(gv,Object(g.a)(Object(g.a)({},this.props),{},{settings:e}))}}]),n}(i.a.Component);CO.TutorialGameMeta={skipReady:!0,isTutorial:!0};var AO=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).defaultConfig={matchId:nn(),firstTo:1,roundTime:oe,stage:ni.Stages.Notebook,fighter1:Ts.debugFighter1()||ni.Characters.Beef.original,fighter2:Ts.debugFighter2()||ni.Characters.Pork.original},e.fixedCode=1===Object.keys(e.props.bookByCode).length?Object.keys(e.props.bookByCode)[0]:void 0,e.state={loading:!0},e.presence=rh.Tutorial,e}return Object(h.a)(n,[{key:"componentDidMount",value:function(){this.fixedCode?this.setCode(this.fixedCode):this.setState({loading:!1})}},{key:"setCode",value:function(e){var t=this.props.bookByCode[e](),n=void 0;t&&(1===t.chapters.length||this.props.skipChapterSelect)&&(n=0),this.setState({loading:!1,code:e,tutorial:t,chapter:n})}},{key:"setChapter",value:function(e,t){e.reset(t),this.setState({chapter:t})}},{key:"reset",value:function(){if(this.fixedCode)return this.props.onExit();this.setState({code:void 0,tutorial:void 0,chapter:void 0})}},{key:"render",value:function(){var e=this,t=this.state,n=t.loading,a=t.code,r=t.tutorial,i=t.chapter;if(n)return Object(ac.jsx)(Ip,{title:this.props.title,presence:this.presence,infos:[{label:Object(ac.jsx)($f,{label:"Loading tutorials"})}]});if(!a)return Object(ac.jsx)(Mf,{existingConfig:this.defaultConfig,scoreboard:co.empty(),gameMeta:CO.TutorialGameMeta,onExit:this.props.onExit,onReady:function(t){return e.setCode(t.fighter1.stats.code)},title:this.props.title,label1:"You",label2:"Dummy",skipColors:!0});if(!r)return Object(ac.jsx)(Rp,{title:this.props.title,presence:this.presence,infos:[{label:"Tutorial has not been made for this character yet. Sorry!"}],onExit:function(){return e.reset()}});if(void 0===i){var o=r.chapters.map((function(t,n){return{label:t.name,callback:function(){return e.setChapter(r,n)}}}));return Object(ac.jsx)(Rp,{title:r.title,presence:this.presence,options:o,onExit:function(){return e.reset()}})}return Object(ac.jsx)(CO,{tutorial:r,onExit:function(){return e.reset()}})}}]),n}(i.a.Component),TO="How To Play",MO={label:TO,jumpTo:[vv.Introduction,vv.Tutorial,vv.TutorialStrategy,vv.TutorialCombo].some((function(e){return e})),comp:function(e){var t=[{label:"Menu Intro",comp:function(e){return Object(ac.jsx)(ok,Object(g.a)({},e))},jumpTo:vv.Introduction},{label:"Basics",comp:function(e){return Object(ac.jsx)(AO,Object(g.a)({title:"Basics",bookByCode:Wo,skipChapterSelect:!0},e))}},{label:"Advanced",comp:function(e){return Object(ac.jsx)(AO,Object(g.a)({title:"Advanced",bookByCode:No},e))},blockDuringAprilFools:!0},{label:"Character Guides",comp:function(e){return Object(ac.jsx)(AO,Object(g.a)({title:"Character Guides",bookByCode:Uo},e))},blockDuringAprilFools:!0,jumpTo:vv.TutorialStrategy},{label:"Combo Trials",comp:function(e){return Object(ac.jsx)(AO,Object(g.a)({title:"Combo Trials",bookByCode:qo},e))},blockDuringAprilFools:!0,jumpTo:vv.TutorialCombo}];return Object(ac.jsx)(Rp,Object(g.a)({title:TO,presence:rh.Tutorial,options:t},e))}},PO=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"confirm",value:function(){li.isEventMode.set(!0),Ts.browserReload()}},{key:"render",value:function(){var e=this,t=rh.VersusLocal;return Object(ac.jsx)(Rp,{title:n.Title,presence:t,infos:[{label:Object(ac.jsxs)("div",{style:{fontSize:"0.7em"},children:["This mode is designed for offline events",Object(ac.jsx)("br",{}),"Use the Pause Menu to exit"]})}],options:[{label:"CONTINUE",callback:function(){return e.confirm()}}],onExit:this.props.onExit})}}]),n}(i.a.Component);PO.Title="Event Mode",PO.ShouldJumpTo=[vv.Event].some((function(e){return e}));var RO,IO=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"render",value:function(){return Object(ac.jsx)(gv,Object(g.a)(Object(g.a)({},this.props),{},{settings:{baseGameMeta:{isLocalVersus:!0},title:"Local Versus",label1:"Player 1",label2:"Player 2"}}))}}]),n}(i.a.Component);IO.Title="Local Versus";var BO,DO,HO=b.a.div(RO||(RO=Object(f.a)(["\n  position: fixed;\n  width: 100%;\n  height: 100%;\n  top: 0;\n  left: 0;\n\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n\n  color: white;\n  background: #111;\n"])));function EO(e){var t=Object(r.useState)(10),n=Object(m.a)(t,2),a=n[0],i=n[1],o=Is(),s=function(e,t){var n=Object(r.useRef)(),a=Object(r.useCallback)((function(){clearInterval(n.current)}),[n]);return Ms((function(){return n.current=setInterval(e,t),a})),{clear:a}}((function(){return i((function(e){return e-1}))}),1e3);function c(){e.onContinue()}function u(){0!==a&&i(0)}return Object(r.useEffect)((function(){0===a&&(s.clear(),o.schedule((function(){return e.onExit()}),3e3))}),[a,s,o,e]),Object(ac.jsxs)(HO,{children:[0===a?Object(ac.jsx)("div",{children:"Game Over"}):Object(ac.jsxs)("div",{children:["Continue? ",a]}),Object(ac.jsx)(cc,{takeFocus:!0,onControllerInput:function(e){var t,n,a=(t={},Object(v.a)(t,te.attack1,c),Object(v.a)(t,te.attack2,u),Object(v.a)(t,te.attack4,c),t);null===(n=a[e])||void 0===n||n.call(a)}})]})}var _O,FO=b.a.div(BO||(BO=Object(f.a)(["\n  position: fixed;\n  top: 1em;\n  left: 1em;\n  width: calc(100% - 2em);\n\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  align-items: stretch;\n  gap: 1em;\n"]))),LO=b.a.div(DO||(DO=Object(f.a)(["\n  background: white;\n  color: black;\n  border-radius: 1em;\n  height: 20vh;\n\n  display: flex;\n  flex-direction: row;\n  justify-content: flex-start;\n  align-items: stretch;\n  gap: 1em;\n\n  & aside {\n    width: 20vh;\n    text-align: center;\n  }\n  & aside img {\n    width: auto;\n    height: 100%;\n  }\n\n  & section {\n    display: block;\n    text-align: left;\n  }\n"])));function GO(e){var t=e.state,n=pv(t),a=n.chapter,r=n.dialogue;if(!r)return null;var i=Object(m.a)(r,2),o=i[0],s=i[1],c=1===o?ni.fighterFromCode(t.heroCode):ni.fighterFromCode(a.config.enemyCode);return Object(ac.jsxs)(FO,{onClick:function(){return fv.onNextDialogue.broadcast(t)},children:[Object(ac.jsxs)(LO,{children:[Object(ac.jsx)("aside",{children:Object(ac.jsx)("img",{src:c.previewUrl,alt:c.stats.name})}),Object(ac.jsxs)("section",{children:[Object(ac.jsx)("h1",{children:c.stats.name}),s]})]}),Object(ac.jsx)(cc,{takeFocus:!0,isVersusCPU:!0,onControllerInput:function(e){var n,a=Object(v.a)({},te.attack1,(function(){return fv.onNextDialogue.broadcast(t)}));null===(n=a[e])||void 0===n||n.call(a)}})]})}var zO=b.a.div(_O||(_O=Object(f.a)(["\n  position: fixed;\n  width: 100%;\n  height: 100%;\n  top: 0;\n  left: 0;\n\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n\n  color: white;\n  background: #111;\n"])));function WO(e){return Object(ac.jsxs)(zO,{children:[Object(ac.jsx)("div",{children:"You win!!!"}),Object(ac.jsx)(cc,{takeFocus:!0,onControllerInput:e.onExit})]})}function NO(e){var t=Object(r.useState)({heroCode:e.fighter.stats.code,chapterIndex:0,chapterStep:A.Loading,dialogueIndex:0}),n=Object(m.a)(t,2),a=n[0],i=n[1];if(window.arcade=a,Object(r.useEffect)((function(){return fv.onState.subscribe(i)}),[i]),Object(r.useEffect)((function(){a.chapterStep===A.Refresh?i(Object(g.a)(Object(g.a)({},a),{},{chapterIndex:a.chapterIndex+1,chapterStep:A.Loading,dialogueIndex:0})):a.chapterStep===A.Exit&&e.onExit()}),[e,a]),a.chapterStep===A.Refresh)return null;if(a.chapterStep===A.Continue)return Object(ac.jsx)(EO,{fighter:e.fighter,onContinue:function(){return i(Object(g.a)(Object(g.a)({},a),{},{chapterStep:A.Loading,dialogueIndex:0}))},onExit:function(){return e.onExit()}});if(a.chapterStep===A.Victory)return Object(ac.jsx)(WO,{fighter:e.fighter,onExit:function(){return e.onExit()}});var o=pv(a).chapter,s={matchId:ut(),firstTo:li.DefaultFirstTo.defaultValue,roundTime:60,stage:o.config.stage,fighter1:e.fighter,fighter2:ni.fighterFromCode(o.config.enemyCode)},c={baseGameMeta:{isArcade:!0,isHumanVsCpu:!0,cpuDiff2:D.Hard},title:NO.Title,label1:"You",label2:"CPU",arcade:{chapter:o,gameConfig:s,onLoaded:function(){return fv.onFinishLoading.broadcast(a)},onComplete:function(e){return fv.onFinishFight.broadcast([a,e])}}};return Object(ac.jsxs)(ac.Fragment,{children:[Object(ac.jsx)(gv,Object(g.a)(Object(g.a)({},e),{},{settings:c})),";",Object(ac.jsx)(GO,{state:a})]})}NO.Title="Arcade Versus";var UO={matchId:ut(),firstTo:1,roundTime:oe,stage:ni.Stages.Notebook,fighter1:Ts.debugFighter1()||ni.Characters.Beef.original,fighter2:Ts.debugFighter2()||ni.Characters.Pork.original},qO={isArcade:!0,isHumanVsCpu:!0};function VO(e){var t=Object(r.useState)(),n=Object(m.a)(t,2),a=n[0],i=n[1];return a?Object(ac.jsx)(NO,Object(g.a)(Object(g.a)({},e),{},{fighter:a})):Object(ac.jsx)(Mf,{existingConfig:UO,scoreboard:co.empty(),gameMeta:qO,onExit:e.onExit,onReady:function(e){return i(e.fighter1)},title:VO.Title,label1:"You",label2:"CPU"})}VO.Title="Arcade Mode";var YO=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"render",value:function(){var e=this.props.forceCPU,t=null!==e&&void 0!==e&&e.stats.isBoss?D.Hard:li.VersusCpuDifficulty.get(),n={baseGameMeta:{isHumanVsCpu:!0,isHumanVsBoss:null===e||void 0===e?void 0:e.stats.isBoss,cpuDiff2:t},title:"Versus CPU",label1:"Human",label2:"CPU",forceCPU:e};return Object(ac.jsx)(gv,Object(g.a)(Object(g.a)({},this.props),{},{settings:n}))}}]),n}(i.a.Component);YO.Title="Human vs CPU",YO.BossTitle=function(e){return"Boss: ".concat(e.stats.name)};var JO=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"render",value:function(){var e={baseGameMeta:{isCpuVsCpu:!0,cpuDiff1:qt(H),cpuDiff2:qt(H)},title:n.Title,label1:"CPU",label2:"CPU"};return Object(ac.jsx)(gv,Object(g.a)(Object(g.a)({},this.props),{},{settings:e}))}}]),n}(i.a.Component);JO.Title="CPU vs CPU";var KO="Versus CPU",QO={label:KO,jumpTo:[vv.VersusCpu,vv.VersusCpuBossPork,vv.VersusCpuBossGarlic,vv.VersusTwoCpu].some((function(e){return e})),comp:function(e){var t=[{label:YO.Title,comp:function(e){return Object(ac.jsx)(YO,Object(g.a)({},e))},jumpTo:vv.VersusCpu},{label:YO.BossTitle(ni.Characters.UnplayableBossPork.original),comp:function(e){return Object(ac.jsx)(YO,Object(g.a)({forceCPU:ni.Characters.UnplayableBossPork.original},e))},jumpTo:vv.VersusCpuBossPork,blockDuringAprilFools:!0},{label:YO.BossTitle(ni.Characters.UnplayableBossGarlic.original),comp:function(e){return Object(ac.jsx)(YO,Object(g.a)({forceCPU:ni.Characters.UnplayableBossGarlic.original},e))},jumpTo:vv.VersusCpuBossGarlic,blockDuringAprilFools:!0},{label:JO.Title,comp:function(e){return Object(ac.jsx)(JO,Object(g.a)({},e))},jumpTo:vv.VersusTwoCpu}];return Object(ac.jsx)(Rp,Object(g.a)({title:KO,options:t},e))}},ZO="Play Offline",XO={label:ZO,jumpTo:[vv.PlayOfflineMenu,vv.Arcade,vv.LocalVersus,vv.Training,vv.Event,QO.jumpTo].some((function(e){return e})),comp:function(e){var t=[{label:VO.Title,comp:function(e){return Object(ac.jsx)(VO,Object(g.a)({},e))},jumpTo:vv.Arcade,isBeta:!0},{label:IO.Title,comp:function(e){return Object(ac.jsx)(IO,Object(g.a)({},e))},jumpTo:vv.LocalVersus,hideOnMobile:!0},QO,{label:dy.Title,comp:function(e){return Object(ac.jsx)(dy,Object(g.a)({},e))},jumpTo:vv.Training},{label:PO.Title,comp:function(e){return Object(ac.jsx)(PO,Object(g.a)({},e))},jumpTo:vv.Event,hideOnMobile:!0}];return Object(ac.jsx)(Rp,Object(g.a)({title:ZO,options:t},e))}};var $O="Block List",ew={label:$O,comp:function(e){return Object(ac.jsx)(tw,Object(g.a)({},e))}};function tw(e){var t=Object(r.useRef)(ci.usingLocalStorage()).current,n=Object(r.useState)(t.getCasualBlocks()),a=Object(m.a)(n,2),i=a[0],o=a[1],s=i.map((function(e){return{label:Object(ac.jsx)(nw,{ab:e}),callback:function(){return function(e){ro("CasualBlock_remove"),t.removeCasualBlock(e.aid),o(t.getCasualBlocks())}(e)}}})),c=0===s.length?"Your block list is empty":"Click on a name to remove the block";return Object(ac.jsx)(Rp,Object(g.a)({title:$O,infos:[{label:c}],options:s},e))}function nw(e){var t=e.ab;return Object(ac.jsxs)("div",{style:{fontSize:"0.8em",textTransform:"none"},children:[Object(ac.jsx)("div",{children:t.tag}),Object(ac.jsxs)("div",{style:{fontSize:"0.8em"},children:["Blocked until: ",new Date(t.expires).toLocaleString()]})]})}var aw=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={draft:e.props.apiToken.account.getNameWithoutHash(),waiting:!1},e.infos=function(e){return[{label:"Write in custom name"},{label:"Note: Using your name to offend or advertise can get your account banned"}]},e.options=function(t){return[{input:{allowCapital:!0,placeholder:"",value:t.draft,onChange:function(t){return e.setState({draft:t})},onSubmit:function(){return e.update()}}},{label:"Save Changes",callback:function(){return e.update()}}]},e}return Object(h.a)(n,[{key:"update",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(){var t,n,a;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.apiToken,n=this.state.draft,e.next=4,uc(this,{waiting:!0});case 4:return e.prev=4,e.next=7,ns.accountCustomTag(t,{tag:n});case 7:return a=e.sent,e.next=10,this.props.onUpdate(a);case 10:return e.next=12,this.props.onExit();case 12:return e.abrupt("return");case 15:return e.prev=15,e.t0=e.catch(4),e.next=19,uc(this,{waiting:!1,errorMessage:"Error: "+e.t0.message});case 19:case"end":return e.stop()}}),e,this,[[4,15]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,a=t.waiting,r=t.errorMessage;return a?Object(ac.jsx)(Ip,{title:n.Title,infos:[{label:Object(ac.jsx)($f,{label:"Waiting for network"})}]}):r?Object(ac.jsx)(Rp,{title:n.Title,infos:[{label:r}],onExit:function(){return e.setState({errorMessage:void 0})}}):Object(ac.jsx)(Rp,{title:n.Title,infos:this.infos(this.state),options:this.options(this.state),onExit:this.props.onExit})}}]),n}(i.a.Component);aw.Title="Customize Name";var rw=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={waiting:!1},e.gameMeta={isAccountFavorite:!0},e}return Object(h.a)(n,[{key:"setFavoriteId",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(t){var n,a;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.props.apiToken,e.next=3,uc(this,{waiting:!0});case 3:return e.prev=3,e.next=6,ns.accountFavorite(n,{favoriteId:t});case 6:return a=e.sent,e.next=9,this.props.onUpdate(a);case 9:return e.next=11,this.props.onExit();case 11:return e.abrupt("return");case 14:return e.prev=14,e.t0=e.catch(3),e.next=18,uc(this,{waiting:!1,errorMessage:"error updating"});case 18:case"end":return e.stop()}}),e,this,[[3,14]])})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t="Set Account Favorite",n=this.state,a=n.waiting,r=n.errorMessage;return a?Object(ac.jsx)(Ip,{title:t,infos:[{label:Object(ac.jsx)($f,{label:"Waiting for network"})}]}):r?Object(ac.jsx)(Rp,{title:t,infos:[{label:r}],onExit:this.props.onExit}):Object(ac.jsx)(Mf,{scoreboard:co.empty(),gameMeta:this.gameMeta,onExit:this.props.onExit,onReady:function(t){return e.setFavoriteId(t.fighter1.stats.id)},title:t,label1:"Favorite",label2:"???",forceCPU:ni.Characters.Pork.original})}}]),n}(i.a.Component);rw.Title="Set Favorite";var iw,ow,sw,cw,uw,lw,hw,dw,pw,fw,bw,gw=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){var e,a,r;Object(l.a)(this,n);for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return(r=t.call.apply(t,[this].concat(o))).formOpts=qi.getOptions(),r.state={form1:null!==(e=qi.parseAdjective(r.props.apiToken.account.getTag()))&&void 0!==e?e:qt(r.formOpts.adj),form2:null!==(a=qi.parseFood(r.props.apiToken.account.getTag()))&&void 0!==a?a:qt(r.formOpts.food),waiting:!1},r.infos=function(e){return[{label:"Choose display name from two preset words"},{label:qi.generateName(r.props.apiToken.account.aid(),e.form1,e.form2)}]},r.options=function(e){return[{label:"Adjective:",select:{onChange:function(e){return r.setState({form1:e.value})},current:e.form1,options:r.formOpts.adj.map((function(e){return{label:qi.capitalize(e),value:e}}))}},{label:"Food:",select:{onChange:function(e){return r.setState({form2:e.value})},current:e.form2,options:r.formOpts.food.map((function(e){return{label:qi.capitalize(e),value:e}}))}},{label:"Randomize",callback:function(){return r.randomize()}},{label:"Save Changes",callback:function(){return r.update()}}]},r}return Object(h.a)(n,[{key:"randomize",value:function(){this.setState({form1:qt(this.formOpts.adj),form2:qt(this.formOpts.food)})}},{key:"update",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(){var t,n,a,r,i,o;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.apiToken,n=this.state,a=n.form1,r=n.form2,e.next=4,uc(this,{waiting:!0});case 4:return e.prev=4,i=qi.generateName(this.props.apiToken.account.aid(),a,r),e.next=8,ns.accountUpdate(t,{display:i});case 8:return o=e.sent,e.next=11,this.props.onUpdate(o);case 11:return e.next=13,this.props.onExit();case 13:return e.abrupt("return");case 16:return e.prev=16,e.t0=e.catch(4),e.next=20,uc(this,{waiting:!1,errorMessage:"error updating"});case 20:case"end":return e.stop()}}),e,this,[[4,16]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,a=t.waiting,r=t.errorMessage;return a?Object(ac.jsx)(Ip,{title:n.Title,infos:[{label:Object(ac.jsx)($f,{label:"Waiting for network"})}]}):r?Object(ac.jsx)(Rp,{title:n.Title,infos:[{label:r}],onExit:function(){return e.setState({errorMessage:void 0})}}):Object(ac.jsx)(Rp,{title:n.Title,infos:this.infos(this.state),options:this.options(this.state),onExit:this.props.onExit})}}]),n}(i.a.Component);gw.Title="Change Name";var mw=b.a.div(iw||(iw=Object(f.a)(["\n  font-size: 1.2rem;\n  text-align: center;\n  color: white;\n  background: rgba(0, 0, 0, 0.7);\n\n  padding: 2em;\n  border-radius: 0.5em;\n"]))),vw=b.a.div(ow||(ow=Object(f.a)(["\n  font-size: 2em;\n"]))),kw=b.a.div(sw||(sw=Object(f.a)(["\n  font-size: 1.5em;\n"]))),jw=b.a.div(cw||(cw=Object(f.a)(["\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: stretch;\n  flex-wrap: nowrap;\n"]))),yw=b.a.div(uw||(uw=Object(f.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: stretch;\n  align-items: center;\n  flex-wrap: nowrap;\n\n  border: 0.1rem solid #ccc;\n  border-right: none;\n"]))),xw=b.a.div(lw||(lw=Object(f.a)(["\n  font-size: 1.5em;\n"]))),Ow=b.a.div(hw||(hw=Object(f.a)(["\n  flex: 1;\n  width: 30vh;\n  overflow: hidden;\n\n  ","\n"])),(function(e){return"\n    background-image: url(".concat(e.bgSrc,");\n    background-size: auto 100%;\n    background-position: center;\n    background-repeat: no-repeat;\n  ")})),ww=b.a.table(dw||(dw=Object(f.a)(["\n  border-collapse: collapse;\n\n  & th {\n    font-size: 1.5em;\n  }\n  & td, & th {\n    border: 0.1rem solid #ccc;\n    width: 5em;\n  }\n  & tr:hover {\n    color: black;\n    background-color: var(--heart);\n  }\n"]))),Sw=b.a.button(pw||(pw=Object(f.a)(["\n  margin: 0 0.5em;\n"]))),Cw=b.a.img(fw||(fw=Object(f.a)(["\n  height: 1em;\n  width: auto;\n  margin: 0;\n"]))),Aw=b.a.div(bw||(bw=Object(f.a)(["\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n  flex-wrap: wrap;\n\n  & > div {\n    width: 30%;\n  }\n  & > div:nth-child(1),\n  & > div:nth-child(2) {\n    width: 45%;\n  }\n"]))),Tw=["all",O.Ranked,O.Casual,O.Private,O.Lobby],Mw=["arms","armsb","beef","beefb","legs","legsb"],Pw=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={response:e.props.personal,queue:"all",character:Mw[0]},e}return Object(h.a)(n,[{key:"handleController",value:function(e){var t=this.state,n=t.response,a=t.queue,r=t.character;return e===te.left?this.setState({character:Nt(r,Mw)}):e===te.right?this.setState({character:Ut(r,Mw)}):e===te.attack1?this.setState({queue:Ut(a,Tw)}):e===te.attack2?this.props.onExit():e===te.attack3?this.setState({response:Ut(n,[this.props.global,this.props.personal])}):void 0}},{key:"calcAll",value:function(e){return Object.values(e.outcome).reduce((function(e,t){return Object.keys(t).forEach((function(n){var a=t[n],r=e[n]||{};Object.keys(a).forEach((function(e){var t=a[e],n=r[e]||{};Object.keys(t).forEach((function(e){var a=e,r=t[a],i=n[a]||0;n[a]=i+r})),r[e]=n})),e[n]=r})),e}),{})}},{key:"calcTotalQueue",value:function(e){var t,n=(t={},Object(v.a)(t,w.Win,0),Object(v.a)(t,w.Loss,0),Object(v.a)(t,w.Draw,0),t);return Object.values(e).forEach((function(e){Object.values(e).forEach((function(e){var t,a,r;n[w.Win]+=null!==(t=e[w.Win])&&void 0!==t?t:0,n[w.Loss]+=null!==(a=e[w.Loss])&&void 0!==a?a:0,n[w.Draw]+=null!==(r=e[w.Draw])&&void 0!==r?r:0}))})),n}},{key:"calcTotalMatchup",value:function(e){var t,n=(t={},Object(v.a)(t,w.Win,0),Object(v.a)(t,w.Loss,0),Object(v.a)(t,w.Draw,0),t);return Object.values(e).forEach((function(e){var t,a,r;n[w.Win]+=null!==(t=e[w.Win])&&void 0!==t?t:0,n[w.Loss]+=null!==(a=e[w.Loss])&&void 0!==a?a:0,n[w.Draw]+=null!==(r=e[w.Draw])&&void 0!==r?r:0})),n}},{key:"sanitizeMatchup",value:function(e,t,n){var a=t[n]||{};return e?(Object.keys(a).forEach((function(e){var t=a[e];n===e&&(t=Object(g.a)(Object(g.a)({},t),{},{draw:Math.ceil((t.draw||0)/2)})),a[e]=t})),a):a}},{key:"renderRow",value:function(e,t,n){var a,r,i,o=null!==(a=n.win)&&void 0!==a?a:0,s=null!==(r=n.loss)&&void 0!==r?r:0,c=null!==(i=n.draw)&&void 0!==i?i:0,u=o+s+c,l=o>0||s>0?(100*o/(o+s)).toFixed(0):"0";return Object(ac.jsxs)("tr",{children:[Object(ac.jsx)("td",{children:t}),Object(ac.jsx)("td",{children:u}),Object(ac.jsxs)("td",{children:[l,"%"]}),Object(ac.jsx)("td",{children:null!==o&&void 0!==o?o:0}),Object(ac.jsx)("td",{children:null!==s&&void 0!==s?s:0}),Object(ac.jsx)("td",{children:null!==c&&void 0!==c?c:0})]},e)}},{key:"renderCharacter",value:function(e,t,n){var a=this,r=ni.fighterFromCode(n),i=this.sanitizeMatchup(e,t,n),o=this.calcTotalMatchup(i);return Object(ac.jsxs)(jw,{children:[Object(ac.jsxs)(yw,{children:[Object(ac.jsx)(xw,{children:r.stats.name}),Object(ac.jsx)(Ow,{bgSrc:r.previewUrl})]}),Object(ac.jsxs)(ww,{children:[Object(ac.jsx)("thead",{children:Object(ac.jsxs)("tr",{children:[Object(ac.jsx)("th",{children:"vs"}),Object(ac.jsx)("th",{children:"Matches"}),Object(ac.jsx)("th",{children:"Win %"}),Object(ac.jsx)("th",{children:"Win"}),Object(ac.jsx)("th",{children:"Lose"}),Object(ac.jsx)("th",{children:"Draw"})]})}),Object(ac.jsxs)("tbody",{children:[this.renderRow("overall","< Overall >",o),Mw.map((function(e){var t=ni.fighterFromCode(e);return a.renderRow(e,t.stats.name,i[e]||{})}))]})]})]})}},{key:"renderQueue",value:function(e,t,n){var a,r=this.calcTotalQueue(n),i=Math.ceil((e?.5:1)*Object.values(r).reduce((function(e,t){return e+t}))),o=(a={all:"All Online Modes"},Object(v.a)(a,O.Ranked,"Ranked Match"),Object(v.a)(a,O.Casual,"Casual Match"),Object(v.a)(a,O.Private,"Private Match"),Object(v.a)(a,O.Lobby,"Private Lobby"),a)[t];return Object(ac.jsxs)("div",{children:[Object(ac.jsx)(kw,{children:o}),Object(ac.jsxs)("div",{children:["Total matches recorded: ",i]})]})}},{key:"render",value:function(){var e=this,t=this.props,n=t.personalTitle,a=t.global,r=t.onExit,i=this.state,o=i.response,s=i.queue,c=i.character,u=o===a,l=o===a?"Global Stats":n,h=o===a?"switch to personal":"switch to global",d="all"===s?this.calcAll(o):o.outcome[s];return Object(ac.jsxs)(xc,{src:gi.loadBackgroundImage(ni.Stages.Notebook.backgroundSrc).imageUrl,children:[Object(ac.jsxs)(mw,{children:[Object(ac.jsx)(vw,{children:l}),Object(ac.jsxs)("div",{children:["Latest online match: ",o.updated?new Date(o.updated).toLocaleString():"???"]}),Object(ac.jsx)("br",{}),this.renderQueue(u,s,d),Object(ac.jsx)("br",{}),this.renderCharacter(u,d,c),Object(ac.jsx)("br",{}),vn.isMobile?Object(ac.jsxs)("div",{children:[Object(ac.jsx)(Sw,{onClick:function(){return e.handleController(te.left)},children:"prev char"}),Object(ac.jsx)(Sw,{onClick:function(){return e.handleController(te.right)},children:"next char"}),Object(ac.jsx)(Sw,{onClick:function(){return e.handleController(te.attack1)},children:"next online mode"}),Object(ac.jsx)(Sw,{onClick:function(){return e.handleController(te.attack3)},children:h}),Object(ac.jsx)(Sw,{onClick:r,children:"exit"})]}):Object(ac.jsx)("div",{children:Object(ac.jsxs)(Aw,{children:[Object(ac.jsxs)(Mp,{hover:!1,shrink:!0,onClick:function(){return e.handleController(te.left)},children:[Object(ac.jsx)(Cw,{src:ni.Notation[te.left]}),": previous character"]}),Object(ac.jsxs)(Mp,{hover:!1,shrink:!0,onClick:function(){return e.handleController(te.right)},children:[Object(ac.jsx)(Cw,{src:ni.Notation[te.right]}),": next character"]}),Object(ac.jsxs)(Mp,{hover:!1,shrink:!0,onClick:function(){return e.handleController(te.attack1)},children:[Object(ac.jsx)(Cw,{src:ni.Notation[te.attack1]}),": switch online mode"]}),Object(ac.jsxs)(Mp,{hover:!1,shrink:!0,onClick:function(){return e.handleController(te.attack2)},children:[Object(ac.jsx)(Cw,{src:ni.Notation[te.attack2]}),": exit"]}),Object(ac.jsxs)(Mp,{hover:!1,shrink:!0,onClick:function(){return e.handleController(te.attack3)},children:[Object(ac.jsx)(Cw,{src:ni.Notation[te.attack3]}),": ",h]})]})})]}),Object(ac.jsx)(cc,{onControllerInput:function(t){return e.handleController(t)}})]})}}]),n}(i.a.Component),Rw=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={},e.getGlobal=Rl()(Promise.resolve({})),e.getPersonal=Rl()(Promise.resolve({})),e}return Object(h.a)(n,[{key:"componentDidMount",value:function(){this.fetch()}},{key:"componentWillUnmount",value:function(){this.getGlobal.trash(),this.getPersonal.trash()}},{key:"fetch",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(){var t=this;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.getGlobal=Rl()(ns.globalStatsGet()),this.getGlobal.then((function(e){wn("global stats:",e),t.setState({global:e})})).catch((function(){return t.setState({errorMessage:"Could not fetch stats"})})),this.getPersonal=Rl()(ns.accountStatsGet(this.props.apiToken)),this.getPersonal.then((function(e){wn("personal stats:",e),t.setState({personal:e})})).catch((function(){return t.setState({errorMessage:"Could not fetch stats"})}));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.global,n=e.personal,a=e.errorMessage,r=rh.Stats;return a?Object(ac.jsx)(Rp,{presence:r,infos:[{label:a}],onExit:this.props.onExit}):t&&n?Object(ac.jsx)(Pw,{personalTitle:this.props.apiToken.account.getTag(),global:t,personal:n,onExit:this.props.onExit}):Object(ac.jsx)(Rp,{presence:r,infos:[{label:"Waiting for network..."}],onExit:this.props.onExit})}}]),n}(i.a.Component);Rw.Title="View Stats";var Iw=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={},e.isPaidOrVip=e.props.apiToken.account.isPaid()||e.props.apiToken.account.isVip(),e.options=[].concat(Object(k.a)(e.props.onContinue?[{label:e.props.onContinue.label,callback:e.props.onContinue.callback}]:[]),[e.isPaidOrVip?{label:aw.Title,comp:function(t){return Object(ac.jsx)(aw,Object(g.a)({apiToken:e.props.apiToken,onUpdate:e.props.onUpdate},t))}}:{label:gw.Title,comp:function(t){return Object(ac.jsx)(gw,Object(g.a)({apiToken:e.props.apiToken,onUpdate:e.props.onUpdate},t))}},{label:rw.Title,comp:function(t){return Object(ac.jsx)(rw,Object(g.a)({apiToken:e.props.apiToken,onUpdate:e.props.onUpdate},t))},jumpTo:vv.AccountStats,blockDuringAprilFools:!0},{label:Rw.Title,comp:function(t){return Object(ac.jsx)(Rw,Object(g.a)({apiToken:e.props.apiToken},t))},jumpTo:vv.AccountStats},ew,{label:"Logout",callback:e.props.onLogout}]),e}return Object(h.a)(n,[{key:"render",value:function(){var e=this.props.apiToken;return Object(ac.jsx)(Rp,{title:n.Title,presence:rh.AccountMenu,infos:[{label:Object(ac.jsxs)("div",{style:{fontSize:"0.8em"},children:[Object(ac.jsxs)("div",{style:{fontSize:"0.8em"},children:["Email: ",e.auth.email()]}),Object(ac.jsxs)("div",{children:["Tag: ",e.account.getTag()]})]})}],options:this.options,onExit:this.props.onExit})}}]),n}(i.a.Component);Iw.Title="Account Summary";var Bw=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={admin:!1,tempEmail:"",tempOtp:"",waiting:!1},e.presence=rh.AccountMenu,e.loginOptions=function(t){return[{input:{placeholder:"example@gmail.com",value:t.tempEmail,onChange:function(t){return e.setState({tempEmail:t})},onSubmit:function(){return e.login()}}},{label:"Log In / Sign Up",callback:function(){return e.login()}}]},e.verifyOptions=function(t,n){return[{input:{placeholder:"eg: 123456",value:n.tempOtp,onChange:function(t){return e.setState({tempOtp:t})},onSubmit:function(){return e.verify(t)}}},{label:"Continue",callback:function(){return e.verify(t)}}]},e}return Object(h.a)(n,[{key:"toggleAdmin",value:function(){vn.isReactDevelopment&&this.setState({admin:!this.state.admin})}},{key:"login",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(){var t,n,a;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state.tempEmail,e.next=3,uc(this,{waiting:!0});case 3:return e.prev=3,e.next=6,ns.login({email:t,admin:this.state.admin});case 6:return n=e.sent,a=n.aid,e.next=10,uc(this,{waiting:!1,aid:a});case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(3),e.next=16,uc(this,{waiting:!1,errorMessage:"error logging in"});case 16:case"end":return e.stop()}}),e,this,[[3,12]])})));return function(){return e.apply(this,arguments)}}()},{key:"verify",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(t){var n,a;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.state.tempOtp,e.next=3,uc(this,{waiting:!0});case 3:return e.prev=3,e.next=6,ns.verify({aid:t,otp:n});case 6:return a=e.sent,e.abrupt("return",this.props.onSuccess(a));case 10:return e.prev=10,e.t0=e.catch(3),wn(e.t0),e.next=15,uc(this,{waiting:!1,errorMessage:"invalid password"});case 15:case"end":return e.stop()}}),e,this,[[3,10]])})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,a=t.admin,r=t.tempEmail,i=t.aid,o=t.waiting,s=t.errorMessage;return o?Object(ac.jsx)(Ip,{title:n.Title,presence:this.presence,infos:[{label:Object(ac.jsx)($f,{label:"Waiting for network"})}]}):s?Object(ac.jsx)(Rp,{title:n.Title,presence:this.presence,infos:[{label:s}],onExit:function(){return e.setState({errorMessage:void 0})}}):i?Object(ac.jsx)(Rp,{title:n.Title,presence:this.presence,infos:[{label:"Please enter the code that was emailed to ".concat(r)}],options:this.verifyOptions(i,this.state),onExit:this.props.onExit}):Object(ac.jsx)(Rp,{title:n.Title,presence:this.presence,infos:[{label:Object(ac.jsxs)("div",{onClick:function(){return e.toggleAdmin()},children:[a&&"[ADMIN] ","Enter your email"]})}],options:this.loginOptions(this.state),onExit:this.props.onExit})}}]),n}(i.a.Component);Bw.Title="Account Login";var Dw,Hw,Ew,_w,Fw,Lw,Gw,zw,Ww,Nw,Uw,qw,Vw,Yw,Jw,Kw,Qw,Zw,Xw=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={agreedToEula:!1},e}return Object(h.a)(n,[{key:"componentDidMount",value:function(){this.reset()}},{key:"reset",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(){return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,uc(this,{apiToken:gs.loadRealToken()});case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateToken",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(t){return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return gs.update(t),e.next=3,this.reset();case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"removeToken",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(){return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:gs.delete(),Cs.close(),this.props.onExit();case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props.onContinue,n=this.state,a=n.apiToken,r=n.agreedToEula;if(a){var i=t?{label:t.label,callback:function(){return t.callback(a)}}:void 0;return Object(ac.jsx)(Iw,{apiToken:a,onUpdate:function(t){return e.updateToken(t)},onLogout:function(){return e.removeToken()},onContinue:i,onExit:this.props.onExit})}return r?Object(ac.jsx)(Bw,{onSuccess:function(t){return e.updateToken(t)},onExit:this.props.onExit}):Object(ac.jsx)(uy,{bgStage:ni.Stages.Playground,onConfirm:function(){return e.setState({agreedToEula:!0})},onExit:this.props.onExit})}}]),n}(i.a.Component);Xw.Title="Account",Xw.ShouldJumpTo=[vv.AccountMenu,vv.AccountStats].some((function(e){return e}));var $w=b.a.div(Dw||(Dw=Object(f.a)(["\n  font-size: 1.2rem;\n  text-align: center;\n  color: white;\n  background: rgba(0, 0, 0, 0.7);\n\n  padding: 2em;\n  border-radius: 0.5em;\n"]))),eS=b.a.div(Hw||(Hw=Object(f.a)(["\n  font-size: 2em;\n"]))),tS=b.a.div(Ew||(Ew=Object(f.a)(["\n  text-decoration: underline;\n  & > * > * {\n    padding-left: 0;\n  }\n"]))),nS=b.a.div(_w||(_w=Object(f.a)(["\n  max-height: 50vh;\n  overflow-y: auto;\n  & > *:nth-child(odd) {\n    background: #202020;\n  }\n  & > *:hover {\n    color: black;\n    background-color: var(--heart);\n  }\n"]))),aS=b.a.div(Fw||(Fw=Object(f.a)(["\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n\n  & > * {\n    cursor: pointer;\n    height: 2rem;\n    width: 2rem;\n    margin: 0 0.5em;\n  }\n"]))),rS=b.a.div(Lw||(Lw=Object(f.a)(["\n  font-size: 0.8rem;\n  border-radius: 2rem;\n\n  background-color: white;\n  color: black;\n\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n"]))),iS=b.a.img(Gw||(Gw=Object(f.a)(["\n"]))),oS=b.a.div(zw||(zw=Object(f.a)(["\n  display: flex;\n  flex-direction: row;\n  justify-content: flex-start;\n  align-items: center;\n"]))),sS=b.a.div(Ww||(Ww=Object(f.a)(["\n  box-sizing: border-box;\n  padding: 0.2em 1em;\n  width: 5em;\n  display: flex;\n  flex-direction: row;\n  justify-content: flex-start;\n  align-items: center;\n  text-align: left;\n"]))),cS=Object(b.a)(sS)(Nw||(Nw=Object(f.a)(["\n  width: 3em;\n"]))),uS=b.a.img(Uw||(Uw=Object(f.a)(["\n  height: 1.5em;\n  width: auto;\n"]))),lS=Object(b.a)(sS)(qw||(qw=Object(f.a)(["\n  width: 2em;\n"]))),hS=Object(b.a)(sS)(Vw||(Vw=Object(f.a)(["\n  width: 15em;\n"]))),dS=Object(b.a)(sS)(Yw||(Yw=Object(f.a)(["\n  width: 2em;\n"]))),pS=Object(b.a)(sS)(Jw||(Jw=Object(f.a)(["\n  width: 6em;\n\n  img {\n    height: 1.5em;\n    width: auto;\n    margin-right: 0.5em;\n  }\n"]))),fS=b.a.button(Kw||(Kw=Object(f.a)(["\n  margin: 0 0.5em;\n"]))),bS=b.a.img(Qw||(Qw=Object(f.a)(["\n  height: 1em;\n  width: auto;\n  margin: 0;\n"]))),gS=b.a.div(Zw||(Zw=Object(f.a)(["\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n  flex-wrap: wrap;\n\n  & > div {\n    width: 30%;\n  }\n"]))),mS="all",vS=["arms","armsb","beef","beefb","legs","legsb"],kS=[mS].concat(vS);var jS=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={view:mS,data:{all:void 0,arms:void 0,armsb:void 0,beef:void 0,beefb:void 0,legs:void 0,legsb:void 0}},e.minRows=15,e.token=gs.loadFromStorage(),e}return Object(h.a)(n,[{key:"componentDidMount",value:function(){oh.set(rh.Leaderboard),this.fetch(mS)}},{key:"fakeFetch",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(t){var n,a;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Le(200);case 2:return n=Ft(5*this.minRows).map((function(e){var n=qi.generateRandomName(e.toString()),a=t===mS?qt(vS):t;return{aid:n,tag:n,mmr:Math.floor(300*Math.random()),played:Math.floor(500*Math.random()),code:a,yyyymmdd:parseInt((new Date).toISOString().split("T")[0].split("-").join(""),10)}})),a=Et(n,(function(e){return 1e4*e.mmr+e.played})).reverse(),e.abrupt("return",{rows:a});case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetch",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(t){var n,a,r;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!kn.Debug.LeaderboardFakeData){e.next=6;break}return e.next=3,this.fakeFetch(t);case 3:n=e.sent,e.next=9;break;case 6:return e.next=8,es.leaderboard({code:t===mS?void 0:t});case 8:n=e.sent;case 9:return a={updated:qe.now(),records:n.rows},r=Object(g.a)(Object(g.a)({},this.state),{},{data:Object(g.a)(Object(g.a)({},this.state.data),{},Object(v.a)({},t,a))}),e.next=13,uc(this,r);case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"changeView",value:function(e){this.setState({view:e}),this.state.data[e]||this.fetch(e)}},{key:"handleController",value:function(e){var t=this.state.view;return e===te.left?this.changeView(Nt(t,kS)):e===te.right?this.changeView(Ut(t,kS)):e===te.attack2?this.props.onExit():void 0}},{key:"renderTable",value:function(e){var t,n,a=e?e.records.map((function(e,t){return{assets:oi.getAssets(e.mmr),aid:e.aid,tag:e.tag,char:ni.fighterFromCode(e.code),mmr:e.mmr.toString(),played:e.played.toString()}})):Ft(this.minRows).map((function(e){return{assets:oi.getAssets(0),aid:"",tag:"Loading...",char:void 0,mmr:"",played:""}})),r=Math.max(0,this.minRows-a.length);a.push.apply(a,Object(k.a)(Ft(r).map((function(e){return{assets:oi.getAssets(0),aid:"",tag:"",char:void 0,mmr:"",played:""}}))));var i=null!==(t=null===(n=this.token)||void 0===n?void 0:n.account.aid())&&void 0!==t?t:"anon";return Object(ac.jsxs)("div",{children:[Object(ac.jsx)(tS,{children:Object(ac.jsxs)(oS,{children:[Object(ac.jsx)(cS,{children:"Rank"}),Object(ac.jsx)(lS,{children:"#"}),Object(ac.jsx)(hS,{children:"Player"}),Object(ac.jsx)(dS,{}),Object(ac.jsx)(pS,{children:"Character"}),Object(ac.jsx)(sS,{children:"MMR"}),Object(ac.jsx)(sS,{children:"Matches"})]})}),Object(ac.jsx)(nS,{children:a.map((function(e,t){return Object(ac.jsxs)(oS,{children:[Object(ac.jsx)(cS,{children:Object(ac.jsx)(uS,{src:e.assets.iconUrl})}),Object(ac.jsx)(lS,{children:t+1}),Object(ac.jsx)(hS,{children:e.tag}),Object(ac.jsx)(dS,{children:i===e.aid?"\ud83d\udc4f":""}),Object(ac.jsxs)(pS,{children:[e.char&&Object(ac.jsx)("img",{src:e.char.hudUrl,alt:"character icon"}),e.char&&e.char.stats.name]}),Object(ac.jsx)(sS,{children:e.mmr}),Object(ac.jsx)(sS,{children:e.played})]},t)}))})]})}},{key:"render",value:function(){var e,t=this,a=this.props.onExit,r=this.state,i=r.view,o=r.data[i];return Object(ac.jsxs)(xc,{src:gi.loadBackgroundImage(ni.Stages.ParkingLot.backgroundSrc).imageUrl,children:[Object(ac.jsxs)($w,{children:[Object(ac.jsx)(eS,{children:n.Title}),Object(ac.jsx)(aS,{children:kS.map((function(e){return e===mS?Object(ac.jsx)(rS,{onClick:function(){return t.changeView(e)},children:"ALL"}):Object(ac.jsx)(iS,{alt:ni.fighterFromCode(e).stats.name,src:ni.fighterFromCode(e).hudUrl,onClick:function(){return t.changeView(e)}})}))}),Object(ac.jsxs)("div",{children:["viewing stats for ",(e=i,e===mS?"All Characters":ni.fighterFromCode(e).stats.name)]}),Object(ac.jsx)("br",{}),this.renderTable(o),Object(ac.jsx)("br",{}),vn.isMobile?Object(ac.jsxs)("div",{children:[Object(ac.jsx)(fS,{onClick:function(){return t.handleController(te.left)},children:"prev"}),Object(ac.jsx)(fS,{onClick:a,children:"exit"}),Object(ac.jsx)(fS,{onClick:function(){return t.handleController(te.right)},children:"next"})]}):Object(ac.jsx)("div",{children:Object(ac.jsxs)(gS,{children:[Object(ac.jsxs)(Mp,{hover:!1,shrink:!0,onClick:function(){return t.handleController(te.left)},children:[Object(ac.jsx)(bS,{src:ni.Notation[te.left]}),": previous"]}),Object(ac.jsxs)(Mp,{hover:!1,shrink:!0,onClick:function(){return t.handleController(te.attack2)},children:[Object(ac.jsx)(bS,{src:ni.Notation[te.attack2]}),": exit"]}),Object(ac.jsxs)(Mp,{hover:!1,shrink:!0,onClick:function(){return t.handleController(te.right)},children:[Object(ac.jsx)(bS,{src:ni.Notation[te.right]}),": next"]})]})})]}),Object(ac.jsx)(cc,{onControllerInput:function(e){return t.handleController(e)}})]})}}]),n}(i.a.Component);jS.Title="Leaderboard",jS.ShouldJumpTo=[vv.Leaderboard].some((function(e){return e}));var yS=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={remote:void 0,error:!1},e.getVersion=Rl()(Promise.resolve({u:0,v:""})),e}return Object(h.a)(n,[{key:"componentDidMount",value:function(){this.tryGetVersion()}},{key:"componentWillUnmount",value:function(){this.getVersion.trash()}},{key:"tryGetVersion",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(){var t=this;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.getVersion=Rl()(fetch("".concat(kn.Links.VersionUrl,"?v=").concat((new Date).getTime())).then((function(e){return e.json()}))),this.getVersion.then((function(e){var n;return t.setState({remote:{patch:e.v,combat:null!==(n=e.combat)&&void 0!==n?n:e.v}})})).catch((function(){return t.setState({error:!0})}));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props,t=e.title,n=e.blockOnCanary,a=this.state,r=a.remote,i=a.error;if(vn.isDomainCanary&&n)return Object(ac.jsx)(Rp,{title:t,infos:[{label:"this game mode is disabled on canary"}],onExit:this.props.onExit});if(void 0===r)return Object(ac.jsx)(Rp,{title:t,infos:[{label:Object(ac.jsx)($f,{label:"checking server version"})}],onExit:this.props.onExit});if(i)return Object(ac.jsx)(Rp,{title:t,infos:[{label:"there was an error. please refresh"}],onExit:this.props.onExit});if(kn.PatchVersion===r.patch||vn.isNativeApp&&dn.matchesMin(kn.PatchVersion,r.combat))return this.props.children;var o=[{label:"please refresh to load the latest version"}],s=[{label:"Refresh",callback:function(){return window.location.reload()}}];return vn.isElectron&&(kn.Electron.isDownloadComplete()?(o=[{label:"the new version is downloaded! please close the program so it can finish updating"}],s=[{label:"Close and update",callback:function(){return window.close()}}]):kn.Electron.isDownloadStarted()?(o=[{label:"the new version is downloading! please wait for the popup before closing the program"}],s=[]):(o=[{label:"the desktop version is still deploying. please check back in a little bit"}],s=[])),Object(ac.jsx)(Rp,{title:t,infos:[{label:"found a new version! ".concat(r.patch)}].concat(Object(k.a)(o)),options:s,onExit:this.props.onExit})}}]),n}(i.a.Component),xS=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).defaultState={signalId:void 0,signalIsCopied:!1,urlIsCopied:!1,joinId:"",connection:void 0},e.state=Object(g.a)(Object(g.a)({},e.defaultState),{},{clientType:Fe.Undefined}),e.handshake=void 0,e}return Object(h.a)(n,[{key:"componentDidMount",value:function(){var e=this;ls.addCallback(this,"keydown",(function(t){return e.handleKeyDown(t)})),Cs.hooks.onHideOverlay.broadcast(!0),this.afterPing(),kn.isAppStart&&kn.urlPrivateMatch&&this.connectToPrivateMatchUrl(kn.urlPrivateMatch)}},{key:"componentWillUnmount",value:function(){ls.removeCallbacks(this),Cs.hooks.onHideOverlay.broadcast(!1),this.handshake&&this.handshake.disconnect();var e=this.state.connection;e&&(wn("terminating connection"),e.terminate())}},{key:"handleKeyDown",value:function(e){var t=this.state.connection;if("Escape"===e&&!t)return this.props.onExit()}},{key:"connectToPrivateMatchUrl",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(t){return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setClient(Fe.Guest);case 2:return e.next=4,this.connectAsGuest(t);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"afterPing",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(){var t,n,a;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props,n=t.lobbyHostSignalId,a=t.lobbyGuestConnectTo,!n){e.next=6;break}return e.next=4,this.setClient(Fe.Host,n);case 4:e.next=13;break;case 6:if(!a){e.next=13;break}return e.next=9,this.setClient(Fe.Guest);case 9:return e.next=11,Le(2e3);case 11:return e.next=13,this.connectAsGuest(a);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setClient",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(t,n){var a,r;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(g.a)(Object(g.a)({},this.defaultState),{},{clientType:t}),t===Fe.Host?(r=null!==n&&void 0!==n?n:jt.createPrivateSignalId(),this.connectAsHost(r),a=Object(g.a)(Object(g.a)({},a),{},{signalId:r})):Fe.Guest,e.next=4,uc(this,a);case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"connectAsHost",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(t){var n,a=this;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ks.connectAsHost({signalId:t,testingOptions:{lag:kn.TestingRollbackLag},onServerDisconnect:function(){return a.props.onDisconnect(R.HandshakeDisconnect)},onPeerDisconnect:function(){return a.props.onDisconnect(R.BrokerDisconnect)}});case 2:return this.handshake=e.sent,e.next=5,this.handshake.connection;case 5:return n=e.sent,this.handshake=void 0,e.next=9,this.afterConnection(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"connectAsGuest",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(t){var n,a=this;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=t.trim(),e.next=3,uc(this,{signalId:t});case 3:return e.prev=3,e.next=6,ks.connectAsGuest({signalId:t,testingOptions:{lag:kn.TestingRollbackLag},onServerDisconnect:function(){return a.props.onDisconnect(R.HandshakeDisconnect)},onPeerDisconnect:function(){return a.props.onDisconnect(R.BrokerDisconnect)}});case 6:return this.handshake=e.sent,e.next=9,this.handshake.connection;case 9:return n=e.sent,this.handshake=void 0,e.next=13,this.afterConnection(n);case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(3),this.props.onDisconnect(R.SignalNotFound);case 18:case"end":return e.stop()}}),e,this,[[3,15]])})));return function(t){return e.apply(this,arguments)}}()},{key:"afterConnection",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(t){return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.calculatePing();case 2:return wn("connection setup complete, updating view & matchmaker"),e.next=5,uc(this,{connection:t});case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"copySignalToClipboard",value:function(e){var t=this;return Ts.clipboard("PM-"+e,{onStart:function(){return uc(t,{signalIsCopied:!0})},onEnd:function(){return uc(t,{signalIsCopied:!1})}})}},{key:"copyUrlToClipboard",value:function(e){var t=this;return Ts.clipboard(Ts.getPrivateMatchUrlForId(e),{onStart:function(){return uc(t,{urlIsCopied:!0})},onEnd:function(){return uc(t,{urlIsCopied:!1})}})}},{key:"renderHostWait",value:function(){var e=this,t=this.state,a=t.signalId,r=t.signalIsCopied,i=t.urlIsCopied;return Object(ac.jsx)(Rp,{title:n.Title,infos:[{label:Object(ac.jsx)($f,{label:"Waiting for opponent to join"})},{label:Object(ac.jsxs)("code",{children:[" PM-",a," "]})}],options:[{label:r?"Copied!":"Copy Match ID",callback:function(){return e.copySignalToClipboard(a)}},{label:i?"Copied!":"Copy Match URL",callback:function(){return e.copyUrlToClipboard(a)}}],onExit:this.props.onExit})}},{key:"renderGuestWait",value:function(){return Object(ac.jsx)(Rp,{title:n.Title,infos:[{label:Object(ac.jsx)($f,{label:"Searching for opponent"})}],onExit:this.props.onExit})}},{key:"render",value:function(){var e=this,t=this.props,a=t.setGameConfig,r=t.setRunner,i=t.goToLobby,o=this.state,s=o.clientType,c=o.signalId,u=o.joinId,l=o.connection;if(l)return Object(ac.jsx)(Ym,{lobbyConfig:this.props.lobbyConfig,gameMeta:this.props.gameMeta,setGameConfig:a,setRunner:r,connection:l,onMatchFinish:i,onError:this.props.onDisconnect,onExit:function(){return e.props.onExit()}});if(s===Fe.Undefined)return Object(ac.jsx)(Rp,{title:n.Title,options:[{label:"Host a Game",callback:function(){return e.setClient(Fe.Host)}},{label:"Join a Game",callback:function(){return e.setClient(Fe.Guest)}}],onExit:this.props.onExit});if(this.props.goToLobby)return Object(ac.jsx)(Ip,{infos:[{label:Object(ac.jsx)($f,{label:"Waiting for other player"})}]});if(s===Fe.Host)return this.renderHostWait();if(s===Fe.Guest&&c)return this.renderGuestWait();if(s===Fe.Guest&&!c){var h=[{label:"PM -",input:{placeholder:"eg: 1234567",value:u,digitOnly:!0,onChange:function(t){return e.setState({joinId:t})},onSubmit:function(){return e.connectAsGuest(u)}}},{label:"Join",callback:function(){return e.connectAsGuest(u)}}];return Object(ac.jsx)(Rp,{title:n.Title,infos:[{label:"Enter Private Match Id"}],options:h,onExit:this.props.onExit})}throw new Error("reached an impossible state!")}}]),n}(i.a.Component);xS.Title="Private Match";var OS,wS,SS,CS,AS,TS,MS,PS,RS,IS,BS,DS,HS,ES,_S,FS,LS,GS=function(e){return e.Winner="Winner",e.Loser="Loser",e.Random="Random",e}({}),zS=[GS.Winner,GS.Loser,GS.Random],WS=function(e){return e.HostOnly="Host Only",e.Everyone="Yes",e.Disabled="No",e}({}),NS=[WS.HostOnly,WS.Everyone,WS.Disabled],US=function(e){return e.Queue="queue",e.Spectate="spectate",e}({}),qS=function(e){return e.BroadcastMatch="broadcastMatch",e.BroadcastSettings="broadcastSettings",e.BroadcastPlayers="broadcastPlayers",e.BroadcastMods="broadcastMods",e.BroadcastInputBatch="broadcastInputBatch",e.BroadcastInputHistory="broadcastInputHistory",e.SendInputBatch="sendInputBatch",e.SendMatchPatch="sendMatchPatch",e.SendMatchResult="sendMatchResult",e.SendRegister="register",e.SendReady="ready",e.SendUpdateNick="updateNick",e.SendUpdateStatus="updateStatus",e.SendHostUpdateStatus="hostSetStatus",e.SendHostKickPlayer="kickPlayer",e.SendHostUpdateSettings="updateSettings",e.SendUploadMod="uploadMod",e.SendHostRemoveMod="removeMod",e.ReplyError="error",e}({}),VS=function(){function e(t,n){Object(l.a)(this,e),this.lobbyId=t,this.ws=n}return Object(h.a)(e,[{key:"register",value:function(e){this.ws.send({type:qS.SendRegister,tag:e.getTag(),nick:li.LobbyNickName.get()})}},{key:"hostKickPlayer",value:function(e){this.ws.send({type:qS.SendHostKickPlayer,clientId:e})}},{key:"hostPatchSettings",value:function(e){this.ws.send({type:qS.SendHostUpdateSettings,patch:e})}},{key:"hostSetAsQueue",value:function(e){this.ws.send({type:qS.SendHostUpdateStatus,status:US.Queue,clientId:e})}},{key:"hostSetAsSpectator",value:function(e){this.ws.send({type:qS.SendHostUpdateStatus,status:US.Spectate,clientId:e})}},{key:"setNick",value:function(e){this.ws.send({type:qS.SendUpdateNick,nick:e})}},{key:"setAsQueue",value:function(){this.ws.send({type:qS.SendUpdateStatus,status:US.Queue})}},{key:"setAsSpectator",value:function(){this.ws.send({type:qS.SendUpdateStatus,status:US.Spectate})}},{key:"setReady",value:function(){this.ws.send({type:qS.SendReady,ready:!0})}},{key:"setUnReady",value:function(){this.ws.send({type:qS.SendReady,ready:!1})}},{key:"sendInputBatch",value:function(e){this.ws.send({type:qS.SendInputBatch,state:e})}},{key:"patchMatch",value:function(e){this.ws.send({type:qS.SendMatchPatch,state:e})}},{key:"endMatch",value:function(e){this.ws.send({type:qS.SendMatchResult,loserIds:e})}},{key:"uploadMod",value:function(e){var t={type:qS.SendUploadMod,data:{modId:e.fighter.code,filename:e.zip.filename,zip64:e.zip.zip64}};this.ws.send(t)}},{key:"hostRemoveMod",value:function(e){var t={type:qS.SendHostRemoveMod,modId:e.fighter.code};this.ws.send(t)}}]),e}(),YS=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).localServerLobbyUrl="http://localhost:2402/",e.prodServerLobbyUrl="https://lobbyb.toughlovearena.com/",e.url=kn.Debug.LocalServerLobby&&e.localServerLobbyUrl||e.prodServerLobbyUrl,e}return Object(h.a)(n,[{key:"create",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(){var t;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.post("create",{});case 2:return t=e.sent,e.abrupt("return",t.lobbyId);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"connect",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(t){var n;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.websocket("connect/".concat(t.lobbyId,"/").concat(t.clientId));case 2:return n=e.sent,e.abrupt("return",new VS(t.lobbyId,n));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(Xo),JS=new YS,KS=new(function(){function e(){Object(l.a)(this,e),this.Title="Private Lobby"}return Object(h.a)(e,[{key:"determineQueueFromPlayers",value:function(e,t){var n,a,r=e.aid(),i=t.filter((function(e){return e.status===US.Queue}));return{isQueue1:(null===(n=i[0])||void 0===n?void 0:n.clientId)===r,isQueue2:(null===(a=i[1])||void 0===a?void 0:a.clientId)===r}}},{key:"determineQueueFromMatch",value:function(e,t){var n=e.aid();return{isQueue1:t.clientId1===n,isQueue2:t.clientId2===n}}},{key:"defaultServerLobbyState",value:function(e){return{hostId:e,max:8,allowBosses:!1,allowMods:WS.Disabled,firstTo:li.DefaultFirstTo.defaultValue,roundTime:li.DefaultRoundTime.defaultValue,rotation:GS.Winner,created:(new Date).toISOString(),hostMessage:"Welcome to the lobby!",locked:!1,preventStart:!1,ready1:!1,ready2:!1,disconnected:!1}}}]),e}()),QS=function(e){return e[e.Loading=0]="Loading",e[e.Waiting=1]="Waiting",e[e.Spectating=2]="Spectating",e}(QS||{}),ZS=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).gameMeta={isLobbySpectator:!0},e.scoreboard=co.empty(),e.state={view:QS.Loading},e}return Object(h.a)(n,[{key:"componentDidUpdate",value:function(e){var t=!1===e.readyForSpectator&&!0===this.props.readyForSpectator,n=this.state.view===QS.Waiting;t&&n&&this.finishLoading()}},{key:"finishLoading",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(){var t,n,a,r,i,o,s,u;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.gameMeta,n=this.scoreboard,a=this.props,r=a.gameConfig,i=a.readyForSpectator,o=a.setRunner,!1!==i){e.next=6;break}return e.next=5,uc(this,{view:QS.Waiting});case 5:return e.abrupt("return");case 6:return e.next=8,Le(2e3);case 8:return s=new Ot({fps:kn.FPS,frameRate:li.FrameRate.get(),canPause:!1,timeKeeper:st.instance()}),u=new ps({gameConfig:r,gameMeta:t,loop:s,scoreboard:n,replay:void 0,tutorial:void 0,isSpectator:!0,network:void 0}),o(u),e.next=13,uc(this,{view:QS.Spectating,runner:u});case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.gameMeta,n=this.props,a=n.gameConfig,r=n.onExit,i=this.state,o=i.view,s=i.errorMessage,c=i.runner;if(s)return Object(ac.jsx)(Rp,{infos:[{label:s}],onExit:r});if(o===QS.Loading)return Object(ac.jsx)(zm,{gameConfig:a,gameMeta:t,waiting:!1,onFinish:function(){return e.finishLoading()},onExit:this.props.onExit});if(o===QS.Waiting)return Object(ac.jsx)(Ip,{infos:[{label:Object(ac.jsx)($f,{label:"Waiting for everyone to load the match"})}]});if(!c)throw new Error("runner should be set by this point");return o===QS.Spectating?Object(ac.jsx)(Am,{runner:c,gameConfig:a,gameMeta:t,connection:void 0,replay:void 0,isVersusCPU:!1,onMatchFinish:function(){},onRematch:function(){},onExit:r}):Object(ac.jsx)(Ip,{infos:[{label:"reached an invalid state :("}]})}}]),n}(i.a.Component),XS=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={readyToSpectate:!1},e.compressor=new ra,e.runner=void 0,e.pendingInputs=[],e.mounted=!1,e.onInputBatch=function(t){if(e.pendingInputs[t.round]=e.pendingInputs[t.round]||[],e.pendingInputs[t.round].push(t),!e.state.readyToSpectate){var n=Lt(Vt(Object.values(e.pendingInputs)).map((function(e){return void 0!==e.input1?"p1":"p2"})));2===n.length?(wn("got both inputs! starting spectate"),e.setState({readyToSpectate:!0})):wn("got inputs for ".concat(n.join(", ")," waiting for the other"))}var a=Object(ch.a)(e).runner;if(a&&a.coord)for(var r=e.pendingInputs[a.coord.roundIndex].shift();void 0!==r;){var i={round:r.round,startTick:r.startTick,inputs:{input1:r.input1?e.compressor.decompressMany(r.input1):[],input2:r.input2?e.compressor.decompressMany(r.input2):[]}};a.coord.feedSpectatorInputs(i),r=e.pendingInputs[r.round].shift()}},e}return Object(h.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.mounted=!0;var t=this.props,n=t.isQueue1,a=t.isQueue2;n||a||this.props.setInputBatchCallback((function(t){return e.onInputBatch(t)}))}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"setRunner",value:function(e){this.runner=e;var t=this.props,n=t.lobby,a=t.isQueue1,r=t.isQueue2,i=this.compressor;a&&this.runner.setServerSpectatorCallback((function(e){return n.sendInputBatch({round:e.round,startTick:e.startTick,input1:i.compressMany(e.inputs.input1)})})),r&&this.runner.setServerSpectatorCallback((function(e){return n.sendInputBatch({round:e.round,startTick:e.startTick,input2:i.compressMany(e.inputs.input2)})}))}},{key:"onMatchEndPlayer",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(t){var n,a,r,i,o,s,u,l,h,d;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.props,a=n.lobby,r=n.data,i=r.players.filter((function(e){return e.status===US.Queue})),o=i[0],s=i[1],u=[],l=[],h=[qt([o,s])],i.length>2&&(t===j.Player1&&(u.push(o),l.push(s)),t===j.Player2&&(u.push(s),l.push(o)),t===j.Draw&&(u.push(o,s),l.push(o,s))),d=r.settings.rotation===GS.Winner&&l||r.settings.rotation===GS.Loser&&u||r.settings.rotation===GS.Random&&h||l,e.next=11,Le(8e3);case 11:if(this.mounted){e.next=13;break}return e.abrupt("return");case 13:return e.next=15,a.endMatch(d.map((function(e){return e.clientId})));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onPrivateMatchDisconnect",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(t){var n,a,r;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.props,a=n.isQueue1,r=n.isQueue2,a||r){e.next=3;break}throw new Error("spectators cannot call onPrivateMatchDisconnect");case 3:return e.next=5,Le(1e3);case 5:if(this.mounted){e.next=7;break}return e.abrupt("return");case 7:this.props.lobby.patchMatch({p2pDisconnected:!0});case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e,t,n,a,r=this,i=this.props,o=i.lobby,s=i.data,c=i.match,u=i.isQueue1,l=i.isQueue2;if(c.p2pDisconnected)return Object(ac.jsx)(Ip,{title:KS.Title,presence:rh.Lobby,infos:[{label:Object(ac.jsx)($f,{label:"p2p network error, returning to lobby..."})}]});if(u||l){var h={firstTo:s.settings.firstTo,roundTime:s.settings.roundTime},d={isLobbyPlaying:!0,lobbyAllowsBosses:s.settings.allowBosses,lobbyAllowsPlayingMods:s.settings.allowMods!==WS.Disabled};if(u)return Object(ac.jsx)(xS,{lobbyConfig:h,gameMeta:d,setGameConfig:function(e,t){o.patchMatch({gameConfigJson:JSON.stringify(ni.serializeGameConfig(e))})},setRunner:function(e){return r.setRunner(e)},lobbyHostSignalId:c.peerId,goToLobby:function(e){return r.onMatchEndPlayer(e)},onDisconnect:function(e){return r.onPrivateMatchDisconnect(e)},onExit:this.props.onExit});if(l)return Object(ac.jsx)(xS,{lobbyConfig:h,gameMeta:d,setRunner:function(e){return r.setRunner(e)},lobbyGuestConnectTo:c.peerId,goToLobby:function(e){return r.onMatchEndPlayer(e)},onDisconnect:function(e){return r.onPrivateMatchDisconnect(e)},onExit:this.props.onExit})}if(c.gameConfigJson){var p=JSON.parse(c.gameConfigJson),f=ni.deserializeGameConfig(p);if(ia.configIsInvalid(f))throw new Error("somehow got an invalid config during lobbies");return Object(ac.jsx)(ZS,{gameConfig:f,setRunner:function(e){return r.setRunner(e)},readyForSpectator:this.state.readyToSpectate,onExit:this.props.onExit})}var b=s.players.filter((function(e){return e.status===US.Queue})),g=null!==(e=null===(t=b[0])||void 0===t?void 0:t.tag)&&void 0!==e?e:"DISCONNECTED",m=null!==(n=null===(a=b[1])||void 0===a?void 0:a.tag)&&void 0!==n?n:"DISCONNECTED";return Object(ac.jsx)(Ip,{title:KS.Title,presence:rh.Lobby,infos:[{label:"".concat(g," /vs/ ").concat(m)},{label:Object(ac.jsx)($f,{label:"waiting for character select"})}]})}}]),n}(i.a.Component),$S=b.a.div(OS||(OS=Object(f.a)(["\n  width: 100%;\n  height: 100vh;\n  padding: 8vh;\n  box-sizing: border-box;\n  background-color: rgba(0, 0, 0, 0.5);\n\n  color: white;\n  text-align: center;\n\n  margin: 0;\n  border-radius: 0;\n  font-size: 1.7rem;\n"]))),eC=b.a.div(wS||(wS=Object(f.a)(["\n  font-family: monospace;\n  font-size: 8vh;\n  text-decoration: underline;\n"]))),tC=b.a.div(SS||(SS=Object(f.a)(["\n  cursor: pointer;\n"]))),nC=b.a.div(CS||(CS=Object(f.a)(["\n  padding: 0.5em 0;\n"]))),aC=b.a.div(AS||(AS=Object(f.a)(["\n  font-size: 0.3em;\n  cursor: pointer;\n"]))),rC=b.a.div(TS||(TS=Object(f.a)(["\n  height: 100%;\n\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: stretch;\n  flex-wrap: nowrap;\n"]))),iC=b.a.div(MS||(MS=Object(f.a)(["\n  width: 40%;\n\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-start;\n  align-items: stretch;\n  flex-wrap: nowrap;\n"]))),oC=b.a.div(PS||(PS=Object(f.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n\n  margin: 0.5em 0;\n"]))),sC=b.a.div(RS||(RS=Object(f.a)(["\n  font-size: 0.8em;\n  padding: 0.4em 0.8em;\n  background-color: var(--backtext);\n  color: var(--foretext);\n  border: 1px solid var(--foretext);\n  border-radius: 1em;\n  cursor: pointer;\n\n  &:hover {\n    background-color: var(--foretext);\n    color: var(--backtext);\n  }\n"]))),cC=b.a.div(IS||(IS=Object(f.a)(["\n  width: 60%;\n\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-start;\n  align-items: stretch;\n  flex-wrap: nowrap;\n"]))),uC=b.a.div(BS||(BS=Object(f.a)(["\n  flex: 1;\n"]))),lC=b.a.div(DS||(DS=Object(f.a)(["\n  width: 100%;\n  height: 8vh;\n  border: 0.1em solid var(--foretext);\n  box-sizing: border-box;\n  padding: 0 1em;\n\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n  flex-wrap: nowrap;\n\n  background-color: var(--backtext);\n  color: var(--foretext);\n"]))),hC=Object(b.a)(lC)(HS||(HS=Object(f.a)(["\n  border-width: 0.1em;\n  font-size: 1.2em;\n  justify-content: center;\n\n  background: none;\n  color: white;\n  border-color: white;\n"]))),dC=Object(b.a)(lC)(ES||(ES=Object(f.a)(["\n  border-width: 0;\n  font-size: 1.5em;\n  justify-content: center;\n\n  background: none;\n  color: white;\n  text-decoration: underline;\n"]))),pC=b.a.div(_S||(_S=Object(f.a)(["\n  flex: 1;\n\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n  flex-wrap: wrap;\n\n  & > * {\n    margin: 0 0.3em;\n  }\n"]))),fC=b.a.input(FS||(FS=Object(f.a)(["\n  flex: 1;\n  font-size: 0.8em;\n"]))),bC=b.a.input(LS||(LS=Object(f.a)(["\n  flex: 1;\n  font-size: 0.8em;\n  margin: 0 1em;\n"]))),gC=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).hostMessageLimit=30,e.state={showModView:!1,lobbyIdCopied:!1,editNick:!1,draftNick:"",editHostMessage:!1,draftHostMessage:""},e.pauseSettings=new gp((function(){return{requireHold:e.state.editNick||e.state.editHostMessage}})),e}return Object(h.a)(n,[{key:"componentDidMount",value:function(){this.pauseSettings.mount(),oh.set(rh.Lobby)}},{key:"componentWillUnmount",value:function(){this.pauseSettings.unmount()}},{key:"componentDidUpdate",value:function(e){e.isHost!==this.props.isHost&&this.setState({editHostMessage:!1})}},{key:"copyLobbyIdToClipboard",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(){var t,n=this;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.state.lobbyIdCopied){e.next=2;break}return e.abrupt("return");case 2:t=Ts.getServerLobbyUrlForId(this.props.data.lobbyId),Ts.clipboard(t,{onStart:function(){return uc(n,{lobbyIdCopied:!0})},onEnd:function(){return uc(n,{lobbyIdCopied:!1})}});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"editNick",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(){var t,n,a=this;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.data.players.filter((function(e){return e.clientId===a.props.account.aid()}))[0],n=(null===t||void 0===t?void 0:t.nick)||"",e.next=4,uc(this,{editNick:!0,draftNick:n});case 4:this.pauseSettings.mount();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"saveNick",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(){return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return li.LobbyNickName.set(this.state.draftNick),this.props.lobby.setNick(this.state.draftNick),e.next=4,uc(this,{editNick:!1});case 4:this.pauseSettings.mount();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"cancelNick",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(){return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,uc(this,{editNick:!1});case 2:this.pauseSettings.mount();case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"editHostMessage",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(){return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,uc(this,{editHostMessage:!0,draftHostMessage:this.props.data.settings.hostMessage});case 2:this.pauseSettings.mount();case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"saveHostMessage",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(){return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.lobby.hostPatchSettings({hostMessage:this.state.draftHostMessage}),e.next=3,uc(this,{editHostMessage:!1});case 3:this.pauseSettings.mount();case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"cancelHostMessage",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(){return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,uc(this,{editHostMessage:!1});case 2:this.pauseSettings.mount();case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toggleModView",value:function(){this.setState({showModView:!this.state.showModView})}},{key:"handleInputCode",value:function(e){if("Enter"===e){if(this.state.editHostMessage)return this.saveHostMessage();if(this.state.editNick)return this.saveNick()}if("Escape"===e){if(this.state.editHostMessage)return this.cancelHostMessage();if(this.state.editNick)return this.cancelNick()}}},{key:"handleInputProp",value:function(e){var t=this.state,n=t.showModView,a=t.editHostMessage,r=t.editNick;if(!(n||a||r)){var i=this.props.lobby,o=KS.determineQueueFromPlayers(this.props.account,this.props.data.players),s=o.isQueue1,c=o.isQueue2;if(s||c){if(e===te.attack1)return i.setReady();if(e===te.attack2)return i.setUnReady()}if(e===te.attack3){var u=this.props,l=u.account;return u.data.players.filter((function(e){return e.status===US.Queue})).some((function(e){return e.clientId===l.aid()}))?i.setAsSpectator():i.setAsQueue()}}}},{key:"renderName",value:function(e){var t=this,n=this.props.account,a=this.state,r=a.editNick,i=a.draftNick;return r&&e.clientId===n.aid()?Object(ac.jsx)(bC,{value:i,onChange:function(e){return t.setState({draftNick:e.target.value})}}):Object(ac.jsx)("div",{style:{flex:"1"},children:e.nick?Object(ac.jsxs)(ac.Fragment,{children:[Object(ac.jsx)("div",{style:{fontSize:"0.6em"},children:e.nick}),Object(ac.jsx)("div",{style:{fontSize:"0.5em",fontStyle:"italic"},children:e.tag})]}):e.tag})}},{key:"renderStatus",value:function(e,t){var n=this,a=this.props.data.settings,r={width:"6em",cursor:this.props.isHost?"pointer":"initial"},i=e.status===US.Queue?function(){return n.props.lobby.hostSetAsSpectator(e.clientId)}:function(){return n.props.lobby.hostSetAsQueue(e.clientId)},o=this.props.isHost?i:function(){};return 0===t&&a.ready1||1===t&&a.ready2?Object(ac.jsx)("div",{onClick:o,style:Object(g.a)(Object(g.a)({},r),{},{color:"green"}),children:"[READY]"}):0===t&&!a.ready1||1===t&&!a.ready2?Object(ac.jsx)("div",{onClick:o,style:Object(g.a)(Object(g.a)({},r),{},{color:"red"}),children:"[WAITING]"}):Object(ac.jsx)("div",{onClick:o,style:Object(g.a)(Object(g.a)({},r),{},{color:"blue"}),children:"[WATCHING]"})}},{key:"renderKick",value:function(e){var t=this,n={color:"purple",width:"2.5em"};if(e.clientId===this.props.account.aid())return Object(ac.jsx)("div",{style:Object(g.a)({},n),children:"YOU"});if(e.clientId===this.props.data.settings.hostId)return Object(ac.jsx)("div",{style:Object(g.a)({},n),children:"HOST"});if(this.props.isHost){var a={fontSize:"0.6em",cursor:"pointer",textDecoration:"underline"};return Object(ac.jsxs)("div",{style:Object(g.a)({},n),children:[Object(ac.jsx)("div",{style:Object(g.a)({},a),onClick:function(){return t.props.lobby.hostPatchSettings({hostId:e.clientId})},children:"HOST"}),Object(ac.jsx)("div",{style:Object(g.a)({},a),onClick:function(){return t.props.lobby.hostKickPlayer(e.clientId)},children:"KICK"})]})}return Object(ac.jsx)("div",{style:Object(g.a)({},n),children:"\xa0"})}},{key:"renderInfoColumn",value:function(){var e=this,t=this.props,n=t.account,a=t.lobby,r=t.data,i=t.isHost,o=t.hideLobbyId,s=t.setHideLobbyId,c=r.settings,u=this.state,l=u.lobbyIdCopied,h=u.editNick,d=u.editHostMessage,p=KS.determineQueueFromPlayers(n,r.players),f=p.isQueue1,b=p.isQueue2,g=r.players.filter((function(e){return e.status===US.Queue})),m=r.players.filter((function(e){return e.status===US.Spectate})),v=g.some((function(e){return e.clientId===n.aid()}));return Object(ac.jsxs)(iC,{children:[Object(ac.jsx)(eC,{children:c.locked?"LOCKED":Object(ac.jsxs)("div",{children:[Object(ac.jsx)(tC,{onClick:function(){return e.copyLobbyIdToClipboard()},children:l?"Copied!":"LB-"+(o?"??????":r.lobbyId)}),Object(ac.jsx)(aC,{onClick:function(){return s(!o)},children:o?"SHOW":"HIDE"})]})}),Object(ac.jsxs)(nC,{children:[Object(ac.jsxs)("div",{children:["Capacity: ",g.length+m.length,"/",c.max]}),Object(ac.jsxs)("div",{children:[c.roundTime," seconds | Best of ",kn.prettyFirstTo(c.firstTo)]}),Object(ac.jsxs)("div",{children:[c.rotation," stays on"]}),c.allowBosses&&Object(ac.jsx)("div",{children:"Bosses OK"}),c.allowMods===WS.Everyone&&Object(ac.jsx)("div",{children:"Mods OK"}),c.allowMods===WS.HostOnly&&Object(ac.jsx)("div",{children:"Host Mods OK"})]}),Object(ac.jsx)(oC,{children:Object(ac.jsxs)(pC,{children:[v?Object(ac.jsx)(sC,{onClick:function(){return a.setAsSpectator()},children:"Switch to Spectator"}):Object(ac.jsx)(sC,{onClick:function(){return a.setAsQueue()},children:"Switch to Fighter"}),f&&Object(ac.jsx)(sC,{onClick:function(){return c.ready1?a.setUnReady():a.setReady()},children:c.ready1?"UNREADY":"READY"}),b&&Object(ac.jsx)(sC,{onClick:function(){return c.ready2?a.setUnReady():a.setReady()},children:c.ready2?"UNREADY":"READY"})]})}),Object(ac.jsx)(oC,{children:h?Object(ac.jsxs)(pC,{children:[Object(ac.jsx)(sC,{onClick:function(){return e.saveNick()},children:"Save Nickname"}),Object(ac.jsx)(sC,{onClick:function(){return e.cancelNick()},children:"Cancel"})]}):Object(ac.jsx)(pC,{children:Object(ac.jsx)(sC,{onClick:function(){return e.editNick()},children:"Edit Nickname"})})}),Object(ac.jsx)(oC,{children:Object(ac.jsxs)(pC,{children:[Object(ac.jsx)(sC,{onClick:this.props.onExit,children:"Leave Lobby"}),(c.allowMods===WS.Everyone||c.allowMods===WS.HostOnly&&i)&&Object(ac.jsx)(sC,{onClick:function(){return e.toggleModView()},children:this.state.showModView?"Close Mods":"Load Mods"})]})}),i&&Object(ac.jsxs)("div",{children:[Object(ac.jsx)(dC,{children:"Host Controls"}),Object(ac.jsx)(oC,{children:this.state.showModView?Object(ac.jsx)("div",{children:"Close mods to edit message"}):d?Object(ac.jsxs)(pC,{children:[Object(ac.jsx)(sC,{onClick:function(){return e.saveHostMessage()},children:"Save Message"}),Object(ac.jsx)(sC,{onClick:function(){return e.cancelHostMessage()},children:"Cancel"})]}):Object(ac.jsx)(pC,{children:Object(ac.jsx)(sC,{onClick:function(){return e.editHostMessage()},children:"Edit Message"})})}),Object(ac.jsx)(oC,{children:Object(ac.jsxs)(pC,{children:[Object(ac.jsx)(sC,{onClick:function(){return a.hostPatchSettings({locked:!c.locked})},children:c.locked?"Unlock Lobby":"Lock Lobby"}),Object(ac.jsx)(sC,{onClick:function(){return a.hostPatchSettings({preventStart:!c.preventStart})},children:c.preventStart?"Enable Start":"Prevent Start"})]})})]})]})}},{key:"renderHostMessage",value:function(){var e=this,t=this.props.data,n=this.state,a=n.editHostMessage,r=n.draftHostMessage;return Object(ac.jsx)(hC,{children:a?Object(ac.jsxs)(pC,{children:[Object(ac.jsx)(fC,{value:r,onChange:function(t){return e.setState({draftHostMessage:t.target.value.substring(0,e.hostMessageLimit)})}}),Object(ac.jsxs)("span",{style:{fontStyle:"italic",fontSize:"0.6em"},children:["Max ",this.hostMessageLimit]})]}):Object(ac.jsx)("span",{children:t.settings.hostMessage})})}},{key:"renderPlayerColumn",value:function(){var e=this,t=this.props.data,n=t.players.filter((function(e){return e.status===US.Queue})),a=t.players.filter((function(e){return e.status===US.Spectate}));return Object(ac.jsxs)(cC,{children:[this.renderHostMessage(),Object(ac.jsxs)(uC,{children:[Object(ac.jsxs)("section",{children:[Object(ac.jsx)(dC,{children:"Fighters"}),t.settings.preventStart?" (paused by host)":""]}),n.map((function(t,n){return Object(ac.jsxs)(lC,{children:[Object(ac.jsxs)("div",{children:["#",n+1]}),e.renderName(t),e.renderStatus(t,n),e.renderKick(t)]},t.clientId)}))]}),!!a.length&&Object(ac.jsxs)("div",{children:[Object(ac.jsx)(dC,{children:"Spectators"}),a.map((function(t,n){return Object(ac.jsxs)(lC,{children:[Object(ac.jsx)("div",{children:Object(ac.jsx)("span",{role:"img","aria-label":"eyes emoji",children:"\ud83d\udc40"})}),e.renderName(t),e.renderStatus(t),e.renderKick(t)]},t.clientId)}))]})]})}},{key:"renderModColumn",value:function(){return Object(ac.jsx)(cC,{children:Object(ac.jsx)(pf,{gameMeta:{},modManager:this.props.modManager,lobby:{hideDelete:!this.props.isHost}})})}},{key:"render",value:function(){var e=this,t=this.state.showModView,n=t?ni.Stages.ParkingLot.backgroundSrc:ni.Stages.GroceryStore.backgroundSrc;return Object(ac.jsxs)(yc,{src:gi.loadBackgroundImage(n).imageUrl,children:[Object(ac.jsx)($S,{children:Object(ac.jsxs)(rC,{children:[this.renderInfoColumn(),t?this.renderModColumn():this.renderPlayerColumn()]})}),Object(ac.jsx)(cu,{white:!0}),Object(ac.jsx)($h,{}),Object(ac.jsx)(Bl,{}),Object(ac.jsx)(cc,{onPress:function(t){return e.handleInputCode(t)},onPlayer1Press:function(t){return e.handleInputProp(t)}})]})}}]),n}(i.a.Component),mC=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={data:{lobbyId:e.props.lobby.lobbyId,settings:KS.defaultServerLobbyState(""),players:[],modIds:[],match:void 0},queue:{hideLobbyId:!1}},e.modManager=ni.LobbyMods,e.onInputBatch=function(){},e.lock=void 0,e}return Object(h.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.modManager.init({onUpload:function(t){return e.props.lobby.uploadMod(t)},onRemove:function(t){return e.props.lobby.hostRemoveMod(t)}});var t=this.props.lobby;t.ws.onMessage((function(t){return e.handleData(t)})),t.register(this.props.account)}},{key:"componentWillUnmount",value:function(){var e;null===(e=this.lock)||void 0===e||e.reject(),this.props.lobby.ws.close(),this.modManager.init({onUpload:function(){},onRemove:function(){}})}},{key:"handleData",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(t){var n,a,r,i=this;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.lock){e.next=9;break}return e.prev=1,e.next=4,this.lock.promise;case 4:e.next=9;break;case 6:return e.prev=6,e.t0=e.catch(1),e.abrupt("return");case 9:if(t.type!==qS.BroadcastSettings){e.next=12;break}return wn("match settings"),e.abrupt("return",this.setState({data:Object(g.a)(Object(g.a)({},this.state.data),{},{settings:t.state})}));case 12:if(t.type!==qS.BroadcastPlayers){e.next=14;break}return e.abrupt("return",this.setState({data:Object(g.a)(Object(g.a)({},this.state.data),{},{players:t.state})}));case 14:if(t.type!==qS.BroadcastMods){e.next=25;break}return this.lock=lt(),n=t.state,e.next=19,ze(n,function(){var e=Object(u.a)(Object(c.a)().mark((function e(t){var n;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ao.unpackZipBase64(t.filename,t.zip64);case 2:return n=e.sent,e.abrupt("return",n.wrapper);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 19:return a=e.sent,this.modManager.set(a),this.lock.resolve(),this.lock=void 0,r=this.modManager.get().map((function(e){return e.fighter.code})),e.abrupt("return",this.setState({data:Object(g.a)(Object(g.a)({},this.state.data),{},{modIds:r})}));case 25:if(t.type!==qS.BroadcastMatch){e.next=28;break}return void 0===t.state&&(this.onInputBatch=function(){}),e.abrupt("return",this.setState({data:Object(g.a)(Object(g.a)({},this.state.data),{},{match:t.state})}));case 28:if(t.type!==qS.BroadcastInputBatch){e.next=30;break}return e.abrupt("return",this.onInputBatch(t.state));case 30:if(t.type!==qS.BroadcastInputHistory){e.next=32;break}return e.abrupt("return",t.state.history.forEach((function(e){return i.onInputBatch(e)})));case 32:if(t.type!==qS.ReplyError){e.next=35;break}return wn("ws error",t),e.abrupt("return",this.props.onExit(t.message));case 35:throw wn("handleData",t),new Error("unsupported message type: ".concat(t.type));case 37:case"end":return e.stop()}}),e,this,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()},{key:"setHideLobbyId",value:function(e){this.setState({queue:Object(g.a)(Object(g.a)({},this.state.queue),{},{hideLobbyId:e})})}},{key:"setInputBatchCallback",value:function(e){this.onInputBatch=e}},{key:"render",value:function(){var e=this,t=this.props,a=t.lobby,r=t.account,i=this.state,o=i.data,s=i.queue;if(void 0!==o.match){var c=KS.determineQueueFromMatch(r,o.match),u=c.isQueue1,l=c.isQueue2;return Object(ac.jsx)(XS,{lobby:a,data:o,match:o.match,isQueue1:u,isQueue2:l,setInputBatchCallback:function(t){return e.setInputBatchCallback(t)},onExit:function(){return e.props.onExit(null)}})}if(0===o.players.length)return Object(ac.jsx)(Rp,{title:n.Title,infos:[{label:"Retrieving data, one moment..."}],onExit:function(){return e.props.onExit(null)}});var h=r.aid()===o.settings.hostId;return Object(ac.jsx)(gC,{isHost:h,account:r,lobby:a,data:o,hideLobbyId:s.hideLobbyId,modManager:this.modManager,setHideLobbyId:function(t){return e.setHideLobbyId(t)},onExit:function(){return e.props.onExit(null)}})}}]),n}(i.a.Component);mC.Title=KS.Title;var vC=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={},e}return Object(h.a)(n,[{key:"componentDidMount",value:function(){this.connect()}},{key:"componentWillUnmount",value:function(){var e;null===(e=this.state.lobby)||void 0===e||e.ws.close()}},{key:"onExit",value:function(e){var t;null===(t=this.state.lobby)||void 0===t||t.ws.onClose((function(){return wn("exited create safely")})),e?this.setState({errorMessage:e}):this.props.onExit()}},{key:"connect",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(){var t,n,a,r,i=this;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props.account,e.prev=1,null===(n=this.props.joinId)||void 0===n){e.next=6;break}e.t0=n,e.next=9;break;case 6:return e.next=8,JS.create();case 8:e.t0=e.sent;case 9:return a=e.t0,e.next=12,JS.connect({lobbyId:a,clientId:t.aid()});case 12:return(r=e.sent).ws.onClose((function(){return i.props.onDisconnect(R.LobbyDisconnect)})),r.ws.onError((function(){return i.props.onDisconnect(R.LobbyDisconnect)})),this.props.hostSettings&&r.hostPatchSettings(this.props.hostSettings),e.next=18,uc(this,{lobby:r});case 18:e.next=23;break;case 20:e.prev=20,e.t1=e.catch(1),this.setState({errorMessage:"Lobby not found"});case 23:case"end":return e.stop()}}),e,this,[[1,20]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,n=t.lobby,a=t.errorMessage;return a?Object(ac.jsx)(Rp,{title:KS.Title,presence:rh.Lobby,infos:[{label:a}],onExit:function(){return e.onExit(null)}}):n?Object(ac.jsx)(mC,Object(g.a)(Object(g.a)({},this.props),{},{lobby:n,onExit:function(t){return e.onExit(t)}})):Object(ac.jsx)(Ip,{title:this.props.title,presence:rh.Lobby,infos:[{label:Object(ac.jsx)($f,{label:"Connecting to lobby server"})}]})}}]),n}(i.a.Component),kC=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).defaultSettings=KS.defaultServerLobbyState(e.props.account.aid()),e.state={maxPlayers:e.defaultSettings.max,allowBosses:e.defaultSettings.allowBosses,allowMods:e.defaultSettings.allowMods,firstTo:e.defaultSettings.firstTo,roundTime:e.defaultSettings.roundTime,rotation:e.defaultSettings.rotation,submitted:!1},e.infos=[],e.options=function(t){return[{label:"Max Players",select:{onChange:function(t){return e.setState({maxPlayers:t.value})},current:t.maxPlayers,options:Ft(7).map((function(e){return e+2})).map((function(e){return{label:e.toString(),value:e}}))}},{label:"Best of X rounds",select:{onChange:function(t){return e.setState({firstTo:t.value})},current:t.firstTo,options:kn.FirstToOptions.map((function(e){return{label:kn.prettyFirstTo(e),value:e}}))}},{label:"Round Timer",select:{onChange:function(t){return e.setState({roundTime:t.value})},current:t.roundTime,options:se.map((function(e){return{label:kn.prettyRoundTime(e),value:e}}))}},{label:"Rotation",select:{onChange:function(t){return e.setState({rotation:t.value})},current:t.rotation,options:zS.map((function(e){return{label:e,value:e}}))}}].concat(Object(k.a)(kn.isAprilFools?[]:[{label:"Allow Bosses",select:{onChange:function(t){return e.setState({allowBosses:t.value})},current:t.allowBosses,options:[{label:"Yes",value:!0},{label:"No",value:!1}]}}]),[{label:"Can Upload Mods",select:{onChange:function(t){return e.setState({allowMods:t.value})},current:t.allowMods,options:NS.map((function(e){return{label:e,value:e}}))}},{label:"Create Lobby",callback:function(){return e.setState({submitted:!0})}}])},e}return Object(h.a)(n,[{key:"render",value:function(){if(!this.state.submitted)return Object(ac.jsx)(Rp,{title:n.Title,infos:this.infos,options:this.options(this.state),onExit:this.props.onExit});var e=Object(g.a)(Object(g.a)({},this.defaultSettings),{},{max:this.state.maxPlayers,allowBosses:this.state.allowBosses,allowMods:this.state.allowMods,firstTo:this.state.firstTo,roundTime:this.state.roundTime,rotation:this.state.rotation});return Object(ac.jsx)(vC,Object(g.a)(Object(g.a)({},this.props),{},{title:n.Title,hostSettings:e}))}}]),n}(i.a.Component);kC.Title=KS.Title;var jC=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={draftId:"",lobbyId:kn.isAppStart?e.props.jumpToLobby:void 0,lobbyNotFound:!1},e.options=function(t){return[{label:"LB -",input:{placeholder:"eg: 123456",value:t.draftId,digitOnly:!0,onChange:function(t){return e.setState({draftId:t})},onSubmit:function(){return e.setState({lobbyId:e.state.draftId})}}},{label:"Join",callback:function(){return e.setState({lobbyId:e.state.draftId})}}]},e}return Object(h.a)(n,[{key:"render",value:function(){var e=this.state.lobbyId;return void 0===e?Object(ac.jsx)(Rp,{title:n.Title,presence:rh.Lobby,infos:[{label:"Enter lobby id"}],options:this.options(this.state),onExit:this.props.onExit}):Object(ac.jsx)(vC,Object(g.a)(Object(g.a)({},this.props),{},{title:n.Title,joinId:e}))}}]),n}(i.a.Component);jC.Title=KS.Title;var yC=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){var e,a;Object(l.a)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(a=t.call.apply(t,[this].concat(i))).state={account:null===(e=gs.loadFromStorage())||void 0===e?void 0:e.account},a.mounted=!1,a}return Object(h.a)(n,[{key:"componentDidMount",value:function(){this.mounted=!0,this.ensureAccount(),Cs.hooks.onHideOverlay.broadcast(!0)}},{key:"componentWillUnmount",value:function(){this.mounted=!1,Cs.hooks.onHideOverlay.broadcast(!1)}},{key:"ensureAccount",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(){var t,n,a,r;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=kn.urlServerLobby,!kn.isAppStart||!t){e.next=5;break}return n=t,e.next=5,uc(this,{jumpToLobby:n});case 5:if(this.state.account){e.next=14;break}return e.next=8,ns.anonymousLogin();case 8:if(r=e.sent,this.mounted){e.next=11;break}return e.abrupt("return");case 11:return gs.update(r),e.next=14,uc(this,{account:null===(a=gs.loadFromStorage())||void 0===a?void 0:a.account});case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,a=t.account,r=t.jumpToLobby;if(!a)return Object(ac.jsx)(Rp,{title:n.Title,presence:rh.Lobby,infos:[{label:"Logging into the Lobby Server..."}],onExit:this.props.onExit});var i=[{label:"Create Lobby",comp:function(t){return Object(ac.jsx)(kC,Object(g.a)({account:a,onDisconnect:e.props.onDisconnect},t))}},{label:"Join Lobby By Id",comp:function(t){return Object(ac.jsx)(jC,Object(g.a)({account:a,jumpToLobby:r,onDisconnect:e.props.onDisconnect},t))},jumpTo:!!r}];return Object(ac.jsx)(Rp,{title:n.Title,presence:rh.Lobby,options:i,onExit:this.props.onExit})}}]),n}(i.a.Component);function xC(e){var t,n,a=Object(r.useState)(Cs.status),i=Object(m.a)(a,2),o=i[0],s=i[1];if(!(o&&(t={},Object(v.a)(t,uv.Ranked,void 0===o.ranked),Object(v.a)(t,uv.Casual,void 0!==o.ranked),Object(v.a)(t,uv.PrivateMatch,!0),Object(v.a)(t,uv.Lobby,!0),t)[e.onlineMenu]))return e.children;var c=(n={},Object(v.a)(n,uv.Ranked,"Ranked"),Object(v.a)(n,uv.Casual,"Casual"),Object(v.a)(n,uv.PrivateMatch,"Private Match"),Object(v.a)(n,uv.Lobby,"Lobby"),n)[e.onlineMenu],u=o.ranked?"Ranked":"Casual";return Object(ac.jsx)(Rp,{title:e.title,infos:[{label:"You are searching for a ".concat(u," match")}],options:[{label:"Switch to ".concat(c),callback:function(){Cs.close(),s(Cs.status)}}],onExitLabel:"Go back",onExit:e.onExit})}yC.Title=KS.Title,yC.ShouldJumpTo=[vv.ServerLobbyMenu].some((function(e){return e}));var OC=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).options=[{label:Av.Title,comp:function(t){return Object(ac.jsx)(yS,{title:Av.Title,blockOnCanary:!0,onExit:e.props.onExit,children:Object(ac.jsx)(xC,{title:Av.Title,onlineMenu:uv.Ranked,onExit:t.onExit,children:Object(ac.jsx)(Av,Object(g.a)({onDisconnect:e.props.onDisconnect},t))})})},jumpTo:vv.OnlineRanked,blockDuringAprilFools:!0,blockWithFlag:I.DisableRanked},{label:xv.Title,comp:function(t){return Object(ac.jsx)(yS,{title:xv.Title,onExit:e.props.onExit,children:Object(ac.jsx)(xC,{title:xv.Title,onlineMenu:uv.Casual,onExit:t.onExit,children:Object(ac.jsx)(xv,Object(g.a)({onDisconnect:e.props.onDisconnect},t))})})},jumpTo:vv.OnlineCasual,blockWithFlag:I.DisableCasual},{label:xS.Title,comp:function(t){return Object(ac.jsx)(yS,{title:xS.Title,onExit:e.props.onExit,children:Object(ac.jsx)(xC,{title:xS.Title,onlineMenu:uv.PrivateMatch,onExit:t.onExit,children:Object(ac.jsx)(xS,Object(g.a)({gameMeta:{isPrivate:!0},onDisconnect:e.props.onDisconnect},t))})})},jumpTo:vv.OnlinePrivate,blockWithFlag:I.DisablePrivate},{label:yC.Title,comp:function(t){return Object(ac.jsx)(yS,{title:yC.Title,onExit:e.props.onExit,children:Object(ac.jsx)(xC,{title:yC.Title,onlineMenu:uv.Lobby,onExit:t.onExit,children:Object(ac.jsx)(yC,Object(g.a)({onDisconnect:e.props.onDisconnect},t))})})},jumpTo:yC.ShouldJumpTo,blockWithFlag:I.DisableLobby},{label:Xw.Title,comp:function(e){return Object(ac.jsx)(Xw,Object(g.a)({},e))},jumpTo:Xw.ShouldJumpTo,blockWithFlag:I.DisableAccount},{label:jS.Title,comp:function(e){return Object(ac.jsx)(jS,Object(g.a)({},e))},jumpTo:jS.ShouldJumpTo,blockWithFlag:I.DisableLeaderboard}],e}return Object(h.a)(n,[{key:"render",value:function(){return Object(ac.jsx)(yS,{title:n.Title,onExit:this.props.onExit,children:Object(ac.jsx)(Rp,{title:n.Title,options:this.options,onExit:this.props.onExit})})}}]),n}(i.a.Component);OC.Title="Play Online",OC.ShouldJumpTo=[vv.OnlineRanked,vv.OnlineCasual,vv.OnlinePrivate,yC.ShouldJumpTo,Xw.ShouldJumpTo,jS.ShouldJumpTo].some((function(e){return e}));var wC=OC.Title,SC={label:wC,jumpTo:OC.ShouldJumpTo,disable:vn.isKiosk,blockDuringArchive:!0,comp:function(e){return Object(ac.jsx)(CC,Object(g.a)({},e))}};function CC(e){var t=Object(r.useState)(!1),n=Object(m.a)(t,2),a=n[0],i=n[1],o=Object(r.useState)(),s=Object(m.a)(o,2),c=s[0],u=s[1],l=Object(r.useState)(!1),h=Object(m.a)(l,2),d=h[0],p=h[1],f=function(e){var t=Object(r.useRef)(e&&Rl()(e)),n=Object(r.useCallback)((function(e){var n;return null===(n=t.current)||void 0===n||n.trash(),t.current=Rl()(e),t.current}),[t]);return Ps((function(){var e;return null===(e=t.current)||void 0===e?void 0:e.trash()})),{getTrashable:function(){return t.current},setTrashable:n}}(),b=Is(),v=Object(r.useCallback)((function(e,t){$c.freeConn(),ro("dc_"+e),u(t||Ts.prettyNetworkError(e)),p(!0),b.schedule((function(){return p(!1)}),2e3),Pi.Menu.Backward.play()}),[b]);return Ms((function(){kn.Debug.SkipIce?i(!0):f.setTrashable(cs.ping()).then((function(){return i(!0)})).catch((function(){return v(R.FetchIcePing)}))})),c?Object(ac.jsx)(Rp,{title:"Network Error",infos:[{label:c}],disableControllerInputs:d,hideLast:d,onExit:function(){return!d&&e.onExit()}}):a?Object(ac.jsx)(OC,Object(g.a)({onDisconnect:function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,t){return v(e,t)}))},e)):Object(ac.jsx)(Rp,Object(g.a)({title:wC,infos:[{label:Object(ac.jsx)($f,{label:"checking matchmaker status"})}]},e))}var AC,TC={screen:cv.MainMenu};function MC(e){var t=Object(r.useState)(TC),n=Object(m.a)(t,2),a=n[0],i=n[1];if(Ms((function(){li.LastSeenVersion.set(kn.PatchVersion)})),a.screen===cv.Matchmaking)return Object(ac.jsx)(Mv,{ranked:a.ranked,connection:a.connection,onExit:function(){return i(TC)}});var o=[MO,SC,XO,{label:yv.Title,comp:function(e){return Object(ac.jsx)(yv,Object(g.a)({},e))},jumpTo:yv.ShouldJumpTo},SO];return vn.isElectron&&o.push({label:"Quit Game",callback:function(){return kn.Electron.exit()}}),Object(ac.jsxs)(ac.Fragment,{children:[Object(ac.jsx)(Rp,{logoSrc:ni.Branding.Logo,options:o,enableSocial:!0,onExit:e.onExit,hideLast:!0}),Object(ac.jsx)(sv,{setMatch:function(e){return i({screen:cv.Matchmaking,connection:e.connection,ranked:e.ranked})}})]})}var PC,RC,IC,BC,DC=Object(b.a)(Xv)(AC||(AC=Object(f.a)(["\n  padding: 2em 8em;\n"]))),HC=function(e){var t=function(){Pi.Menu.Forward.play(),e.onExit&&e.onExit()};return Object(ac.jsxs)(yc,{src:gi.loadBackgroundImage(ni.Stages.GroceryStore.backgroundSrc).imageUrl,children:[Object(ac.jsx)(jc,{children:Object(ac.jsxs)(DC,{children:[Object(ac.jsx)("h1",{children:"April Fools!"}),Object(ac.jsx)("p",{children:'To celebrate the "holiday", Tough Love Arena will be a little different this week. We have made a lot of strange changes to every character in the game. Game modes that could be adversely affected (Ranked) or out-of-date (Combo Trials) have been temporarily disabled for the duration of the event.'}),Object(ac.jsx)("p",{children:"Some of these changes are subtle, and a few could be future balance updates, but most are just meant to be goofy. To avoid spoiling the surprise, all Frame Data, Modding, and other related menus have also been disabled."}),Object(ac.jsx)("p",{children:"This event will run until the April Fools tournament on Friday, April 7. After the tournament, the game will be restored to normal. For those who can't play this week and fear missing out, don't worry. The mod files for each character will be made available after the event is over."}),Object(ac.jsxs)("p",{children:["Have fun! ","<3"," Paul and Amy"]}),Object(ac.jsxs)("div",{children:[Object(ac.jsx)("br",{}),Object(ac.jsx)(ek,{onClick:function(){return t()},children:"OK"})]})]})}),Object(ac.jsx)(cc,{onControllerInput:function(e){return e===te.attack1&&t()},onPress:function(e){return"Backquote"===e&&t()}})]})},EC=b.a.span(PC||(PC=Object(f.a)(["\n  text-decoration: none;\n  margin-right: 0.2em;\n\n  ","\n"])),(function(e){return e.large?"\n    font-size: 2em;\n  ":"\n    font-size: 1.2em;\n  "})),_C=b.a.span(RC||(RC=Object(f.a)(["\n  font-size: 0.8em;\n  font-style: italic;\n"]))),FC=Object(b.a)(Xv)(IC||(IC=Object(f.a)(["\n  padding: 2em 8em;\n"]))),LC=b.a.div(BC||(BC=Object(f.a)(["\n  /* scrolling */\n  overflow-x: hidden;\n  overflow-y: auto;\n\n  width: 100%;\n  height: 40vh;\n\n  text-align: left;\n  color: white;\n  font-size: 0.8em;\n  border: 0.2vh solid var(--heart);\n  border-style: double;\n\n  & > div {\n    margin: 1em;\n  }\n"]))),GC=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).start=li.LastSeenVersion.get(),a.bodyRef=void 0,a.state={},a.renderVersion=function(e){var t="0"===e.v.split(".").pop();return Object(ac.jsxs)("div",{id:e.v,children:[Object(ac.jsxs)("h3",{children:[Object(ac.jsx)(EC,{large:t,children:e.v}),e.date&&Object(ac.jsxs)(_C,{children:[" ",e.date]})]}),a.renderNotes(e.notes)]},e.v)},a.renderNotes=function(e){return Object(ac.jsx)("ul",{children:e.map((function(e,t){return Object(ac.jsx)("li",{children:e},t)}))})},a.bodyRef=i.a.createRef(),a}return Object(h.a)(n,[{key:"componentDidMount",value:function(){var e=this;Fk.get(kn.Links.ChangelogYaml).then((function(t){return e.setState({data:t})})).catch((function(){e.props.swallowError?e.props.onExit():e.setState({dataError:"Error loading patch notes"})}))}},{key:"continue",value:function(){Pi.Menu.Forward.play(),this.props.onExit&&this.props.onExit()}},{key:"scrollUp",value:function(){var e;window.div=this.bodyRef.current,null===(e=this.bodyRef.current)||void 0===e||e.scrollBy(0,-80)}},{key:"scrollDown",value:function(){var e;null===(e=this.bodyRef.current)||void 0===e||e.scrollBy(0,80)}},{key:"handleInput",value:function(e){e===te.left&&this.scrollUp(),e===te.right&&this.scrollDown(),e===te.attack1&&this.continue()}},{key:"render",value:function(){var e=this,t=n.Title,a=this.state,r=a.data,i=a.dataError;if(i)return Object(ac.jsx)(Rp,{title:t,infos:[{label:i}],onExit:this.props.onExit});if(!r)return Object(ac.jsx)(Ip,{title:t,infos:[{label:"Loading..."}]});var o=Ts.getChangelogAfterPatch(r,this.start),s=o.length>0?o:[r.versions[0]];return Object(ac.jsxs)(yc,{src:gi.loadBackgroundImage(ni.Stages.Notebook.backgroundSrc).imageUrl,children:[Object(ac.jsx)(jc,{children:Object(ac.jsxs)(FC,{children:[Object(ac.jsx)($v,{}),Object(ac.jsxs)("p",{children:["We have made the following changes since you last played Tough Love Arena.",Object(ac.jsx)("br",{}),"You can read the full changelog at ",Object(ac.jsx)("a",{target:"_blank",rel:"noreferrer",href:kn.Links.ChangelogUrl,children:"toughlovearena.com?changelog"})]}),Object(ac.jsx)(LC,{ref:this.bodyRef,children:s.map(this.renderVersion)}),Object(ac.jsxs)("div",{children:[Object(ac.jsx)("br",{}),Object(ac.jsx)(ek,{onClick:function(){return e.continue()},children:"OK"})]})]})}),Object(ac.jsx)(cc,{onControllerInput:function(t){return e.handleInput(t)},onPress:function(t){return"Backquote"===t&&e.continue()}})]})}}]),n}(i.a.Component);GC.Title="Recent Patch Notes";var zC,WC,NC,UC,qC,VC,YC,JC,KC,QC,ZC=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"render",value:function(){var e={baseGameMeta:{isAttractMode:!0,isCpuVsCpu:!0,cpuDiff1:qt(H),cpuDiff2:qt(H)},title:n.Title,label1:"CPU",label2:"CPU",attractConfig:{gameConfig:this.props.attractConfig}};return Object(ac.jsx)(gv,Object(g.a)(Object(g.a)({},this.props),{},{settings:e}))}}],[{key:"genConfig",value:function(){var e=qt(ni.FighterDataOriginal),t=qt(ni.FighterDataOriginal.filter((function(t){return t.stats.code!==e.stats.code}))),n={matchId:nn(),firstTo:1,roundTime:60,stage:qt(ni.DefaultStages),fighter1:e,fighter2:t};return ni.fixGameConfig(n)}}]),n}(i.a.Component);ZC.Title="Attract Mode";var XC=b.a.div(zC||(zC=Object(f.a)(["\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background-color: var(--fadebg);\n"]))),$C=Object(b.a)(yc)(WC||(WC=Object(f.a)(["\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n\n  background-size: auto 100%;\n  background-color: black;\n"]))),eA=b.a.div(NC||(NC=Object(f.a)(["\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  padding-bottom: 33vh;\n  box-sizing: border-box;\n\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  flex-wrap: nowrap;\n  text-align: center;\n\n  color: var(--foreground);\n  cursor: pointer;\n"]))),tA=b.a.img(UC||(UC=Object(f.a)(["\n  width: auto;\n  height: 15vh;\n"]))),nA=b.a.div(qC||(qC=Object(f.a)(["\n  width: 100%;\n  height: 100%;\n  padding-top: 87vh;\n  box-sizing: border-box;\n\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-start;\n  align-items: center;\n  flex-wrap: nowrap;\n  text-align: center;\n\n  color: var(--foreground);\n  cursor: pointer;\n"]))),aA=Object(b.b)(VC||(VC=Object(f.a)(["\n  from {\n    color: white;\n    text-shadow: 0.2vh 0.2vh 0 black;\n  }\n  to {\n    color: black;\n    text-shadow: 0.2vh 0.2vh 0 var(--heart);\n  }\n"]))),rA=b.a.div(YC||(YC=Object(f.a)(["\n  font-size: 5vh;\n\n  animation: ",";\n  animation-direction: alternate;\n  animation-delay: 0s;\n  animation-duration: 1.5s;\n  animation-iteration-count: infinite;\n  animation-timing-function: ease-in-out;\n"])),aA),iA=b.a.div(JC||(JC=Object(f.a)(["\n  margin-top: 1vh;\n  font-size: 2.5vh;\n"]))),oA=b.a.div(KC||(KC=Object(f.a)(["\n  position: fixed;\n  top: 0%;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  padding: 5vh 8vh;\n  box-sizing: border-box;\n\n  display: flex;\n  flex-direction: row;\n  justify-content: flex-end;\n  align-items: flex-end;\n  flex-wrap: nowrap;\n  text-align: center;\n\n  background-color: black;\n"]))),sA=b.a.div(QC||(QC=Object(f.a)(["\n  height: 20vh;\n  width: 20vh;\n\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  flex-wrap: nowrap;\n\n  & > img {\n    height: 100%;\n    width: auto;\n  }\n"]))),cA=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={showWelcome:!1,showLoading:!1},e.attractTimeoutMs=1e3*(kn.Debug.ShortAttract?5:30),e.splashUrl=ni.Branding.Splash,e.spinnerUrl=ni.MenuArt.Spinner,e.replayId=kn.urlReplay,e.privateMatchId=kn.urlPrivateMatch,e.serverLobbyId=kn.urlServerLobby,e.debugSkip=kn.isAppStart&&vv.Any&&!e.privateMatchId&&!e.serverLobbyId&&!e.replayId,e.loadSplash=gi.loadStaticImage(e.splashUrl).loaded,e.loadSpinner=gi.loadStaticImage(e.spinnerUrl).loaded,e.loadPromise=Promise.all([e.loadSplash,e.loadSpinner]).then((function(){return Le(500)})).then((function(){return Promise.all([e.loadMenuAssets(),e.loadReplay(),e.loadToken(),ss.loaded])})).then((function(){})),e.userPressed=!1,e.mounted=!1,e.pauseSettings=new gp((function(){return{hideButton:!0}})),e}return Object(h.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.mounted=!0,this.pauseSettings.mount(),this.loadSplash.then((function(){return tb.trigger((function(){return e.setState({showWelcome:!0})}))})),n.visitedCount++,this.debugSkip?this.handleInput():(this.props.forceAttract||!0===li.AttractMode.get())&&this.loadAttract();var t=Ts.getEventModeDipSwitch();t&&li.updateVolume({mute:{announcer:t.muteAttractSFX,effect:t.muteAttractSFX,music:t.muteAttractMusic}})}},{key:"componentWillUnmount",value:function(){this.mounted=!1,this.pauseSettings.unmount(),li.updateVolume()}},{key:"getMinLoadMs",value:function(){return n.visitedCount>1?0:1e3}},{key:"loadAttract",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(){var t,n=this;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadPromise;case 2:return t=ZC.genConfig(),e.next=5,Promise.all([Le(this.attractTimeoutMs),ds.loadGame(t)]);case 5:if(!this.mounted||this.state.showLoading||this.state.attractConfig){e.next=8;break}return e.next=8,tb.trigger((function(){return n.setState({attractConfig:t})}));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"endAttract",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(){return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,uc(this,{attractConfig:void 0});case 2:return this.pauseSettings.mount(),this.props.onFinishAttract&&this.props.onFinishAttract(),e.next=6,this.loadAttract();case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadMenuAssets",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(){var t,n,a;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ds.loadMenu();case 3:(t=e.sent).retries>0&&ns.log({context:"AssetRetry",error:"".concat(t.retries," retries for ").concat(t.files," files"),message:"WelcomeLoading"}),e.next=15;break;case 7:return e.prev=7,e.t0=e.catch(0),n=e.t0,ns.log({context:"WelcomeMenu",error:n.toString()}),"There was an error loading the menus. This is usually caused by the local cache. Try hard refreshing your browser.",a={instance:n,message:"There was an error loading the menus. This is usually caused by the local cache. Try hard refreshing your browser."},e.next=15,uc(this,{loadError:a});case 15:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(){return e.apply(this,arguments)}}()},{key:"loadReplay",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(){var t,n;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.replayId){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,e.next=6,ns.replayGet(t);case 6:n=e.sent,so.addRemote(n),e.next=15;break;case 10:return e.prev=10,e.t0=e.catch(3),kn.setAppAsStarted(),e.next=15,uc(this,{replayError:!0});case 15:case"end":return e.stop()}}),e,this,[[3,10]])})));return function(){return e.apply(this,arguments)}}()},{key:"loadToken",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(){var t;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,gs.refresh();case 3:if(t=e.sent,!(t&&t.type===y.SelfRagequit)){e.next=8;break}return e.next=8,uc(this,{ragequit:t});case 8:e.next=12;break;case 10:e.prev=10,e.t0=e.catch(0);case 12:case"end":return e.stop()}}),e,this,[[0,10]])})));return function(){return e.apply(this,arguments)}}()},{key:"handleInput",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(){var t,n,a=this;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.userPressed){e.next=2;break}return e.abrupt("return");case 2:return this.userPressed=!0,Pi.Menu.Forward.play(),e.next=6,this.loadSpinner;case 6:if(!((t=this.getMinLoadMs())>0)){e.next=10;break}return e.next=10,tb.trigger((function(){return a.setState({attractConfig:void 0,showLoading:!0})}));case 10:return e.next=12,Promise.all([this.loadPromise,Le(t)]);case 12:if(!this.state.loadError){e.next=14;break}return e.abrupt("return");case 14:return n=[],this.props.firstRender&&(this.state.ragequit&&n.push("You disconnected from a ranked match. This has been treated as a loss."),this.state.replayError&&n.push("There was an error loading the replay.")),e.next=18,tb.trigger((function(){return a.props.onFinishLoading(n)}));case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"renderWelcome",value:function(e,t){return t.showWelcome?Object(ac.jsxs)($C,{src:this.splashUrl,children:[Object(ac.jsxs)(nA,{children:[Object(ac.jsx)(rA,{children:"press anything to play"}),Object(ac.jsx)(iA,{children:"M. Paul Weeks & Amy Xu \xa9 2023"}),!e.freshInstall&&Object(ac.jsx)(cu,{white:!0})]}),Object(ac.jsx)(Bl,{})]}):null}},{key:"renderLoading",value:function(e,t){return t.showLoading?Object(ac.jsxs)(oA,{children:[Object(ac.jsx)(sA,{children:Object(ac.jsx)("img",{src:this.spinnerUrl,alt:"spinner"})}),t.loadError&&Object(ac.jsxs)(Gm,{children:[Object(ac.jsx)("div",{style:{fontSize:"2em",textAlign:"center"},children:"Loading Error"}),Object(ac.jsx)("br",{}),Object(ac.jsx)("p",{children:t.loadError.message}),t.loadError.instance&&Object(ac.jsx)("p",{children:t.loadError.instance.toString()})]})]}):null}},{key:"renderAttract",value:function(e){var t=this;return Object(ac.jsxs)(ac.Fragment,{children:[Object(ac.jsx)(ZC,{attractConfig:e,onExit:function(){return t.endAttract()}}),Object(ac.jsxs)(eA,{onClick:function(){return t.handleInput()},children:[Object(ac.jsx)("div",{children:Object(ac.jsx)(tA,{src:ni.Branding.Logo})}),Object(ac.jsx)(rA,{children:"press anything to play"})]}),Object(ac.jsx)(cc,{takeFocus:!0,onPress:function(e){return t.handleInput()}})]})}},{key:"render",value:function(){var e=this,t=this.props,n=this.state;return n.attractConfig?this.renderAttract(n.attractConfig):Object(ac.jsxs)(XC,{onClick:function(){return e.handleInput()},children:[this.renderWelcome(t,n),this.renderLoading(t,n),Object(ac.jsx)(cc,{takeFocus:!0,onPress:function(t){return e.handleInput()}})]})}}]),n}(i.a.Component);cA.visitedCount=0;var uA,lA,hA,dA=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).freshInstall=!li.HasSeenIntroduction.get(),e.newPatch=Ts.isNewPatch(),e.debugSkip=vv.Any&&!kn.urlPrivateMatch&&!kn.urlServerLobby&&!kn.urlReplay,e.state={firstRender:!0,doneLoading:!1,messages:[],showEULA:!e.debugSkip&&!vn.isKiosk&&e.freshInstall,showIntroduction:kn.Debug.ShowIntro||!e.debugSkip&&!vn.isKiosk&&e.freshInstall,showPatchNotes:kn.Debug.ShowPatchNotes||!e.debugSkip&&!vn.isKiosk&&e.newPatch,showAprilFools:!e.debugSkip&&kn.isAprilFools},e}return Object(h.a)(n,[{key:"componentDidMount",value:function(){this.freshInstall||$h.play()}},{key:"finishLoading",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(t){return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,uc(this,{firstRender:!1,doneLoading:!0,messages:t});case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"finishEULA",value:function(){this.setState({showEULA:!1})}},{key:"finishIntroduction",value:function(){li.HasSeenIntroduction.set(!0),this.setState({showIntroduction:!1})}},{key:"onExit",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(){return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,uc(this,{doneLoading:!1});case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"renderInner",value:function(e){var t=this;if(e.doneLoading){var n=e.messages[0];return n?Object(ac.jsx)(Rp,{title:"Welcome",infos:[{label:n}],options:[{label:"OK",callback:function(){return t.setState({messages:e.messages.slice(1)})}}],onExit:function(){},hideLast:!0}):e.showEULA?Object(ac.jsx)(uy,{bgStage:ni.Stages.Notebook,onConfirm:function(){return t.finishEULA()},onExit:function(){return t.onExit()}}):e.showIntroduction?Object(ac.jsx)(ok,{onExit:function(){return t.finishIntroduction()}}):e.showAprilFools?Object(ac.jsx)(HC,{onExit:function(){return t.setState({showAprilFools:!1})}}):e.showPatchNotes?Object(ac.jsx)(GC,{swallowError:!0,onExit:function(){return t.setState({showPatchNotes:!1})}}):Object(ac.jsx)(MC,{onExit:function(){return t.onExit()}})}}},{key:"render",value:function(){var e=this;return this.state.doneLoading?this.renderInner(this.state):Object(ac.jsx)(cA,{firstRender:this.state.firstRender,freshInstall:this.freshInstall,forceAttract:!1,onFinishLoading:function(t){return e.finishLoading(t)}})}}]),n}(i.a.Component),pA=b.a.div(uA||(uA=Object(f.a)(["\n  position: absolute;\n  z-index: ",";\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100vh;\n  padding: 5vh;\n  box-sizing: border-box;\n\n  font-size: 4vh;\n\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  text-align: center;\n\n  background-color: black;\n"])),Ts.zIndex.LandscapeOverlay),fA=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={isLandscape:!0},e.checkLandscape=Object(u.a)(Object(c.a)().mark((function t(){var n;return Object(c.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=window.innerWidth>window.innerHeight,t.next=3,uc(Object(ch.a)(e),{isLandscape:n});case 3:n||setTimeout(e.checkLandscape,100);case 4:case"end":return t.stop()}}),t)}))),e}return Object(h.a)(n,[{key:"componentDidMount",value:function(){window.addEventListener("deviceorientation",this.checkLandscape),window.addEventListener("resize",this.checkLandscape),this.checkLandscape()}},{key:"render",value:function(){return this.state.isLandscape?"":Object(ac.jsxs)(pA,{children:[Object(ac.jsx)("div",{style:{color:"white"},children:"Tough Love Arena cannot be played vertically."}),Object(ac.jsx)("br",{}),Object(ac.jsx)("div",{style:{color:"salmon"},children:vn.isMobile?"Please rotate your device.":"Please resize your window."})]})}}]),n}(i.a.Component),bA=b.a.div(lA||(lA=Object(f.a)(["\n  z-index: ",";\n  position: fixed;\n  width: 100%;\n  height: 100%;\n  top: 0;\n  left: 0;\n\n  background-color: var(--fadebg);\n\n  transition-property: opacity;\n  transition-timing-function: ease-in-out;\n\n  ","\n"])),Ts.zIndex.FadeOverlay,(function(e){return"\n    opacity: ".concat(e.show?1:0,";\n    transition-duration: ").concat(e.duration,"s;\n  ")})),gA=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={renderLayer:!1,layerDuration:0,layerShow:!1},e}return Object(h.a)(n,[{key:"componentDidMount",value:function(){var e=this;tb.setFadeCallbacks({fadeOut:function(t){return e.fadeOut(t)},fadeIn:function(t){return e.fadeIn(t)}})}},{key:"componentWillUnmount",value:function(){tb.setFadeCallbacks({fadeOut:function(){var e=Object(u.a)(Object(c.a)().mark((function e(){return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),fadeIn:function(){var e=Object(u.a)(Object(c.a)().mark((function e(){return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()})}},{key:"fadeOut",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(t){return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,uc(this,{renderLayer:!0,layerDuration:t,layerShow:!1});case 2:return e.next=4,Le(100);case 4:return e.next=6,uc(this,{layerShow:!0});case 6:return e.next=8,Le(1e3*t);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fadeIn",value:function(){var e=Object(u.a)(Object(c.a)().mark((function e(t){return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,uc(this,{layerDuration:t,layerShow:!1});case 2:return e.next=4,Le(1e3*t);case 4:return e.next=6,uc(this,{renderLayer:!1});case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state;return e.renderLayer?Object(ac.jsx)(bA,{show:e.layerShow,duration:e.layerDuration}):null}}]),n}(i.a.Component),mA=function(){function e(t,n){Object(l.a)(this,e),this.timeoutMS=t,this.callback=n,this.timer=new Ve}return Object(h.a)(e,[{key:"schedule",value:function(){this.timer.schedule(this.callback,this.timeoutMS)}},{key:"clear",value:function(){this.timer.clear()}}]),e}(),vA=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).timer=new mA(e.props.timeoutMS,e.props.callback),e.state={isPaused:!1},e.pauseKey="IdleTimer-".concat(n.id++),e.onPause=function(){e.timer.clear(),e.setState({isPaused:!0}),wn("[IdleListener]","onPause")},e.onUnpause=function(){e.timer.schedule(),e.setState({isPaused:!1}),wn("[IdleListener]","onUnpause")},e}return Object(h.a)(n,[{key:"componentDidMount",value:function(){var e;wn("[IdleListener]","mounted",this.pauseKey),this.timer.schedule(),null===(e=kd.instance)||void 0===e||e.callbacks.set(this.pauseKey,{onOpen:this.onPause,onClose:this.onUnpause})}},{key:"componentWillUnmount",value:function(){var e;wn("[IdleListener]","unmounted",this.pauseKey),this.timer.clear(),null===(e=kd.instance)||void 0===e||e.callbacks.delete(this.pauseKey)}},{key:"onPress",value:function(){this.timer.schedule()}},{key:"render",value:function(){var e=this;return this.state.isPaused?null:Object(ac.jsx)(cc,{onPress:function(){return e.onPress()}})}}]),n}(i.a.Component);vA.id=0;var kA,jA,yA,xA=function(e){return e[e.Confirm=0]="Confirm",e[e.Menu=1]="Menu",e[e.Attract=2]="Attract",e[e.HumanVsHuman=3]="HumanVsHuman",e[e.HumanVsCpu=4]="HumanVsCpu",e}(xA||{}),OA=b.a.img(hA||(hA=Object(f.a)(["\n  position: absolute;\n  z-index: ",";\n\n  top: 20%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n\n  width: auto;\n  height: 35vh;\n"])),Ts.zIndex.Absolute),wA=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={view:xA.Attract},e.vsHuman={baseGameMeta:{isEventMode:!0,isLocalVersus:!0},title:"Human vs Human",label1:"Player 1",label2:"Player 2"},e.vsCPU={baseGameMeta:{isEventMode:!0,isHumanVsCpu:!0,cpuDiff2:D.Easy},title:"Human vs CPU",label1:"Player 1",label2:"CPU",forceCPU:Qu},e.options=[{label:e.vsHuman.title,callback:function(){return e.setState({view:xA.HumanVsHuman})}},{label:e.vsCPU.title,callback:function(){return e.setState({view:xA.HumanVsCpu})}}].map((function(e){return Object(g.a)(Object(g.a)({},e),{},{selectSound:Pi.Menu.Change})})),e}return Object(h.a)(n,[{key:"onReset",value:function(){var e=Ts.getEventModeDipSwitch();if(null!==e&&void 0!==e&&e.hoursBeforeReboot){var t=60*e.hoursBeforeReboot*60*1e3;if(st.instance().now()-st.appStart>t)return Ts.browserReload()}this.setState({view:xA.Attract})}},{key:"render",value:function(){var e=this,t=this.state.view,n=rh.VersusLocal,a=Ts.getEventModeDipSwitch();if(!a)throw new Error("cannot be in EventMenu is EventMode is off");var r=1e3*(kn.Debug.ShortEvent?5:a.secondsBeforeTimeout);if(t===xA.Menu){var i=!a.showFourButtonController,o=a.showFourButtonController?[{label:Object(ac.jsxs)(wp,{children:[Object(ac.jsxs)("div",{children:["Press \xa0",Object(ac.jsx)("img",{src:ni.Notation.left,alt:"Left"}),Object(ac.jsx)("img",{src:ni.Notation.right,alt:"Right"}),"\xa0 to Choose"]}),Object(ac.jsxs)("div",{children:["Press Light ( \xa0",Object(ac.jsx)("img",{src:ni.Notation.attack1,alt:"Light"}),"\xa0 ) to Continue"]})]})}]:void 0;return Object(ac.jsxs)(Rp,{logoSrc:i?ni.Branding.Logo:void 0,presence:n,infos:o,options:this.options,onExit:function(){return e.onReset()},hideLast:!0,children:[a.showFourButtonController&&Object(ac.jsx)(OA,{src:ni.MenuArt.SnesController}),Object(ac.jsx)(vA,{timeoutMS:r,callback:function(){return e.onReset()}})]})}if(t===xA.Attract)return Object(ac.jsx)(cA,{firstRender:!1,freshInstall:!1,forceAttract:!0,onFinishAttract:function(){return e.onReset()},onFinishLoading:function(){return e.setState({view:xA.Menu})}});var s=t===xA.HumanVsCpu&&this.vsCPU||this.vsHuman;return Object(ac.jsxs)(ac.Fragment,{children:[Object(ac.jsx)(gv,{settings:s,onExit:function(){return e.onReset()}}),Object(ac.jsx)(vA,{timeoutMS:r,callback:function(){return e.onReset()}})]})}}]),n}(i.a.Component);wA.Title="Event Mode";var SA=b.a.div(kA||(kA=Object(f.a)(["\n  ","\n"])),"\n  &, & *:not(input) {\n    /* need webkit for iphone browser */\n    -moz-user-select: none;\n    -webkit-user-select: none;\n    user-select: none;\n  }\n"),CA=b.a.canvas(jA||(jA=Object(f.a)(["\n  position: absolute;\n  top: 0px;\n  left: 0px;\n  width: 100%;\n  height: 100%;\n"]))),AA=b.a.div(yA||(yA=Object(f.a)(["\n  position: absolute;\n  top: 0px;\n  left: 0px;\n  width: 100%;\n  height: 100%;\n\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-start;\n  align-items: center;\n  flex-wrap: nowrap;\n"]))),TA=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).canvasRef=void 0,a.isEventMode=li.isEventMode.get(),a.canvasRef=i.a.createRef(),li.updateVolume(),function(){if("suspended"===Wn.state){var e=document.body,t=["touchstart","touchend","mousedown","keydown"];t.forEach((function(t){return e.addEventListener(t,n,!1)}))}function n(){Wn.resume().then(a)}function a(){t.forEach((function(t){return e.removeEventListener(t,n)}))}}(),mx(),th.startFetchLoop(),ss.init(),oh.set(rh.Welcome),Dl.addListener(),kn.Debug.ShowLogs&&ot.enable(),a}return Object(h.a)(n,[{key:"componentDidMount",value:function(){var e;null===(e=document.getElementById("error"))||void 0===e||e.classList.remove("hidden");var t=this.canvasRef.current;if(!t)throw new Error("canvas did not mount, game will not render");if(is.setCanvas(t),kn.isTest)throw new Error("isTest flag should always be off in web view. game will not run properly!");if(kn.Debug.ShowLogs){var n=kn.Debug.Flags.filter((function(e){return!e.code.includes("goto")})),a=n.filter((function(e){return!0===e.value})),r=n.filter((function(e){return!1===e.value})),i=n.filter((function(e){return!("boolean"===typeof e.value)})),o={enabled:a.map((function(e){return e.code})),disabled:r.map((function(e){return e.code})),other:i.reduce((function(e,t){return e[t.code]=t.value,e}),{})};wn("Debug Flags:",o)}if(kn.Debug.PeekData){var s=window;kn.Debug.LocalApi&&(s.SEED_ARMS=function(){var e=gs.loadFromStorage(),t={isHost:!0,queue:O.Private,outcome:j.Player1,myCode:"arms",oppCode:"beef"};null!==e&&void 0!==e&&e.isReal?ns.accountStatsRecord(e,t).catch(wn):ns.anonStatsRecord(t).catch(wn)},s.SEED_RANDOM=Object(u.a)(Object(c.a)().mark((function e(){var t,n;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Lt(ni.FighterDataOriginal.map((function(e){return e.stats.code}))),n=gs.loadFromStorage(),e.next=4,Ne(Ft(100),function(){var e=Object(u.a)(Object(c.a)().mark((function e(a){var r;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r={isHost:a%2===0,queue:qt(Object.values(O).filter((function(e){return e!==O.Ranked}))),outcome:qt(Object.values(j)),myCode:qt(t),oppCode:qt(t)},!(null!==n&&void 0!==n&&n.isReal&&Math.random()<.5)){e.next=6;break}return e.next=4,ns.accountStatsRecord(n,r).catch(wn);case 4:e.next=8;break;case 6:return e.next=8,ns.anonStatsRecord(r).catch(wn);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 4:wn("done seeding");case 5:case"end":return e.stop()}}),e)}))))}}},{key:"render",value:function(){return Object(ac.jsxs)(SA,{children:[Object(ac.jsx)(CA,{ref:this.canvasRef}),Object(ac.jsx)(kd,{}),Object(ac.jsx)(AA,{children:this.isEventMode?Object(ac.jsx)(wA,{}):Object(ac.jsx)(dA,{})}),Object(ac.jsx)(gA,{}),Object(ac.jsx)(fA,{})]})}}]),n}(i.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));!function(){if(kn.Debug.PeekData){var e=window;e.CONSTANTS=kn,e.LIBRARY=ni,e.REPLAYS=so,e.SCREEN=$n,e.SETTINGS=li,e.STORAGE=ci.usingLocalStorage(),e.CLOCK=st.instance(),e.PRESENCE=oh,e.TOKEN=gs,e.SPRITE=mi,e.simpleHash=Qt}}(),kn.Redirect.Debug?s.a.render(Object(ac.jsx)(pO,{}),document.getElementById("root")):kn.Redirect.Faq?s.a.render(Object(ac.jsx)(bO,{}),document.getElementById("root")):kn.Redirect.Roadmap?s.a.render(Object(ac.jsx)(jO,{}),document.getElementById("root")):kn.Redirect.Licenses?s.a.render(Object(ac.jsx)(mO,{}),document.getElementById("root")):vn.isDomainCanary?s.a.render(Object(ac.jsx)(ix,{}),document.getElementById("root")):kn.Redirect.Changelog?s.a.render(Object(ac.jsx)(Cx,{}),document.getElementById("root")):kn.isArchive&&kn.isAprilFools?s.a.render(Object(ac.jsx)(tx,{}),document.getElementById("root")):s.a.render(Object(ac.jsx)(TA,{}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[378,1,2]]]);